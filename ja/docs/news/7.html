
<!DOCTYPE html>


<html lang="ja" data-content_root="../" >

  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>お知らせ - 7系 &#8212; Groonga v14.0.0ドキュメント</title>
  
  
  
  <script data-cfasync="false">
    document.documentElement.dataset.mode = localStorage.getItem("mode") || "";
    document.documentElement.dataset.theme = localStorage.getItem("theme") || "light";
  </script>
  
  <!-- Loaded before other Sphinx assets -->
  <link href="../_static/styles/theme.css?digest=8d27b9dea8ad943066ae" rel="stylesheet" />
<link href="../_static/styles/bootstrap.css?digest=8d27b9dea8ad943066ae" rel="stylesheet" />
<link href="../_static/styles/pydata-sphinx-theme.css?digest=8d27b9dea8ad943066ae" rel="stylesheet" />

  
  <link href="../_static/vendor/fontawesome/6.5.1/css/all.min.css?digest=8d27b9dea8ad943066ae" rel="stylesheet" />
  <link rel="preload" as="font" type="font/woff2" crossorigin href="../_static/vendor/fontawesome/6.5.1/webfonts/fa-solid-900.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin href="../_static/vendor/fontawesome/6.5.1/webfonts/fa-brands-400.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin href="../_static/vendor/fontawesome/6.5.1/webfonts/fa-regular-400.woff2" />

    <link rel="stylesheet" type="text/css" href="../_static/pygments.css?v=a746c00c" />
  
  <!-- Pre-loaded scripts that we'll load fully later -->
  <link rel="preload" as="script" href="../_static/scripts/bootstrap.js?digest=8d27b9dea8ad943066ae" />
<link rel="preload" as="script" href="../_static/scripts/pydata-sphinx-theme.js?digest=8d27b9dea8ad943066ae" />
  <script src="../_static/vendor/fontawesome/6.5.1/js/all.min.js?digest=8d27b9dea8ad943066ae"></script>

    <script src="../_static/documentation_options.js?v=0f9b6888"></script>
    <script src="../_static/doctools.js?v=888ff710"></script>
    <script src="../_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="../_static/translations.js?v=4dbe4bdc"></script>
    <script async="async" src="https://www.googletagmanager.com/gtag/js?id=UA-7532323-1"></script>
    <script>
                window.dataLayer = window.dataLayer || [];
                function gtag(){ dataLayer.push(arguments); }
                gtag('js', new Date());
                gtag('config', 'UA-7532323-1');
            </script>
    <script>
                window.dataLayer = window.dataLayer || [];
                function gtag(){ dataLayer.push(arguments); }
                gtag('js', new Date());
                gtag('config', 'UA-7532323-1');
            </script>
    <script>DOCUMENTATION_OPTIONS.pagename = 'news/7';</script>
    <script>
        DOCUMENTATION_OPTIONS.theme_version = '0.15.2';
        DOCUMENTATION_OPTIONS.theme_switcher_json_url = 'https://groonga.org/docs/_static/switcher.json';
        DOCUMENTATION_OPTIONS.theme_switcher_version_match = 'japanese';
        DOCUMENTATION_OPTIONS.show_version_warning_banner = false;
        </script>
    <link rel="icon" href="../_static/favicon.ico"/>
    <link rel="index" title="索引" href="../genindex.html" />
    <link rel="search" title="検索" href="../search.html" />
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <meta name="docsearch:language" content="ja"/>
  </head>
  
  
  <body data-bs-spy="scroll" data-bs-target=".bd-toc-nav" data-offset="180" data-bs-root-margin="0px 0px -60%" data-default-mode="">

  
  
  <a id="pst-skip-link" class="skip-link" href="#main-content">Skip to main content</a>
  
  <div id="pst-scroll-pixel-helper"></div>
  
  <button type="button" class="btn rounded-pill" id="pst-back-to-top">
    <i class="fa-solid fa-arrow-up"></i>
    Back to top
  </button>

  
  <input type="checkbox"
          class="sidebar-toggle"
          name="__primary"
          id="__primary"/>
  <label class="overlay overlay-primary" for="__primary"></label>
  
  <input type="checkbox"
          class="sidebar-toggle"
          name="__secondary"
          id="__secondary"/>
  <label class="overlay overlay-secondary" for="__secondary"></label>
  
  <div class="search-button__wrapper">
    <div class="search-button__overlay"></div>
    <div class="search-button__search-container">
<form class="bd-search d-flex align-items-center"
      action="../search.html"
      method="get">
  <i class="fa-solid fa-magnifying-glass"></i>
  <input type="search"
         class="form-control"
         name="q"
         id="search-input"
         placeholder="Search the docs ..."
         aria-label="Search the docs ..."
         autocomplete="off"
         autocorrect="off"
         autocapitalize="off"
         spellcheck="false"/>
  <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd>K</kbd></span>
</form></div>
  </div>
  
    <header class="bd-header navbar navbar-expand-lg bd-navbar">
<div class="bd-header__inner bd-page-width">
  <label class="sidebar-toggle primary-toggle" for="__primary">
    <span class="fa-solid fa-bars"></span>
  </label>
  
  
  <div class="col-lg-3 navbar-header-items__start">
    
      <div class="navbar-item">

   

<a class="navbar-brand logo" href="https://groonga.org/ja/">
  
  
  
  
  
    
    
      
    
    
    <img src="../_static/groonga.png" class="logo__image only-light" alt="Groonga v14.0.0ドキュメント - Home"/>
    <script>document.write(`<img src="../_static/groonga.png" class="logo__image only-dark" alt="Groonga v14.0.0ドキュメント - Home"/>`);</script>
  
  
</a></div>
    
  </div>
  
  <div class="col-lg-9 navbar-header-items">
    
    
    <div class="navbar-header-items__end">
      
        <div class="navbar-item navbar-persistent--container">
          

 <script>
 document.write(`
   <button class="btn navbar-btn search-button-field search-button__button" title="検索" aria-label="検索" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="fa-solid fa-magnifying-glass"></i>
    <span class="search-button__default-text">検索</span>
    <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd class="kbd-shortcut__modifier">K</kbd></span>
   </button>
 `);
 </script>
        </div>
      
      
        <div class="navbar-item">

<script>
document.write(`
  <button class="btn btn-sm navbar-btn theme-switch-button" title="light/dark" aria-label="light/dark" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <span class="theme-switch nav-link" data-mode="light"><i class="fa-solid fa-sun fa-lg"></i></span>
    <span class="theme-switch nav-link" data-mode="dark"><i class="fa-solid fa-moon fa-lg"></i></span>
    <span class="theme-switch nav-link" data-mode="auto"><i class="fa-solid fa-circle-half-stroke fa-lg"></i></span>
  </button>
`);
</script></div>
      
        <div class="navbar-item"><ul class="navbar-icon-links navbar-nav"
    aria-label="Icon Links">
        <li class="nav-item">
          
          
          
          
          
          
          
          
          <a href="https://github.com/groonga/groonga" title="GitHub" class="nav-link" rel="noopener" target="_blank" data-bs-toggle="tooltip" data-bs-placement="bottom"><span><i class="fa-brands fa-square-github fa-lg" aria-hidden="true"></i></span>
            <span class="sr-only">GitHub</span></a>
        </li>
        <li class="nav-item">
          
          
          
          
          
          
          
          
          <a href="https://twitter.com/groonga" title="Twitter" class="nav-link" rel="noopener" target="_blank" data-bs-toggle="tooltip" data-bs-placement="bottom"><span><i class="fa-brands fa-square-twitter fa-lg" aria-hidden="true"></i></span>
            <span class="sr-only">Twitter</span></a>
        </li>
        <li class="nav-item">
          
          
          
          
          
          
          
          
          <a href="/ja/blog" title="Blog" class="nav-link" rel="noopener" target="_blank" data-bs-toggle="tooltip" data-bs-placement="bottom"><span><i class="fas fa-blog fa-lg" aria-hidden="true"></i></span>
            <span class="sr-only">Blog</span></a>
        </li>
</ul></div>
      
        <div class="navbar-item">
<script>
document.write(`
  <div class="version-switcher__container dropdown">
    <button id="pst-version-switcher-button-2"
      type="button"
      class="version-switcher__button btn btn-sm navbar-btn dropdown-toggle"
      data-bs-toggle="dropdown"
      aria-haspopup="listbox"
      aria-controls="pst-version-switcher-list-2"
      aria-label="Version switcher list"
    >
      Choose version  <!-- this text may get changed later by javascript -->
      <span class="caret"></span>
    </button>
    <div id="pst-version-switcher-list-2"
      class="version-switcher__menu dropdown-menu list-group-flush py-0"
      role="listbox" aria-labelledby="pst-version-switcher-button-2">
      <!-- dropdown will be populated by javascript on page load -->
    </div>
  </div>
`);
</script></div>
      
    </div>
    
  </div>
  
  
    <div class="navbar-persistent--mobile">

 <script>
 document.write(`
   <button class="btn navbar-btn search-button-field search-button__button" title="検索" aria-label="検索" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="fa-solid fa-magnifying-glass"></i>
    <span class="search-button__default-text">検索</span>
    <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd class="kbd-shortcut__modifier">K</kbd></span>
   </button>
 `);
 </script>
    </div>
  

  
    <label class="sidebar-toggle secondary-toggle" for="__secondary" tabindex="0">
      <span class="fa-solid fa-outdent"></span>
    </label>
  
</div>

    </header>
  

  <div class="bd-container">
    <div class="bd-container__inner bd-page-width">
      
      
      
      <div class="bd-sidebar-primary bd-sidebar">
        

  
  <div class="sidebar-header-items sidebar-primary__section">
    
    
    
    
      <div class="sidebar-header-items__end">
        
          <div class="navbar-item">

<script>
document.write(`
  <button class="btn btn-sm navbar-btn theme-switch-button" title="light/dark" aria-label="light/dark" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <span class="theme-switch nav-link" data-mode="light"><i class="fa-solid fa-sun fa-lg"></i></span>
    <span class="theme-switch nav-link" data-mode="dark"><i class="fa-solid fa-moon fa-lg"></i></span>
    <span class="theme-switch nav-link" data-mode="auto"><i class="fa-solid fa-circle-half-stroke fa-lg"></i></span>
  </button>
`);
</script></div>
        
          <div class="navbar-item"><ul class="navbar-icon-links navbar-nav"
    aria-label="Icon Links">
        <li class="nav-item">
          
          
          
          
          
          
          
          
          <a href="https://github.com/groonga/groonga" title="GitHub" class="nav-link" rel="noopener" target="_blank" data-bs-toggle="tooltip" data-bs-placement="bottom"><span><i class="fa-brands fa-square-github fa-lg" aria-hidden="true"></i></span>
            <span class="sr-only">GitHub</span></a>
        </li>
        <li class="nav-item">
          
          
          
          
          
          
          
          
          <a href="https://twitter.com/groonga" title="Twitter" class="nav-link" rel="noopener" target="_blank" data-bs-toggle="tooltip" data-bs-placement="bottom"><span><i class="fa-brands fa-square-twitter fa-lg" aria-hidden="true"></i></span>
            <span class="sr-only">Twitter</span></a>
        </li>
        <li class="nav-item">
          
          
          
          
          
          
          
          
          <a href="/ja/blog" title="Blog" class="nav-link" rel="noopener" target="_blank" data-bs-toggle="tooltip" data-bs-placement="bottom"><span><i class="fas fa-blog fa-lg" aria-hidden="true"></i></span>
            <span class="sr-only">Blog</span></a>
        </li>
</ul></div>
        
          <div class="navbar-item">
<script>
document.write(`
  <div class="version-switcher__container dropdown">
    <button id="pst-version-switcher-button-3"
      type="button"
      class="version-switcher__button btn btn-sm navbar-btn dropdown-toggle"
      data-bs-toggle="dropdown"
      aria-haspopup="listbox"
      aria-controls="pst-version-switcher-list-3"
      aria-label="Version switcher list"
    >
      Choose version  <!-- this text may get changed later by javascript -->
      <span class="caret"></span>
    </button>
    <div id="pst-version-switcher-list-3"
      class="version-switcher__menu dropdown-menu list-group-flush py-0"
      role="listbox" aria-labelledby="pst-version-switcher-button-3">
      <!-- dropdown will be populated by javascript on page load -->
    </div>
  </div>
`);
</script></div>
        
      </div>
    
  </div>
  
    <div class="sidebar-primary-items__start sidebar-primary__section">
        <div class="sidebar-primary-item">
<nav class="bd-docs-nav bd-links"
     aria-label="Section Navigation">
  <p class="bd-links__title" role="heading" aria-level="1">Section Navigation</p>
  <div class="bd-toc-item navbar-nav"></div>
</nav></div>
    </div>
  
  
  <div class="sidebar-primary-items__end sidebar-primary__section">
  </div>
  
  <div id="rtd-footer-container"></div>


      </div>
      
      <main id="main-content" class="bd-main">
        
        
          <div class="bd-content">
            <div class="bd-article-container">
              
              <div class="bd-header-article">
<div class="header-article-items header-article__inner">
  
    <div class="header-article-items__start">
      
        <div class="header-article-item">



<nav aria-label="Breadcrumb">
  <ul class="bd-breadcrumbs">
    
    <li class="breadcrumb-item breadcrumb-home">
      <a href="../index.html" class="nav-link" aria-label="Home">
        <i class="fa-solid fa-home"></i>
      </a>
    </li>
    <li class="breadcrumb-item active" aria-current="page">お知らせ - 7系</li>
  </ul>
</nav>
</div>
      
    </div>
  
  
</div>
</div>
              
              
              
                
<div id="searchbox"></div>
                <article class="bd-article">
                  
  <section id="news-7-series">
<h1>お知らせ - 7系<a class="headerlink" href="#news-7-series" title="Link to this heading">#</a></h1>
<section id="release-7-1-1-2018-01-29">
<span id="release-7-1-1"></span><h2>7.1.1リリース - 2018-01-29<a class="headerlink" href="#release-7-1-1-2018-01-29" title="Link to this heading">#</a></h2>
<section id="improvements">
<h3>改良<a class="headerlink" href="#improvements" title="Link to this heading">#</a></h3>
<ul>
<li><p>[<a class="reference internal" href="../install/ubuntu.html"><span class="doc">Ubuntu</span></a>] Ubuntu 17.04（Zesty Zapus）のサポートをやめました。2018年1月13日でサポートが切れた（EOLになった）ためです。</p></li>
<li><p>Quorum matchをサポートしました。スクリプト構文でもクエリー構文でもquorum matchを使うことができます。</p>
<p>TODO: quorum matchの構文をドキュメントへ追加、それらのドキュメントへのリンク生成</p>
</li>
<li><p>スクリプト構文で類似度のカスタマイズをサポートしました。スクリプト構文内で類似度のカスタマイズができます。</p>
<p>TODO: 類似度のカスタマイズの構文をドキュメントへ追加、それらのドキュメントへのリンク生成</p>
</li>
<li><p>[<a class="reference internal" href="../reference/executables/grndb.html"><span class="doc">grndb</span></a>][<a class="reference internal" href="../reference/executables/grndb.html#grndb-force-lock-clear"><span class="std std-ref">--force-lock-clear</span></a>] <code class="docutils literal notranslate"><span class="pre">--force-lock-clear</span></code> を追加しました。このオプションは、データベースやテーブル、データカラムのロックを強制的に解除します。データベースやテーブル、データカラムにロックが残っていても再度データベースを使えるようになります。</p>
<p>しかし、このオプションはとても危険です。通常は使うべきではありません。データベースが壊れている場合は、データベースは依然として破損しています。このオプションはロックを無視するだけです。</p>
</li>
<li><p>[<a class="reference internal" href="../reference/commands/load.html"><span class="doc">load</span></a>] サロゲートペアをエスケープ可能にしました。例えば、 <code class="docutils literal notranslate"><span class="pre">\uD83C\uDF7A</span></code> は <code class="docutils literal notranslate"><span class="pre">🍺</span></code> として処理されます。</p></li>
<li><p>[Windows] Windows上でスパースファイルを使用するように変更しました。ディスク容量を節約できます。パフォーマンス上のデメリットはありません。</p></li>
<li><p>[<a class="reference internal" href="../reference/indexing.html#online-index-construction"><span class="std std-ref">動的なインデックス構築方法</span></a>] インデックスカラム内のメモリーマップをいつ開放するかをコントロールする環境変数 <code class="docutils literal notranslate"><span class="pre">GRN_II_REDUCE_EXPIRE_THRESHOLD</span></code> を追加しました。デフォルトは <code class="docutils literal notranslate"><span class="pre">-1</span></code> です。 <code class="docutils literal notranslate"><span class="pre">-1</span></code> のときはインデックスカラムのサイズによって動的に開放するタイミングを決めます。インデックスカラムが小さければ頻繁に解放し、大きければ頻度を下げます。</p>
<p><code class="docutils literal notranslate"><span class="pre">0</span></code> を設定すると従来と同じ挙動になります。従来の挙動とは、Groongaは開放できそうなときはいつも開放しようとするという挙動です。</p>
</li>
<li><p>[<a class="reference internal" href="../reference/commands/logical_range_filter.html"><span class="doc">logical_range_filter</span></a>] [<a class="reference internal" href="../reference/commands/logical_range_filter.html#logical-range-filter-post-filter"><span class="std std-ref">post_filter</span></a>]フィルタータイミングを新規追加しました。 <code class="docutils literal notranslate"><span class="pre">filtered</span></code> ステージで生成されるカラムが生成された後に実行されます。</p></li>
</ul>
</section>
<section id="fixes">
<h3>修正<a class="headerlink" href="#fixes" title="Link to this heading">#</a></h3>
<ul class="simple">
<li><p>参照ベクタのインデックスを作成する際に使用するリソースを削減しました。[GitHub#806][村上さんが報告]</p></li>
<li><p>[<a class="reference internal" href="../reference/commands/table_create.html"><span class="doc">table_create</span></a>] <code class="docutils literal notranslate"><span class="pre">token_filters</span></code> が無効であってもテーブルが作成される不具合を修正しました。</p></li>
</ul>
</section>
<section id="thanks">
<h3>感謝<a class="headerlink" href="#thanks" title="Link to this heading">#</a></h3>
<ul class="simple">
<li><p>付超群さん</p></li>
<li><p>村上さん</p></li>
</ul>
</section>
</section>
<section id="release-7-1-0-2017-12-29">
<span id="release-7-1-0"></span><h2>7.1.0リリース - 2017-12-29<a class="headerlink" href="#release-7-1-0-2017-12-29" title="Link to this heading">#</a></h2>
<section id="id1">
<h3>改良<a class="headerlink" href="#id1" title="Link to this heading">#</a></h3>
<ul>
<li><p>[<a class="reference internal" href="../reference/commands/load.html"><span class="doc">load</span></a>] <code class="docutils literal notranslate"><span class="pre">load</span></code> コマンドのクエリーログのフォーマットを改良しました。<code class="docutils literal notranslate"><span class="pre">load</span></code> コマンドのクエリーログに以下の項目が追加されます。</p>
<blockquote>
<div><ul class="simple">
<li><p>ロードしたレコード数を表示します。</p></li>
<li><p>ロードがエラーになったレコードとカラムの数を表示します。</p></li>
<li><p>ロード後の総レコード数を表示します。</p></li>
</ul>
</div></blockquote>
</li>
<li><p>[<a class="reference internal" href="../reference/commands/logical_count.html"><span class="doc">logical_count</span></a>] <code class="docutils literal notranslate"><span class="pre">logical_count</span></code> コマンドのクエリーログのフォーマットを改良しました。<code class="docutils literal notranslate"><span class="pre">logical_count</span></code> コマンドのクエリーログに以下の項目が追加されます。</p>
<blockquote>
<div><ul class="simple">
<li><p>マッチしたレコード数を表示します。</p></li>
</ul>
</div></blockquote>
</li>
<li><p>[<a class="reference internal" href="../reference/commands/logical_select.html"><span class="doc">logical_select</span></a>] <code class="docutils literal notranslate"><span class="pre">logical_select</span></code> コマンドのクエリーログのフォーマットを改良しました。 <code class="docutils literal notranslate"><span class="pre">logical_select</span></code> コマンドのクエリーログに以下の項目が追加されます。</p>
<blockquote>
<div><ul class="simple">
<li><p>マッチしたレコード数を表示します。</p></li>
<li><p>ドリルダウンした数を表示します。</p></li>
<li><p>ラベルつきのドリルダウンをした数を表示します。</p></li>
<li><p>それぞれのシャードで検索にマッチした数を表示します。</p></li>
<li><p>検索対象のシャードの情報を&quot;[...]&quot;を使って表示します。</p></li>
</ul>
</div></blockquote>
</li>
<li><p>[<a class="reference internal" href="../reference/commands/delete.html"><span class="doc">delete</span></a>] <code class="docutils literal notranslate"><span class="pre">delete</span></code> コマンドのクエリーログのフォーマットを改良しました。 <code class="docutils literal notranslate"><span class="pre">delete</span></code> コマンドのクエリーログに以下の項目が追加されます。</p>
<blockquote>
<div><ul class="simple">
<li><p>削除したレコード数と削除に失敗したレコード数を表示します。</p></li>
<li><p>削除後に残ったレコード数を表示します。</p></li>
</ul>
</div></blockquote>
</li>
<li><p>[<a class="reference internal" href="../reference/executables/groonga-server-http.html"><span class="doc">Groonga HTTPサーバー</span></a>] <code class="docutils literal notranslate"><span class="pre">groonga</span> <span class="pre">-s</span></code> で実行したサーバーをC-c で確実に停止出来るようにしました。</p></li>
<li><p>Lisp表現( <code class="docutils literal notranslate"><span class="pre">#&lt;nan&gt;</span></code> 、 <code class="docutils literal notranslate"><span class="pre">#i1/0</span></code> 、 <code class="docutils literal notranslate"><span class="pre">#-i1/0</span></code> )の代わりに <code class="docutils literal notranslate"><span class="pre">Nan</span></code> と <code class="docutils literal notranslate"><span class="pre">Infinity</span></code> 、 <code class="docutils literal notranslate"><span class="pre">-Infinity</span></code> を使用するように改良しました。</p></li>
<li><p>ドリルダウンでベクター型のカラムをサポートしました。</p></li>
<li><p>部分的に正規表現を用いた検索から、キーワードを抽出出来るように改良しました。これにより、正規表現を用いた検索に <code class="docutils literal notranslate"><span class="pre">highlight_html</span></code> と <code class="docutils literal notranslate"><span class="pre">snippet_html</span></code> を使えるようになります。[takagi01さんに報告いただきました]</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">grn_bulk_*()</span></code> APIにおいて、 <code class="docutils literal notranslate"><span class="pre">realloc()</span></code> が呼ばれる回数を削減しました。</p>
<p>Windowsにおいて出力が大きいケースでパフォーマンスが向上します。例えば、出力が100MBを超える場合には、約100倍速くなります。</p>
<p><code class="docutils literal notranslate"><span class="pre">realloc()</span></code> はWindowsでは重い処理であるためです。</p>
</li>
<li><p><code class="docutils literal notranslate"><span class="pre">GRN_II_OVERLAP_TOKEN_SKIP_ENABLE</span></code> の値にyesが設定された時のみ <code class="docutils literal notranslate"><span class="pre">GRN_II_OVERLAP_TOKEN_SKIP_ENABLE</span></code> を有効にするようにしました。</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">GRN_NGRAM_TOKENIZER_REMOVE_BLANK_DISABLE</span></code> は非推奨になりました。代わりに <code class="docutils literal notranslate"><span class="pre">GRN_NGRAM_TOKENIZER_REMOVE_BLANK_ENABL=no</span></code> を使って下さい。</p></li>
<li><p>関数 <code class="docutils literal notranslate"><span class="pre">index_column_source_records</span></code> を新規に追加しました。インデックスカラムのソースを取得することができます。[村上さんがパッチを提供]</p></li>
<li><p>[<a class="reference internal" href="../reference/commands/select.html"><span class="doc">select</span></a>] offsetに負の値を設定出来るようにしました。</p></li>
<li><p>固定サイズのカラムの値を取得する際のパフォーマンスを向上しました。</p></li>
<li><p>[<a class="reference internal" href="../reference/executables/groonga.html"><span class="doc">groonga 実行ファイル</span></a>] groongaコマンドの引数に <code class="docutils literal notranslate"><span class="pre">--listen-backlog</span></code> オプションを追加しました。listenシステムコールのbacklogをカスタマイズできます。</p></li>
<li><p>[httpd] バンドルしているnginxのバージョンを1.13.8に更新しました。</p></li>
</ul>
</section>
<section id="id2">
<h3>修正<a class="headerlink" href="#id2" title="Link to this heading">#</a></h3>
<ul>
<li><p><code class="docutils literal notranslate"><span class="pre">highlight_full</span></code> 関数を使用するとメモリリークする問題を修正しました。</p></li>
<li><p>Mroongaで以下ような呼び出しを行った際にクラッシュする問題を修正しました。</p>
<blockquote>
<div><ol class="arabic simple">
<li><p><code class="docutils literal notranslate"><span class="pre">grn_expr_append_const(&quot;_id&quot;)</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">grn_expr_append_op(GRN_OP_GET_VALUE)</span></code></p></li>
</ol>
</div></blockquote>
</li>
</ul>
</section>
<section id="id3">
<h3>感謝<a class="headerlink" href="#id3" title="Link to this heading">#</a></h3>
<ul class="simple">
<li><p>takagi01</p></li>
<li><p>村上さん</p></li>
</ul>
</section>
</section>
<section id="release-7-0-9-2017-11-29">
<span id="release-7-0-9"></span><h2>7.0.9リリース - 2017-11-29<a class="headerlink" href="#release-7-0-9-2017-11-29" title="Link to this heading">#</a></h2>
<section id="id4">
<h3>改良<a class="headerlink" href="#id4" title="Link to this heading">#</a></h3>
<ul class="simple">
<li><p>Apache Arrowの新しいバージョンをサポートしました。このリリースでは、Apache Arrowサポートを有効にするには0.8.0以降が必要です。</p></li>
<li><p>[sharding] 動的カラムの新しいAPIを追加しました。</p>
<ul>
<li><p>Groonga::LabeledArguments</p></li>
</ul>
</li>
<li><p>[sharding] 便利メソッドである <code class="docutils literal notranslate"><span class="pre">Table#select_all</span></code> を追加しました。</p></li>
<li><p>[<a class="reference internal" href="../reference/commands/logical_range_filter.html"><span class="doc">logical_range_filter</span></a>] 動的カラムをサポートしました。 <code class="docutils literal notranslate"><span class="pre">initial</span></code> と <code class="docutils literal notranslate"><span class="pre">filtered</span></code> ステージのみをサポートしています。</p></li>
<li><p>[<a class="reference internal" href="../reference/commands/logical_range_filter.html"><span class="doc">logical_range_filter</span></a>] <code class="docutils literal notranslate"><span class="pre">cache</span></code> 引数と動的カラムに関するドキュメントを追加しました。</p></li>
<li><p>[<a class="reference internal" href="../reference/commands/logical_count.html"><span class="doc">logical_count</span></a>] 動的カラムをサポートしました。<code class="docutils literal notranslate"><span class="pre">initial</span></code> ステージのみサポートしています。</p></li>
<li><p>[<a class="reference internal" href="../reference/commands/logical_count.html"><span class="doc">logical_count</span></a>] 名前付き引数のドキュメントを追加しました。</p></li>
<li><p>[<a class="reference internal" href="../reference/commands/select.html"><span class="doc">select</span></a>] <code class="docutils literal notranslate"><span class="pre">--match_columns</span> <span class="pre">_key</span></code> をインデックスを使わない場合でもサポートしました。</p></li>
<li><p>[<a class="reference internal" href="../reference/functions/in_values.html"><span class="doc">in_values</span></a>] 126を超える引数を指定できるようにしました。 [GitHub#760] [GitHub#781] [groonga-dev,04449] [むらたさんが報告]</p></li>
<li><p>[httpd] バンドルしているnginxのバージョンを1.13.7に更新しました。</p></li>
</ul>
</section>
<section id="id5">
<h3>修正<a class="headerlink" href="#id5" title="Link to this heading">#</a></h3>
<ul class="simple">
<li><p>[httpd] 古いバージョンのGroongaがすでにインストールされている場合にそちらを参照してしまい、ビルドエラーになる問題を修正しました。　[GitHub#775] [myamanishi3さんが報告]</p></li>
<li><p>[<a class="reference internal" href="../reference/functions/in_values.html"><span class="doc">in_values</span></a>] <code class="docutils literal notranslate"><span class="pre">in_values</span></code> に多すぎる引数を指定するとクラッシュする不具合を修正しました。この不具合は126を超える引数をサポートする過程で見つかりました。 [GitHub#780]</p></li>
<li><p>[cmake] LZ4 と MessagePack をビルド時に正しく検出できるようにしました。 [Sergei Golubchikさんが報告]</p></li>
<li><p>[<a class="reference internal" href="../reference/indexing.html#offline-index-construction"><span class="std std-ref">静的なインデックス構築方法</span></a>] ベクターカラムの静的索引構築時に必要以上のリソースを使用する問題を修正しました。1つのベクターカラムの要素数が多く、大量のレコードがある場合はGroongaがクラッシュしていました。 [groonga-dev,04533][内山敏郎さんが報告]</p></li>
</ul>
</section>
<section id="id6">
<h3>感謝<a class="headerlink" href="#id6" title="Link to this heading">#</a></h3>
<ul class="simple">
<li><p>むらたさん</p></li>
<li><p>myamanishi3さん</p></li>
<li><p>Sergei Golubchikさん</p></li>
<li><p>内山敏郎さん</p></li>
</ul>
</section>
</section>
<section id="release-7-0-8-2017-10-29">
<span id="release-7-0-8"></span><h2>7.0.8リリース - 2017-10-29<a class="headerlink" href="#release-7-0-8-2017-10-29" title="Link to this heading">#</a></h2>
<section id="id7">
<h3>改良<a class="headerlink" href="#id7" title="Link to this heading">#</a></h3>
<ul class="simple">
<li><p>[windows] クラッシュした際にバックトレースを出せるようにしました。関数呼び出しだけでなく、ソースコードの該当行も可能な限り表示します。バックトレースのサポートにより、問題の素早い解決につながります。</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">QUERY_NO_SYNTAX_ERROR</span></code> を指定してあれば &quot;( )&quot; を <code class="docutils literal notranslate"><span class="pre">--query</span></code> に指定して実行できるようにしました。 以前のバージョンでは、エラーになっていました。 [GitHub#767]</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">QUERY_NO_SYNTAX_ERROR</span></code> を指定してあれば &quot;(+)&quot; を <code class="docutils literal notranslate"><span class="pre">--query</span></code> に指定して実行できるようにしました。 以前のバージョンでは、エラーになっていました。 [GitHub#767]</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">QUERY_NO_SYNTAX_ERROR</span></code> を指定してあれば <code class="docutils literal notranslate"><span class="pre">--query</span> <span class="pre">&quot;~y&quot;</span></code> (~ではじまる)クエリーを実行できるようにしました。 以前のバージョンでは、エラーになっていました。 [GitHub#767]</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">expired</span></code> のログレベルを <code class="docutils literal notranslate"><span class="pre">info</span></code> から <code class="docutils literal notranslate"><span class="pre">debug</span></code> に変更しました。 <code class="docutils literal notranslate"><span class="pre">2017-10-29</span> <span class="pre">14:05:34.123456|i|</span> <span class="pre">&lt;0000000012345678:0&gt;</span> <span class="pre">expired</span> <span class="pre">i=000000000B123456</span> <span class="pre">max=10</span> <span class="pre">(2/2)</span></code> このメッセージはインデックスをメモリーにマップした後で開放されたときに記録されます。つまり、メモリーの使用状況に関するデバッグには有用ですが、通常の運用においては有用ではありません。そのためログレベルを <code class="docutils literal notranslate"><span class="pre">debug</span></code> に変更しました。</p></li>
<li><p>Ubuntu 17.10 Artful Aardvarkをサポート。</p></li>
</ul>
</section>
<section id="id8">
<h3>修正<a class="headerlink" href="#id8" title="Link to this heading">#</a></h3>
<ul class="simple">
<li><p>[dat] データベースを拡張する際、意図せず大きなファイルが(ワーストケースで)作成されてしまうことのある不具合を修正しました。この不具合はインデックスカラムを頻繁に作成/削除を繰り返したときに発生する可能性があります。7.0.7ではこの不具合に関連して&quot;大量にキーを削除したケースで <code class="docutils literal notranslate"><span class="pre">table_create</span></code> に失敗する&quot;問題を修正しましたが、その修正が不十分なケースに対応しました。</p></li>
<li><p>[<a class="reference internal" href="../reference/commands/logical_select.html"><span class="doc">logical_select</span></a>] <code class="docutils literal notranslate"><span class="pre">offset</span></code> と <code class="docutils literal notranslate"><span class="pre">limit</span></code> が複数のシャードに対して適用されたとき、実際よりも少ないレコードが返される不具合を修正しました。</p></li>
</ul>
</section>
</section>
<section id="release-7-0-7-2017-09-29">
<span id="release-7-0-7"></span><h2>7.0.7リリース - 2017-09-29<a class="headerlink" href="#release-7-0-7-2017-09-29" title="Link to this heading">#</a></h2>
<section id="id9">
<h3>改良<a class="headerlink" href="#id9" title="Link to this heading">#</a></h3>
<ul>
<li><p><code class="docutils literal notranslate"><span class="pre">QUERY_NO_SYNTAX_ERROR</span></code> を <code class="docutils literal notranslate"><span class="pre">+</span></code> のみのクエリーに指定したときにも動作するようにしました。以前のバージョンではそのようなクエリーはエラーになっていました。</p></li>
<li><p>[httpd] バンドルしているnginxのバージョンを1.13.5に更新しました。</p></li>
<li><p>[<a class="reference internal" href="../reference/commands/dump.html"><span class="doc">dump</span></a>] 引数のデフォルト値を構文のセクションに追加しました。</p></li>
<li><p>[<a class="reference internal" href="../reference/command/command_version.html"><span class="doc">コマンドバージョン</span></a>] <code class="docutils literal notranslate"><span class="pre">--default-command-version</span> <span class="pre">3</span></code> に対応しました。</p></li>
<li><p>関数呼び出し時に検索結果をキャッシュできるようにしました。ほとんどの関数の呼び出し結果はキャッシュされます。例外は <code class="docutils literal notranslate"><span class="pre">now()</span></code> と <code class="docutils literal notranslate"><span class="pre">rand()</span></code> を使った場合です。標準でキャッシュするように振る舞いを変更したので、新たにAPIを追加しました。</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">grn_proc_set_is_stable()</span></code> を追加。</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">grn_proc_is_stable()</span></code> を追加。</p></li>
</ul>
<p>呼び出しごとに結果が異なる関数を新規に追加する場合、<code class="docutils literal notranslate"><span class="pre">grn_proc_is_stable(ctx,</span> <span class="pre">proc,</span> <span class="pre">GRN_FALSE)</span></code> を呼ばなければなりません。もし呼ばなかった場合には、検索結果がキャッシュされるので、期待と異なり誤った結果を返します。</p>
</li>
</ul>
</section>
<section id="id10">
<h3>修正<a class="headerlink" href="#id10" title="Link to this heading">#</a></h3>
<ul>
<li><p>[windows] <code class="docutils literal notranslate"><span class="pre">database_unmap</span></code> が実行される前のファイルハンドルのエラー処理を適切に行うようにしました。<code class="docutils literal notranslate"><span class="pre">database_unmap</span></code> 実行前にリクエストがキャンセルされた場合、排他制御部分が未初期化となる場合がありました。その場合、クラッシュしていました。</p></li>
<li><p>[<a class="reference internal" href="../reference/tokenizers.html"><span class="doc">トークナイザー</span></a>] トークナイザー名のドキュメントを修正しました。<code class="docutils literal notranslate"><span class="pre">TokenBigramIgnoreBlankSplitSymbolAlpha</span></code> や <code class="docutils literal notranslate"><span class="pre">TokenBigramIgnoreBlankSplitSymbolAlphaDigit</span></code> であるべきでした。</p></li>
<li><p>エラー時に空のファイルが残らないようにしました。</p>
<p>以前のバージョンでは、空のファイルがエラー時に残っていました。</p>
<p>再現するためのシナリオは以下です。:</p>
<blockquote>
<div><ol class="arabic simple">
<li><p><code class="docutils literal notranslate"><span class="pre">grn_fileinfo_open</span></code> によりファイルの作成に成功する</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">DO_MAP</span></code> によりファイルマッピングに失敗する</p></li>
</ol>
</div></blockquote>
<p>そのような場合、Groongaの管理下にないファイルのせいで「すでにファイルが存在します。」という別のエラーが発生します。そういったファイルは後始末の段階で削除すべきでした。</p>
</li>
<li><p>短時間に多数の更新を行っている状況で検索した場合にクラッシュすることがある不具合を修正しました。</p></li>
<li><p>[<a class="reference internal" href="../reference/commands/table_create.html"><span class="doc">table_create</span></a>] 大量に削除されたキーがDATテーブルに存在する場合、<code class="docutils literal notranslate"><span class="pre">table_create</span></code> の実行に失敗する不具合を修正しました。</p></li>
</ul>
</section>
</section>
<section id="release-7-0-6-2017-08-29">
<span id="release-7-0-6"></span><h2>7.0.6リリース - 2017-08-29<a class="headerlink" href="#release-7-0-6-2017-08-29" title="Link to this heading">#</a></h2>
<section id="id11">
<h3>改良<a class="headerlink" href="#id11" title="Link to this heading">#</a></h3>
<ul class="simple">
<li><p>前方一致検索を複数インデックスを指定してできるようになりました。 (例 <code class="docutils literal notranslate"><span class="pre">--query</span> <span class="pre">&quot;Foo*&quot;</span> <span class="pre">--match_columns</span> <span class="pre">&quot;TITLE_INDEX_COLUMN||BODY_INDEX_COLUMN&quot;</span></code>)</p></li>
<li><p>[<a class="reference internal" href="../reference/window_functions/window_count.html"><span class="doc">window_count</span></a>] <code class="docutils literal notranslate"><span class="pre">window_count</span></code> 関数を追加しました。検索した結果にカウントした値を追加するのに使います。検索結果をもとに分析したり、カウント結果をもとにフィルタしたりすると便利です。</p></li>
<li><p>以下のAPIを公開しました。</p>
<ul>
<li><p><code class="docutils literal notranslate"><span class="pre">grn_obj_get_disk_usage()</span></code> を追加。</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">GRN_EXPR_QUERY_NO_SYNTAX_ERROR</span></code> を追加。</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">grn_expr_syntax_expand_query_by_table()</span></code> を追加。</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">grn_table_find_reference_object()</span></code> を追加。</p></li>
</ul>
</li>
<li><p>[<a class="reference internal" href="../reference/commands/object_inspect.html"><span class="doc">object_inspect</span></a>] 指定したオブジェクトのディスク使用量を表示できるようになりました。</p></li>
<li><p>クエリーをパースする際にフォールバックする機能をサポートしました。 <code class="docutils literal notranslate"><span class="pre">QUERY_NO_SYNTAX_ERROR</span></code> フラグが <code class="docutils literal notranslate"><span class="pre">query_flags</span></code> に指定されていると有効になります。(標準では無効です) このフラグが設定されていると、シンタックスエラーが発生しなくなります。例えば、&quot;A +&quot; というクエリーは自動的にエスケープされて &quot;A +&quot; という扱いになります。この振る舞いはアプリケーションがユーザーの入力をそのまま検索語句として使い、シンタックスエラーやログに記録されないようにしたい場合に便利です。</p></li>
<li><p>クエリー内の語のスコアを調整できるようになりました。&quot;&gt;&quot;, &quot;&lt;&quot; と &quot;~&quot;がサポートされています。例えば &quot;&gt;Groonga&quot; は &quot;Groonga&quot; のスコアをインクリメントします。&quot;&lt;Groonga&quot; は &quot;Groonga&quot; のスコアをデクリメントします。&quot;~Groonga&quot; は検索結果についてマッチしたドキュメントのスコアをデクリメントします。&quot;~&quot; は検索結果そのものには影響しません。</p></li>
<li><p>テーブルを削除するときのパフォーマンスを改善しました。 <code class="docutils literal notranslate"><span class="pre">thread_limit=1</span></code> する必要はありません。参照されているテーブルが存在するかチェックする処理をオブジェクトを開かなくてもできるようにしました。その結果としてパフォーマンスが改善しました。</p></li>
<li><p>[httpd] バンドルしているnginxのバージョンを1.13.4に更新しました。</p></li>
</ul>
</section>
<section id="id12">
<h3>修正<a class="headerlink" href="#id12" title="Link to this heading">#</a></h3>
<ul class="simple">
<li><p>[<a class="reference internal" href="../reference/commands/dump.html"><span class="doc">dump</span></a>] 7番目の引数 ( <code class="docutils literal notranslate"><span class="pre">--sort_hash_table</span></code> )が名前無しだと無視される不具合を修正しました。</p></li>
<li><p>[<a class="reference internal" href="../reference/commands/schema.html"><span class="doc">schema</span></a>] コマンドラインパラメータの誤りを修正しました。<cite>source</cite> であるべきところが <cite>sources</cite> になっていました。[groonga-dev,04449] [むらたさんが報告]</p></li>
<li><p>[<a class="reference internal" href="../reference/commands/ruby_eval.html"><span class="doc">ruby_eval</span></a>] ruby_evalコマンドがシンタックスエラーのときにクラッシュする問題を修正しました。 [GitHub#751] [ryo-pinusさんがパッチ提供]</p></li>
</ul>
</section>
<section id="id13">
<h3>感謝<a class="headerlink" href="#id13" title="Link to this heading">#</a></h3>
<ul class="simple">
<li><p>murata satoshi</p></li>
<li><p>ryo-pinus</p></li>
</ul>
</section>
</section>
<section id="release-7-0-5-2017-07-29">
<span id="release-7-0-5"></span><h2>7.0.5リリース - 2017-07-29<a class="headerlink" href="#release-7-0-5-2017-07-29" title="Link to this heading">#</a></h2>
<section id="id14">
<h3>改良<a class="headerlink" href="#id14" title="Link to this heading">#</a></h3>
<ul class="simple">
<li><p>[httpd] バンドルしているnginxのバージョンを1.13.3に更新しました。セキュリティーに関する修正(CVE-2017-7529)を含んでいます。</p></li>
<li><p>[<a class="reference internal" href="../reference/commands/load.html"><span class="doc">load</span></a>] UInt64の最大値をロードできるようにしました。以前のバージョンでは意図せず0に変換されてしまっていました。</p></li>
<li><p>以下のAPIを公開しました。</p>
<ul>
<li><p><code class="docutils literal notranslate"><span class="pre">grn_window_get_size()</span></code> [GitHub#725] [村上さんがパッチ提供]</p></li>
</ul>
</li>
<li><p>[<a class="reference internal" href="../reference/functions/math_abs.html"><span class="doc">math_abs</span></a>] 絶対値を計算するための <code class="docutils literal notranslate"><span class="pre">math_abs()</span></code> 関数を追加しました。 [GitHub#721]</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">grn_default_logger_set_path()</span></code> と <code class="docutils literal notranslate"><span class="pre">grn_default_query_logger_set_path()</span></code> をスレッドセーフにしました。</p></li>
<li><p>[Windows] バンドルしているpcreを8.41に更新しました。</p></li>
<li><p>[<a class="reference internal" href="../reference/commands/normalize.html"><span class="doc">normalize</span></a>] エラー時に冗長な空文字列が出力されないようにしました。</p></li>
<li><p>[functions/time] 0除算が発生したときにエラーメッセージを出力するようにしました。 [GitHub#733] [村上さんがパッチ提供]</p></li>
<li><p>[windows] <code class="docutils literal notranslate"><span class="pre">ERROR_NO_SYSTEM_RESOURCES</span></code> エラーを <code class="docutils literal notranslate"><span class="pre">GRN_RESOURCE_TEMPORARILY_UNAVAILABLE</span></code> にマッピングするようにしました。以前は <code class="docutils literal notranslate"><span class="pre">rc=-1</span></code> をエラーコードとして返していました。ただし実際にどんな問題がおきたのかこれではわかりにくいので、 今回の修正では <code class="docutils literal notranslate"><span class="pre">rc=-12</span></code> を返すようにしています。</p></li>
<li><p>[functions/min][functions/max] ベクターカラムをサポートしました。これでカラムがスカラーなのかベクターなのか気にせず使えるようになりました。 [GitHub#735] [村上さんがパッチ提供]</p></li>
<li><p>[<a class="reference internal" href="../reference/commands/dump.html"><span class="doc">dump</span></a>] <code class="docutils literal notranslate"><span class="pre">--sort_hash_table</span></code> オプションをサポートしました。ハッシュテーブルの <code class="docutils literal notranslate"><span class="pre">_key</span></code> でのソートには <code class="docutils literal notranslate"><span class="pre">--sort_hash_table</span> <span class="pre">yes</span></code> を指定します。</p></li>
<li><p>[<a class="reference internal" href="../reference/functions/between.html"><span class="doc">between</span></a>] インデックスカラムを指定できるようになりました。 [GitHub#740] [村上さんがパッチ提供]</p></li>
<li><p>[load] Apache Arrow 0.5.0 以降をサポート。</p></li>
<li><p>[<a class="reference internal" href="../troubleshooting/how_to_analyze_error_message.html"><span class="doc">エラーメッセージの解析方法</span></a>] エラーメッセージの解析方法のドキュメントを追加しました。</p></li>
<li><p>[<a class="reference internal" href="../install/debian.html"><span class="doc">Debian GNU/Linux</span></a>] ソースからビルドするときに必要なパッケージのリストを更新しました。</p></li>
<li><p>[<a class="reference internal" href="../install/ubuntu.html"><span class="doc">Ubuntu</span></a>] Ubuntu 16.10（Yakkety Yak）のサポートをやめました。2017年7月20日でサポートが切れた（EOLになった）ためです。</p></li>
</ul>
</section>
<section id="id15">
<h3>修正<a class="headerlink" href="#id15" title="Link to this heading">#</a></h3>
<ul class="simple">
<li><p>テキスト型( <code class="docutils literal notranslate"><span class="pre">ShortText</span></code> など)のベクターカラムに対するインデックスを正しく構築できるようにしました。この修正でインデックス更新後に全文検索でマッチしない問題が解決します。 [GitHub#494]</p></li>
<li><p>[<a class="reference internal" href="../reference/commands/thread_limit.html"><span class="doc">thread_limit</span></a>] <code class="docutils literal notranslate"><span class="pre">thread_limit?max=1</span></code> というリクエストが同時にきたときにデッドロックが発生する問題を修正しました。</p></li>
<li><p>[<a class="reference internal" href="../reference/executables/groonga-httpd.html"><span class="doc">groonga-httpd</span></a>] デフォルトのPIDのパスと再起動時に想定しているPIDのパスがあっていない問題を修正しました。そのせいで groonga-httpd の再起動に失敗していました。 [GitHub#743] [sozakiさんが報告]</p></li>
</ul>
</section>
<section id="id16">
<h3>感謝<a class="headerlink" href="#id16" title="Link to this heading">#</a></h3>
<ul class="simple">
<li><p>村上さん</p></li>
</ul>
</section>
</section>
<section id="release-7-0-4-2017-06-29">
<span id="release-7-0-4"></span><h2>7.0.4リリース - 2017-06-29<a class="headerlink" href="#release-7-0-4-2017-06-29" title="Link to this heading">#</a></h2>
<section id="id17">
<h3>改良<a class="headerlink" href="#id17" title="Link to this heading">#</a></h3>
<ul class="simple">
<li><p>物理的なファイルの作成/削除のログを障害の切り分けのために記録するようにしました。 [GitHub#700,#701]</p></li>
<li><p>[<a class="reference internal" href="../reference/functions/in_records.html"><span class="doc">in_records</span></a>] 固定長カラムの検索パフォーマンスを改善しました。速度が50%程度改善する可能性があります。</p></li>
<li><p>[<a class="reference internal" href="../reference/executables/grndb.html"><span class="doc">grndb</span></a>] <code class="docutils literal notranslate"><span class="pre">--log-path</span></code> オプションを追加しました。</p></li>
<li><p>[<a class="reference internal" href="../reference/executables/grndb.html"><span class="doc">grndb</span></a>] <code class="docutils literal notranslate"><span class="pre">--log-level</span></code> オプションを追加しました。</p></li>
<li><p>以下のAPIを公開しました。</p>
<ul>
<li><p><code class="docutils literal notranslate"><span class="pre">grn_operator_to_exec_func()</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">grn_obj_is_corrupt()</span></code></p></li>
</ul>
</li>
<li><p>&quot;固定長カラム 演算子 定数&quot; というようなクエリのパフォーマンスを改善しました。対応している演算子は <code class="docutils literal notranslate"><span class="pre">==</span></code>, <code class="docutils literal notranslate"><span class="pre">!=</span></code>, <code class="docutils literal notranslate"><span class="pre">&lt;</span></code>, <code class="docutils literal notranslate"><span class="pre">&gt;</span></code>, <code class="docutils literal notranslate"><span class="pre">&lt;=</span></code> と <code class="docutils literal notranslate"><span class="pre">&gt;=</span></code> です。</p></li>
<li><p>&quot;カラム 演算子 値 &amp;&amp; カラム 演算子 値 &amp;&amp; ...&quot; というようなクエリのパフォーマンスを改善しました。</p></li>
<li><p>[<a class="reference internal" href="../reference/executables/grndb.html"><span class="doc">grndb</span></a>] <code class="docutils literal notranslate"><span class="pre">grndb</span> <span class="pre">check</span></code> で壊れたオブジェクトの検出をサポートしました。</p></li>
<li><p>[<a class="reference internal" href="../reference/commands/io_flush.html"><span class="doc">io_flush</span></a>] <code class="docutils literal notranslate"><span class="pre">--only_opened</span></code> オプションをサポートしました。開いているデータベースオブジェクトのみをフラッシュすることができます。</p></li>
<li><p>[<a class="reference internal" href="../reference/executables/grndb.html"><span class="doc">grndb</span></a>] 参照先のない &quot;inspect&quot; オブジェクトの検出と削除をサポートしました。この状態はコマンド名が <code class="docutils literal notranslate"><span class="pre">inspect</span></code> から <code class="docutils literal notranslate"><span class="pre">object_inspect</span></code> に変更されたことによって発生していました。</p></li>
</ul>
</section>
<section id="id18">
<h3>修正<a class="headerlink" href="#id18" title="Link to this heading">#</a></h3>
<ul class="simple">
<li><p>[rpm][centos] カスタマイズ版のビルドで意図しないマクロ展開が発生する問題を修正しました。この不具合はGroongaをSRPMからビルドする際にspecファイルの <code class="docutils literal notranslate"><span class="pre">additional_configure_options</span></code> パラメータを使ってリビルドするときのみ発生していました。</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">grn_table_setoperation()</span></code> のNULLチェックを追加しました。インデックスが壊れている際に、クラッシュする可能性がありました。 [GitHub#699]</p></li>
</ul>
</section>
<section id="id19">
<h3>感謝<a class="headerlink" href="#id19" title="Link to this heading">#</a></h3>
</section>
</section>
<section id="release-7-0-3-2017-05-29">
<span id="release-7-0-3"></span><h2>7.0.3リリース - 2017-05-29<a class="headerlink" href="#release-7-0-3-2017-05-29" title="Link to this heading">#</a></h2>
<section id="id20">
<h3>改良<a class="headerlink" href="#id20" title="Link to this heading">#</a></h3>
<ul class="simple">
<li><p>[<a class="reference internal" href="../reference/commands/select.html"><span class="doc">select</span></a>] <a class="reference internal" href="../tutorial/match_columns.html#full-text-search-with-specific-index-name"><span class="std std-ref">インデックス名を指定した全文検索</span></a> のドキュメントを追加しました。</p></li>
<li><p>[インデックス] どのレコードに対するポスティングリストが長すぎるのかわかるように、警告メッセージをログに出すようにしました。</p></li>
<li><p>[<a class="reference internal" href="../reference/commands/load.html"><span class="doc">load</span></a>][<a class="reference internal" href="../reference/commands/dump.html"><span class="doc">dump</span></a>] Apache Arrowをサポートするようにしました。 [GitHub#691]</p></li>
<li><p>[cmake] 静的ライブラリとしてビルドする際に、LZ4をリンクできるようにしました。 [Sergei Golubchikさんがパッチを提供]</p></li>
<li><p>[<a class="reference internal" href="../reference/commands/delete.html"><span class="doc">delete</span></a>] キャンセルできるようにしました。</p></li>
<li><p>[httpd] バンドルしているnginxのバージョンを1.13.0に更新しました。</p></li>
<li><p>以下のAPIを公開しました。</p>
<ul>
<li><p><code class="docutils literal notranslate"><span class="pre">grn_plugin_proc_get_caller()</span></code> を追加。</p></li>
</ul>
</li>
<li><p>インデックスカラムに関連した関数とセレクタを追加しました。</p>
<ul>
<li><p>追加されたセレクタ: <code class="docutils literal notranslate"><span class="pre">index_column_df_ratio_between()</span></code></p></li>
<li><p>追加された関数: <code class="docutils literal notranslate"><span class="pre">index_column_df_ratio()</span></code></p></li>
</ul>
</li>
</ul>
</section>
<section id="id21">
<h3>修正<a class="headerlink" href="#id21" title="Link to this heading">#</a></h3>
<ul class="simple">
<li><p>[<a class="reference internal" href="../reference/commands/delete.html"><span class="doc">delete</span></a>] エラーが適切にクリアされていない不具合を修正しました。そのせいで、後続の削除処理に影響し意図しない振る舞いをしていました。</p></li>
<li><p>[windows] ファイルを <code class="docutils literal notranslate"><span class="pre">O_CREAT</span></code> フラグ付きで開くときに、IOのバージョンが正しく検出されない不具合を修正しました。</p></li>
<li><p>[<a class="reference internal" href="../reference/functions/vector_slice.html"><span class="doc">vector_slice</span></a>] (型のサイズが)4バイトでないベクターカラムをsliceできない不具合を修正しました。 [GitHub#695] [村上さんがパッチ提供]</p></li>
<li><p>(型のサイズが)4バイトでないベクターカラムでベクターの要素をインデックスで指定するとシーケンシャルサーチでマッチしない不具合を修正しました。 [GitHub#696] [村上さんがパッチ提供]</p></li>
<li><p>[<a class="reference internal" href="../reference/commands/logical_select.html"><span class="doc">logical_select</span></a>] <code class="docutils literal notranslate"><span class="pre">min</span></code> に月の最終日を指定すると &quot;argument out of range&quot; が発生する不具合を修正しました。</p></li>
</ul>
</section>
<section id="id22">
<h3>感謝<a class="headerlink" href="#id22" title="Link to this heading">#</a></h3>
<ul class="simple">
<li><p>Sergei Golubchikさん</p></li>
<li><p>村上さん</p></li>
</ul>
</section>
</section>
<section id="release-7-0-2-2017-04-29">
<span id="release-7-0-2"></span><h2>7.0.2リリース - 2017-04-29<a class="headerlink" href="#release-7-0-2-2017-04-29" title="Link to this heading">#</a></h2>
<section id="id23">
<h3>改良<a class="headerlink" href="#id23" title="Link to this heading">#</a></h3>
<ul class="simple">
<li><p>[<a class="reference internal" href="../reference/commands/logical_select.html"><span class="doc">logical_select</span></a>] <a class="reference internal" href="../reference/commands/logical_select.html#logical-select-drilldowns-label-columns-name-window-sort-keys"><span class="std std-ref">drilldowns[${LABEL}].columns[${NAME}].window.sort_keys</span></a> と <a class="reference internal" href="../reference/commands/logical_select.html#logical-select-drilldowns-label-columns-name-window-group-keys"><span class="std std-ref">drilldowns[${LABEL}].columns[${NAME}].window.group_keys</span></a> で複数のキーを指定できるようになりました。</p></li>
<li><p>[Windows] バンドルしているLZ4を1.7.5に更新しました。</p></li>
<li><p>[cache] 永続化キャッシュをサポートしました。</p></li>
<li><p>[<a class="reference internal" href="../reference/commands/log_level.html"><span class="doc">log_level</span></a>] 英語のドキュメントを更新しました。</p></li>
<li><p>以下のAPIを公開しました。</p>
<ul>
<li><p><code class="docutils literal notranslate"><span class="pre">grn_set_default_cache_base_path()</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">grn_get_default_cache_base_path()</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">grn_persistent_cache_open()</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">grn_cache_default_open()</span></code></p></li>
</ul>
</li>
<li><p>[<a class="reference internal" href="../reference/executables/groonga.html#cmdoption-groonga-cache-base-path"><code class="xref std std-option docutils literal notranslate"><span class="pre">groonga</span> <span class="pre">--cache-base-path</span></code></a>] 永続キャッシュを使うための新しいオプションを追加しました。</p></li>
<li><p>[<a class="reference internal" href="../reference/executables/groonga-httpd.html"><span class="doc">groonga-httpd</span></a>] [<a class="reference internal" href="../reference/executables/groonga-httpd.html#groonga-httpd-groonga-cache-base-path"><span class="std std-ref">groonga_cache_base_path</span></a>] 永続キャッシュを使うための新しい設定を追加しました。</p></li>
<li><p>[Windows] バンドルしているmsgpackを2.1.1に更新しました。</p></li>
<li><p>[<a class="reference internal" href="../reference/commands/object_inspect.html"><span class="doc">object_inspect</span></a>] カラム情報を表示するだけでなく、インデックスカラムの統計情報も表示できるようにしました。</p></li>
<li><p>正規表現の「 <code class="docutils literal notranslate"><span class="pre">.*</span></code> 」というパターンでインデックスを使って検索できるようになりました。 この機能はデフォルトで有効です。環境変数に <code class="docutils literal notranslate"><span class="pre">GRN_SCAN_INFO_REGEXP_DOT_ASTERISK_ENABLE=no</span></code> を設定すると無効化できます。</p></li>
<li><p>[<a class="reference internal" href="../reference/functions/in_records.html"><span class="doc">in_records</span></a>] 既存のテーブルを条件のパターンを指定するのに使うことのできる関数を追加しました。</p></li>
<li><p>[<a class="reference internal" href="../install/ubuntu.html"><span class="doc">Ubuntu</span></a>] EOLのため、Ubuntu 12.04のサポートをやめました。</p></li>
</ul>
</section>
<section id="id24">
<h3>修正<a class="headerlink" href="#id24" title="Link to this heading">#</a></h3>
<ul class="simple">
<li><p>[<a class="reference internal" href="../reference/commands/logical_select.html"><span class="doc">logical_select</span></a>] 異なるキャッシュが使われてしまう不具合を修正しました。この問題は動的カラムを使っているときに発生していました。</p></li>
<li><p>[<a class="reference internal" href="../reference/commands/logical_select.html"><span class="doc">logical_select</span></a>] 動的カラムが作成されない不具合を修正しました。レコードにマッチしない場合に発生していました。</p></li>
<li><p>[<a class="reference internal" href="../reference/commands/reindex.html"><span class="doc">reindex</span></a>] reindexコマンドの実行によりデータが失われてしまう不具合を修正しました。</p></li>
<li><p>[httpd] 別のユーザーでワーカーを動かしている時、 <a class="reference internal" href="../reference/commands/quit.html"><span class="doc">quit</span></a> と <a class="reference internal" href="../reference/commands/shutdown.html"><span class="doc">shutdown</span></a> のレスポンスが壊れている問題を修正しました。 [GitHub ranguba/groonga-client#12]</p></li>
</ul>
</section>
</section>
<section id="release-7-0-1-2017-03-29">
<span id="release-7-0-1"></span><h2>7.0.1リリース - 2017-03-29<a class="headerlink" href="#release-7-0-1-2017-03-29" title="Link to this heading">#</a></h2>
<section id="id25">
<h3>改良<a class="headerlink" href="#id25" title="Link to this heading">#</a></h3>
<ul class="simple">
<li><p>以下のAPIを公開しました。</p>
<ul>
<li><p>grn_ii_cursor_next_pos()</p></li>
<li><p>grn_table_apply_expr()</p></li>
<li><p>grn_obj_is_data_column()</p></li>
<li><p>grn_obj_is_expr()</p></li>
<li><p>grn_obj_is_scalar_column()</p></li>
</ul>
</li>
<li><p>[<a class="reference internal" href="../reference/commands/column_copy.html"><span class="doc">column_copy</span></a>] 参照型のベクタのダンプをサポートしました。</p></li>
<li><p>[<a class="reference internal" href="../reference/commands/load.html"><span class="doc">load</span></a>] <code class="docutils literal notranslate"><span class="pre">array&lt;object&gt;</span></code> スタイルの重み付きベクターカラムのloadをサポートしました。 <code class="docutils literal notranslate"><span class="pre">array&lt;object&gt;</span></code> の例: <code class="docutils literal notranslate"><span class="pre">[{&quot;key1&quot;:</span> <span class="pre">weight1},</span> <span class="pre">{&quot;key2&quot;:</span> <span class="pre">weight2}]</span></code></p></li>
<li><p>インデックスを使った <code class="docutils literal notranslate"><span class="pre">!(XXX</span> <span class="pre">OPERATOR</span> <span class="pre">VALUE)</span></code> の検索をサポートしました。演算子として <code class="docutils literal notranslate"><span class="pre">&gt;</span></code> だけでなく、 <code class="docutils literal notranslate"><span class="pre">&gt;=</span></code>、 <code class="docutils literal notranslate"><span class="pre">&lt;</span></code>、 <code class="docutils literal notranslate"><span class="pre">&lt;=</span></code>、 <code class="docutils literal notranslate"><span class="pre">==</span></code> や <code class="docutils literal notranslate"><span class="pre">!=</span></code> も使えます。</p></li>
<li><p>インデックスを使って <code class="docutils literal notranslate"><span class="pre">!(column</span> <span class="pre">==</span> <span class="pre">CONSTANT)</span></code> を検索できるようになりました。例えば <code class="docutils literal notranslate"><span class="pre">!(column</span> <span class="pre">==</span> <span class="pre">29)</span></code> などです。</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">!</span></code> の最適化を以下のパターンでサポートしました。</p>
<ul>
<li><p><code class="docutils literal notranslate"><span class="pre">!(column</span> <span class="pre">&#64;</span> <span class="pre">&quot;X&quot;)</span> <span class="pre">&amp;&amp;</span> <span class="pre">(column</span> <span class="pre">&#64;</span> <span class="pre">&quot;Y&quot;)</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">(column</span> <span class="pre">&#64;</span> <span class="pre">&quot;Y&quot;)</span> <span class="pre">&amp;&amp;</span> <span class="pre">!(column</span> <span class="pre">&#64;</span> <span class="pre">&quot;X&quot;)</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">(column</span> <span class="pre">&#64;</span> <span class="pre">&quot;Y&quot;)</span> <span class="pre">&amp;!</span> <span class="pre">!(column</span> <span class="pre">&#64;</span> <span class="pre">&quot;X&quot;)</span></code></p></li>
</ul>
</li>
<li><p><code class="docutils literal notranslate"><span class="pre">XXX</span> <span class="pre">||</span> <span class="pre">!(column</span> <span class="pre">&#64;</span> <span class="pre">&quot;xxx&quot;)</span></code> をインデックスを使って検索できるようになりました。</p></li>
<li><p>[<a class="reference internal" href="../reference/commands/dump.html"><span class="doc">dump</span></a>]  <code class="docutils literal notranslate"><span class="pre">'{&quot;x&quot;:</span> <span class="pre">1,</span> <span class="pre">&quot;y&quot;:</span> <span class="pre">2}'</span></code> というスタイルを参照されていない重み付きベクターカラムで使うようにしました。この変更は古いGroongaには影響しません。もともとサポートされているからです。</p></li>
<li><p>[実験的] <code class="docutils literal notranslate"><span class="pre">GRN_ORDER_BY_ESTIMATED_SIZE_ENABLE</span></code> 環境変数をサポートしました。この変数はクエリの最適化を予想されるヒット件数に応じて行うかどうかを切り替えるのに使用します。この機能はデフォルトでは無効です。有効にするには <code class="docutils literal notranslate"><span class="pre">GRN_ORDER_BY_ESTIMATED_SIZE_ENABLE=yes</span></code> を指定します。</p></li>
<li><p>[<a class="reference internal" href="../reference/commands/select.html"><span class="doc">select</span></a>] <code class="docutils literal notranslate"><span class="pre">columns</span></code> や <code class="docutils literal notranslate"><span class="pre">drilldown</span></code> の評価結果をクエリログに追加するようにしました。</p></li>
<li><p>[<a class="reference internal" href="../reference/commands/select.html"><span class="doc">select</span></a>] <code class="docutils literal notranslate"><span class="pre">drilldown</span></code> のクエリログのフォーマットを変更しました。これは非互換な変更ですが、クエリログを変換するようなプログラムを独自に開発しているユーザー以外には影響ありません。</p></li>
<li><p>[<a class="reference internal" href="../reference/commands/table_remove.html"><span class="doc">table_remove</span></a>] 一時的なメモリ使用量を削減しました。スレッドの最大数が0のときに有効になります。</p></li>
<li><p>[<a class="reference internal" href="../reference/commands/select.html"><span class="doc">select</span></a>] <code class="docutils literal notranslate"><span class="pre">columns[LABEL](N)</span></code> がクエリログのフォーマットとして使われます。以前は <code class="docutils literal notranslate"><span class="pre">columns(N)[LABEL]</span></code> でした。</p></li>
<li><p>[<a class="reference internal" href="../tutorial/query_expansion.html"><span class="doc">クエリ拡張</span></a>] ベクターカラムを使った推奨例に更新しました。[ぐるなびさんが報告]</p></li>
<li><p>ロック中にリクエストがキャンセルされたことを検出できるようにしました。これは <code class="docutils literal notranslate"><span class="pre">request_cancel</span></code> がロック中に意図せず無視されないようにします。</p></li>
<li><p>[<a class="reference internal" href="../reference/commands/logical_select.html"><span class="doc">logical_select</span></a>]  <code class="docutils literal notranslate"><span class="pre">initial</span></code> および <code class="docutils literal notranslate"><span class="pre">filtered</span></code> 動的カラムをサポートしました。使用例は <code class="docutils literal notranslate"><span class="pre">--columns[LABEL].stage</span> <span class="pre">initial</span></code> や <code class="docutils literal notranslate"><span class="pre">--columns[LABEL].stage</span> <span class="pre">filtered</span></code> です。</p></li>
<li><p>[<a class="reference internal" href="../reference/commands/logical_select.html"><span class="doc">logical_select</span></a>] <code class="docutils literal notranslate"><span class="pre">match_columns</span></code> や <code class="docutils literal notranslate"><span class="pre">query</span></code> 、 <code class="docutils literal notranslate"><span class="pre">drilldown_filter</span></code> オプションをサポートしました。</p></li>
<li><p>[<a class="reference internal" href="../reference/functions/highlight_html.html"><span class="doc">highlight_html</span></a>] 類似文書検索をサポートしました。</p></li>
<li><p>[<a class="reference internal" href="../reference/commands/logical_select.html"><span class="doc">logical_select</span></a>]  <code class="docutils literal notranslate"><span class="pre">initial</span></code> および <code class="docutils literal notranslate"><span class="pre">filtered</span></code> 動的カラムをサポートしました。使用例は <code class="docutils literal notranslate"><span class="pre">--columns[LABEL].stage</span> <span class="pre">initial</span></code> や <code class="docutils literal notranslate"><span class="pre">--columns[LABEL].stage</span> <span class="pre">filtered</span></code> です。</p></li>
<li><p>[<a class="reference internal" href="../reference/commands/logical_select.html"><span class="doc">logical_select</span></a>] 動的カラムでウィンドウ関数をサポートしました。</p></li>
<li><p>[<a class="reference internal" href="../reference/commands/select.html"><span class="doc">select</span></a>] 動的カラムに関するドキュメントを追加しました。</p></li>
<li><p>[<a class="reference internal" href="../reference/window_function.html"><span class="doc">ウィンドウ関数</span></a>] ウィンドウ関数のセクションをドキュメントに追加しました。</p></li>
<li><p>[<a class="reference internal" href="../install/centos.html"><span class="doc">CentOS</span></a>] EOLのため、CentOS 5のサポートをやめました。</p></li>
<li><p>[httpd] バンドルしているnginxのバージョンを1.11.12に更新しました。</p></li>
<li><p>ANDでのマッチ最適化を環境変数で無効化できるようにしました。この機能は <code class="docutils literal notranslate"><span class="pre">GRN_TABLE_SELECT_AND_MIN_SKIP_ENABLE=no</span></code> を設定することで無効化できます。デフォルトでは有効になっています。</p></li>
<li><p>[<a class="reference internal" href="../reference/functions/vector_new.html"><span class="doc">vector_new</span></a>] 新規ベクターを作成するための関数を追加しました。</p></li>
<li><p>[<a class="reference internal" href="../reference/commands/select.html"><span class="doc">select</span></a>] <code class="docutils literal notranslate"><span class="pre">drilldown_filter</span></code> のドキュメントを追加しました。</p></li>
</ul>
</section>
<section id="id26">
<h3>修正<a class="headerlink" href="#id26" title="Link to this heading">#</a></h3>
<ul class="simple">
<li><p>[<a class="reference internal" href="../reference/commands/lock_clear.html"><span class="doc">lock_clear</span></a>] テンポラリデータベースに対して実行するとクラッシュする不具合を修正しました。</p></li>
<li><p>自然言語に対する動的インデックス更新でインデックスサイズが肥大化する問題を修正しました。Groonga 6.1.4から発生していました。</p></li>
<li><p>[<a class="reference internal" href="../reference/commands/select.html"><span class="doc">select</span></a>] &quot;A &amp;&amp; B.C &#64; X&quot; というクエリでマッチすべきレコードを返さないことがある不具合を修正しました。</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">grn_io_flush()</span></code> と <code class="docutils literal notranslate"><span class="pre">grn_io_expire()</span></code> がコンフリクトする問題を修正しました。この修正がないと、 <code class="docutils literal notranslate"><span class="pre">io_flush</span></code> と <code class="docutils literal notranslate"><span class="pre">load</span></code> が同時に特定のタイミングで実行されるとクラッシュする不具合がありました。</p></li>
<li><p>[<a class="reference internal" href="../reference/commands/logical_table_remove.html"><span class="doc">logical_table_remove</span></a>] 最大スレッド数が1のときにクラッシュする不具合を修正しました。</p></li>
</ul>
</section>
<section id="id27">
<h3>感謝<a class="headerlink" href="#id27" title="Link to this heading">#</a></h3>
<ul class="simple">
<li><p>株式会社ぐるなびさん</p></li>
</ul>
</section>
</section>
<section id="release-7-0-0-2017-02-09">
<span id="release-7-0-0"></span><h2>7.0.0リリース - 2017-02-09<a class="headerlink" href="#release-7-0-0-2017-02-09" title="Link to this heading">#</a></h2>
<section id="id28">
<h3>改良<a class="headerlink" href="#id28" title="Link to this heading">#</a></h3>
<ul class="simple">
<li><p>[<a class="reference internal" href="../reference/functions/in_values.html"><span class="doc">in_values</span></a>] 参照型ベクターカラムのシーケンシャルサーチに対応しました。 [GitHub#629] [村上さんがパッチ提供]</p></li>
<li><p>[<a class="reference internal" href="../reference/commands/select.html"><span class="doc">select</span></a>] 誤った <code class="docutils literal notranslate"><span class="pre">drilldown[LABEL].sort_keys</span></code> が指定されたとき、無視するのではなく、エラーを報告するようにしました。</p></li>
<li><p>[<a class="reference internal" href="../reference/commands/select.html"><span class="doc">select</span></a>] DBのメタデータを不必要に更新しないようにしました。 <code class="docutils literal notranslate"><span class="pre">select</span></code> コマンドを使っているだけなのにDBにロックがかかったままになってしまうのを防ぎます。</p></li>
<li><p>[<a class="reference internal" href="../reference/commands/lock_clear.html"><span class="doc">lock_clear</span></a>] <code class="docutils literal notranslate"><span class="pre">lock_clear</span></code> でDBのメタデータに対するロックも削除できるようにしました。</p></li>
<li><p>[<a class="reference internal" href="../install/centos.html"><span class="doc">CentOS</span></a>] GroongaをAmazon LinuxでもインストールできるようにEPELをデフォルトで有効にするようにしました。</p></li>
<li><p>[<a class="reference internal" href="../reference/functions/query.html"><span class="doc">query</span></a>] <code class="docutils literal notranslate"><span class="pre">default_mode</span></code> オプションで &quot;&#64;X&quot; スタイルのエイリアスが使えるようになりました。</p></li>
<li><p>[<a class="reference internal" href="../reference/functions/query.html"><span class="doc">query</span></a>] 動作モードのリストに関するドキュメントを更新しました。動作モードの既定値は <code class="docutils literal notranslate"><span class="pre">MATCH</span></code> (&quot;&#64;&quot;) で全文検索を実行します。</p></li>
<li><p>[rpm][centos] CentOS 7で groonga-token-filter-stem パッケージを提供するようにしました。 ステミングに対応するための <code class="docutils literal notranslate"><span class="pre">TokenFilterStem</span></code> トークンフィルターを提供します。　[GitHub#633] [Tim Bellefleurさんが報告]</p></li>
<li><p>[<a class="reference internal" href="../reference/window_functions/window_record_number.html"><span class="doc">window_record_number</span></a>] <code class="docutils literal notranslate"><span class="pre">record_number</span></code> が非推奨になりました。代わりに <code class="docutils literal notranslate"><span class="pre">window_record_number</span></code> を使ってください。 <code class="docutils literal notranslate"><span class="pre">record_number</span></code> は互換性のためだけに残っています。</p></li>
<li><p>[<a class="reference internal" href="../reference/window_functions/window_sum.html"><span class="doc">window_sum</span></a>] <code class="docutils literal notranslate"><span class="pre">window_sum</span></code> ウィンドウ関数を追加しました。PostgreSQLのsum()と同様のウィンドウ関数を提供します。</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">TABLE_DAT_KEY</span></code> テーブルをインメモリで使ったときに静的インデックス構築をできるようにしました。 [GitHub#623] [村上さんが報告]</p></li>
<li><p>バンドルしている鬼雲を6.1.1へと更新しました。</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">columns[LABEL].window.group_keys</span></code> をサポートしました。ウィンドウ関数をグループごとに提供することができます。</p></li>
<li><p>[<a class="reference internal" href="../reference/commands/load.html"><span class="doc">load</span></a>] 誤ったキーが指定されていたときにエラーを報告するようにしました。キーの型が異なっている場合でも気付けるようになります。</p></li>
<li><p>[<a class="reference internal" href="../reference/commands/load.html"><span class="doc">load</span></a>] <code class="docutils literal notranslate"><span class="pre">--output_errors</span> <span class="pre">yes</span></code> オプションをサポートしました。&quot;yes&quot;を指定すると、どのレコードのloadに失敗したのかエラーを取得できるようになります。この機能を使う場合には、コマンドバージョン3を指定します。</p></li>
<li><p>[<a class="reference internal" href="../reference/commands/load.html"><span class="doc">load</span></a>] キーのキャストに失敗したときのエラーメッセージをわかりやすくしました。以前は単に &quot;cast failed&quot; と表示していましたが、テーブルのキーの型とキャスト対象となるキーの型もメッセージに含まれるようになりました。</p></li>
<li><p>[httpd] バンドルしているnginxのバージョンを1.11.9に更新しました。</p></li>
</ul>
</section>
<section id="id29">
<h3>修正<a class="headerlink" href="#id29" title="Link to this heading">#</a></h3>
<ul class="simple">
<li><p>存在しないソートキーを <code class="docutils literal notranslate"><span class="pre">drilldowns[LABEL]</span></code> や <code class="docutils literal notranslate"><span class="pre">slices[LABEL]</span></code> に指定するとJSONパースエラーとなる不具合を修正しました。 [GitHub#627] [村上さんがパッチ提供]</p></li>
<li><p>存在しないグループのサブレコードにアクセスしようとするとクラッシュする不具合を修正しました。例えば、 <code class="docutils literal notranslate"><span class="pre">drilldowns[LABEL].sort_keys</span> <span class="pre">_sum</span></code> を <code class="docutils literal notranslate"><span class="pre">calc_types</span></code> の指定なしに使っていた場合に問題が発生していました。 [GitHub#625] [村上さんがパッチ提供]</p></li>
<li><p>tokenizerでエラーが発生するとクラッシュする不具合を修正しました。tokenizer と token filterを登録していて、tokenizer にエラーがあると発生していました。</p></li>
<li><p>[<a class="reference internal" href="../reference/window_functions/window_record_number.html"><span class="doc">window_record_number</span></a>] ウィンドウ関数の引数が正しく渡されていない不具合を修正しました。 [GitHub#634] [村上さんがパッチ提供]</p></li>
</ul>
</section>
<section id="id30">
<h3>感謝<a class="headerlink" href="#id30" title="Link to this heading">#</a></h3>
<ul class="simple">
<li><p>村上さん</p></li>
<li><p>aomi-nさん</p></li>
</ul>
</section>
</section>
</section>


                </article>
              
              
              
              
              
                <footer class="prev-next-footer">
                  
<div class="prev-next-area">
</div>
                </footer>
              
            </div>
            
            
              
                <div class="bd-sidebar-secondary bd-toc"><div class="sidebar-secondary-items sidebar-secondary__inner">


  <div class="sidebar-secondary-item">
<div
    id="pst-page-navigation-heading-2"
    class="page-toc tocsection onthispage">
    <i class="fa-solid fa-list"></i> On this page
  </div>
  <nav class="bd-toc-nav page-toc" aria-labelledby="pst-page-navigation-heading-2">
    <ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#release-7-1-1-2018-01-29">7.1.1リリース - 2018-01-29</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#improvements">改良</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#fixes">修正</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#thanks">感謝</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#release-7-1-0-2017-12-29">7.1.0リリース - 2017-12-29</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#id1">改良</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#id2">修正</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#id3">感謝</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#release-7-0-9-2017-11-29">7.0.9リリース - 2017-11-29</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#id4">改良</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#id5">修正</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#id6">感謝</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#release-7-0-8-2017-10-29">7.0.8リリース - 2017-10-29</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#id7">改良</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#id8">修正</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#release-7-0-7-2017-09-29">7.0.7リリース - 2017-09-29</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#id9">改良</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#id10">修正</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#release-7-0-6-2017-08-29">7.0.6リリース - 2017-08-29</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#id11">改良</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#id12">修正</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#id13">感謝</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#release-7-0-5-2017-07-29">7.0.5リリース - 2017-07-29</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#id14">改良</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#id15">修正</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#id16">感謝</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#release-7-0-4-2017-06-29">7.0.4リリース - 2017-06-29</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#id17">改良</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#id18">修正</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#id19">感謝</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#release-7-0-3-2017-05-29">7.0.3リリース - 2017-05-29</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#id20">改良</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#id21">修正</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#id22">感謝</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#release-7-0-2-2017-04-29">7.0.2リリース - 2017-04-29</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#id23">改良</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#id24">修正</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#release-7-0-1-2017-03-29">7.0.1リリース - 2017-03-29</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#id25">改良</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#id26">修正</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#id27">感謝</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#release-7-0-0-2017-02-09">7.0.0リリース - 2017-02-09</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#id28">改良</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#id29">修正</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#id30">感謝</a></li>
</ul>
</li>
</ul>
  </nav></div>

</div></div>
              
            
          </div>
          <footer class="bd-footer-content">
            
          </footer>
        
      </main>
    </div>
  </div>
  
  <!-- Scripts loaded after <body> so the DOM is not blocked -->
  <script src="../_static/scripts/bootstrap.js?digest=8d27b9dea8ad943066ae"></script>
<script src="../_static/scripts/pydata-sphinx-theme.js?digest=8d27b9dea8ad943066ae"></script>

  <footer class="bd-footer">
<div class="bd-footer__inner bd-page-width">
  
    <div class="footer-items__start">
      
        <div class="footer-item">

  <p class="copyright">
    
      © Copyright 2009-2024 Groonga Project.
      <br/>
    
  </p>
</div>
      
    </div>
  
  
  
    <div class="footer-items__end">
      
        <div class="footer-item">
<p class="theme-version">
  Built with the <a href="https://pydata-sphinx-theme.readthedocs.io/en/stable/index.html">PyData Sphinx Theme</a> 0.15.2.
</p></div>
      
    </div>
  
</div>

  </footer>
  </body>
</html>