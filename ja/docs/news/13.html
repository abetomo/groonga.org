
<!DOCTYPE html>


<html lang="ja" data-content_root="../" >

  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>お知らせ - 13系 &#8212; Groonga v14.0.6 documentation</title>
  
  
  
  <script data-cfasync="false">
    document.documentElement.dataset.mode = localStorage.getItem("mode") || "";
    document.documentElement.dataset.theme = localStorage.getItem("theme") || "";
  </script>
  
  <!-- Loaded before other Sphinx assets -->
  <link href="../_static/styles/theme.css?digest=3ee479438cf8b5e0d341" rel="stylesheet" />
<link href="../_static/styles/bootstrap.css?digest=3ee479438cf8b5e0d341" rel="stylesheet" />
<link href="../_static/styles/pydata-sphinx-theme.css?digest=3ee479438cf8b5e0d341" rel="stylesheet" />

  
  <link href="../_static/vendor/fontawesome/6.5.2/css/all.min.css?digest=3ee479438cf8b5e0d341" rel="stylesheet" />
  <link rel="preload" as="font" type="font/woff2" crossorigin href="../_static/vendor/fontawesome/6.5.2/webfonts/fa-solid-900.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin href="../_static/vendor/fontawesome/6.5.2/webfonts/fa-brands-400.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin href="../_static/vendor/fontawesome/6.5.2/webfonts/fa-regular-400.woff2" />

    <link rel="stylesheet" type="text/css" href="../_static/pygments.css?v=a746c00c" />
  
  <!-- Pre-loaded scripts that we'll load fully later -->
  <link rel="preload" as="script" href="../_static/scripts/bootstrap.js?digest=3ee479438cf8b5e0d341" />
<link rel="preload" as="script" href="../_static/scripts/pydata-sphinx-theme.js?digest=3ee479438cf8b5e0d341" />
  <script src="../_static/vendor/fontawesome/6.5.2/js/all.min.js?digest=3ee479438cf8b5e0d341"></script>

    <script src="../_static/documentation_options.js?v=8e4a8f51"></script>
    <script src="../_static/doctools.js?v=888ff710"></script>
    <script src="../_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="../_static/translations.js?v=4dbe4bdc"></script>
    <script async="async" src="https://www.googletagmanager.com/gtag/js?id=UA-7532323-1"></script>
    <script>
                window.dataLayer = window.dataLayer || [];
                function gtag(){ dataLayer.push(arguments); }
                gtag('js', new Date());
                gtag('config', 'UA-7532323-1');
            </script>
    <script>
                window.dataLayer = window.dataLayer || [];
                function gtag(){ dataLayer.push(arguments); }
                gtag('js', new Date());
                gtag('config', 'UA-7532323-1');
            </script>
    <script>DOCUMENTATION_OPTIONS.pagename = 'news/13';</script>
    <script>
        DOCUMENTATION_OPTIONS.theme_version = '0.15.3';
        DOCUMENTATION_OPTIONS.theme_switcher_json_url = 'https://groonga.org/docs/_static/switcher.json';
        DOCUMENTATION_OPTIONS.theme_switcher_version_match = 'japanese';
        DOCUMENTATION_OPTIONS.show_version_warning_banner = false;
        </script>
    <link rel="icon" href="../_static/favicon.ico"/>
    <link rel="index" title="索引" href="../genindex.html" />
    <link rel="search" title="検索" href="../search.html" />
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <meta name="docsearch:language" content="ja"/>
  </head>
  
  
  <body data-bs-spy="scroll" data-bs-target=".bd-toc-nav" data-offset="180" data-bs-root-margin="0px 0px -60%" data-default-mode="">

  
  
  <div id="pst-skip-link" class="skip-link d-print-none"><a href="#main-content">Skip to main content</a></div>
  
  <div id="pst-scroll-pixel-helper"></div>
  
  <button type="button" class="btn rounded-pill" id="pst-back-to-top">
    <i class="fa-solid fa-arrow-up"></i>Back to top</button>

  
  <input type="checkbox"
          class="sidebar-toggle"
          id="pst-primary-sidebar-checkbox"/>
  <label class="overlay overlay-primary" for="pst-primary-sidebar-checkbox"></label>
  
  <input type="checkbox"
          class="sidebar-toggle"
          id="pst-secondary-sidebar-checkbox"/>
  <label class="overlay overlay-secondary" for="pst-secondary-sidebar-checkbox"></label>
  
  <div class="search-button__wrapper">
    <div class="search-button__overlay"></div>
    <div class="search-button__search-container">
<form class="bd-search d-flex align-items-center"
      action="../search.html"
      method="get">
  <i class="fa-solid fa-magnifying-glass"></i>
  <input type="search"
         class="form-control"
         name="q"
         id="search-input"
         placeholder="Search the docs ..."
         aria-label="Search the docs ..."
         autocomplete="off"
         autocorrect="off"
         autocapitalize="off"
         spellcheck="false"/>
  <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd>K</kbd></span>
</form></div>
  </div>

  <div class="pst-async-banner-revealer d-none">
  <aside id="bd-header-version-warning" class="d-none d-print-none" aria-label="Version warning"></aside>
</div>

  
    <header class="bd-header navbar navbar-expand-lg bd-navbar d-print-none">
<div class="bd-header__inner bd-page-width">
  <button class="sidebar-toggle primary-toggle" aria-label="Site navigation">
    <span class="fa-solid fa-bars"></span>
  </button>
  
  
  <div class="col-lg-3 navbar-header-items__start">
    
      <div class="navbar-item">

   

<a class="navbar-brand logo" href="https://groonga.org/ja/">
  
  
  
  
  
    
    
      
    
    
    <img src="../_static/groonga.png" class="logo__image only-light" alt="Groonga v14.0.6 documentation - Home"/>
    <script>document.write(`<img src="../_static/groonga.png" class="logo__image only-dark" alt="Groonga v14.0.6 documentation - Home"/>`);</script>
  
  
</a></div>
    
  </div>
  
  <div class="col-lg-9 navbar-header-items">
    
    
    <div class="navbar-header-items__end">
      
        <div class="navbar-item navbar-persistent--container">
          

 <script>
 document.write(`
   <button class="btn navbar-btn search-button-field search-button__button" title="検索" aria-label="検索" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="fa-solid fa-magnifying-glass"></i>
    <span class="search-button__default-text">検索</span>
    <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd class="kbd-shortcut__modifier">K</kbd></span>
   </button>
 `);
 </script>
        </div>
      
      
        <div class="navbar-item">

<script>
document.write(`
  <button class="btn btn-sm navbar-btn theme-switch-button" title="light/dark" aria-label="light/dark" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <span class="theme-switch nav-link" data-mode="light"><i class="fa-solid fa-sun fa-lg"></i></span>
    <span class="theme-switch nav-link" data-mode="dark"><i class="fa-solid fa-moon fa-lg"></i></span>
    <span class="theme-switch nav-link" data-mode="auto"><i class="fa-solid fa-circle-half-stroke fa-lg"></i></span>
  </button>
`);
</script></div>
      
        <div class="navbar-item"><ul class="navbar-icon-links navbar-nav"
    aria-label="Icon Links">
        <li class="nav-item">
          
          
          
          
          
          
          
          
          <a href="https://github.com/groonga/groonga" title="GitHub" class="nav-link" rel="noopener" target="_blank" data-bs-toggle="tooltip" data-bs-placement="bottom"><span><i class="fa-brands fa-square-github fa-lg" aria-hidden="true"></i></span>
            <span class="sr-only">GitHub</span></a>
        </li>
        <li class="nav-item">
          
          
          
          
          
          
          
          
          <a href="https://twitter.com/groonga" title="Twitter" class="nav-link" rel="noopener" target="_blank" data-bs-toggle="tooltip" data-bs-placement="bottom"><span><i class="fa-brands fa-square-twitter fa-lg" aria-hidden="true"></i></span>
            <span class="sr-only">Twitter</span></a>
        </li>
        <li class="nav-item">
          
          
          
          
          
          
          
          
          <a href="/ja/blog" title="Blog" class="nav-link" rel="noopener" target="_blank" data-bs-toggle="tooltip" data-bs-placement="bottom"><span><i class="fas fa-blog fa-lg" aria-hidden="true"></i></span>
            <span class="sr-only">Blog</span></a>
        </li>
</ul></div>
      
        <div class="navbar-item">
<script>
document.write(`
  <div class="version-switcher__container dropdown">
    <button id="pst-version-switcher-button-2"
      type="button"
      class="version-switcher__button btn btn-sm navbar-btn dropdown-toggle"
      data-bs-toggle="dropdown"
      aria-haspopup="listbox"
      aria-controls="pst-version-switcher-list-2"
      aria-label="Version switcher list"
    >
      Choose version  <!-- this text may get changed later by javascript -->
      <span class="caret"></span>
    </button>
    <div id="pst-version-switcher-list-2"
      class="version-switcher__menu dropdown-menu list-group-flush py-0"
      role="listbox" aria-labelledby="pst-version-switcher-button-2">
      <!-- dropdown will be populated by javascript on page load -->
    </div>
  </div>
`);
</script></div>
      
    </div>
    
  </div>
  
  
    <div class="navbar-persistent--mobile">

 <script>
 document.write(`
   <button class="btn navbar-btn search-button-field search-button__button" title="検索" aria-label="検索" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="fa-solid fa-magnifying-glass"></i>
    <span class="search-button__default-text">検索</span>
    <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd class="kbd-shortcut__modifier">K</kbd></span>
   </button>
 `);
 </script>
    </div>
  

  
    <button class="sidebar-toggle secondary-toggle" aria-label="On this page">
      <span class="fa-solid fa-outdent"></span>
    </button>
  
</div>

    </header>
  

  <div class="bd-container">
    <div class="bd-container__inner bd-page-width">
      
      
      
      <div class="bd-sidebar-primary bd-sidebar">
        

  
  <div class="sidebar-header-items sidebar-primary__section">
    
    
    
    
      <div class="sidebar-header-items__end">
        
          <div class="navbar-item">

<script>
document.write(`
  <button class="btn btn-sm navbar-btn theme-switch-button" title="light/dark" aria-label="light/dark" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <span class="theme-switch nav-link" data-mode="light"><i class="fa-solid fa-sun fa-lg"></i></span>
    <span class="theme-switch nav-link" data-mode="dark"><i class="fa-solid fa-moon fa-lg"></i></span>
    <span class="theme-switch nav-link" data-mode="auto"><i class="fa-solid fa-circle-half-stroke fa-lg"></i></span>
  </button>
`);
</script></div>
        
          <div class="navbar-item"><ul class="navbar-icon-links navbar-nav"
    aria-label="Icon Links">
        <li class="nav-item">
          
          
          
          
          
          
          
          
          <a href="https://github.com/groonga/groonga" title="GitHub" class="nav-link" rel="noopener" target="_blank" data-bs-toggle="tooltip" data-bs-placement="bottom"><span><i class="fa-brands fa-square-github fa-lg" aria-hidden="true"></i></span>
            <span class="sr-only">GitHub</span></a>
        </li>
        <li class="nav-item">
          
          
          
          
          
          
          
          
          <a href="https://twitter.com/groonga" title="Twitter" class="nav-link" rel="noopener" target="_blank" data-bs-toggle="tooltip" data-bs-placement="bottom"><span><i class="fa-brands fa-square-twitter fa-lg" aria-hidden="true"></i></span>
            <span class="sr-only">Twitter</span></a>
        </li>
        <li class="nav-item">
          
          
          
          
          
          
          
          
          <a href="/ja/blog" title="Blog" class="nav-link" rel="noopener" target="_blank" data-bs-toggle="tooltip" data-bs-placement="bottom"><span><i class="fas fa-blog fa-lg" aria-hidden="true"></i></span>
            <span class="sr-only">Blog</span></a>
        </li>
</ul></div>
        
          <div class="navbar-item">
<script>
document.write(`
  <div class="version-switcher__container dropdown">
    <button id="pst-version-switcher-button-3"
      type="button"
      class="version-switcher__button btn btn-sm navbar-btn dropdown-toggle"
      data-bs-toggle="dropdown"
      aria-haspopup="listbox"
      aria-controls="pst-version-switcher-list-3"
      aria-label="Version switcher list"
    >
      Choose version  <!-- this text may get changed later by javascript -->
      <span class="caret"></span>
    </button>
    <div id="pst-version-switcher-list-3"
      class="version-switcher__menu dropdown-menu list-group-flush py-0"
      role="listbox" aria-labelledby="pst-version-switcher-button-3">
      <!-- dropdown will be populated by javascript on page load -->
    </div>
  </div>
`);
</script></div>
        
      </div>
    
  </div>
  
    <div class="sidebar-primary-items__start sidebar-primary__section">
        <div class="sidebar-primary-item">
<nav class="bd-docs-nav bd-links"
     aria-label="Section Navigation">
  <p class="bd-links__title" role="heading" aria-level="1">Section Navigation</p>
  <div class="bd-toc-item navbar-nav"></div>
</nav></div>
    </div>
  
  
  <div class="sidebar-primary-items__end sidebar-primary__section">
  </div>
  
  <div id="rtd-footer-container"></div>


      </div>
      
      <main id="main-content" class="bd-main" role="main">
        
        
          <div class="bd-content">
            <div class="bd-article-container">
              
              <div class="bd-header-article d-print-none">
<div class="header-article-items header-article__inner">
  
    <div class="header-article-items__start">
      
        <div class="header-article-item">



<nav aria-label="Breadcrumb" class="d-print-none">
  <ul class="bd-breadcrumbs">
    
    <li class="breadcrumb-item breadcrumb-home">
      <a href="../index.html" class="nav-link" aria-label="Home">
        <i class="fa-solid fa-home"></i>
      </a>
    </li>
    <li class="breadcrumb-item active" aria-current="page">お知らせ - 13系</li>
  </ul>
</nav>
</div>
      
    </div>
  
  
</div>
</div>
              
              
              
                
<div id="searchbox"></div>
                <article class="bd-article">
                  
  <section class="tex2jax_ignore mathjax_ignore" id="news-13-series">
<h1>お知らせ - 13系<a class="headerlink" href="#news-13-series" title="Link to this heading">#</a></h1>
<section id="release-13-1-1-2024-01-09">
<span id="release-13-1-1"></span><h2>13.1.1リリース - 2024-01-09<a class="headerlink" href="#release-13-1-1-2024-01-09" title="Link to this heading">#</a></h2>
<section id="improvements">
<h3>改良<a class="headerlink" href="#improvements" title="Link to this heading">#</a></h3>
<ul class="simple">
<li><p>mingw32のサポートをやめました。 [GitHub#1654]</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">--match_columns</span></code> と <code class="docutils literal notranslate"><span class="pre">--query</span></code> を使った &quot;vector_column[N] OPERATOR literal&quot; でインデックスを使った検索をサポートしました。</p></li>
</ul>
</section>
<section id="fixes">
<h3>修正<a class="headerlink" href="#fixes" title="Link to this heading">#</a></h3>
<ul>
<li><p>[<a class="reference internal" href="../install/windows.html"><span class="doc">Windows</span></a>] <code class="docutils literal notranslate"><span class="pre">groonga-normalizer-mysql</span></code> をバンドルしました。 [GitHub#1655]</p>
<p>Windows版のGroonga 13.1.0に <code class="docutils literal notranslate"><span class="pre">groonga-normalizer-mysql</span></code> が含まれていませんでした。 この問題はGroonga13.1.0でのみ発生します。</p>
</li>
</ul>
</section>
</section>
<section id="release-13-1-0-2023-12-26">
<span id="release-13-1-0"></span><h2>13.1.0リリース - 2023-12-26<a class="headerlink" href="#release-13-1-0-2023-12-26" title="Link to this heading">#</a></h2>
<section id="id1">
<h3>改良<a class="headerlink" href="#id1" title="Link to this heading">#</a></h3>
<ul>
<li><p>[<a class="reference internal" href="../reference/commands/select.html"><span class="doc">select</span></a>] トレースログもキャッシュするようにしました。</p></li>
<li><p>Apache Arrow フォーマットの応答で <code class="docutils literal notranslate"><span class="pre">dict&lt;string&gt;</span></code> の出力をサポートしました。</p></li>
<li><p>[<a class="reference internal" href="../reference/executables/groonga-server-http.html"><span class="doc">Groonga HTTPサーバー</span></a>] 新しい content type <code class="docutils literal notranslate"><span class="pre">application/vnd.apache.arrow.stream</span></code> をサポートしました。</p></li>
<li><p>[<a class="reference internal" href="../reference/functions/query.html"><span class="doc">query</span></a>] 以下のような空の入力をサポートしました。</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">table_create</span> <span class="n">Users</span> <span class="n">TABLE_NO_KEY</span>
<span class="n">column_create</span> <span class="n">Users</span> <span class="n">name</span> <span class="n">COLUMN_SCALAR</span> <span class="n">ShortText</span>

<span class="n">table_create</span> <span class="n">Lexicon</span> <span class="n">TABLE_HASH_KEY</span> <span class="n">ShortText</span>   <span class="o">--</span><span class="n">default_tokenizer</span> <span class="n">TokenBigramSplitSymbolAlphaDigit</span>   <span class="o">--</span><span class="n">normalizer</span> <span class="n">NormalizerAuto</span>
<span class="n">column_create</span> <span class="n">Lexicon</span> <span class="n">users_name</span> <span class="n">COLUMN_INDEX</span><span class="o">|</span><span class="n">WITH_POSITION</span> <span class="n">Users</span> <span class="n">name</span>
<span class="n">load</span> <span class="o">--</span><span class="n">table</span> <span class="n">Users</span>
<span class="p">[</span>
<span class="p">{</span><span class="s2">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;Alice&quot;</span><span class="p">},</span>
<span class="p">{</span><span class="s2">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;Alisa&quot;</span><span class="p">},</span>
<span class="p">{</span><span class="s2">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;Bob&quot;</span><span class="p">}</span>
<span class="p">]</span>

<span class="n">select</span> <span class="n">Users</span>   <span class="o">--</span><span class="n">output_columns</span> <span class="n">name</span><span class="p">,</span><span class="n">_score</span>   <span class="o">--</span><span class="nb">filter</span> <span class="s1">&#39;query(&quot;name&quot;, &quot; 　	&quot;)&#39;</span>
<span class="p">[</span>
  <span class="p">[</span>
    <span class="mi">0</span><span class="p">,</span>
    <span class="mf">0.0</span><span class="p">,</span>
    <span class="mf">0.0</span>
  <span class="p">],</span>
  <span class="p">[</span>
    <span class="p">[</span>
      <span class="p">[</span>
        <span class="mi">0</span>
      <span class="p">],</span>
      <span class="p">[</span>
        <span class="p">[</span>
          <span class="s2">&quot;name&quot;</span><span class="p">,</span>
          <span class="s2">&quot;ShortText&quot;</span>
        <span class="p">],</span>
        <span class="p">[</span>
          <span class="s2">&quot;_score&quot;</span><span class="p">,</span>
          <span class="s2">&quot;Int32&quot;</span>
        <span class="p">]</span>
      <span class="p">]</span>
    <span class="p">]</span>
  <span class="p">]</span>
<span class="p">]</span>
</pre></div>
</div>
</li>
<li><p>BFloat16をサポートしました。（実験的）</p>
<p>BFloat16のloadとselectができるだけです。 <code class="docutils literal notranslate"><span class="pre">bfloat16_value</span> <span class="pre">-</span> <span class="pre">1.2</span></code> のような算術演算はできません。</p>
</li>
<li><p>[<a class="reference internal" href="../reference/commands/column_create.html"><span class="doc">column_create</span></a>] 新しいフラグ <code class="docutils literal notranslate"><span class="pre">WEIGHT_BFLOAT16</span></code> を追加しました。</p></li>
</ul>
</section>
<section id="id2">
<h3>修正<a class="headerlink" href="#id2" title="Link to this heading">#</a></h3>
<ul>
<li><p>[<a class="reference internal" href="../reference/commands/select.html"><span class="doc">select</span></a>] Groonga が <code class="docutils literal notranslate"><span class="pre">output_pretty=yes</span></code> の結果をキャッシュした場合、 <code class="docutils literal notranslate"><span class="pre">output_pretty</span></code> をつけていないクエリーであっても、<code class="docutils literal notranslate"><span class="pre">output_pretty</span></code>をつけて返してしまう問題を修正しました。</p></li>
<li><p>誤ったデータを作り出してしまう問題を修正しました。</p>
<p>通常、ユーザーはこれを明示的に実行できません。数値の動的カラムや一時結果セットが作られたとき、あるいは使われているときに内部的に発生することがあります。</p>
<p>例えば、以下のクエリーで誤ったデータを作り出すことがあります。</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">select</span> <span class="n">TABLE</span> \
  <span class="o">--</span><span class="n">match_columns</span> <span class="n">TEXT_COLUMN</span> \
  <span class="o">--</span><span class="n">query</span> <span class="s1">&#39;A B OR C&#39;</span> \
  <span class="o">--</span><span class="n">columns</span><span class="p">[</span><span class="n">NUMERIC_DYNAMIC_COLUMN</span><span class="p">]</span><span class="o">.</span><span class="n">stage</span> <span class="n">result_set</span> \
  <span class="o">--</span><span class="n">columns</span><span class="p">[</span><span class="n">NUMERIC_DYNAMIC_COLUMN</span><span class="p">]</span><span class="o">.</span><span class="n">type</span> <span class="n">Float32</span> \
  <span class="o">--</span><span class="n">columns</span><span class="p">[</span><span class="n">NUMERIC_DYNAMIC_COLUMN</span><span class="p">]</span><span class="o">.</span><span class="n">flags</span> <span class="n">COLUMN_VECTOR</span>
</pre></div>
</div>
<p>もしこの問題が起こった場合は、<code class="docutils literal notranslate"><span class="pre">NUMERIC_DYNAMIC_COLUMN</span></code> は多くのごみ要素を含んでいます。そして、それは多くのメモリー消費の原因にもなります。</p>
<p>この問題はスタック上の未初期化の変数が原因です。そのため、発生するかもしれないし、しないかもしれないことに注意してください。</p>
</li>
<li><p>有効な <code class="docutils literal notranslate"><span class="pre">normalizers/token_filters</span></code> の設定が失敗することがある問題を修正しました。</p></li>
<li><p>[fuzzy_search] 以下の３つの条件が成立した時にクラッシュする問題を修正しました。</p>
<ol class="arabic simple">
<li><p>クエリーが2つまたはそれ以上のマルチバイト文字を持っている場合。</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">${ASCII}${ASCII}${MULTIBYTE}*</span></code> という形の文字列がパトリシアトライのテーブルにある場合。</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">WITH_TRANSPOSITION</span></code> が有効な場合。</p></li>
</ol>
<p>例えば、以下のようにパトリシアトライのテーブル内にある&quot;aaあ&quot;とクエリー&quot;あああ&quot;のペアは問題を起こします。</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">table_create</span> <span class="n">Users</span> <span class="n">TABLE_NO_KEY</span>
<span class="n">column_create</span> <span class="n">Users</span> <span class="n">name</span> <span class="n">COLUMN_SCALAR</span> <span class="n">ShortText</span>

<span class="n">table_create</span> <span class="n">Names</span> <span class="n">TABLE_PAT_KEY</span> <span class="n">ShortText</span>
<span class="n">column_create</span> <span class="n">Names</span> <span class="n">user</span> <span class="n">COLUMN_INDEX</span> <span class="n">Users</span> <span class="n">name</span>
<span class="n">load</span> <span class="o">--</span><span class="n">table</span> <span class="n">Users</span>
<span class="p">[</span>
<span class="p">{</span><span class="s2">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;aaあ&quot;</span><span class="p">},</span>
<span class="p">{</span><span class="s2">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;あうi&quot;</span><span class="p">},</span>
<span class="p">{</span><span class="s2">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;あう&quot;</span><span class="p">},</span>
<span class="p">{</span><span class="s2">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;あi&quot;</span><span class="p">},</span>
<span class="p">{</span><span class="s2">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;iう&quot;</span><span class="p">}</span>
<span class="p">]</span>
<span class="n">select</span> <span class="n">Users</span>
  <span class="o">--</span><span class="nb">filter</span> <span class="s1">&#39;fuzzy_search(name, &quot;あiう&quot;, {&quot;with_transposition&quot;: true, &quot;max_distance&quot;: 3})&#39;</span>
  <span class="o">--</span><span class="n">output_columns</span> <span class="s1">&#39;name, _score&#39;</span>
  <span class="o">--</span><span class="n">match_escalation_threshold</span> <span class="o">-</span><span class="mi">1</span>
</pre></div>
</div>
</li>
</ul>
</section>
</section>
<section id="release-13-0-9-2023-10-29">
<span id="release-13-0-9"></span><h2>13.0.9リリース - 2023-10-29<a class="headerlink" href="#release-13-0-9-2023-10-29" title="Link to this heading">#</a></h2>
<section id="id3">
<h3>改良<a class="headerlink" href="#id3" title="Link to this heading">#</a></h3>
<ul>
<li><p>[<a class="reference internal" href="../reference/commands/select.html"><span class="doc">select</span></a>] <code class="docutils literal notranslate"><span class="pre">--fuzzy_max_expansions</span></code> のデフォルト値を0から10に変更しました。</p>
<p><code class="docutils literal notranslate"><span class="pre">--fuzzy_max_expansions</span></code> を使うことで検索に使う編集距離の近い語の数を制限できます。この引数を使って、ヒット数と検索パフォーマンスのバランスを取ることができます。<code class="docutils literal notranslate"><span class="pre">--fuzzy_max_expansions</span></code> が0の場合は語彙表にある編集距離が <code class="docutils literal notranslate"><span class="pre">--fuzzy_max_distance</span></code> 以下の語すべてを使って検索をします。</p>
<p>ただ、 <code class="docutils literal notranslate"><span class="pre">--fuzzy_max_expansions</span></code> が0の場合、検索が遅くなる可能性があります。したがって、今回のリリースから <code class="docutils literal notranslate"><span class="pre">--fuzzy_max_expansions</span></code> のデフォルト値を10に変更しました。</p>
</li>
<li><p>[<a class="reference internal" href="../reference/commands/select.html"><span class="doc">select</span></a>] <code class="docutils literal notranslate"><span class="pre">select</span></code> コマンドの引数に新しく <code class="docutils literal notranslate"><span class="pre">--fuzzy_with_transposition</span></code> を追加しました。(実験的)</p>
<p>この引数を使うことで「隣接する文字の交換」の編集距離を1または2に指定できます。</p>
<p><code class="docutils literal notranslate"><span class="pre">--fuzzy_with_transposition</span></code> が <code class="docutils literal notranslate"><span class="pre">yes</span></code> の場合、文字の交換の編集距離は <code class="docutils literal notranslate"><span class="pre">1</span></code> になります。それ以外の値が指定された場合は、文字の交換の編集距離は <code class="docutils literal notranslate"><span class="pre">2</span></code> になります。</p>
</li>
<li><p>[<a class="reference internal" href="../reference/commands/select.html"><span class="doc">select</span></a>] <code class="docutils literal notranslate"><span class="pre">select</span></code> の引数に新しく <code class="docutils literal notranslate"><span class="pre">--fuzzy_tokenize</span></code> を追加しました。(実験的)</p>
<p><code class="docutils literal notranslate"><span class="pre">--fuzzy_tokenize</span></code> が <code class="docutils literal notranslate"><span class="pre">yes</span></code> の時、 Groongaは、誤字を許容する検索で <code class="docutils literal notranslate"><span class="pre">--default_tokenizer</span></code> で指定したトークナイザーを使います。</p>
<p><code class="docutils literal notranslate"><span class="pre">--fuzzy_tokenize</span></code> のデフォルト値は <code class="docutils literal notranslate"><span class="pre">no</span></code>です。 <code class="docutils literal notranslate"><span class="pre">--fuzzy_tokenize</span></code> が有用なケースは、以下のケースです。</p>
<ul class="simple">
<li><p>検索対象が日本語のデータのみ。</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">--default_tokenizer</span></code> に <code class="docutils literal notranslate"><span class="pre">TokenMecab</span></code> を指定する。</p></li>
</ul>
</li>
<li><p>[<a class="reference internal" href="../reference/commands/load.html"><span class="doc">load</span></a>] <code class="docutils literal notranslate"><span class="pre">input_type</span></code> が <code class="docutils literal notranslate"><span class="pre">apache-arrow</span></code> のときも <code class="docutils literal notranslate"><span class="pre">--ifexists</span></code> が使えるようになりました。</p></li>
<li><p>[<a class="reference internal" href="../reference/normalizers.html"><span class="doc">ノーマライザー</span></a>] <code class="docutils literal notranslate"><span class="pre">NormalizerNFKC*</span></code> に新しく <code class="docutils literal notranslate"><span class="pre">remove_blank_force</span></code> オプションを追加しました。</p>
<p><code class="docutils literal notranslate"><span class="pre">remove_blank_force</span></code> が <code class="docutils literal notranslate"><span class="pre">false</span></code> の時、以下のようにノーマライザーは空白を無視しません。</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">table_create</span> <span class="n">Entries</span> <span class="n">TABLE_NO_KEY</span>
<span class="n">column_create</span> <span class="n">Entries</span> <span class="n">body</span> <span class="n">COLUMN_SCALAR</span> <span class="n">ShortText</span>

<span class="n">load</span> <span class="o">--</span><span class="n">table</span> <span class="n">Entries</span>
<span class="p">[</span>
<span class="p">{</span><span class="s2">&quot;body&quot;</span><span class="p">:</span> <span class="s2">&quot;Groonga はとても速い&quot;</span><span class="p">},</span>
<span class="p">{</span><span class="s2">&quot;body&quot;</span><span class="p">:</span> <span class="s2">&quot;Groongaはとても速い&quot;</span><span class="p">}</span>
<span class="p">]</span>

<span class="n">select</span> <span class="n">Entries</span> <span class="o">--</span><span class="n">output_columns</span> \
  <span class="s1">&#39;highlight(body, </span><span class="se">\</span>
<span class="s1">    &quot;gaはとても&quot;, &quot;&lt;keyword&gt;&quot;, &quot;&lt;/keyword&gt;&quot;, </span><span class="se">\</span>
<span class="s1">    {&quot;normalizers&quot;: &quot;NormalizerNFKC150(</span><span class="se">\\</span><span class="s1">&quot;remove_blank_force</span><span class="se">\\</span><span class="s1">&quot;, false)&quot;} </span><span class="se">\</span>
<span class="s1">  )&#39;</span>
<span class="p">[</span>
  <span class="p">[</span>
    <span class="mi">0</span><span class="p">,</span>
    <span class="mf">0.0</span><span class="p">,</span>
    <span class="mf">0.0</span>
  <span class="p">],</span>
  <span class="p">[</span>
    <span class="p">[</span>
      <span class="p">[</span>
        <span class="mi">2</span>
      <span class="p">],</span>
      <span class="p">[</span>
        <span class="p">[</span>
          <span class="s2">&quot;highlight&quot;</span><span class="p">,</span>
          <span class="n">null</span>
        <span class="p">]</span>
      <span class="p">],</span>
      <span class="p">[</span>
        <span class="s2">&quot;Groonga はとても速い&quot;</span>
      <span class="p">],</span>
      <span class="p">[</span>
        <span class="s2">&quot;Groon&lt;keyword&gt;gaはとても&lt;/keyword&gt;速い&quot;</span>
      <span class="p">]</span>
    <span class="p">]</span>
  <span class="p">]</span>
<span class="p">]</span>
</pre></div>
</div>
</li>
<li><p>[<a class="reference internal" href="../reference/commands/select.html"><span class="doc">select</span></a>] <code class="docutils literal notranslate"><span class="pre">select</span></code> コマンドの引数に新しく <code class="docutils literal notranslate"><span class="pre">--output_trace_log</span></code> を追加しました。(実験的)</p>
<p><code class="docutils literal notranslate"><span class="pre">--output_trace_log</span></code> に <code class="docutils literal notranslate"><span class="pre">yes</span></code> を指定し <code class="docutils literal notranslate"><span class="pre">--command_version</span> <span class="pre">3</span></code> を指定した場合、Groongaは以下のようなログを新規に出力します。</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">table_create</span> <span class="n">Memos</span> <span class="n">TABLE_NO_KEY</span>
<span class="n">column_create</span> <span class="n">Memos</span> <span class="n">content</span> <span class="n">COLUMN_SCALAR</span> <span class="n">ShortText</span>

<span class="n">table_create</span> <span class="n">Lexicon</span> <span class="n">TABLE_PAT_KEY</span> <span class="n">ShortText</span>   <span class="o">--</span><span class="n">default_tokenizer</span> <span class="n">TokenNgram</span>   <span class="o">--</span><span class="n">normalizer</span> <span class="n">NormalizerNFKC150</span>
<span class="n">column_create</span> <span class="n">Lexicon</span> <span class="n">memos_content</span>   <span class="n">COLUMN_INDEX</span><span class="o">|</span><span class="n">WITH_POSITION</span> <span class="n">Memos</span> <span class="n">content</span>

<span class="n">load</span> <span class="o">--</span><span class="n">table</span> <span class="n">Memos</span>
<span class="p">[</span>
<span class="p">{</span><span class="s2">&quot;content&quot;</span><span class="p">:</span> <span class="s2">&quot;This is a pen&quot;</span><span class="p">},</span>
<span class="p">{</span><span class="s2">&quot;content&quot;</span><span class="p">:</span> <span class="s2">&quot;That is a pen&quot;</span><span class="p">},</span>
<span class="p">{</span><span class="s2">&quot;content&quot;</span><span class="p">:</span> <span class="s2">&quot;They are pens&quot;</span><span class="p">}</span>
<span class="p">]</span>

<span class="n">select</span> <span class="n">Memos</span> \
  <span class="o">--</span><span class="n">match_columns</span> <span class="n">content</span> \
  <span class="o">--</span><span class="n">query</span> <span class="s2">&quot;Thas OR ere&quot;</span> \
  <span class="o">--</span><span class="n">fuzzy_max_distance</span> <span class="mi">1</span> \
  <span class="o">--</span><span class="n">output_columns</span> <span class="o">*</span><span class="p">,</span><span class="n">_score</span> \
  <span class="o">--</span><span class="n">command_version</span> <span class="mi">3</span> \
  <span class="o">--</span><span class="n">output_trace_log</span> <span class="n">yes</span> \
<span class="o">--</span><span class="n">output_type</span> <span class="n">apache</span><span class="o">-</span><span class="n">arrow</span>

<span class="n">return_code</span><span class="p">:</span> <span class="n">int32</span>
<span class="n">start_time</span><span class="p">:</span> <span class="n">timestamp</span><span class="p">[</span><span class="n">ns</span><span class="p">]</span>
<span class="n">elapsed_time</span><span class="p">:</span> <span class="n">double</span>
<span class="n">error_message</span><span class="p">:</span> <span class="n">string</span>
<span class="n">error_file</span><span class="p">:</span> <span class="n">string</span>
<span class="n">error_line</span><span class="p">:</span> <span class="n">uint32</span>
<span class="n">error_function</span><span class="p">:</span> <span class="n">string</span>
<span class="n">error_input_file</span><span class="p">:</span> <span class="n">string</span>
<span class="n">error_input_line</span><span class="p">:</span> <span class="n">int32</span>
<span class="n">error_input_command</span><span class="p">:</span> <span class="n">string</span>
<span class="o">--</span> <span class="n">metadata</span> <span class="o">--</span>
<span class="n">GROONGA</span><span class="p">:</span><span class="n">data_type</span><span class="p">:</span> <span class="n">metadata</span>
	<span class="n">return_code</span>	               <span class="n">start_time</span>	<span class="n">elapsed_time</span>	<span class="n">error_message</span>	<span class="n">error_file</span>	<span class="n">error_line</span>	<span class="n">error_function</span>	<span class="n">error_input_file</span>	<span class="n">error_input_line</span>	<span class="n">error_input_command</span>
<span class="mi">0</span>	          <span class="mi">0</span>	<span class="mi">1970</span><span class="o">-</span><span class="mi">01</span><span class="o">-</span><span class="mi">01</span><span class="n">T09</span><span class="p">:</span><span class="mi">00</span><span class="p">:</span><span class="mi">00</span><span class="o">+</span><span class="mi">09</span><span class="p">:</span><span class="mi">00</span>	    <span class="mf">0.000000</span>	       <span class="p">(</span><span class="n">null</span><span class="p">)</span>	    <span class="p">(</span><span class="n">null</span><span class="p">)</span>	    <span class="p">(</span><span class="n">null</span><span class="p">)</span>	        <span class="p">(</span><span class="n">null</span><span class="p">)</span>	          <span class="p">(</span><span class="n">null</span><span class="p">)</span>	          <span class="p">(</span><span class="n">null</span><span class="p">)</span>	             <span class="p">(</span><span class="n">null</span><span class="p">)</span>
<span class="o">========================================</span>
<span class="n">depth</span><span class="p">:</span> <span class="n">uint16</span>
<span class="n">sequence</span><span class="p">:</span> <span class="n">uint16</span>
<span class="n">name</span><span class="p">:</span> <span class="n">string</span>
<span class="n">value</span><span class="p">:</span> <span class="n">dense_union</span><span class="o">&lt;</span><span class="mi">0</span><span class="p">:</span> <span class="n">uint32</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">:</span> <span class="n">string</span><span class="o">=</span><span class="mi">1</span><span class="o">&gt;</span>
<span class="n">elapsed_time</span><span class="p">:</span> <span class="n">uint64</span>
<span class="o">--</span> <span class="n">metadata</span> <span class="o">--</span>
<span class="n">GROONGA</span><span class="p">:</span><span class="n">data_type</span><span class="p">:</span> <span class="n">trace_log</span>
	<span class="n">depth</span>	<span class="n">sequence</span>	<span class="n">name</span>	<span class="n">value</span>	<span class="n">elapsed_time</span>
 <span class="mi">0</span>	    <span class="mi">1</span>	       <span class="mi">0</span>	<span class="n">ii</span><span class="o">.</span><span class="n">select</span><span class="o">.</span><span class="n">input</span>	<span class="n">Thas</span> 	           <span class="mi">0</span>
 <span class="mi">1</span>	    <span class="mi">2</span>	       <span class="mi">0</span>	<span class="n">ii</span><span class="o">.</span><span class="n">select</span><span class="o">.</span><span class="n">exact</span><span class="o">.</span><span class="n">n_hits</span>	    <span class="mi">0</span>	           <span class="mi">1</span>
 <span class="mi">2</span>	    <span class="mi">2</span>	       <span class="mi">0</span>	<span class="n">ii</span><span class="o">.</span><span class="n">select</span><span class="o">.</span><span class="n">fuzzy</span><span class="o">.</span><span class="n">input</span>	<span class="n">Thas</span> 	           <span class="mi">2</span>
 <span class="mi">3</span>	    <span class="mi">2</span>	       <span class="mi">1</span>	<span class="n">ii</span><span class="o">.</span><span class="n">select</span><span class="o">.</span><span class="n">fuzzy</span><span class="o">.</span><span class="n">input</span><span class="o">.</span><span class="n">actual</span>	<span class="n">that</span> 	           <span class="mi">3</span>
 <span class="mi">4</span>	    <span class="mi">2</span>	       <span class="mi">2</span>	<span class="n">ii</span><span class="o">.</span><span class="n">select</span><span class="o">.</span><span class="n">fuzzy</span><span class="o">.</span><span class="n">input</span><span class="o">.</span><span class="n">actual</span>	<span class="n">this</span> 	           <span class="mi">4</span>
 <span class="mi">5</span>	    <span class="mi">2</span>	       <span class="mi">3</span>	<span class="n">ii</span><span class="o">.</span><span class="n">select</span><span class="o">.</span><span class="n">fuzzy</span><span class="o">.</span><span class="n">n_hits</span>	    <span class="mi">2</span>	           <span class="mi">5</span>
 <span class="mi">6</span>	    <span class="mi">1</span>	       <span class="mi">1</span>	<span class="n">ii</span><span class="o">.</span><span class="n">select</span><span class="o">.</span><span class="n">n_hits</span>	    <span class="mi">2</span>	           <span class="mi">6</span>
 <span class="mi">7</span>	    <span class="mi">1</span>	       <span class="mi">0</span>	<span class="n">ii</span><span class="o">.</span><span class="n">select</span><span class="o">.</span><span class="n">input</span>	<span class="n">ere</span>  	           <span class="mi">7</span>
 <span class="mi">8</span>	    <span class="mi">2</span>	       <span class="mi">0</span>	<span class="n">ii</span><span class="o">.</span><span class="n">select</span><span class="o">.</span><span class="n">exact</span><span class="o">.</span><span class="n">n_hits</span>	    <span class="mi">2</span>	           <span class="mi">8</span>
 <span class="mi">9</span>	    <span class="mi">1</span>	       <span class="mi">1</span>	<span class="n">ii</span><span class="o">.</span><span class="n">select</span><span class="o">.</span><span class="n">n_hits</span>	    <span class="mi">2</span>	           <span class="mi">9</span>
<span class="o">========================================</span>
<span class="n">content</span><span class="p">:</span> <span class="n">string</span>
<span class="n">_score</span><span class="p">:</span> <span class="n">double</span>
<span class="o">--</span> <span class="n">metadata</span> <span class="o">--</span>
<span class="n">GROONGA</span><span class="p">:</span><span class="n">n_hits</span><span class="p">:</span> <span class="mi">2</span>
	<span class="n">content</span>	    <span class="n">_score</span>
<span class="mi">0</span>	<span class="n">This</span> <span class="ow">is</span> <span class="n">a</span> <span class="n">pen</span>	  <span class="mf">1.000000</span>
<span class="mi">1</span>	<span class="n">That</span> <span class="ow">is</span> <span class="n">a</span> <span class="n">pen</span>	  <span class="mf">1.000000</span>
</pre></div>
</div>
<p><code class="docutils literal notranslate"><span class="pre">--output_trace_log</span></code> は、コマンドバージョン3でのみ有効です。</p>
<p>以下のケースで有用です。:</p>
<ul class="simple">
<li><p>誤字を許容する検索で使われた実際のキーワードの検知。</p></li>
<li><p>クエリーログを見ずに実行時間を測定。</p></li>
</ul>
</li>
<li><p>[<a class="reference internal" href="../reference/functions/query.html"><span class="doc">query</span></a>] オブジェクトリテラルをサポートしました。</p></li>
<li><p>[<a class="reference internal" href="../reference/commands/query_expand.html"><span class="doc">query_expand</span></a>] <code class="docutils literal notranslate"><span class="pre">NPP</span></code> と <code class="docutils literal notranslate"><span class="pre">ONPP</span></code> をサポートしました（実験的）。</p></li>
<li><p>[<a class="reference internal" href="../reference/functions/snippet.html"><span class="doc">snippet</span></a>] <code class="docutils literal notranslate"><span class="pre">normalizers</span></code> オプションをサポートしました。</p>
<p>オプション付きのノーマライザーが使えるようになります。例えば、以下のように <code class="docutils literal notranslate"><span class="pre">snippet()</span></code> 関数内でスペースを無視したくない時にこのオプションを使います。</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">table_create</span> <span class="n">Entries</span> <span class="n">TABLE_NO_KEY</span>
<span class="n">column_create</span> <span class="n">Entries</span> <span class="n">content</span> <span class="n">COLUMN_SCALAR</span> <span class="n">ShortText</span>

<span class="n">load</span> <span class="o">--</span><span class="n">table</span> <span class="n">Entries</span>
<span class="p">[</span>
<span class="p">{</span><span class="s2">&quot;content&quot;</span><span class="p">:</span> <span class="s2">&quot;Groonga and MySQL&quot;</span><span class="p">},</span>
<span class="p">{</span><span class="s2">&quot;content&quot;</span><span class="p">:</span> <span class="s2">&quot;Groonga and My SQL&quot;</span><span class="p">}</span>
<span class="p">]</span>

<span class="n">select</span> <span class="n">Entries</span> \
  <span class="o">--</span><span class="n">output_columns</span> \
    <span class="s1">&#39;   snippet(content,   &quot;MySQL&quot;, &quot;&lt;keyword&gt;&quot;, &quot;&lt;/keyword&gt;&quot;,   {&quot;normalizers&quot;: &quot;NormalizerNFKC150(</span><span class="se">\\</span><span class="s1">&quot;remove_blank_force</span><span class="se">\\</span><span class="s1">&quot;, false)&quot;}   )&#39;</span>
<span class="p">[</span>
  <span class="p">[</span>
    <span class="mi">0</span><span class="p">,</span>
    <span class="mf">0.0</span><span class="p">,</span>
    <span class="mf">0.0</span>
  <span class="p">],</span>
  <span class="p">[</span>
    <span class="p">[</span>
      <span class="p">[</span>
        <span class="mi">2</span>
      <span class="p">],</span>
      <span class="p">[</span>
        <span class="p">[</span>
          <span class="s2">&quot;snippet&quot;</span><span class="p">,</span>
          <span class="n">null</span>
        <span class="p">]</span>
      <span class="p">],</span>
      <span class="p">[</span>
        <span class="p">[</span>
          <span class="s2">&quot;Groonga and &lt;keyword&gt;MySQL&lt;/keyword&gt;&quot;</span>
        <span class="p">]</span>
      <span class="p">],</span>
      <span class="p">[</span>
        <span class="n">null</span>
      <span class="p">]</span>
    <span class="p">]</span>
  <span class="p">]</span>
<span class="p">]</span>
</pre></div>
</div>
</li>
</ul>
</section>
<section id="id4">
<h3>修正<a class="headerlink" href="#id4" title="Link to this heading">#</a></h3>
<ul>
<li><p><code class="docutils literal notranslate"><span class="pre">Time</span> <span class="pre">OPERATOR</span> <span class="pre">Float{,32}</span></code> が正しく評価されない問題を修正しました。 <a class="reference external" href="https://github.com/groonga/groonga/issues/1624">GH-1624</a>[Reported by yssrku]</p>
<p><code class="docutils literal notranslate"><span class="pre">Float{,32}</span></code> 内のマイクロ秒（秒未満の小さい値）が使えていませんでした。この問題は <code class="docutils literal notranslate"><span class="pre">Time</span> <span class="pre">OPERATOR</span> <span class="pre">Float{,32}</span></code> の時だけ発生します。</p>
<p>以下のように、 <code class="docutils literal notranslate"><span class="pre">load</span> <span class="pre">--ifexists</span> <span class="pre">'A</span> <span class="pre">OP</span> <span class="pre">B</span> <span class="pre">||</span> <span class="pre">C</span> <span class="pre">OP</span> <span class="pre">D'</span></code> でこの問題は発生します。</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">table_create</span> <span class="n">Reports</span> <span class="n">TABLE_HASH_KEY</span> <span class="n">ShortText</span>
<span class="n">column_create</span> <span class="n">Reports</span> <span class="n">content</span> <span class="n">COLUMN_SCALAR</span> <span class="n">Text</span>
<span class="n">column_create</span> <span class="n">Reports</span> <span class="n">modified_at</span> <span class="n">COLUMN_SCALAR</span> <span class="n">Time</span>

<span class="n">load</span> <span class="o">--</span><span class="n">table</span> <span class="n">Reports</span>
<span class="p">[</span>
<span class="p">{</span><span class="s2">&quot;_key&quot;</span><span class="p">:</span> <span class="s2">&quot;a&quot;</span><span class="p">,</span> <span class="s2">&quot;content&quot;</span><span class="p">:</span> <span class="s2">&quot;&quot;</span><span class="p">,</span> <span class="s2">&quot;modified_at&quot;</span><span class="p">:</span> <span class="mf">1663989875.438</span><span class="p">}</span>
<span class="p">]</span>

<span class="n">load</span> \
  <span class="o">--</span><span class="n">table</span> <span class="n">Reports</span> \
  <span class="o">--</span><span class="n">ifexists</span> <span class="s1">&#39;content == &quot;&quot; &amp;&amp; modified_at &lt;= 1663989875.437&#39;</span>
</pre></div>
</div>
<p>しかし、 <code class="docutils literal notranslate"><span class="pre">select</span> <span class="pre">--filter</span></code> では発生しません。</p>
</li>
<li><p><code class="docutils literal notranslate"><span class="pre">alnum(a-zA-Z0-9)</span> <span class="pre">+</span> <span class="pre">blank</span></code> が検知されることがある問題を修正しました。</p>
<p><code class="docutils literal notranslate"><span class="pre">ab</span></code> や <code class="docutils literal notranslate"><span class="pre">a</span> <span class="pre">b</span></code> のように複数の空白を含むテキストがマッチする場合、 <code class="docutils literal notranslate"><span class="pre">a</span> <span class="pre">b</span></code>が検知されますが、このケースでは検知すべきではありません。</p>
<p>例えば、この問題が発生すると、以下のように <code class="docutils literal notranslate"><span class="pre">a</span> <span class="pre">i</span></code> を検知してしまいます。</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">table_create</span> <span class="n">Entries</span> <span class="n">TABLE_NO_KEY</span>
<span class="n">column_create</span> <span class="n">Entries</span> <span class="n">body</span> <span class="n">COLUMN_SCALAR</span> <span class="n">ShortText</span>

<span class="n">load</span> <span class="o">--</span><span class="n">table</span> <span class="n">Entries</span>
<span class="p">[</span>
<span class="p">{</span><span class="s2">&quot;body&quot;</span><span class="p">:</span> <span class="s2">&quot;Groonga is fast&quot;</span><span class="p">}</span>
<span class="p">]</span>

<span class="n">select</span> <span class="n">Entries</span> \
  <span class="o">--</span><span class="n">output_columns</span> <span class="s1">&#39;highlight(body, &quot;ai&quot;, &quot;&lt;keyword&gt;&quot;, &quot;&lt;/keyword&gt;&quot;)&#39;</span>

<span class="p">[</span>
  <span class="p">[</span>
    <span class="mi">0</span><span class="p">,</span><span class="mf">0.0</span><span class="p">,</span><span class="mf">0.0</span>
  <span class="p">],</span>
  <span class="p">[</span>
    <span class="p">[</span>
      <span class="p">[</span>
        <span class="mi">1</span>
      <span class="p">],</span>
      <span class="p">[</span>
        <span class="p">[</span>
          <span class="s2">&quot;highlight&quot;</span><span class="p">,</span>
          <span class="n">null</span>
        <span class="p">]</span>
      <span class="p">],</span>
      <span class="p">[</span>
        <span class="s2">&quot;Groong&lt;keyword&gt;a i&lt;/keyword&gt;s fast&quot;</span>
      <span class="p">]</span>
    <span class="p">]</span>
  <span class="p">]</span>
<span class="p">]</span>
</pre></div>
</div>
<p>しかし、上記の結果は期待していない結果です。上記ケースでは <code class="docutils literal notranslate"><span class="pre">a</span> <span class="pre">i</span></code> は検知してほしくありません。</p>
</li>
</ul>
</section>
<section id="thanks">
<h3>感謝<a class="headerlink" href="#thanks" title="Link to this heading">#</a></h3>
<ul class="simple">
<li><p>yssrku</p></li>
</ul>
</section>
</section>
<section id="release-13-0-8-2023-09-29">
<span id="release-13-0-8"></span><h2>13.0.8リリース - 2023-09-29<a class="headerlink" href="#release-13-0-8-2023-09-29" title="Link to this heading">#</a></h2>
<section id="id5">
<h3>改良<a class="headerlink" href="#id5" title="Link to this heading">#</a></h3>
<ul>
<li><p>[<a class="reference internal" href="../reference/commands/column_create.html"><span class="doc">column_create</span></a>] <code class="docutils literal notranslate"><span class="pre">column_create</span></code> に新しいフラグ <code class="docutils literal notranslate"><span class="pre">COLUMN_FILTER_SHUFFLE</span></code>, <code class="docutils literal notranslate"><span class="pre">COLUMN_FILTER_BYTE_DELTA</span></code>, <code class="docutils literal notranslate"><span class="pre">COMPRESS_FILTER_TRUNCATE_PRECISION_1BYTE</span></code>, and <code class="docutils literal notranslate"><span class="pre">COMPRESS_FILTER_TRUNCATE_PRECISION_2BYTES</span></code> を追加しました。</p></li>
<li><p>新しく<a class="reference external" href="https://www.blosc.org/">Blosc</a>をバンドルしました。</p>
<p><code class="docutils literal notranslate"><span class="pre">COLUMN_FILTER_SHUFFLE</span></code>, <code class="docutils literal notranslate"><span class="pre">COLUMN_FILTER_BYTE_DELTA</span></code>, <code class="docutils literal notranslate"><span class="pre">COMPRESS_FILTER_TRUNCATE_PRECISION_1BYTE</span></code>, <code class="docutils literal notranslate"><span class="pre">COMPRESS_FILTER_TRUNCATE_PRECISION_2BYTES</span></code>フラグがBloscを要求します。</p>
</li>
<li><p>[<a class="reference internal" href="../reference/commands/status.html"><span class="doc">status</span></a>] <code class="docutils literal notranslate"><span class="pre">status</span></code> コマンドの出力に新しく <code class="docutils literal notranslate"><span class="pre">&quot;blosc&quot;</span></code> を追加しました。</p></li>
<li><p>[<a class="reference internal" href="../reference/executables/groonga.html"><span class="doc">groonga 実行ファイル</span></a>] <code class="docutils literal notranslate"><span class="pre">groonga</span> <span class="pre">--version</span></code> の出力に新しく <code class="docutils literal notranslate"><span class="pre">blosc</span></code> を追加しました。</p></li>
<li><p>[<a class="reference internal" href="../reference/commands/select.html"><span class="doc">select</span></a>] <code class="docutils literal notranslate"><span class="pre">select</span></code> の引数に新しく <code class="docutils literal notranslate"><span class="pre">--fuzzy_max_distance</span></code> を追加しました。(実験的)</p></li>
<li><p>[<a class="reference internal" href="../reference/commands/select.html"><span class="doc">select</span></a>] <code class="docutils literal notranslate"><span class="pre">select</span></code> コマンドの引数に新しく <code class="docutils literal notranslate"><span class="pre">--fuzzy_max_expansions</span></code> を追加しました。(実験的)</p></li>
<li><p>[<a class="reference internal" href="../reference/commands/select.html"><span class="doc">select</span></a>] <code class="docutils literal notranslate"><span class="pre">select</span></code> コマンドの引数に新しく <code class="docutils literal notranslate"><span class="pre">--fuzzy_max_distance_ratio</span></code> を追加しました。(実験的)</p></li>
<li><p>[<a class="reference internal" href="../reference/commands/select.html"><span class="doc">select</span></a>] <code class="docutils literal notranslate"><span class="pre">select</span></code> コマンドの引数に新しく <code class="docutils literal notranslate"><span class="pre">--fuzzy_prefix_length</span></code> を追加しました。(実験的)</p></li>
<li><p>[cast] <code class="docutils literal notranslate"><span class="pre">&quot;[0.0,</span> <span class="pre">1.0,</span> <span class="pre">1.1,</span> <span class="pre">...]&quot;</span></code> を <code class="docutils literal notranslate"><span class="pre">Float</span></code>/<code class="docutils literal notranslate"><span class="pre">Float32</span></code> のベクターへキャストできるようにしました。</p></li>
<li><p>[fuzzy_search] <code class="docutils literal notranslate"><span class="pre">max_expansion</span></code> オプションの名前を <code class="docutils literal notranslate"><span class="pre">max_expansions</span></code> に変更しました。</p>
<p><code class="docutils literal notranslate"><span class="pre">max_expansion</span></code> option はこのリリースから非推奨になりますが、後方互換性を維持するために引き続き使えるようにしています。</p>
</li>
<li><p>master ブランチの名前を main に変更しました。</p></li>
<li><p>[RPM] CMakeを使ってビルドするようにしました。</p></li>
<li><p>[Debian] Debian trixie をサポートしました。</p></li>
</ul>
</section>
<section id="id6">
<h3>修正<a class="headerlink" href="#id6" title="Link to this heading">#</a></h3>
<ul>
<li><p>[fuzzy_search] ヒットしないはずのレコードがヒットすることがある問題を修正しました。</p></li>
<li><p>[<a class="reference internal" href="../reference/grn_expr/query_syntax.html#query-syntax-near-phrase-search-condition"><span class="std std-ref">近傍フレーズ検索条件</span></a>][<a class="reference internal" href="../reference/grn_expr/script_syntax.html#script-syntax-near-phrase-search-operator"><span class="std std-ref">近傍フレーズ検索演算子</span></a>] 以下のように、最初のフレーズグループに何もマッチしない時にGroongaがクラッシュする問題を修正しました。</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">table_create</span> <span class="n">Entries</span> <span class="n">TABLE_NO_KEY</span>
<span class="n">column_create</span> <span class="n">Entries</span> <span class="n">content</span> <span class="n">COLUMN_SCALAR</span> <span class="n">Text</span>
<span class="n">table_create</span> <span class="n">Terms</span> <span class="n">TABLE_PAT_KEY</span> <span class="n">ShortText</span> \
  <span class="o">--</span><span class="n">default_tokenizer</span> <span class="n">TokenNgram</span> \
  <span class="o">--</span><span class="n">normalizer</span> <span class="n">NormalizerNFKC121</span>
<span class="n">column_create</span> <span class="n">Terms</span> <span class="n">entries_content</span> <span class="n">COLUMN_INDEX</span><span class="o">|</span><span class="n">WITH_POSITION</span> \
  <span class="n">Entries</span> <span class="n">content</span>
<span class="n">load</span> <span class="o">--</span><span class="n">table</span> <span class="n">Entries</span>
<span class="p">[</span>
<span class="p">{</span><span class="s2">&quot;content&quot;</span><span class="p">:</span> <span class="s2">&quot;x y z&quot;</span><span class="p">}</span>
<span class="p">]</span>
<span class="n">select</span> <span class="n">Entries</span> \
  <span class="o">--</span><span class="n">match_columns</span> <span class="n">Terms</span><span class="o">.</span><span class="n">entries_content</span><span class="o">.</span><span class="n">content</span> \
  <span class="o">--</span><span class="n">query</span> <span class="s1">&#39;*NPP1&quot;(NONEXISTENT) (z)&quot;&#39;</span> \
  <span class="o">--</span><span class="n">output_columns</span> <span class="s1">&#39;_score, content&#39;</span>
</pre></div>
</div>
</li>
</ul>
</section>
</section>
<section id="release-13-0-7-2023-09-12">
<span id="release-13-0-7"></span><h2>13.0.7リリース - 2023-09-12<a class="headerlink" href="#release-13-0-7-2023-09-12" title="Link to this heading">#</a></h2>
<section id="id7">
<h3>修正<a class="headerlink" href="#id7" title="Link to this heading">#</a></h3>
<ul>
<li><p>[<a class="reference internal" href="../reference/commands/normalize.html"><span class="doc">normalize</span></a>] <code class="docutils literal notranslate"><span class="pre">normalize</span></code> コマンドで最後の <code class="docutils literal notranslate"><span class="pre">offset</span></code> と <code class="docutils literal notranslate"><span class="pre">type</span></code> が表示されない問題を修正しました。</p>
<p><code class="docutils literal notranslate"><span class="pre">normalize</span></code> コマンドは以下のようにノーマライズ後の文字のオフセットとタイプを表示できますが、最後の<code class="docutils literal notranslate"><span class="pre">offset</span></code>と<code class="docutils literal notranslate"><span class="pre">type</span></code>が表示されていませんでした。</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">table_create</span> <span class="n">Normalizations</span> <span class="n">TABLE_PAT_KEY</span> <span class="n">ShortText</span>
<span class="n">column_create</span> <span class="n">Normalizations</span> <span class="n">normalized</span> <span class="n">COLUMN_SCALAR</span> <span class="n">ShortText</span>
<span class="n">load</span> <span class="o">--</span><span class="n">table</span> <span class="n">Normalizations</span>
<span class="p">[</span>
<span class="p">{</span><span class="s2">&quot;_key&quot;</span><span class="p">:</span> <span class="s2">&quot;あ&quot;</span><span class="p">,</span> <span class="s2">&quot;normalized&quot;</span><span class="p">:</span> <span class="s2">&quot;&lt;あ&gt;&quot;</span><span class="p">}</span>
<span class="p">]</span>

<span class="n">normalize</span>   <span class="s1">&#39;NormalizerNFKC130(&quot;unify_kana&quot;, true, &quot;report_source_offset&quot;, true),    NormalizerTable(&quot;normalized&quot;, &quot;Normalizations.normalized&quot;,                    &quot;report_source_offset&quot;, true)&#39;</span>   <span class="s2">&quot;お あ ａ ア ｉ ｱ オ&quot;</span>   <span class="n">REMOVE_BLANK</span><span class="o">|</span><span class="n">WITH_TYPES</span><span class="o">|</span><span class="n">WITH_CHECKS</span>
<span class="p">[</span>
  <span class="p">[</span>
    <span class="mi">0</span><span class="p">,</span>
    <span class="mf">0.0</span><span class="p">,</span>
    <span class="mf">0.0</span>
  <span class="p">],</span>
  <span class="p">{</span>
    <span class="s2">&quot;normalized&quot;</span><span class="p">:</span> <span class="s2">&quot;お&lt;あ&gt;a&lt;あ&gt;i&lt;あ&gt;お&quot;</span><span class="p">,</span>
    <span class="s2">&quot;types&quot;</span><span class="p">:</span> <span class="p">[</span>
      <span class="s2">&quot;hiragana&quot;</span><span class="p">,</span>
      <span class="s2">&quot;symbol&quot;</span><span class="p">,</span>
      <span class="s2">&quot;hiragana&quot;</span><span class="p">,</span>
      <span class="s2">&quot;symbol&quot;</span><span class="p">,</span>
      <span class="s2">&quot;alpha&quot;</span><span class="p">,</span>
      <span class="s2">&quot;symbol&quot;</span><span class="p">,</span>
      <span class="s2">&quot;hiragana&quot;</span><span class="p">,</span>
      <span class="s2">&quot;symbol&quot;</span><span class="p">,</span>
      <span class="s2">&quot;alpha&quot;</span><span class="p">,</span>
      <span class="s2">&quot;symbol&quot;</span><span class="p">,</span>
      <span class="s2">&quot;hiragana&quot;</span><span class="p">,</span>
      <span class="s2">&quot;symbol&quot;</span><span class="p">,</span>
      <span class="s2">&quot;hiragana&quot;</span>
    <span class="p">],</span>
    <span class="s2">&quot;checks&quot;</span><span class="p">:</span> <span class="p">[</span>
      <span class="mi">3</span><span class="p">,</span>
      <span class="mi">0</span><span class="p">,</span>
      <span class="mi">0</span><span class="p">,</span>
      <span class="mi">4</span><span class="p">,</span>
      <span class="o">-</span><span class="mi">1</span><span class="p">,</span>
      <span class="mi">0</span><span class="p">,</span>
      <span class="mi">0</span><span class="p">,</span>
      <span class="o">-</span><span class="mi">1</span><span class="p">,</span>
      <span class="mi">4</span><span class="p">,</span>
      <span class="mi">4</span><span class="p">,</span>
      <span class="o">-</span><span class="mi">1</span><span class="p">,</span>
      <span class="mi">0</span><span class="p">,</span>
      <span class="mi">0</span><span class="p">,</span>
      <span class="o">-</span><span class="mi">1</span><span class="p">,</span>
      <span class="mi">4</span><span class="p">,</span>
      <span class="mi">4</span><span class="p">,</span>
      <span class="o">-</span><span class="mi">1</span><span class="p">,</span>
      <span class="mi">0</span><span class="p">,</span>
      <span class="mi">0</span><span class="p">,</span>
      <span class="o">-</span><span class="mi">1</span><span class="p">,</span>
      <span class="mi">4</span><span class="p">,</span>
      <span class="mi">0</span><span class="p">,</span>
      <span class="mi">0</span>
    <span class="p">],</span>
    <span class="s2">&quot;offsets&quot;</span><span class="p">:</span> <span class="p">[</span>
      <span class="mi">0</span><span class="p">,</span>
      <span class="mi">4</span><span class="p">,</span>
      <span class="mi">4</span><span class="p">,</span>
      <span class="mi">4</span><span class="p">,</span>
      <span class="mi">8</span><span class="p">,</span>
      <span class="mi">12</span><span class="p">,</span>
      <span class="mi">12</span><span class="p">,</span>
      <span class="mi">12</span><span class="p">,</span>
      <span class="mi">16</span><span class="p">,</span>
      <span class="mi">20</span><span class="p">,</span>
      <span class="mi">20</span><span class="p">,</span>
      <span class="mi">20</span><span class="p">,</span>
      <span class="mi">24</span>
    <span class="p">]</span>
  <span class="p">}</span>
<span class="p">]</span>
</pre></div>
</div>
</li>
<li><p>[<a class="reference internal" href="../reference/normalizers.html"><span class="doc">ノーマライザー</span></a>] 複数のノーマライザーを使用した時に最後の文字のオフセットが不正になることがある問題を修正しました。</p>
<p>例えば以下の例では、最後のオフセットは27が正しいですが、以下の例ではこの問題が原因で17になっています。</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">table_create</span> <span class="n">Normalizations</span> <span class="n">TABLE_PAT_KEY</span> <span class="n">ShortText</span>
<span class="n">column_create</span> <span class="n">Normalizations</span> <span class="n">normalized</span> <span class="n">COLUMN_SCALAR</span> <span class="n">ShortText</span>
<span class="n">load</span> <span class="o">--</span><span class="n">table</span> <span class="n">Normalizations</span>
<span class="p">[</span>
<span class="p">{</span><span class="s2">&quot;_key&quot;</span><span class="p">:</span> <span class="s2">&quot;あ&quot;</span><span class="p">,</span> <span class="s2">&quot;normalized&quot;</span><span class="p">:</span> <span class="s2">&quot;&lt;あ&gt;&quot;</span><span class="p">}</span>
<span class="p">]</span>

<span class="n">normalize</span>   <span class="s1">&#39;NormalizerNFKC130(&quot;unify_kana&quot;, true, &quot;report_source_offset&quot;, true),    NormalizerTable(&quot;normalized&quot;, &quot;Normalizations.normalized&quot;,                    &quot;report_source_offset&quot;, true)&#39;</span>   <span class="s2">&quot;お あ ａ ア ｉ ｱ オ&quot;</span>   <span class="n">REMOVE_BLANK</span><span class="o">|</span><span class="n">WITH_TYPES</span><span class="o">|</span><span class="n">WITH_CHECKS</span>
<span class="p">[</span>
  <span class="p">[</span>
    <span class="mi">0</span><span class="p">,</span>
    <span class="mf">0.0</span><span class="p">,</span>
    <span class="mf">0.0</span>
  <span class="p">],</span>
  <span class="p">{</span>
    <span class="s2">&quot;normalized&quot;</span><span class="p">:</span> <span class="s2">&quot;お&lt;あ&gt;a&lt;あ&gt;i&lt;あ&gt;お&quot;</span><span class="p">,</span>
    <span class="s2">&quot;types&quot;</span><span class="p">:</span> <span class="p">[</span>
      <span class="s2">&quot;hiragana&quot;</span><span class="p">,</span>
      <span class="s2">&quot;symbol&quot;</span><span class="p">,</span>
      <span class="s2">&quot;hiragana&quot;</span><span class="p">,</span>
      <span class="s2">&quot;symbol&quot;</span><span class="p">,</span>
      <span class="s2">&quot;alpha&quot;</span><span class="p">,</span>
      <span class="s2">&quot;symbol&quot;</span><span class="p">,</span>
      <span class="s2">&quot;hiragana&quot;</span><span class="p">,</span>
      <span class="s2">&quot;symbol&quot;</span><span class="p">,</span>
      <span class="s2">&quot;alpha&quot;</span><span class="p">,</span>
      <span class="s2">&quot;symbol&quot;</span><span class="p">,</span>
      <span class="s2">&quot;hiragana&quot;</span><span class="p">,</span>
      <span class="s2">&quot;symbol&quot;</span><span class="p">,</span>
      <span class="s2">&quot;hiragana&quot;</span><span class="p">,</span>
      <span class="s2">&quot;null&quot;</span>
    <span class="p">],</span>
    <span class="s2">&quot;checks&quot;</span><span class="p">:</span> <span class="p">[</span>
      <span class="mi">3</span><span class="p">,</span>
      <span class="mi">0</span><span class="p">,</span>
      <span class="mi">0</span><span class="p">,</span>
      <span class="mi">4</span><span class="p">,</span>
      <span class="o">-</span><span class="mi">1</span><span class="p">,</span>
      <span class="mi">0</span><span class="p">,</span>
      <span class="mi">0</span><span class="p">,</span>
      <span class="o">-</span><span class="mi">1</span><span class="p">,</span>
      <span class="mi">4</span><span class="p">,</span>
      <span class="mi">4</span><span class="p">,</span>
      <span class="o">-</span><span class="mi">1</span><span class="p">,</span>
      <span class="mi">0</span><span class="p">,</span>
      <span class="mi">0</span><span class="p">,</span>
      <span class="o">-</span><span class="mi">1</span><span class="p">,</span>
      <span class="mi">4</span><span class="p">,</span>
      <span class="mi">4</span><span class="p">,</span>
      <span class="o">-</span><span class="mi">1</span><span class="p">,</span>
      <span class="mi">0</span><span class="p">,</span>
      <span class="mi">0</span><span class="p">,</span>
      <span class="o">-</span><span class="mi">1</span><span class="p">,</span>
      <span class="mi">4</span><span class="p">,</span>
      <span class="mi">0</span><span class="p">,</span>
      <span class="mi">0</span>
    <span class="p">],</span>
    <span class="s2">&quot;offsets&quot;</span><span class="p">:</span> <span class="p">[</span>
      <span class="mi">0</span><span class="p">,</span>
      <span class="mi">4</span><span class="p">,</span>
      <span class="mi">4</span><span class="p">,</span>
      <span class="mi">4</span><span class="p">,</span>
      <span class="mi">8</span><span class="p">,</span>
      <span class="mi">12</span><span class="p">,</span>
      <span class="mi">12</span><span class="p">,</span>
      <span class="mi">12</span><span class="p">,</span>
      <span class="mi">16</span><span class="p">,</span>
      <span class="mi">20</span><span class="p">,</span>
      <span class="mi">20</span><span class="p">,</span>
      <span class="mi">20</span><span class="p">,</span>
      <span class="mi">24</span><span class="p">,</span>
      <span class="mi">17</span>
    <span class="p">]</span>
  <span class="p">}</span>
<span class="p">]</span>
</pre></div>
</div>
</li>
</ul>
</section>
</section>
<section id="release-13-0-6-2023-08-31">
<span id="release-13-0-6"></span><h2>13.0.6リリース - 2023-08-31<a class="headerlink" href="#release-13-0-6-2023-08-31" title="Link to this heading">#</a></h2>
<section id="id8">
<h3>改良<a class="headerlink" href="#id8" title="Link to this heading">#</a></h3>
<ul>
<li><p>[<a class="reference internal" href="../reference/functions/highlight_html.html"><span class="doc">highlight_html</span></a>] 以下のように <code class="docutils literal notranslate"><span class="pre">highlight_html()</span></code> に空文字列を指定してもエラーを報告しなくなりました。</p>
<p><code class="docutils literal notranslate"><span class="pre">highlight_html()</span></code> は空のテキストを返します。</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">table_create</span> <span class="n">Entries</span> <span class="n">TABLE_NO_KEY</span>
<span class="n">column_create</span> <span class="n">Entries</span> <span class="n">body</span> <span class="n">COLUMN_SCALAR</span> <span class="n">ShortText</span>

<span class="n">table_create</span> <span class="n">Terms</span> <span class="n">TABLE_PAT_KEY</span> <span class="n">ShortText</span> \
  <span class="o">--</span><span class="n">default_tokenizer</span> <span class="s1">&#39;TokenNgram(&quot;report_source_location&quot;, true)&#39;</span> \
  <span class="o">--</span><span class="n">normalizer</span> <span class="s1">&#39;NormalizerNFKC150&#39;</span>
<span class="n">column_create</span> <span class="n">Terms</span> <span class="n">document_index</span> <span class="n">COLUMN_INDEX</span><span class="o">|</span><span class="n">WITH_POSITION</span> <span class="n">Entries</span> <span class="n">body</span>

<span class="n">load</span> <span class="o">--</span><span class="n">table</span> <span class="n">Entries</span>
<span class="p">[</span>
<span class="p">{</span><span class="s2">&quot;body&quot;</span><span class="p">:</span> <span class="s2">&quot;ab cd ed gh&quot;</span><span class="p">}</span>
<span class="p">]</span>

<span class="n">select</span> <span class="n">Entries</span> \
  <span class="o">--</span><span class="n">match_columns</span> <span class="n">body</span> \
  <span class="o">--</span><span class="n">query</span> <span class="s1">&#39;ab&#39;</span> \
  <span class="o">--</span><span class="n">output_columns</span> <span class="s1">&#39;highlight_html(&quot;&quot;, Terms)&#39;</span>
<span class="p">[</span>
  <span class="p">[</span>
    <span class="mi">0</span><span class="p">,</span>
    <span class="mf">0.0</span><span class="p">,</span>
    <span class="mf">0.0</span>
  <span class="p">],</span>
  <span class="p">[</span>
    <span class="p">[</span>
      <span class="p">[</span>
        <span class="mi">1</span>
      <span class="p">],</span>
      <span class="p">[</span>
        <span class="p">[</span>
          <span class="s2">&quot;highlight_html&quot;</span><span class="p">,</span><span class="n">null</span>
        <span class="p">]</span>
      <span class="p">],</span>
      <span class="p">[</span>
        <span class="s2">&quot;&quot;</span>
      <span class="p">]</span>
    <span class="p">]</span>
  <span class="p">]</span>
<span class="p">]</span>
</pre></div>
</div>
</li>
<li><p>動的カラムや疑似カラムを対象に <code class="docutils literal notranslate"><span class="pre">aggregator_*</span></code> を使えるようになりました。</p>
<p>疑似カラムとは、 <code class="docutils literal notranslate"><span class="pre">_</span></code> で始まるカラムのことです。(例： <code class="docutils literal notranslate"><span class="pre">_id</span></code>, <code class="docutils literal notranslate"><span class="pre">_nsubrecs</span></code>, ...)</p>
</li>
</ul>
</section>
<section id="id9">
<h3>修正<a class="headerlink" href="#id9" title="Link to this heading">#</a></h3>
<ul>
<li><p>[CMake] msgpack と msgpackc-cxx の両方がインストールされている環境でCMakeによるビルドが失敗する問題を修正しました。</p>
<p>詳細については、 <a class="github reference external" href="https://github.com/groonga/groonga/pull/1601">groonga/groonga#1601</a> のコメントを参照してください。</p>
</li>
<li><p><code class="docutils literal notranslate"><span class="pre">x</span> <span class="pre">OR</span> <span class="pre">&lt;0.0y</span></code> と <code class="docutils literal notranslate"><span class="pre">QUERY_NO_SYNTAX_ERROR</span></code> を使った時に式を正しくパースできない問題を修正しました。</p>
<p>マッチするはずのレコードがマッチしなくなることがあります。</p>
<p>例えば、以下のようなクエリーを実行した場合、<code class="docutils literal notranslate"><span class="pre">{&quot;_key&quot;:</span> <span class="pre">&quot;name</span> <span class="pre">yyy&quot;}</span></code> はマッチするはずですが、マッチしません。</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">table_create</span> <span class="n">Names</span> <span class="n">TABLE_PAT_KEY</span> <span class="n">ShortText</span>
<span class="n">table_create</span> <span class="n">Tokens</span> <span class="n">TABLE_PAT_KEY</span> <span class="n">ShortText</span> \
  <span class="o">--</span><span class="n">default_tokenizer</span> <span class="n">TokenBigram</span> \
  <span class="o">--</span><span class="n">normalizer</span> <span class="n">NormalizerAuto</span>
<span class="n">column_create</span> <span class="n">Tokens</span> <span class="n">names_key</span> <span class="n">COLUMN_INDEX</span><span class="o">|</span><span class="n">WITH_POSITION</span> <span class="n">Names</span> <span class="n">_key</span>

<span class="n">load</span> <span class="o">--</span><span class="n">table</span> <span class="n">Names</span>
<span class="p">[</span>
<span class="p">{</span><span class="s2">&quot;_key&quot;</span><span class="p">:</span> <span class="s2">&quot;name yyy&quot;</span><span class="p">}</span>
<span class="p">]</span>

<span class="n">select</span> <span class="n">Names</span> \
  <span class="o">--</span><span class="n">match_columns</span> <span class="s2">&quot;_key&quot;</span> \
  <span class="o">--</span><span class="n">query</span> <span class="s2">&quot;xxx OR &lt;0.0yyy&quot;</span> \
  <span class="o">--</span><span class="n">query_flags</span> <span class="n">ALLOW_PRAGMA</span><span class="o">|</span><span class="n">ALLOW_COLUMN</span><span class="o">|</span><span class="n">QUERY_NO_SYNTAX_ERROR</span>
<span class="p">[</span>
  <span class="p">[</span>
    <span class="mi">0</span><span class="p">,</span>
    <span class="mf">0.0</span><span class="p">,</span>
    <span class="mf">0.0</span>
  <span class="p">],</span>
  <span class="p">[</span>
    <span class="p">[</span>
      <span class="p">[</span>
        <span class="mi">0</span>
      <span class="p">],</span>
      <span class="p">[</span>
        <span class="p">[</span>
          <span class="s2">&quot;_id&quot;</span><span class="p">,</span>
          <span class="s2">&quot;UInt32&quot;</span>
        <span class="p">],</span>
        <span class="p">[</span>
          <span class="s2">&quot;_key&quot;</span><span class="p">,</span>
          <span class="s2">&quot;ShortText&quot;</span>
        <span class="p">]</span>
      <span class="p">]</span>
    <span class="p">]</span>
  <span class="p">]</span>
<span class="p">]</span>
</pre></div>
</div>
</li>
<li><p>[<a class="reference internal" href="../reference/functions/highlight_html.html"><span class="doc">highlight_html</span></a>] ハイライト位置が正しくないことがある問題を修正しました。</p>
<p>例えば、ハイライト対象に文字数が1のキーワードと文字数が2のキーワードを両方指定した時に発生します。</p>
</li>
</ul>
</section>
</section>
<section id="release-13-0-5-2023-08-02">
<span id="release-13-0-5"></span><h2>13.0.5リリース - 2023-08-02<a class="headerlink" href="#release-13-0-5-2023-08-02" title="Link to this heading">#</a></h2>
<section id="id10">
<h3>修正<a class="headerlink" href="#id10" title="Link to this heading">#</a></h3>
<ul>
<li><p>インデックス構築に失敗することがある問題を修正しました。</p>
<p>この問題は、Groonga v13.0.2, v13.0.3, v13.0.4 に存在します。したがって、これらのバージョンを使用している場合は、 Groonga v13.0.5 以降を使用することを強くおすすめします。</p>
</li>
<li><p>[<a class="reference internal" href="../reference/grn_expr/query_syntax.html#query-syntax-near-phrase-search-condition"><span class="std std-ref">近傍フレーズ検索条件</span></a>][<a class="reference internal" href="../reference/grn_expr/script_syntax.html#script-syntax-near-phrase-search-operator"><span class="std std-ref">近傍フレーズ検索演算子</span></a>] 各近傍フレーズ検索で、無効なシンタックスのクエリーを指定した時にGroongaがクラッシュすることがある問題を修正しました。</p>
<p>例えば、以下のケースでは本来エラーになるべきですが、この問題があるとクラッシュします。(&quot;--query&quot;の値に閉じカッコが一つ多い点に着目してください。)</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">table_create</span> <span class="n">Entries</span> <span class="n">TABLE_NO_KEY</span>
<span class="p">[[</span><span class="mi">0</span><span class="p">,</span><span class="mf">0.0</span><span class="p">,</span><span class="mf">0.0</span><span class="p">],</span><span class="n">true</span><span class="p">]</span>
<span class="n">column_create</span> <span class="n">Entries</span> <span class="n">content</span> <span class="n">COLUMN_SCALAR</span> <span class="n">Text</span>
<span class="p">[[</span><span class="mi">0</span><span class="p">,</span><span class="mf">0.0</span><span class="p">,</span><span class="mf">0.0</span><span class="p">],</span><span class="n">true</span><span class="p">]</span>
<span class="n">table_create</span> <span class="n">Terms</span> <span class="n">TABLE_PAT_KEY</span> <span class="n">ShortText</span>   <span class="o">--</span><span class="n">default_tokenizer</span> <span class="n">TokenNgram</span>   <span class="o">--</span><span class="n">normalizer</span> <span class="n">NormalizerNFKC121</span>
<span class="p">[[</span><span class="mi">0</span><span class="p">,</span><span class="mf">0.0</span><span class="p">,</span><span class="mf">0.0</span><span class="p">],</span><span class="n">true</span><span class="p">]</span>
<span class="n">column_create</span> <span class="n">Terms</span> <span class="n">entries_content</span> <span class="n">COLUMN_INDEX</span><span class="o">|</span><span class="n">WITH_POSITION</span> <span class="n">Entries</span> <span class="n">content</span>
<span class="p">[[</span><span class="mi">0</span><span class="p">,</span><span class="mf">0.0</span><span class="p">,</span><span class="mf">0.0</span><span class="p">],</span><span class="n">true</span><span class="p">]</span>
<span class="n">load</span> <span class="o">--</span><span class="n">table</span> <span class="n">Entries</span>
<span class="p">[</span>
<span class="p">{</span><span class="s2">&quot;content&quot;</span><span class="p">:</span> <span class="s2">&quot;a b c&quot;</span><span class="p">}</span>
<span class="p">]</span>
<span class="p">[[</span><span class="mi">0</span><span class="p">,</span><span class="mf">0.0</span><span class="p">,</span><span class="mf">0.0</span><span class="p">],</span><span class="mi">1</span><span class="p">]</span>
<span class="n">select</span> <span class="n">Entries</span>   <span class="o">--</span><span class="n">match_columns</span> <span class="n">content</span>   <span class="o">--</span><span class="n">query</span> <span class="s1">&#39;*NPP2&quot;(a b))&quot;&#39;</span>   <span class="o">--</span><span class="n">output_columns</span> <span class="s1">&#39;_score, content&#39;</span>
</pre></div>
</div>
</li>
</ul>
</section>
</section>
<section id="release-13-0-4-2023-07-26">
<span id="release-13-0-4"></span><h2>13.0.4リリース - 2023-07-26<a class="headerlink" href="#release-13-0-4-2023-07-26" title="Link to this heading">#</a></h2>
<section id="id11">
<h3>改良<a class="headerlink" href="#id11" title="Link to this heading">#</a></h3>
<ul class="simple">
<li><p>[<a class="reference internal" href="../install/windows.html"><span class="doc">Windows</span></a>] 32-bit版パッケージの提供をやめました。</p></li>
</ul>
</section>
<section id="id12">
<h3>修正<a class="headerlink" href="#id12" title="Link to this heading">#</a></h3>
<ul class="simple">
<li><p>[<a class="reference internal" href="../install/debian.html"><span class="doc">Debian GNU/Linux</span></a>] [<a class="reference internal" href="../install/ubuntu.html"><span class="doc">Ubuntu</span></a>] <a class="reference internal" href="../reference/query_expanders/tsv.html"><span class="doc">QueryExpanderTSV</span></a>のデフォルトの設定ファイルのパスを修正しました。</p></li>
<li><p>[CMake] CMake 3.16または3.17を使っている場合にエラーになることがある問題を修正しました。</p></li>
</ul>
</section>
</section>
<section id="release-13-0-3-2023-07-24">
<span id="release-13-0-3"></span><h2>13.0.3リリース - 2023-07-24<a class="headerlink" href="#release-13-0-3-2023-07-24" title="Link to this heading">#</a></h2>
<section id="id13">
<h3>改良<a class="headerlink" href="#id13" title="Link to this heading">#</a></h3>
<ul>
<li><p>[<a class="reference internal" href="../reference/executables/groonga-httpd.html"><span class="doc">groonga-httpd</span></a>] <a class="reference external" href="https://github.com/groonga/groonga-nginx">groonga-nginx</a>に切り出されました。<code class="docutils literal notranslate"><span class="pre">groonga-httpd</span></code>パッケージの提供をやめました。</p>
<p>Debian GNU/Linux 12以降あるいはUbuntu 23.10以降のユーザーはデフォルトの<code class="docutils literal notranslate"><span class="pre">nginx</span></code>パッケージと一緒に使える<code class="docutils literal notranslate"><span class="pre">libnginx-mod-http-groonga</span></code>パッケージを使ってください。詳細は<a class="reference external" href="https://github.com/groonga/groonga-nginx#readme">groonga-nginxのREADME</a>を参照してください。</p>
<p>古いDebian/UbuntuまたはRHEL関連ディストリビューションのユーザーは<code class="docutils literal notranslate"><span class="pre">groonga-httpd</span></code>相当のパッケージを使うことはできません。代わりに<a class="reference internal" href="../reference/executables/groonga-server-http.html"><span class="doc">Groonga HTTPサーバー</span></a>を使うことができます。もし、<a class="reference internal" href="../reference/executables/groonga-server-http.html"><span class="doc">Groonga HTTPサーバー</span></a>があなたのユースケースでは適切ではない場合、あなたのユースケース付きで<a class="reference external" href="https://github.com/groonga/groonga/discussions">Discussions</a>に報告してください。</p>
</li>
<li><p>[<a class="reference internal" href="../install/ubuntu.html"><span class="doc">Ubuntu</span></a>] Ubuntu 23.10（Mantic Minotaur）をサポートしました。</p></li>
<li><p>[<a class="reference internal" href="../install/debian.html"><span class="doc">Debian GNU/Linux</span></a>] xxHashサポートを有効にしました。</p></li>
<li><p>[<a class="reference internal" href="../install/ubuntu.html"><span class="doc">Ubuntu</span></a>] xxHashサポートを有効にしました。</p></li>
</ul>
</section>
<section id="id14">
<h3>修正<a class="headerlink" href="#id14" title="Link to this heading">#</a></h3>
<ul class="simple">
<li><p>ソースアーカイブがCMakeでビルドできない問題を修正しました。</p></li>
</ul>
</section>
</section>
<section id="release-13-0-2-2023-07-12">
<span id="release-13-0-2"></span><h2>13.0.2リリース - 2023-07-12<a class="headerlink" href="#release-13-0-2-2023-07-12" title="Link to this heading">#</a></h2>
<section id="id15">
<h3>改良<a class="headerlink" href="#id15" title="Link to this heading">#</a></h3>
<ul>
<li><p>[<a class="reference internal" href="../install/ubuntu.html"><span class="doc">Ubuntu</span></a>] Ubuntu 18.04（Bionic Beaver）のサポートをやめました。</p></li>
<li><p>[<a class="reference internal" href="../install/ubuntu.html"><span class="doc">Ubuntu</span></a>] Ubuntu 23.04（Lunar Lobster）をサポートしました。</p></li>
<li><p>[<a class="reference internal" href="../install/debian.html"><span class="doc">Debian GNU/Linux</span></a>] Debian 12 (bookworm) をサポートしました。</p></li>
<li><p>[Oracle Linux] Oracle Linuxサポートをやめました。代わりに <a class="reference internal" href="../install/almalinux.html"><span class="doc">AlmaLinux</span></a> 用パッケージを使ってください。</p></li>
<li><p>[<code class="docutils literal notranslate"><span class="pre">grn_highlighter</span></code>] タグの変更をサポートしました。</p>
<p><a class="reference external" href="https://github.com/groonga/groonga/issues/1453%3E">GH-1453</a> [askdkcさんが報告]</p>
</li>
<li><p>[<code class="docutils literal notranslate"><span class="pre">grn_highlighter</span></code>] ノーマライザーの変更をサポートしました。</p></li>
<li><p>[<code class="docutils literal notranslate"><span class="pre">grn_highlighter</span></code>] HTMLモードの変更をサポートしました。</p></li>
<li><p>[<code class="docutils literal notranslate"><span class="pre">grn_highlighter</span></code>] 複数タグをサポートしました。</p></li>
<li><p>[<a class="reference internal" href="../reference/functions/highlight.html"><span class="doc">highlight</span></a>] <code class="docutils literal notranslate"><span class="pre">sequential_class_tag_mode</span></code> オプションを追加しました。</p></li>
<li><p>[<a class="reference internal" href="../reference/functions/highlight_html.html"><span class="doc">highlight_html</span></a>] <code class="docutils literal notranslate"><span class="pre">sequential_class_tag_mode</span></code> オプションを追加しました。</p></li>
<li><p>[<a class="reference internal" href="../reference/commands/reference_acquire.html"><span class="doc">reference_acquire</span></a>] <code class="docutils literal notranslate"><span class="pre">--recursive</span> <span class="pre">dependent</span></code> が使われたときに対象オブジェクト用のインデックスカラムも参照するように変更しました。</p>
<p>対象オブジェクトがカラムの場合、そのカラム用のインデックスカラムも参照されます。</p>
<p>対象オブジェクトがテーブルの場合、そのテーブル用のインデックスカラムも参照されます。</p>
<p>対象オブジェクトがDBの場合、すべてのテーブルが対象オブジェクトになります。</p>
</li>
<li><p>[CMake] CMake 3.16以降を必須としました。近い将来、GNU AutotoolsではなくCMakeを推奨ビルドツールとし、いずれGNU Autotoolsサポートをやめる予定です。</p></li>
<li><p>[CMake] CMakeパッケージに対応しました。 <code class="docutils literal notranslate"><span class="pre">find_package(Groonga)</span></code> というように使えます。</p></li>
<li><p>[Packaging] ソースアーカイブ中の <code class="docutils literal notranslate"><span class="pre">configure</span></code> を生成しているGNU Autotoolsを更新しました。</p>
<p>[<code class="docutils literal notranslate"><span class="pre">ranguba/rroonga#220</span> <span class="pre">&lt;https://github.com/ranguba/rroonga/issues/220&gt;</span></code>_] [ZangRuochenさんが報告]</p>
</li>
<li><p>[<a class="reference internal" href="../reference/commands/reference_acquire.html"><span class="doc">reference_acquire</span></a>] 組み込みオブジェクト用のリファレンスカウント実装を最適化しました。</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">SIGABRT</span></code> 発生時もバックトレースのログ出力するようにしました。</p></li>
</ul>
</section>
<section id="id16">
<h3>修正<a class="headerlink" href="#id16" title="Link to this heading">#</a></h3>
<ul>
<li><p>[<a class="reference internal" href="../reference/grn_expr/query_syntax.html#query-syntax-ordered-near-phrase-product-search-condition"><span class="std std-ref">順序付き近傍フレーズ直積検索条件</span></a>] [<a class="reference internal" href="../reference/grn_expr/script_syntax.html#script-syntax-ordered-near-phrase-product-search-operator"><span class="std std-ref">順序付き近傍フレーズ直積検索演算子</span></a>] マッチするべきレコードがマッチしないことがある問題を修正しました。</p>
<p>この問題は、クエリー内に3つ以上トークンがあり、かつ、それらがオーバーラップしているときに発生します。たとえば、 <code class="docutils literal notranslate"><span class="pre">abc</span></code> と <code class="docutils literal notranslate"><span class="pre">abcd</span></code> はうまく動かない組み合わせです。もし、短い方（ <code class="docutils literal notranslate"><span class="pre">abc</span></code> ）が長い方（ <code class="docutils literal notranslate"><span class="pre">abcd</span></code> ）より前にある場合はこの問題は発生しません。たとえば、 <code class="docutils literal notranslate"><span class="pre">ONPP1</span> <span class="pre">&quot;(abcd</span> <span class="pre">abc)</span> <span class="pre">(1</span> <span class="pre">2)&quot;</span></code> は動きますが、 <code class="docutils literal notranslate"><span class="pre">ONPP1</span> <span class="pre">&quot;(abc</span> <span class="pre">abcd)</span> <span class="pre">(1</span> <span class="pre">2)&quot;</span></code> は動きません。</p>
</li>
<li><p>複数の重み調整演算子を使った場合、不正な重みが使われることがある問題を修正しました。</p></li>
<li><p>[<a class="reference internal" href="../reference/grn_expr/query_syntax.html"><span class="doc">クエリー構文</span></a>] 誤字を修正しました。</p>
<p>[<code class="docutils literal notranslate"><span class="pre">GH-1560</span> <span class="pre">&lt;https://github.com/groonga/groonga/issues/1560&gt;</span></code>_] [Dylan Golowさんがパッチ提供]</p>
</li>
<li><p>[<a class="reference internal" href="../reference/grn_expr/query_syntax.html#query-syntax-near-phrase-search-condition"><span class="std std-ref">近傍フレーズ検索条件</span></a>] [<a class="reference internal" href="../reference/grn_expr/script_syntax.html#script-syntax-near-phrase-search-operator"><span class="std std-ref">近傍フレーズ検索演算子</span></a>] [<a class="reference internal" href="../reference/grn_expr/query_syntax.html#query-syntax-near-phrase-product-search-condition"><span class="std std-ref">近傍フレーズ直積検索条件</span></a>] [<a class="reference internal" href="../reference/grn_expr/script_syntax.html#script-syntax-near-phrase-product-search-operator"><span class="std std-ref">近傍フレーズ直積検索演算子</span></a>] [<a class="reference internal" href="../reference/grn_expr/query_syntax.html#query-syntax-ordered-near-phrase-search-condition"><span class="std std-ref">順序付き近傍フレーズ検索条件</span></a>] [<a class="reference internal" href="../reference/grn_expr/script_syntax.html#script-syntax-ordered-near-phrase-search-operator"><span class="std std-ref">順序付き近傍フレーズ検索演算子</span></a>] [<a class="reference internal" href="../reference/grn_expr/query_syntax.html#query-syntax-ordered-near-phrase-product-search-condition"><span class="std std-ref">順序付き近傍フレーズ直積検索条件</span></a>] [<a class="reference internal" href="../reference/grn_expr/script_syntax.html#script-syntax-ordered-near-phrase-product-search-operator"><span class="std std-ref">順序付き近傍フレーズ直積検索演算子</span></a>] <code class="docutils literal notranslate"><span class="pre">additional_last_interval</span></code> を使っている場合、距離の計算が間違っている問題を修正しました。</p>
<p>たとえば、 <code class="docutils literal notranslate"><span class="pre">aaaxxxbbbcdefghi.</span></code> に対して <code class="docutils literal notranslate"><span class="pre">*NP3,-1&quot;aaa</span> <span class="pre">bbb</span> <span class="pre">.$&quot;</span></code> で検索するケースを考えます。このケースでは <code class="docutils literal notranslate"><span class="pre">aaa</span></code> と <code class="docutils literal notranslate"><span class="pre">bbb</span></code> の間のトークン数は3であるべきですが7になっていました。</p>
</li>
<li><p>[<a class="reference internal" href="../reference/grn_expr/query_syntax.html#query-syntax-near-phrase-product-search-condition"><span class="std std-ref">近傍フレーズ直積検索条件</span></a>] [<a class="reference internal" href="../reference/grn_expr/script_syntax.html#script-syntax-near-phrase-product-search-operator"><span class="std std-ref">近傍フレーズ直積検索演算子</span></a>] [<a class="reference internal" href="../reference/grn_expr/query_syntax.html#query-syntax-ordered-near-phrase-product-search-condition"><span class="std std-ref">順序付き近傍フレーズ直積検索条件</span></a>] [<a class="reference internal" href="../reference/grn_expr/script_syntax.html#script-syntax-ordered-near-phrase-product-search-operator"><span class="std std-ref">順序付き近傍フレーズ直積検索演算子</span></a>] 同じフレーズグループ内に同じフレーズが存在するときに無限ループする問題を修正しました。</p>
<p>たとえば、 <code class="docutils literal notranslate"><span class="pre">*NPP1</span> <span class="pre">&quot;(abcd</span> <span class="pre">abc</span> <span class="pre">abcd</span> <span class="pre">bcde)</span> <span class="pre">(efghi)&quot;</span></code> は問題が発生するクエリーです。なぜなら最初のフレーズグループ内に2つ <code class="docutils literal notranslate"><span class="pre">abcd</span></code> が存在するからです。</p>
<p>たとえば、 <code class="docutils literal notranslate"><span class="pre">*NPP1</span> <span class="pre">&quot;(abcde</span> <span class="pre">\&quot;abc</span> <span class="pre">de\&quot;)</span> <span class="pre">(efghi)&quot;</span></code> は問題が発生するクエリーです。なぜなら最初のフレーズグループ内に <code class="docutils literal notranslate"><span class="pre">abcde</span></code> と <code class="docutils literal notranslate"><span class="pre">&quot;abc</span> <span class="pre">de&quot;</span></code> が存在するからです。これらは「論理的に」同じフレーズです。</p>
</li>
<li><p>ロック獲得に失敗した場合に内部のロックカウントを減らしていない問題を修正しました。通常はこれが問題になることはありません。</p></li>
</ul>
</section>
<section id="id17">
<h3>感謝<a class="headerlink" href="#id17" title="Link to this heading">#</a></h3>
<ul class="simple">
<li><p>askdkcさん</p></li>
<li><p>Dylan Golowさん</p></li>
<li><p>ZangRuochenさん</p></li>
</ul>
</section>
</section>
<section id="release-13-0-1-2023-03-24">
<span id="release-13-0-1"></span><h2>13.0.1リリース - 2023-03-24<a class="headerlink" href="#release-13-0-1-2023-03-24" title="Link to this heading">#</a></h2>
<section id="id18">
<h3>改良<a class="headerlink" href="#id18" title="Link to this heading">#</a></h3>
<ul>
<li><p>[<a class="reference internal" href="../reference/functions/highlight_html.html"><span class="doc">highlight_html</span></a>] 前方一致検索をサポートしました。</p>
<p><code class="docutils literal notranslate"><span class="pre">highlight_html</span></code> で前方一致検索ができるようになりました。</p>
<p>ただし、ハイライトするキーワードは、最初の出現箇所だけでなく、途中および最後の出現箇所もハイライトされます。</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>table_create Tags TABLE_NO_KEY
column_create Tags name COLUMN_SCALAR ShortText

table_create Terms TABLE_PAT_KEY ShortText \
  --normalizer &#39;NormalizerNFKC150&#39;
column_create Terms tags_name COLUMN_INDEX Tags name

load --table Tags
[
{&quot;name&quot;: &quot;Groonga&quot;}
]

select Tags \
  --query &quot;name:^g&quot; \
  --output_columns &quot;highlight_html(name)&quot;
# [
#   [
#     0,
#     0.0,
#     0.0
#   ],
#   [
#     [
#       [
#         1
#       ],
#       [
#         [
#           &quot;highlight_html&quot;,
#           null
#         ]
#       ],
#       [
#         &quot;&lt;span class=\&quot;keyword\&quot;&gt;G&lt;/span&gt;roon&lt;span class=\&quot;keyword\&quot;&gt;g&lt;/span&gt;a&quot;
#       ]
#     ]
#   ]
# ]
</pre></div>
</div>
</li>
<li><p>[<a class="reference internal" href="../reference/normalizers.html"><span class="doc">ノーマライザー</span></a>] <code class="docutils literal notranslate"><span class="pre">NormalizerNFKC*</span></code> に新しいオプションを追加しました。</p>
<ul>
<li><p><code class="docutils literal notranslate"><span class="pre">unify_kana_prolonged_sound_mark</span></code></p>
<p>このオプションによって、長音記号を以下のように正規化できます。</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>ァー -&gt; ァア, アー -&gt; アア, ヵー -&gt; ヵア, カー -&gt; カア, ガー -&gt; ガア, サー -&gt; サア, ザー -&gt; ザア,
ター -&gt; タア, ダー -&gt; ダア, ナー -&gt; ナア, ハー -&gt; ハア, バー -&gt; バア, パー -&gt; パア, マー -&gt; マア,
ャー -&gt; ャア, ヤー -&gt; ヤア, ラー -&gt; ラア, ヮー -&gt; ヮア, ワー -&gt; ワア, ヷー -&gt; ヷア,

ィー -&gt; ィイ, イー -&gt; イイ, キー -&gt; キイ, ギー -&gt; ギイ, シー -&gt; シイ, ジー -&gt; ジイ, チー -&gt; チイ,
ヂー -&gt; ヂイ, ニー -&gt; ニイ, ヒー -&gt; ヒイ, ビー -&gt; ビイ, ピー -&gt; ピイ, ミー -&gt; ミイ, リー -&gt; リイ,
ヰー -&gt; ヰイ, ヸー -&gt; ヸイ,

ゥー -&gt; ゥウ, ウー -&gt; ウウ, クー -&gt; クウ, グー -&gt; グウ, スー -&gt; スウ, ズー -&gt; ズウ, ツー -&gt; ツウ,
ヅー -&gt; ヅウ, ヌー -&gt; ヌウ, フー -&gt; フウ, ブー -&gt; ブウ, プー -&gt; プウ, ムー -&gt; ムウ, ュー -&gt; ュウ,
ユー -&gt; ユウ, ルー -&gt; ルウ, ヱー -&gt; ヱウ, ヴー -&gt; ヴウ,

ェー -&gt; ェエ, エー -&gt; エエ, ヶー -&gt; ヶエ, ケー -&gt; ケエ, ゲー -&gt; ゲエ, セー -&gt; セエ, ゼー -&gt; ゼエ,
テー -&gt; テエ, デー -&gt; デエ, ネー -&gt; ネエ, ヘー -&gt; ヘエ, ベー -&gt; ベエ, ペー -&gt; ペエ, メー -&gt; メエ,
レー -&gt; レエ, ヹー -&gt; ヹエ,

ォー -&gt; ォオ, オー -&gt; オオ, コー -&gt; コオ, ゴー -&gt; ゴオ, ソー -&gt; ソオ, ゾー -&gt; ゾオ, トー -&gt; トオ,
ドー -&gt; ドオ, ノー -&gt; ノオ, ホー -&gt; ホオ, ボー -&gt; ボオ, ポー -&gt; ポオ, モー -&gt; モオ, ョー -&gt; ョオ,
ヨー -&gt; ヨオ, ロー -&gt; ロオ, ヲー -&gt; ヲオ, ヺー -&gt; ヺオ,

ンー -&gt; ンン

ぁー -&gt; ぁあ, あー -&gt; ああ, ゕー -&gt; ゕあ, かー -&gt; かあ, がー -&gt; があ, さー -&gt; さあ, ざー -&gt; ざあ,
たー -&gt; たあ, だー -&gt; だあ, なー -&gt; なあ, はー -&gt; はあ, ばー -&gt; ばあ, ぱー -&gt; ぱあ, まー -&gt; まあ,
ゃー -&gt; ゃあ, やー -&gt; やあ, らー -&gt; らあ, ゎー -&gt; ゎあ, わー -&gt; わあ

ぃー -&gt; ぃい, いー -&gt; いい, きー -&gt; きい, ぎー -&gt; ぎい, しー -&gt; しい, じー -&gt; じい, ちー -&gt; ちい,
ぢー -&gt; ぢい, にー -&gt; にい, ひー -&gt; ひい, びー -&gt; びい, ぴー -&gt; ぴい, みー -&gt; みい, りー -&gt; りい,
ゐー -&gt; ゐい

ぅー -&gt; ぅう, うー -&gt; うう, くー -&gt; くう, ぐー -&gt; ぐう, すー -&gt; すう, ずー -&gt; ずう, つー -&gt; つう,
づー -&gt; づう, ぬー -&gt; ぬう, ふー -&gt; ふう, ぶー -&gt; ぶう, ぷー -&gt; ぷう, むー -&gt; むう, ゅー -&gt; ゅう,
ゆー -&gt; ゆう, るー -&gt; るう, ゑー -&gt; ゑう, ゔー -&gt; ゔう

ぇー -&gt; ぇえ, えー -&gt; ええ, ゖー -&gt; ゖえ, けー -&gt; けえ, げー -&gt; げえ, せー -&gt; せえ, ぜー -&gt; ぜえ,
てー -&gt; てえ, でー -&gt; でえ, ねー -&gt; ねえ, へー -&gt; へえ, べー -&gt; べえ, ぺー -&gt; ぺえ, めー -&gt; めえ,
れー -&gt; れえ

ぉー -&gt; ぉお, おー -&gt; おお, こー -&gt; こお, ごー -&gt; ごお, そー -&gt; そお, ぞー -&gt; ぞお, とー -&gt; とお,
どー -&gt; どお, のー -&gt; のお, ほー -&gt; ほお, ぼー -&gt; ぼお, ぽー -&gt; ぽお, もー -&gt; もお, ょー -&gt; ょお,
よー -&gt; よお, ろー -&gt; ろお, をー -&gt; をお

んー -&gt; んん
</pre></div>
</div>
<p>以下は、 <code class="docutils literal notranslate"><span class="pre">unify_kana_prolonged_sound_mark</span></code> オプションの使用例です。</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>table_create --name Animals --flags TABLE_HASH_KEY --key_type ShortText
column_create --table Animals --name name --type ShortText
column_create --table Animals --name sound --type ShortText
load --table Animals
[
{&quot;_key&quot;:&quot;1&quot;,&quot;name&quot;:&quot;羊&quot;, &quot;sound&quot;:&quot;メーメー&quot;},
]

table_create \
  --name idx_animals_sound \
  --flags TABLE_PAT_KEY \
  --key_type ShortText \
  --default_tokenizer TokenBigram \
  --normalizer &#39;NormalizerNFKC150(&quot;unify_kana_prolonged_sound_mark&quot;, true)&#39;
column_create --table idx_animals_sound --name animals_sound --flags COLUMN_INDEX|WITH_POSITION --type Animals --source sound

select --table Animals --query sound:@メエメエ
# [
#   [
#     0,
#     1677829950.652696,
#     0.01971983909606934
#   ],
#   [
#     [
#       [
#         1
#       ],
#       [
#         [
#           &quot;_id&quot;,
#           &quot;UInt32&quot;
#         ],
#         [
#           &quot;_key&quot;,
#           &quot;ShortText&quot;
#         ],
#         [
#           &quot;name&quot;,
#           &quot;ShortText&quot;
#         ],
#         [
#           &quot;sound&quot;,
#           &quot;ShortText&quot;
#         ]
#       ],
#       [
#         1,
#         &quot;1&quot;,
#         &quot;羊&quot;,
#         &quot;メーメー&quot;
#       ]
#     ]
#   ]
# ]
</pre></div>
</div>
</li>
<li><p><code class="docutils literal notranslate"><span class="pre">unify_kana_hyphen</span></code></p>
<p>このオプションを使うことで、ハイフンを以下のように正規化できます。</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>ァ- -&gt; ァア, ア- -&gt; アア, ヵ- -&gt; ヵア, カ- -&gt; カア, ガ- -&gt; ガア, サ- -&gt; サア, ザ- -&gt; ザア,
タ- -&gt; タア, ダ- -&gt; ダア, ナ- -&gt; ナア, ハ- -&gt; ハア, バ- -&gt; バア, パ- -&gt; パア, マ- -&gt; マア,
ャ- -&gt; ャア, ヤ- -&gt; ヤア, ラ- -&gt; ラア, ヮ- -&gt; ヮア, ワ- -&gt; ワア, ヷ- -&gt; ヷア,

ィ- -&gt; ィイ, イ- -&gt; イイ, キ- -&gt; キイ, ギ- -&gt; ギイ, シ- -&gt; シイ, ジ- -&gt; ジイ, チ- -&gt; チイ,
ヂ- -&gt; ヂイ, ニ- -&gt; ニイ, ヒ- -&gt; ヒイ, ビ- -&gt; ビイ, ピ- -&gt; ピイ, ミ- -&gt; ミイ, リ- -&gt; リイ,
ヰ- -&gt; ヰイ, ヸ- -&gt; ヸイ,

ゥ- -&gt; ゥウ, ウ- -&gt; ウウ, ク- -&gt; クウ, グ- -&gt; グウ, ス- -&gt; スウ, ズ- -&gt; ズウ, ツ- -&gt; ツウ,
ヅ- -&gt; ヅウ, ヌ- -&gt; ヌウ, フ- -&gt; フウ, ブ- -&gt; ブウ, プ- -&gt; プウ, ム- -&gt; ムウ, ュ- -&gt; ュウ,
ユ- -&gt; ユウ, ル- -&gt; ルウ, ヱ- -&gt; ヱウ, ヴ- -&gt; ヴウ,

ェ- -&gt; ェエ, エ- -&gt; エエ, ヶ- -&gt; ヶエ, ケ- -&gt; ケエ, ゲ- -&gt; ゲエ, セ- -&gt; セエ, ゼ- -&gt; ゼエ,
テ- -&gt; テエ, デ- -&gt; デエ, ネ- -&gt; ネエ, ヘ- -&gt; ヘエ, ベ- -&gt; ベエ, ペ- -&gt; ペエ, メ- -&gt; メエ,
レ- -&gt; レエ, ヹ- -&gt; ヹエ,

ォ- -&gt; ォオ, オ- -&gt; オオ, コ- -&gt; コオ, ゴ- -&gt; ゴオ, ソ- -&gt; ソオ, ゾ- -&gt; ゾオ, ト- -&gt; トオ,
ド- -&gt; ドオ, ノ- -&gt; ノオ, ホ- -&gt; ホオ, ボ- -&gt; ボオ, ポ- -&gt; ポオ, モ- -&gt; モオ, ョ- -&gt; ョオ,
ヨ- -&gt; ヨオ, ロ- -&gt; ロオ, ヲ- -&gt; ヲオ, ヺ- -&gt; ヺオ,

ン- -&gt; ンン

ぁ- -&gt; ぁあ, あ- -&gt; ああ, ゕ- -&gt; ゕあ, か- -&gt; かあ, が- -&gt; があ, さ- -&gt; さあ, ざ- -&gt; ざあ,
た- -&gt; たあ, だ- -&gt; だあ, な- -&gt; なあ, は- -&gt; はあ, ば- -&gt; ばあ, ぱ- -&gt; ぱあ, ま- -&gt; まあ,
ゃ- -&gt; ゃあ, や- -&gt; やあ, ら- -&gt; らあ, ゎ- -&gt; ゎあ, わ- -&gt; わあ

ぃ- -&gt; ぃい, い- -&gt; いい, き- -&gt; きい, ぎ- -&gt; ぎい, し- -&gt; しい, じ- -&gt; じい, ち- -&gt; ちい,
ぢ- -&gt; ぢい, に- -&gt; にい, ひ- -&gt; ひい, び- -&gt; びい, ぴ- -&gt; ぴい, み- -&gt; みい, り- -&gt; りい,
ゐ- -&gt; ゐい

ぅ- -&gt; ぅう, う- -&gt; うう, く- -&gt; くう, ぐ- -&gt; ぐう, す- -&gt; すう, ず- -&gt; ずう, つ- -&gt; つう,
づ- -&gt; づう, ぬ- -&gt; ぬう, ふ- -&gt; ふう, ぶ- -&gt; ぶう, ぷ- -&gt; ぷう, む- -&gt; むう, ゅ- -&gt; ゅう,
ゆ- -&gt; ゆう, る- -&gt; るう, ゑ- -&gt; ゑう, ゔ- -&gt; ゔう

ぇ- -&gt; ぇえ, え- -&gt; ええ, ゖ- -&gt; ゖえ, け- -&gt; けえ, げ- -&gt; げえ, せ- -&gt; せえ, ぜ- -&gt; ぜえ,
て- -&gt; てえ, で- -&gt; でえ, ね- -&gt; ねえ, へ- -&gt; へえ, べ- -&gt; べえ, ぺ- -&gt; ぺえ, め- -&gt; めえ,
れ- -&gt; れえ

ぉ- -&gt; ぉお, お- -&gt; おお, こ- -&gt; こお, ご- -&gt; ごお, そ- -&gt; そお, ぞ- -&gt; ぞお, と- -&gt; とお,
ど- -&gt; どお, の- -&gt; のお, ほ- -&gt; ほお, ぼ- -&gt; ぼお, ぽ- -&gt; ぽお, も- -&gt; もお, ょ- -&gt; ょお,
よ- -&gt; よお, ろ- -&gt; ろお, を- -&gt; をお

ん- -&gt; んん
</pre></div>
</div>
<p>以下は、 <code class="docutils literal notranslate"><span class="pre">unify_kana_hyphen</span></code> オプションの使用例です。</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>table_create --name Animals --flags TABLE_HASH_KEY --key_type ShortText
column_create --table Animals --name name --type ShortText
column_create --table Animals --name sound --type ShortText
load --table Animals
[
{&quot;_key&quot;:&quot;1&quot;,&quot;name&quot;:&quot;羊&quot;, &quot;sound&quot;:&quot;メ-メ-&quot;},
]

table_create \
  --name idx_animals_sound \
  --flags TABLE_PAT_KEY \
  --key_type ShortText \
  --default_tokenizer TokenBigram \
  --normalizer &#39;NormalizerNFKC150(&quot;unify_kana_hyphen&quot;, true)&#39;
column_create --table idx_animals_sound --name animals_sound --flags COLUMN_INDEX|WITH_POSITION --type Animals --source sound

select --table Animals --query sound:@メエメエ
# [
#   [
#     0,1677829950.652696,
#     0.01971983909606934
#   ],
#   [
#     [
#       [
#         1
#       ],
#       [
#         [
#           &quot;_id&quot;,
#           &quot;UInt32&quot;
#         ],
#         [
#           &quot;_key&quot;,
#           &quot;ShortText&quot;
#         ],
#         [
#           &quot;name&quot;,
#           &quot;ShortText&quot;
#         ],
#         [
#           &quot;sound&quot;,
#           &quot;ShortText&quot;
#         ]
#       ],
#       [
#         1,
#         &quot;1&quot;,
#         &quot;羊&quot;,
#         &quot;メ-メ-&quot;
#       ]
#     ]
#   ]
# ]
</pre></div>
</div>
</li>
</ul>
</li>
<li><p>[<a class="reference internal" href="../reference/grn_expr/query_syntax.html#query-syntax-near-search-condition"><span class="std std-ref">近傍検索条件</span></a>][<a class="reference internal" href="../reference/grn_expr/script_syntax.html#script-syntax-near-search-operator"><span class="std std-ref">近傍検索演算子</span></a>] 各近傍検索に <code class="docutils literal notranslate"><span class="pre">${MIN_INTERVAL}</span></code> オプションを追加しました。</p>
<p><code class="docutils literal notranslate"><span class="pre">${MIN_INTERVAL}</span></code> でフレーズ間（単語間）の最低距離を指定できるようになりました。フレーズ間（単語間）の距離は、最低でもこの値以上である必要があります。</p>
<p>新しい構文は以下のとおりです。</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>*N${MAX_INTERVAL},${MAX_TOKEN_INTERVAL_1}|${MAX_TOKEN_INTERVAL_2}|...,${MIN_INTERVAL} &quot;word1 word2 ...&quot;
*NP${MAX_INTERVAL},${ADDITIONAL_LAST_INTERVAL},${MAX_PHRASE_INTERVAL_1}|${MAX_PHRASE_INTERVAL_2}|...,${MIN_INTERVAL} &quot;phrase1 phrase2 ...&quot;
*NPP${MAX_INTERVAL},${ADDITIONAL_LAST_INTERVAL},${MAX_PHRASE_INTERVAL_1}|${MAX_PHRASE_INTERVAL_2}|...,${MIN_INTERVAL} &quot;(phrase1-1 phrase1-2 ...) (phrase2-1 phrase2-2 ...) ...&quot;
*ONP${MAX_INTERVAL},${ADDITIONAL_LAST_INTERVAL},${MAX_PHRASE_INTERVAL_1}|${MAX_PHRASE_INTERVAL_2}|...,${MIN_INTERVAL} &quot;phrase1 phrase2 ...&quot;
*ONPP${MAX_INTERVAL},${ADDITIONAL_LAST_INTERVAL},${MAX_PHRASE_INTERVAL_1}|${MAX_PHRASE_INTERVAL_2}|...,${MIN_INTERVAL} &quot;(phrase1-1 phrase1-2 ...) (phrase2-1 phrase2-2 ...) ...&quot;
</pre></div>
</div>
<p><code class="docutils literal notranslate"><span class="pre">${MIN_INTERVAL}</span></code> のデフォルト値は <code class="docutils literal notranslate"><span class="pre">INT32_MIN</span></code> (<code class="docutils literal notranslate"><span class="pre">-2147483648</span></code>) です。<code class="docutils literal notranslate"><span class="pre">${MIN_INTERVAL}</span></code> を省略した場合デフォルト値が使用されます。</p>
<p>このオプションは重複したフレーズを無視するのに便利です。</p>
<p><code class="docutils literal notranslate"><span class="pre">*NP</span></code> の距離は <code class="docutils literal notranslate"><span class="pre">各フレーズの先頭のトークンの距離</span> <span class="pre">-</span> <span class="pre">左のフレーズのトークン数</span> <span class="pre">+</span> <span class="pre">1</span></code> で計算されます。</p>
<p>トークナイザーがバイグラムの場合を考えると、例えば、 <code class="docutils literal notranslate"><span class="pre">東京</span></code> は <code class="docutils literal notranslate"><span class="pre">東京</span></code> という一つのトークンを持ち、 <code class="docutils literal notranslate"><span class="pre">京都</span></code> は <code class="docutils literal notranslate"><span class="pre">京都</span></code> という一つのトークンを持ちます。</p>
<p><code class="docutils literal notranslate"><span class="pre">*NP</span> <span class="pre">&quot;東京</span> <span class="pre">京都&quot;</span></code> の対象の値として <code class="docutils literal notranslate"><span class="pre">東京都</span></code> を考えてみます。</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">各フレーズの先頭のトークンの距離</span></code>: <code class="docutils literal notranslate"><span class="pre">1</span></code> (<code class="docutils literal notranslate"><span class="pre">東京</span></code> と <code class="docutils literal notranslate"><span class="pre">京都</span></code> の距離)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">左のフレーズのトークン数</span></code>: <code class="docutils literal notranslate"><span class="pre">1</span></code> ( <code class="docutils literal notranslate"><span class="pre">東京</span></code> )</p></li>
</ul>
<p><code class="docutils literal notranslate"><span class="pre">東京都</span></code> に対して <code class="docutils literal notranslate"><span class="pre">*NP</span></code> で使われる距離は、 <code class="docutils literal notranslate"><span class="pre">1</span> <span class="pre">-</span> <span class="pre">1</span> <span class="pre">+</span> <span class="pre">1</span></code> = <code class="docutils literal notranslate"><span class="pre">1</span></code> となります。</p>
<p>結果として、 <code class="docutils literal notranslate"><span class="pre">東京</span></code> と <code class="docutils literal notranslate"><span class="pre">京都</span></code> が重複していないとき、 <code class="docutils literal notranslate"><span class="pre">*NP</span></code> で使われる距離は <code class="docutils literal notranslate"><span class="pre">1</span></code> より大きくなります。</p>
<p>このオプションは重複したフレーズを無視するのに便利です。</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>table_create Entries TABLE_NO_KEY
column_create Entries content COLUMN_SCALAR Text

table_create Terms TABLE_PAT_KEY ShortText \
  --default_tokenizer &#39;TokenNgram(&quot;unify_alphabet&quot;, false, \
                                  &quot;unify_digit&quot;, false)&#39; \
  --normalizer NormalizerNFKC150
column_create Terms entries_content COLUMN_INDEX|WITH_POSITION Entries content

load --table Entries
[
{&quot;content&quot;: &quot;東京都&quot;},
{&quot;content&quot;: &quot;東京京都&quot;}
]

select Entries \
  --match_columns content \
  --query &#39;*NP-1,0,,2&quot;東京 京都&quot;&#39; \
  --output_columns &#39;_score, content&#39;
# [
#   [
#     0,
#     0.0,
#     0.0
#   ],
#   [
#     [
#       [
#         1
#       ],
#       [
#         [
#           &quot;_score&quot;,
#           &quot;Int32&quot;
#         ],
#         [
#           &quot;content&quot;,
#           &quot;Text&quot;
#         ]
#       ],
#       [
#         1,
#         &quot;東京京都&quot;
#       ]
#     ]
#   ]
# ]
</pre></div>
</div>
<p>上記の例では、 <code class="docutils literal notranslate"><span class="pre">東京都</span></code> は距離が <code class="docutils literal notranslate"><span class="pre">1</span></code> なのでマッチしませんが、 <code class="docutils literal notranslate"><span class="pre">東京京都</span></code> は距離が <code class="docutils literal notranslate"><span class="pre">2</span></code> なのでマッチします。</p>
</li>
<li><p>[<a class="reference internal" href="../reference/normalizers.html"><span class="doc">ノーマライザー</span></a>] <code class="docutils literal notranslate"><span class="pre">unify_katakana_trailing_o</span></code> オプションで新しい値をサポートしました。</p>
<p><code class="docutils literal notranslate"><span class="pre">unify_katakana_trailing_o</span></code> で以下の新しい値のノーマライズをサポートしました。これらの左側の文字の母音が <code class="docutils literal notranslate"><span class="pre">オ</span></code> なので、ノーマライズすべきなためです。</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">ォオ</span></code> -&gt; <code class="docutils literal notranslate"><span class="pre">ォウ</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">ョオ</span></code> -&gt; <code class="docutils literal notranslate"><span class="pre">ョウ</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">ヺオ</span></code> -&gt; <code class="docutils literal notranslate"><span class="pre">ヺウ</span></code></p></li>
</ul>
</li>
<li><p>MessagePack v6.0.0 をサポートしました。 [GitHub#1536][Reported by Carlo Cabrera]</p>
<p>今まで、Groongaは <code class="docutils literal notranslate"><span class="pre">configure</span></code> または <code class="docutils literal notranslate"><span class="pre">cmake</span></code> 実行時にMessagePack v6.0.0以降のMessagePackを検出できませんでした。このリリースから、MessagePackがv6.0.0以降であっても検出できるようになります。</p>
</li>
</ul>
</section>
<section id="id19">
<h3>修正<a class="headerlink" href="#id19" title="Link to this heading">#</a></h3>
<ul>
<li><p>[<a class="reference internal" href="../reference/normalizers.html"><span class="doc">ノーマライザー</span></a>] NormalizerNFKCが不正な正規化をする問題を修正しました。</p>
<p>この問題は、 <code class="docutils literal notranslate"><span class="pre">unify_kana_case</span></code> と <code class="docutils literal notranslate"><span class="pre">unify_katakana_v_sounds</span></code> を同時に使う場合に発生します。</p>
<p>例えば、 <code class="docutils literal notranslate"><span class="pre">unify_kana_case</span></code> と <code class="docutils literal notranslate"><span class="pre">unify_katakana_v_sounds</span></code> を同時に使うとき、  <code class="docutils literal notranslate"><span class="pre">ヴァ</span></code> が <code class="docutils literal notranslate"><span class="pre">バア</span></code> にノーマライズされていました。しかし <code class="docutils literal notranslate"><span class="pre">ヴァ</span></code> は <code class="docutils literal notranslate"><span class="pre">バ</span></code> と正規化されるべきです。</p>
<p>これは、 <code class="docutils literal notranslate"><span class="pre">unify_kana_case</span></code> で <code class="docutils literal notranslate"><span class="pre">ヴァ</span></code> が <code class="docutils literal notranslate"><span class="pre">ヴア</span></code> と正規化され、その後、 <code class="docutils literal notranslate"><span class="pre">unify_katakana_v_sounds</span></code> によって <code class="docutils literal notranslate"><span class="pre">ヴア</span></code> が <code class="docutils literal notranslate"><span class="pre">バア</span></code> と正規化されていたことが原因です。<code class="docutils literal notranslate"><span class="pre">unify_katakana_v_sounds</span></code> が <code class="docutils literal notranslate"><span class="pre">unify_kana_case</span></code> より前に適用されるように修正しました。</p>
<p>以下は以前のバージョンでの問題の発生例です。</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>normalize \
  &#39;NormalizerNFKC150(&quot;unify_katakana_v_sounds&quot;, true, \
                     &quot;unify_kana_case&quot;, true)&#39; \
  &quot;ヴァーチャル&quot;
#[
#  [
#    0,
#    1678097412.913053,
#    0.00019073486328125
#  ],
#  {
#    &quot;normalized&quot;:&quot;ブアーチヤル&quot;,
#    &quot;types&quot;:[],
#    &quot;checks&quot;:[]
#  }
#]
</pre></div>
</div>
<p>このバージョンから、 <code class="docutils literal notranslate"><span class="pre">ヴァーチャル</span></code> は <code class="docutils literal notranslate"><span class="pre">バーチヤル</span></code> にノーマライズされます。</p>
</li>
<li><p>[<a class="reference internal" href="../reference/grn_expr/query_syntax.html#query-syntax-ordered-near-phrase-search-condition"><span class="std std-ref">順序付き近傍フレーズ検索条件</span></a>][<a class="reference internal" href="../reference/grn_expr/script_syntax.html#script-syntax-ordered-near-phrase-search-operator"><span class="std std-ref">順序付き近傍フレーズ検索演算子</span></a>] <code class="docutils literal notranslate"><span class="pre">${MAX_PHRASE_INTERVALS}</span></code> が正しく動かない問題を修正しました。</p>
<p>この問題が発生したとき、距離は <code class="docutils literal notranslate"><span class="pre">0</span></code> とみなされます。したがって、この問題が発生した場合、余分にレコードがヒットすることがあります。</p>
<p>この問題は以下の場合に発生します。</p>
<ol class="arabic simple">
<li><p><code class="docutils literal notranslate"><span class="pre">*ONP</span></code> で <code class="docutils literal notranslate"><span class="pre">${MAX_PHRASE_INTERVALS}</span></code> を使用している</p></li>
<li><p>マッチした左側のフレーズに含まれるトークンの数が、 <code class="docutils literal notranslate"><span class="pre">${MAX_PHRASE_INTERVALS}</span></code> で指定した要素数より多い</p></li>
</ol>
<p>以下はこの問題の例です。</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>table_create Entries TABLE_NO_KEY
column_create Entries content COLUMN_SCALAR Text
table_create Terms TABLE_PAT_KEY ShortText \
  --default_tokenizer &#39;TokenNgram(&quot;unify_alphabet&quot;, false, \
                                  &quot;unify_digit&quot;, false)&#39; \
  --normalizer NormalizerNFKC150
column_create Terms entries_content COLUMN_INDEX|WITH_POSITION Entries content
load --table Entries
[
{&quot;content&quot;: &quot;abcXYZdef&quot;},
{&quot;content&quot;: &quot;abcdef&quot;},
{&quot;content&quot;: &quot;abc123456789def&quot;},
{&quot;content&quot;: &quot;abc12345678def&quot;},
{&quot;content&quot;: &quot;abc1de2def&quot;}
]
select Entries --filter &#39;content *ONP-1,0,1 &quot;abc def&quot;&#39; --output_columns &#39;_score, content&#39;
#[
#  [
#    0,
#    0.0,
#    0.0
#  ],
#  [
#    [
#      [
#        5
#      ],
#      [
#        [
#          &quot;_score&quot;,
#          &quot;Int32&quot;
#        ],
#        [
#          &quot;content&quot;,
#          &quot;Text&quot;
#        ]
#      ],
#      [
#        1,
#        &quot;abcXYZdef&quot;
#      ],
#      [
#        1,
#        &quot;abcdef&quot;
#      ],
#      [
#        1,
#        &quot;abc123456789def&quot;
#      ],
#      [
#        1,
#        &quot;abc12345678def&quot;
#      ],
#      [
#        1,
#        &quot;abc1de2def&quot;
#      ]
#    ]
#  ]
#]
</pre></div>
</div>
<p>上記の例では、 <code class="docutils literal notranslate"><span class="pre">*ONP-1,0,1</span> <span class="pre">&quot;abc</span> <span class="pre">def&quot;</span></code> で、最初の要素の距離に <code class="docutils literal notranslate"><span class="pre">1</span></code> を指定しています。しかし、距離が <code class="docutils literal notranslate"><span class="pre">1</span></code> より離れているものも含めた、すべての <code class="docutils literal notranslate"><span class="pre">content</span></code> がマッチしています。</p>
<p>これは、この例がこの問題の発生条件を満たしていて、距離が <code class="docutils literal notranslate"><span class="pre">0</span></code> とみなされているためです。</p>
<ol class="arabic">
<li><p><code class="docutils literal notranslate"><span class="pre">*ONP</span></code> で <code class="docutils literal notranslate"><span class="pre">${MAX_PHRASE_INTERVALS}</span></code> を使用している</p>
<p><code class="docutils literal notranslate"><span class="pre">*ONP-1,0,1</span> <span class="pre">&quot;abc</span> <span class="pre">def&quot;</span></code> は <code class="docutils literal notranslate"><span class="pre">${MAX_PHRASE_INTERVALS}</span></code> を使用している。</p>
</li>
<li><p>マッチした左側のフレーズに含まれるトークンの数が、 <code class="docutils literal notranslate"><span class="pre">${MAX_PHRASE_INTERVALS}</span></code> で指定した要素数より多い</p>
<ul class="simple">
<li><p>マッチした左側のフレーズ: <code class="docutils literal notranslate"><span class="pre">abc</span></code></p>
<ul>
<li><p>含まれるトークン: <code class="docutils literal notranslate"><span class="pre">ab</span></code> 、 <code class="docutils literal notranslate"><span class="pre">bc</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">TokenNgram(&quot;unify_alphabet&quot;,</span> <span class="pre">false,</span> <span class="pre">&quot;unify_digit&quot;,</span> <span class="pre">false)</span></code> によるトークナイズ</p></li>
</ul>
</li>
<li><p>左側のフレーズに含まれるトークン数 (<code class="docutils literal notranslate"><span class="pre">2</span></code>) &gt; <code class="docutils literal notranslate"><span class="pre">max_element_intervals</span></code> にに含まれる要素数 (<code class="docutils literal notranslate"><span class="pre">1</span></code>)</p>
<ul>
<li><p><code class="docutils literal notranslate"><span class="pre">*ONP-1,0,1</span> <span class="pre">&quot;abc</span> <span class="pre">def&quot;</span></code> の <code class="docutils literal notranslate"><span class="pre">1</span></code></p></li>
</ul>
</li>
<li><p>左側のフレーズに含まれるトークン数 (<code class="docutils literal notranslate"><span class="pre">2</span></code>) &gt; <code class="docutils literal notranslate"><span class="pre">max_element_intervals</span></code> にに含まれる要素数 (<code class="docutils literal notranslate"><span class="pre">1</span></code>)</p></li>
</ul>
</li>
</ol>
</li>
<li><p>[<a class="reference internal" href="../reference/grn_expr/query_syntax.html#query-syntax-near-phrase-search-condition"><span class="std std-ref">近傍フレーズ検索条件</span></a>][<a class="reference internal" href="../reference/grn_expr/script_syntax.html#script-syntax-near-phrase-search-operator"><span class="std std-ref">近傍フレーズ検索演算子</span></a>] 各近傍フレーズ検索で、最後として指定したフレーズが最後として使用されない問題を修正しました。</p>
<p>この問題が発生すると <code class="docutils literal notranslate"><span class="pre">${ADDITIONAL_LAST_INTERVAL}</span></code> は無視され、 <code class="docutils literal notranslate"><span class="pre">${MAX_INTERVAL}</span></code> が使用されます。</p>
<p>この問題は以下の場合に発生します。</p>
<ol class="arabic simple">
<li><p>最後として指定されたフレーズが複数のトークンを含む</p></li>
<li><p>そのフレーズの最後のトークンのサイズが、他のトークンのサイズ以下である</p>
<ul class="simple">
<li><p>トークンサイズとは、全レコード中に出現するそのトークンの数です。</p></li>
</ul>
</li>
</ol>
<p>以下はこの問題の例です。</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>table_create Entries TABLE_NO_KEY
column_create Entries content COLUMN_SCALAR Text

table_create Terms TABLE_PAT_KEY ShortText \
  --default_tokenizer &#39;TokenNgram(&quot;unify_alphabet&quot;, false, \
                                  &quot;unify_digit&quot;, false)&#39; \
  --normalizer NormalizerNFKC150
column_create Terms entries_content COLUMN_INDEX|WITH_POSITION Entries content

load --table Entries
[
{&quot;content&quot;: &quot;abc123456789defg&quot;},
{&quot;content&quot;: &quot;dededede&quot;}
]

select Entries \
  --filter &#39;content *NP10,1&quot;abc defg$&quot;&#39; \
  --output_columns &#39;_score, content&#39;
#[
#  [
#    0,
#    0.0,
#    0.0
#  ],
#  [
#    [
#      [
#        0
#      ],
#      [
#        [
#          &quot;_score&quot;,
#          &quot;Int32&quot;
#        ],
#        [
#          &quot;content&quot;,
#          &quot;Text&quot;
#        ]
#      ]
#    ]
#  ]
#]
</pre></div>
</div>
<p>上記の例の <code class="docutils literal notranslate"><span class="pre">abc123456789defg</span></code> について考えると、 <code class="docutils literal notranslate"><span class="pre">abc</span></code> から <code class="docutils literal notranslate"><span class="pre">defg</span></code> までの距離は <code class="docutils literal notranslate"><span class="pre">11</span></code> です。 <code class="docutils literal notranslate"><span class="pre">${MAX_INTERVAL}</span></code> は <code class="docutils literal notranslate"><span class="pre">10</span></code> で <code class="docutils literal notranslate"><span class="pre">${ADDITIONAL_LAST_INTERVAL}</span></code> は <code class="docutils literal notranslate"><span class="pre">1</span></code> が指定されています。したがって、最後のフレーズがマッチするしきい値は11になります。以上から、 <code class="docutils literal notranslate"><span class="pre">abc123456789defg</span></code> はマッチするはずですが、していません。</p>
<p>これは、この例が、以下のようにこの問題の発生条件を満たしていて、<code class="docutils literal notranslate"><span class="pre">${MAX_INTERVAL}</span></code> のみが使われているためです。</p>
<ol class="arabic">
<li><p>最後として指定されたフレーズが複数のトークンを含む</p>
<p>最後に <code class="docutils literal notranslate"><span class="pre">$</span></code> がついているので、 <code class="docutils literal notranslate"><span class="pre">defg$</span></code> は最後と指定されています。</p>
<p><code class="docutils literal notranslate"><span class="pre">defg$</span></code> は <code class="docutils literal notranslate"><span class="pre">TokenNgram(&quot;unify_alphabet&quot;,</span> <span class="pre">false,</span> <span class="pre">&quot;unify_digit&quot;,</span> <span class="pre">false)</span></code> によって <code class="docutils literal notranslate"><span class="pre">de</span></code>, <code class="docutils literal notranslate"><span class="pre">ef</span></code>, <code class="docutils literal notranslate"><span class="pre">fg</span></code> にトークナイズされます。</p>
</li>
<li><p>そのフレーズの最後のトークンのサイズが、他のトークンのサイズ以下である</p>
<p><code class="docutils literal notranslate"><span class="pre">fg</span></code> は <code class="docutils literal notranslate"><span class="pre">defg$</span></code> の最後のトークンです。 <code class="docutils literal notranslate"><span class="pre">abc123456789defg</span></code> は1つの <code class="docutils literal notranslate"><span class="pre">fg</span></code>  と <code class="docutils literal notranslate"><span class="pre">de</span></code> を含みます。そして、 <code class="docutils literal notranslate"><span class="pre">dededede</span></code> は4つの <code class="docutils literal notranslate"><span class="pre">de</span></code> を含みます。</p>
<p>したがって、 <code class="docutils literal notranslate"><span class="pre">fg</span></code> のサイズは <code class="docutils literal notranslate"><span class="pre">1</span></code> で、 <code class="docutils literal notranslate"><span class="pre">de</span></code> のサイズは <code class="docutils literal notranslate"><span class="pre">5</span></code> です。</p>
</li>
</ol>
</li>
<li><p>[<a class="reference internal" href="../reference/grn_expr/query_syntax.html#query-syntax-near-phrase-search-condition"><span class="std std-ref">近傍フレーズ検索条件</span></a>] 距離の計算方法を修正しました。</p>
<p>この問題によって、近傍フレーズ検索を使った場合に、ヒットしないはずのレコードがヒットすることがあります。</p>
</li>
<li><p>[<a class="reference internal" href="../reference/functions/highlight_html.html"><span class="doc">highlight_html</span></a>] <code class="docutils literal notranslate"><span class="pre">loose_symbol=true</span></code> の時にハイライト位置がずれることがある問題を修正しました。</p></li>
</ul>
</section>
<section id="id20">
<h3>感謝<a class="headerlink" href="#id20" title="Link to this heading">#</a></h3>
<ul class="simple">
<li><p>Carlo Cabreraさん</p></li>
</ul>
</section>
</section>
<section id="release-13-0-0-2023-02-09">
<span id="release-13-0-0"></span><h2>13.0.0リリース - 2023-02-09<a class="headerlink" href="#release-13-0-0-2023-02-09" title="Link to this heading">#</a></h2>
<p>メジャーバージョンアップです! メジャーバージョンアップですが、互換性は壊れていないので、データベースを再構築することなく13.0.0へアップグレードできます。</p>
<p>まずはじめに 13.0.0の主な変更点を紹介します。次に、Groonga 12.0.0 から 12.1.2 までの変更点を紹介します。</p>
<section id="id21">
<h3>改良<a class="headerlink" href="#id21" title="Link to this heading">#</a></h3>
<ul>
<li><p>[<a class="reference internal" href="../reference/normalizers.html"><span class="doc">ノーマライザー</span></a>] Unicode 15.0 の NFKC（Normalization Form Compatibility Composition）をベースにしたノーマライザー <code class="docutils literal notranslate"><span class="pre">NormalizerNFKC150</span></code> を新しく追加しました。</p></li>
<li><p>[<a class="reference internal" href="../reference/token_filters.html"><span class="doc">トークンフィルター</span></a>] Unicode 15.0 の NFKC（Normalization Form Compatibility Composition）をベースにしたトークンフィルター <code class="docutils literal notranslate"><span class="pre">TokenFilterNFKC150</span></code> を新しく追加しました。</p></li>
<li><p>[<a class="reference internal" href="../reference/normalizers/normalizer_nfkc150.html"><span class="doc">NormalizerNFKC150</span></a>] <code class="docutils literal notranslate"><span class="pre">NormalizerNFKC</span></code> に以下の新しいオプションを追加しました。</p>
<ul>
<li><p><code class="docutils literal notranslate"><span class="pre">unify_katakana_gu_small_sounds</span></code></p>
<p>このオプションを使うことで、&quot;グァ -&gt; ガ&quot;, &quot;グィ -&gt; ギ&quot;, &quot;グェ -&gt; ゲ&quot;, &quot;グォ -&gt; ゴ&quot;と正規化できます。</p>
<p>以下は <code class="docutils literal notranslate"><span class="pre">unify_katakana_gu_small_sounds</span></code> オプションの使用例です。</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>table_create --name Countries --flags TABLE_HASH_KEY --key_type ShortText
column_create --table Countries --name name --type ShortText
load --table Countries
[
{&quot;_key&quot;:&quot;JP&quot;,&quot;name&quot;:&quot;日本&quot;},
{&quot;_key&quot;:&quot;GT&quot;,&quot;name&quot;:&quot;グァテマラ共和国&quot;},
]

table_create \
  --name idx_contry_name \
  --flags TABLE_PAT_KEY \
  --key_type ShortText \
  --default_tokenizer TokenBigram \
  --normalizer &#39;NormalizerNFKC150(&quot;unify_katakana_gu_small_sounds&quot;, true)&#39;
column_create --table idx_contry_name --name contry_name --flags COLUMN_INDEX|WITH_POSITION --type Countries --source name

select --table Countries --query name:@ガテマラ共和国
# [
#   [0,
#    0,
#    0
#   ],
#   [
#     [
#       [
#         1
#       ],
#       [
#         [
#           &quot;_id&quot;,
#           &quot;UInt32&quot;
#         ],
#         [
#           &quot;_key&quot;,
#           &quot;ShortText&quot;
#         ],
#         [
#           &quot;name&quot;,
#           &quot;ShortText&quot;
#         ]
#       ],
#       [
#         2,
#         &quot;GT&quot;,
#         &quot;グァテマラ共和国&quot;
#       ]
#     ]
#   ]
# ]
</pre></div>
</div>
</li>
<li><p><code class="docutils literal notranslate"><span class="pre">unify_katakana_di_sound</span></code></p>
<p>このオプションを使うことで、&quot;ヂ -&gt; ジ&quot;と正規化できます。</p>
<p>以下は、 <code class="docutils literal notranslate"><span class="pre">unify_katakana_di_sound</span></code> オプションの使用例です。</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>table_create --name Foods --flags TABLE_HASH_KEY --key_type ShortText
column_create --table Foods --name name --type ShortText
load --table Foods
[
{&quot;_key&quot;:&quot;1&quot;,&quot;name&quot;:&quot;チジミ&quot;},
{&quot;_key&quot;:&quot;2&quot;,&quot;name&quot;:&quot;パジョン&quot;},
]

table_create \
  --name idx_food_name \
  --flags TABLE_PAT_KEY \
  --key_type ShortText \
  --default_tokenizer TokenBigram \
  --normalizer &#39;NormalizerNFKC150(&quot;unify_katakana_di_sound&quot;, true)&#39;
column_create --table idx_food_name --name food_name --flags COLUMN_INDEX|WITH_POSITION --type Foods --source name

select --table Foods --query name:@チヂミ
# [
#   [
#     0,
#     0,
#     0
#   ],
#   [
#     [
#       [
#         1
#       ],
#       [
#         [
#           &quot;_id&quot;,
#           &quot;UInt32&quot;
#         ],
#         [
#           &quot;_key&quot;,
#           &quot;ShortText&quot;
#         ],
#         [
#           &quot;name&quot;,
#           &quot;ShortText&quot;
#         ]
#       ],
#       [
#         1,
#         &quot;1&quot;,
#         &quot;チジミ&quot;
#       ]
#     ]
#   ]
# ]
</pre></div>
</div>
</li>
<li><p><code class="docutils literal notranslate"><span class="pre">unify_katakana_wo_sound</span></code></p>
<p>このオプションを使うことで、&quot;ヲ -&gt; オ&quot;と正規化できます。</p>
<p>以下は、 <code class="docutils literal notranslate"><span class="pre">unify_katakana_wo_sound</span></code> オプションの使用例です。</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>table_create --name Foods --flags TABLE_HASH_KEY --key_type ShortText
column_create --table Foods --name name --type ShortText
load --table Foods
[
{&quot;_key&quot;:&quot;1&quot;,&quot;name&quot;:&quot;アヲハタ&quot;},
{&quot;_key&quot;:&quot;2&quot;,&quot;name&quot;:&quot;ヴェルデ&quot;},
{&quot;_key&quot;:&quot;3&quot;,&quot;name&quot;:&quot;ランプ&quot;},
]

table_create \
  --name idx_food_name \
  --flags TABLE_PAT_KEY \
  --key_type ShortText \
  --default_tokenizer TokenBigram \
  --normalizer &#39;NormalizerNFKC150(&quot;unify_katakana_wo_sound&quot;, true)&#39;
column_create --table idx_food_name --name food_name --flags COLUMN_INDEX|WITH_POSITION --type Foods --source name

select --table Foods --query name:@アオハタ
# [
#   [
#     0,
#     0,
#     0
#   ],
#   [
#     [
#       [
#         1
#       ],
#       [
#         [
#           &quot;_id&quot;,
#           &quot;UInt32&quot;
#         ],
#         [
#           &quot;_key&quot;,
#           &quot;ShortText&quot;
#         ],
#         [
#           &quot;name&quot;,
#           &quot;ShortText&quot;
#         ]
#       ],
#       [
#         1,
#         &quot;1&quot;,
#         &quot;アヲハタ&quot;
#       ]
#     ]
#   ]
# ]
</pre></div>
</div>
</li>
<li><p><code class="docutils literal notranslate"><span class="pre">unify_katakana_zu_small_sounds</span></code></p>
<p>このオプションを使うことで、&quot;ズァ -&gt; ザ&quot;, &quot;ズィ -&gt; ジ&quot;, &quot;ズェ -&gt; ゼ&quot;, &quot;ズォ -&gt; ゾ&quot;と正規化できます。</p>
<p>以下は、 <code class="docutils literal notranslate"><span class="pre">unify_katakana_zu_small_sounds</span></code> オプションの使用例です。</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>table_create --name Cities --flags TABLE_HASH_KEY --key_type ShortText
column_create --table Cities --name name --type ShortText
load --table Cities
[
{&quot;_key&quot;:&quot;1&quot;,&quot;name&quot;:&quot;ガージヤーバード&quot;},
{&quot;_key&quot;:&quot;2&quot;,&quot;name&quot;:&quot;デリー&quot;},
]

table_create \
  --name idx_city_name \
  --flags TABLE_PAT_KEY \
  --key_type ShortText \
  --default_tokenizer TokenBigram \
  --normalizer &#39;NormalizerNFKC150(&quot;unify_katakana_zu_small_sounds&quot;, true)&#39;
column_create --table idx_city_name --name city_name --flags COLUMN_INDEX|WITH_POSITION --type Cities --source name

select --table Cities --query name:@ガーズィヤーバード
# [
#   [
#     0,
#     0,
#     0
#   ],
#   [
#     [
#       [
#         1
#       ],
#       [
#         [
#           &quot;_id&quot;,
#           &quot;UInt32&quot;
#         ],
#         [
#           &quot;_key&quot;,
#           &quot;ShortText&quot;
#         ],
#         [
#           &quot;name&quot;,
#           &quot;ShortText&quot;
#         ]
#       ],
#       [
#         1,
#         &quot;1&quot;,
#         &quot;ガージヤーバード&quot;
#       ]
#     ]
#   ]
# ]
</pre></div>
</div>
</li>
<li><p><code class="docutils literal notranslate"><span class="pre">unify_katakana_du_sound</span></code></p>
<p>このオプションを使うことで、&quot;ヅ -&gt; ズ&quot;と正規化できます。</p>
<p>以下は、 <code class="docutils literal notranslate"><span class="pre">unify_katakana_du_sound</span></code> オプションの使用例です。</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>table_create --name Plants --flags TABLE_HASH_KEY --key_type ShortText
column_create --table Plants --name name --type ShortText
load --table Plants
[
{&quot;_key&quot;:&quot;1&quot;,&quot;name&quot;:&quot;ハスノカヅラ&quot;},
{&quot;_key&quot;:&quot;2&quot;,&quot;name&quot;:&quot;オオツヅラフジ&quot;},
{&quot;_key&quot;:&quot;3&quot;,&quot;name&quot;:&quot;アオツヅラフジ&quot;},
]

table_create \
  --name idx_plant_name \
  --flags TABLE_PAT_KEY \
  --key_type ShortText \
  --default_tokenizer TokenBigram \
  --normalizer &#39;NormalizerNFKC150(&quot;unify_katakana_du_sound&quot;, true)&#39;
column_create --table idx_plant_name --name plant_name --flags COLUMN_INDEX|WITH_POSITION --type Plants --source name

select --table Plants --query name:@ツズラ
# [
#   [
#     0,
#     0,
#     0
#   ],
#   [
#     [
#       [
#         2
#       ],
#       [
#         [
#           &quot;_id&quot;,
#           &quot;UInt32&quot;
#         ],
#         [
#           &quot;_key&quot;,
#           &quot;ShortText&quot;
#         ],
#         [
#           &quot;name&quot;,
#           &quot;ShortText&quot;
#         ]
#       ],
#       [
#         2,
#         &quot;2&quot;,
#         &quot;オオツヅラフジ&quot;
#       ],
#       [
#         3,
#         &quot;3&quot;,
#         &quot;アオツヅラフジ&quot;
#       ]
#     ]
#   ]
# ]
</pre></div>
</div>
</li>
<li><p><code class="docutils literal notranslate"><span class="pre">unify_katakana_trailing_o</span></code></p>
<p>このオプションによって、以下の文字を正規化できます。</p>
<ul class="simple">
<li><p>&quot;オオ -&gt; オウ&quot;</p></li>
<li><p>&quot;コオ -&gt; コウ&quot;</p></li>
<li><p>&quot;ソオ -&gt; ソウ&quot;</p></li>
<li><p>&quot;トオ -&gt; トウ&quot;</p></li>
<li><p>&quot;ノオ -&gt; ノウ&quot;</p></li>
<li><p>&quot;ホオ -&gt; ホウ&quot;</p></li>
<li><p>&quot;モオ -&gt; モウ&quot;</p></li>
<li><p>&quot;ヨオ -&gt; ヨウ&quot;</p></li>
<li><p>&quot;ロオ -&gt; ロウ&quot;</p></li>
<li><p>&quot;ゴオ -&gt; ゴウ&quot;</p></li>
<li><p>&quot;ゾオ -&gt; ゾウ&quot;</p></li>
<li><p>&quot;ドオ -&gt; ドウ&quot;</p></li>
<li><p>&quot;ボオ -&gt; ボウ&quot;</p></li>
<li><p>&quot;ポオ -&gt; ポウ&quot;</p></li>
</ul>
<p>以下は、 <code class="docutils literal notranslate"><span class="pre">unify_katakana_trailing_o</span></code> オプションの使用例です。</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>table_create --name Sharks --flags TABLE_HASH_KEY --key_type ShortText
column_create --table Sharks --name name --type ShortText
load --table Sharks
[
{&quot;_key&quot;:&quot;1&quot;,&quot;name&quot;:&quot;ホオジロザメ&quot;},
{&quot;_key&quot;:&quot;2&quot;,&quot;name&quot;:&quot;ジンベイザメ&quot;},
]

table_create \
  --name idx_shark_name \
  --flags TABLE_PAT_KEY \
  --key_type ShortText \
  --default_tokenizer TokenBigram \
  --normalizer &#39;NormalizerNFKC150(&quot;unify_katakana_trailing_o&quot;, true)&#39;
column_create --table idx_shark_name --name shark_name --flags COLUMN_INDEX|WITH_POSITION --type Sharks --source name

select --table Sharks --query name:@ホウジロザメ
# [
#   [
#     0,
#     0,
#     0
#   ],
#   [
#     [
#       [
#         1
#       ],
#       [
#         [
#           &quot;_id&quot;,
#           &quot;UInt32&quot;
#         ],
#         [
#           &quot;_key&quot;,
#           &quot;ShortText&quot;
#         ],
#         [
#           &quot;name&quot;,
#           &quot;ShortText&quot;
#         ]
#       ],
#       [
#         1,
#         &quot;1&quot;,
#         &quot;ホオジロザメ&quot;
#       ]
#     ]
#   ]
# ]
</pre></div>
</div>
</li>
<li><p><code class="docutils literal notranslate"><span class="pre">unify_katakana_du_small_sounds</span></code></p>
<p>このオプションを使うことで、 &quot;ヅァ -&gt; ザ&quot;, &quot;ヅィ -&gt; ジ&quot;, &quot;ヅェ -&gt; ゼ&quot;, &quot;ヅォ -&gt; ゾ&quot;と正規化できます。</p>
<p>以下は、 <code class="docutils literal notranslate"><span class="pre">unify_katakana_du_small_sounds</span></code> オプションの使用例です。</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>table_create --name Airports --flags TABLE_HASH_KEY --key_type ShortText
column_create --table Airports --name name --type ShortText
load --table Airports
[
{&quot;_key&quot;:&quot;HER&quot;,&quot;name&quot;:&quot;イラクリオ・ニコスカザンヅァキス国際空港&quot;},
{&quot;_key&quot;:&quot;ATH&quot;,&quot;name&quot;:&quot;アテネ国際空港&quot;},
]

table_create \
  --name idx_airport_name \
  --flags TABLE_PAT_KEY \
  --key_type ShortText \
  --default_tokenizer TokenBigram \
  --normalizer &#39;NormalizerNFKC150(&quot;unify_katakana_du_small_sounds&quot;, true)&#39;
column_create --table idx_airport_name --name airport_name --flags COLUMN_INDEX|WITH_POSITION --type Airports --source name

select --table Airports --query name:@ニコスカザンザキス
# [
#   [
#     [
#       1
#     ],
#     [
#       [
#         &quot;_id&quot;,
#         &quot;UInt32&quot;
#       ],
#       [
#         &quot;_key&quot;,
#         &quot;ShortText&quot;
#       ],
#       [
#         &quot;name&quot;,
#         &quot;ShortText&quot;
#       ]
#     ],
#     [
#       1,
#       &quot;HER&quot;,
#       &quot;イラクリオ・ニコスカザンヅァキス国際空港&quot;
#     ]
#   ]
# ]
</pre></div>
</div>
</li>
</ul>
</li>
<li><p>[Oracle Linux] Oracle Linux 8と9 向けのパッケージを新しくサポートしました。</p></li>
</ul>
</section>
<section id="id22">
<h3>感謝<a class="headerlink" href="#id22" title="Link to this heading">#</a></h3>
<ul class="simple">
<li><p>篠田さん</p></li>
<li><p>i10aさん</p></li>
<li><p>naoaさん</p></li>
<li><p>shinononさん</p></li>
<li><p>Zhanzhao (Deo) Liangさん</p></li>
<li><p>David CARLIERさん</p></li>
</ul>
</section>
<section id="higlight-and-summary-of-changes-from-12-0-0-to-12-1-2">
<h3>Groonga 12.0.0 から 12.1.2 までの主な変更点<a class="headerlink" href="#higlight-and-summary-of-changes-from-12-0-0-to-12-1-2" title="Link to this heading">#</a></h3>
<section id="higlight">
<h4>ハイライト<a class="headerlink" href="#higlight" title="Link to this heading">#</a></h4>
<p>[<a class="reference internal" href="12.html#release-12-0-9"><span class="std std-ref">12.0.9リリース - 2022-10-28</span></a>]</p>
<ul>
<li><p>[<a class="reference internal" href="../reference/normalizers.html"><span class="doc">ノーマライザー</span></a>] <code class="docutils literal notranslate"><span class="pre">NormalizerHTML</span></code> を追加しました。（実験的）</p>
<p><code class="docutils literal notranslate"><span class="pre">NormalizerHTML</span></code> はHTML用のノーマライザーです。</p>
<p>現在 <code class="docutils literal notranslate"><span class="pre">NormalizerHTML</span></code> は <code class="docutils literal notranslate"><span class="pre">&lt;span&gt;</span></code> や <code class="docutils literal notranslate"><span class="pre">&lt;/span&gt;</span></code> といったタグの削除と、<code class="docutils literal notranslate"><span class="pre">&amp;amp;</span></code> や <code class="docutils literal notranslate"><span class="pre">&amp;#38;</span></code> といった文字参照の展開を行います。</p>
<p>以下は <code class="docutils literal notranslate"><span class="pre">NormalizerHTML</span></code> の例です。</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>normalize NormalizerHTML &quot;&lt;span&gt; Groonga &amp;amp; Mroonga &amp;#38; Rroonga &lt;/span&gt;&quot;
# [[0,1666923364.883798,0.0005481243133544922],{&quot;normalized&quot;:&quot; Groonga &amp; Mroonga &amp; Rroonga &quot;,&quot;types&quot;:[],&quot;checks&quot;:[]}]
</pre></div>
</div>
<p>この例では、 <code class="docutils literal notranslate"><span class="pre">&lt;span&gt;</span></code> と <code class="docutils literal notranslate"><span class="pre">&lt;/span&gt;</span></code> は削除され、 <code class="docutils literal notranslate"><span class="pre">&amp;amp;</span></code> と <code class="docutils literal notranslate"><span class="pre">&amp;#38;</span></code> は <code class="docutils literal notranslate"><span class="pre">&amp;</span></code> に展開されています。</p>
<p>タグを削除するかどうかは <code class="docutils literal notranslate"><span class="pre">remove_tag</span></code> オプションで指定できます。(<code class="docutils literal notranslate"><span class="pre">remove_tag</span></code> オプションのデフォルト値は <code class="docutils literal notranslate"><span class="pre">true</span></code> です。)</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>normalize &#39;NormalizerHTML(&quot;remove_tag&quot;, false)&#39; &quot;&lt;span&gt; Groonga &amp;amp; Mroonga &amp;#38; Rroonga &lt;/span&gt;&quot;
# [[0,1666924069.278549,0.0001978874206542969],{&quot;normalized&quot;:&quot;&lt;span&gt; Groonga &amp; Mroonga &amp; Rroonga &lt;/span&gt;&quot;,&quot;types&quot;:[],&quot;checks&quot;:[]}]
</pre></div>
</div>
<p>この例では、 <code class="docutils literal notranslate"><span class="pre">&lt;span&gt;</span></code> と <code class="docutils literal notranslate"><span class="pre">&lt;/span&gt;</span></code> は削除されていません。</p>
<p>文字参照を展開するかどうかは <code class="docutils literal notranslate"><span class="pre">expand_character_reference</span></code> オプションで指定できます。(<code class="docutils literal notranslate"><span class="pre">expand_character_reference</span></code> オプションのデフォルト値は <code class="docutils literal notranslate"><span class="pre">true</span></code> です。)</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>normalize &#39;NormalizerHTML(&quot;expand_character_reference&quot;, false)&#39; &quot;&lt;span&gt; Groonga &amp;amp; Mroonga &amp;#38; Rroonga &lt;/span&gt;&quot;
# [[0,1666924357.099782,0.0002346038818359375],{&quot;normalized&quot;:&quot; Groonga &amp;amp; Mroonga &amp;#38; Rroonga &quot;,&quot;types&quot;:[],&quot;checks&quot;:[]}]
</pre></div>
</div>
<p>この例では、 <code class="docutils literal notranslate"><span class="pre">&amp;amp;</span></code> と <code class="docutils literal notranslate"><span class="pre">&amp;#38;</span></code> は展開されていません。</p>
</li>
</ul>
<p>[<a class="reference internal" href="12.html#release-12-0-3"><span class="std std-ref">12.0.3リリース - 2022-04-29</span></a>]</p>
<ul>
<li><p>[<a class="reference internal" href="../reference/functions/snippet.html"><span class="doc">snippet</span></a>],[<a class="reference internal" href="../reference/functions/snippet_html.html"><span class="doc">snippet_html</span></a>] 入力としてベクターをサポートしました。[groonga-dev,04956][Reported by shinonon]</p>
<p>例えば、以下のようにJSONデータ内のベクターに対して検索キーワードの周辺テキストを抽出できます。</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>table_create Entries TABLE_NO_KEY
column_create Entries title COLUMN_SCALAR ShortText
column_create Entries contents COLUMN_VECTOR ShortText

table_create Tokens TABLE_PAT_KEY ShortText   --default_tokenizer TokenNgram   --normalizer NormalizerNFKC130
column_create Tokens entries_title COLUMN_INDEX|WITH_POSITION Entries title
column_create Tokens entries_contents COLUMN_INDEX|WITH_SECTION|WITH_POSITION   Entries contents

load --table Entries
[
{
  &quot;title&quot;: &quot;Groonga and MySQL&quot;,
  &quot;contents&quot;: [
    &quot;Groonga is a full text search engine&quot;,
    &quot;MySQL is a RDBMS&quot;,
    &quot;Mroonga is a MySQL storage engine based on Groonga&quot;
  ]
}
]

select Entries\
  --output_columns &#39;snippet_html(contents), contents&#39;\
  --match_columns &#39;title&#39;\
  --query Groonga
# [
#   [
#     0,
#     0.0,
#     0.0
#   ],
#   [
#     [
#       [
#         1
#       ],
#       [
#         [
#           &quot;snippet_html&quot;,
#           null
#         ],
#         [
#           &quot;contents&quot;,
#           &quot;ShortText&quot;
#         ]
#       ],
#       [
#         [
#           &quot;&lt;span class=\&quot;keyword\&quot;&gt;Groonga&lt;/span&gt; is a full text search engine&quot;,
#           &quot;Mroonga is a MySQL storage engine based on &lt;span class=\&quot;keyword\&quot;&gt;Groonga&lt;/span&gt;&quot;
#         ],
#         [
#           &quot;Groonga is a full text search engine&quot;,
#           &quot;MySQL is a RDBMS&quot;,
#           &quot;Mroonga is a MySQL storage engine based on Groonga&quot;
#         ]
#       ]
#     ]
#   ]
# ]
</pre></div>
</div>
<p>今までも、 <code class="docutils literal notranslate"><span class="pre">--output_columns</span> <span class="pre">'snippet_html(contents[1])'</span></code> のように <code class="docutils literal notranslate"><span class="pre">snippet*</span></code> を指定することで以下のようにベクターに対して検索キーワードの周辺テキストを抽出できますが、この方法ではどの要素を出力すればよいかわかりません。どの要素が検索にヒットしたかわからないためです。</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>select Entries\
  --output_columns &#39;snippet_html(contents[0]), contents&#39;\
  --match_columns &#39;title&#39;\
  --query Groonga
# [
#   [
#     0,
#     0.0,
#     0.0
#   ],
#   [
#     [
#       [
#         1
#       ],
#       [
#         [
#           &quot;snippet_html&quot;,
#           null
#         ],
#         [
#           &quot;contents&quot;,
#           &quot;ShortText&quot;
#         ]
#       ],
#       [
#         [
#           &quot;&lt;span class=\&quot;keyword\&quot;&gt;Groonga&lt;/span&gt; is a full text search engine&quot;
#         ],
#         [
#           &quot;Groonga is a full text search engine&quot;,
#           &quot;MySQL is a RDBMS&quot;,
#           &quot;Mroonga is a MySQL storage engine based on Groonga&quot;
#         ]
#       ]
#     ]
#   ]
# ]
</pre></div>
</div>
</li>
</ul>
<p>[<a class="reference internal" href="12.html#release-12-0-1"><span class="std std-ref">12.0.1リリース - 2022-02-28</span></a>]</p>
<ul>
<li><p>[<a class="reference internal" href="../reference/commands/query_expand.html"><span class="doc">query_expand</span></a>] 同義語グループをサポートしました。</p>
<p>同義語検索をする場合、今までは、以下のようにキーワードとその同義語をそれぞれ定義していました。</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>table_create Thesaurus TABLE_PAT_KEY ShortText --normalizer NormalizerAuto
# [[0, 1337566253.89858, 0.000355720520019531], true]
column_create Thesaurus synonym COLUMN_VECTOR ShortText
# [[0, 1337566253.89858, 0.000355720520019531], true]
load --table Thesaurus
[
{&quot;_key&quot;: &quot;mroonga&quot;, &quot;synonym&quot;: [&quot;mroonga&quot;, &quot;tritonn&quot;, &quot;groonga mysql&quot;]},
{&quot;_key&quot;: &quot;groonga&quot;, &quot;synonym&quot;: [&quot;groonga&quot;, &quot;senna&quot;]}
]
</pre></div>
</div>
<p>上記のケースでは、<code class="docutils literal notranslate"><span class="pre">mroonga</span></code> を検索した場合、 Groongaは、意図通り、 <code class="docutils literal notranslate"><span class="pre">mroonga</span> <span class="pre">OR</span> <span class="pre">tritonn</span> <span class="pre">OR</span> <span class="pre">&quot;groonga</span> <span class="pre">mysql&quot;</span> <span class="pre">を検索しますが、</span></code>tritonn<code class="docutils literal notranslate"><span class="pre">を検索した場合は、</span> <span class="pre">Groongaは、</span></code>tritonn<code class="docutils literal notranslate"> <span class="pre">のみを検索します。</span></code>tritonn<code class="docutils literal notranslate"> <span class="pre">を検索した場合でも、</span></code>tritonn OR mroonga OR &quot;groonga mysql&quot;` と検索した場合、以下のように定義を追加する必要がありました。</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>load --table Thesaurus
[
{&quot;_key&quot;: &quot;tritonn&quot;, &quot;synonym&quot;: [&quot;tritonn&quot;, &quot;mroonga&quot;, &quot;groonga mysql&quot;]},
]
</pre></div>
</div>
<p>多くのケースでは、 <code class="docutils literal notranslate"><span class="pre">mroonga</span></code> を <code class="docutils literal notranslate"><span class="pre">mroonga</span> <span class="pre">OR</span> <span class="pre">tritonn</span> <span class="pre">OR</span> <span class="pre">&quot;groonga</span> <span class="pre">mysql&quot;</span></code> と展開した場合、 <code class="docutils literal notranslate"><span class="pre">tritonn</span></code> や <code class="docutils literal notranslate"><span class="pre">&quot;groonga</span> <span class="pre">mysql&quot;</span></code> も <code class="docutils literal notranslate"><span class="pre">mroonga</span> <span class="pre">OR</span> <span class="pre">tritonn</span> <span class="pre">OR</span> <span class="pre">&quot;groonga</span> <span class="pre">mysql&quot;</span></code> と展開して欲しくなりますが、今までは、そのようなケースでは定義を追加する必要がありました。したがって、対象のキーワードに同義語がたくさんあると、同じような定義をたくさん定義する必要があるため、同義語の定義が煩雑でした。</p>
<p>加えて、同義語を削除する際も、多くのレコードを削除する必要があるので面倒でした。</p>
<p>今回のリリースから同義語の代表値を決めることで一つのグループを作れるようになりました。例えば、以下のすべてのキーワードは、 &quot;mroonga&quot; グループです。</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>load --table Synonyms
[
  {&quot;_key&quot;: &quot;mroonga&quot;: &quot;representative&quot;: &quot;mroonga&quot;}
]

load --table Synonyms
[
  {&quot;_key&quot;: &quot;tritonn&quot;: &quot;representative&quot;: &quot;mroonga&quot;},
  {&quot;_key&quot;: &quot;groonga mysql&quot;: &quot;representative&quot;: &quot;mroonga&quot;}
]
</pre></div>
</div>
<p>このケースでは、 <code class="docutils literal notranslate"><span class="pre">mroonga</span></code> は <code class="docutils literal notranslate"><span class="pre">mroonga</span> <span class="pre">OR</span> <span class="pre">tritonn</span> <span class="pre">OR</span> <span class="pre">&quot;groonga</span> <span class="pre">mysql&quot;</span></code> と展開されます。また、 <code class="docutils literal notranslate"><span class="pre">tritonn</span></code> や <code class="docutils literal notranslate"><span class="pre">&quot;groonga</span> <span class="pre">mysql&quot;</span></code> も <code class="docutils literal notranslate"><span class="pre">mroonga</span> <span class="pre">OR</span> <span class="pre">tritonn</span> <span class="pre">OR</span> <span class="pre">&quot;groonga</span> <span class="pre">mysql&quot;</span></code> と展開されます。</p>
<p>同義語を削除する際も、対象のレコードを削除するだけです。例えば、同義語から <code class="docutils literal notranslate"><span class="pre">&quot;groonga</span> <span class="pre">mysql&quot;</span></code> を削除する場合は、 <code class="docutils literal notranslate"><span class="pre">{&quot;_key&quot;:</span> <span class="pre">&quot;groonga</span> <span class="pre">mysql&quot;:</span> <span class="pre">&quot;representative&quot;:</span> <span class="pre">&quot;mroonga&quot;}</span></code> を削除するだけです。</p>
</li>
</ul>
<p>[<a class="reference internal" href="12.html#release-12-0-0"><span class="std std-ref">12.0.0リリース - 2022-02-09</span></a>]</p>
<ul>
<li><p>[index_column_have_source_record] 新しい関数 <code class="docutils literal notranslate"><span class="pre">index_column_have_source_record()</span></code> を追加しました。</p>
<p>インデックスに存在するトークンがGroongaに登録されているいずれかのレコードに含まれているかどうかを確認できます。</p>
<p>Groongaは、レコードの更新によってどのレコードからも使われていないトークンがあっても、それを削除しません。したがって、例えば、オートコンプリート機能を使っていると、検索候補としてどのレコードにも含まれていないトークンを返す可能性がありますが、この関数をつかうことで、不要なトークンを返さないようにできます。</p>
<p>この関数は、トークンがどのレコードにも含まれていないことを検出できるからです。</p>
</li>
<li><p>[<a class="reference internal" href="../reference/commands/select.html"><span class="doc">select</span></a>] 新しい引数 <code class="docutils literal notranslate"><span class="pre">drilldown_max_n_target_records</span></code> と <code class="docutils literal notranslate"><span class="pre">drilldown[${LABEL}].max_n_target_records</span></code> を追加しました。</p>
<p>ドリルダウン対象のテーブル（フィルター結果）の中のうち最大で何レコードをドリルダウンに使うかを指定します。もし、フィルター結果のレコード数が指定した値より大きかったらフィルターした結果内のいくつかのレコードはドリルダウンには使われません。これらの引数のデフォルト値は、 <code class="docutils literal notranslate"><span class="pre">-1</span></code> です。これらの引数に <code class="docutils literal notranslate"><span class="pre">-1</span></code> がセットされた場合、Groongaは全てのレコードをドリルダウンに使います。</p>
<p>この機能はフィルター結果が非常に大きくなるかもしれない場合に有用です。大きなフィルター結果に対するドリルダウンは遅くなることがあるためです。この機能を使うことでドリルダウンに使うレコード数を制限できます。</p>
<p>以下はドリルダウンに使う最大レコード数を制限する例です。最後の2レコード（ <code class="docutils literal notranslate"><span class="pre">{&quot;_id&quot;:</span> <span class="pre">4,</span> <span class="pre">&quot;tag&quot;:</span> <span class="pre">&quot;Senna&quot;}</span></code> と <code class="docutils literal notranslate"><span class="pre">{&quot;_id&quot;:</span> <span class="pre">5,</span> <span class="pre">&quot;tag&quot;:</span> <span class="pre">&quot;Senna&quot;}</span></code> ）は使われていません。</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span> table_create Entries TABLE_HASH_KEY ShortText
 column_create Entries content COLUMN_SCALAR Text
 column_create Entries n_likes COLUMN_SCALAR UInt32
 column_create Entries tag COLUMN_SCALAR ShortText

 table_create Terms TABLE_PAT_KEY ShortText --default_tokenizer TokenBigram --normalizer NormalizerAuto
 column_create Terms entries_key_index COLUMN_INDEX|WITH_POSITION Entries _key
 column_create Terms entries_content_index COLUMN_INDEX|WITH_POSITION Entries content
 load --table Entries
 [
 {&quot;_key&quot;:    &quot;The first post!&quot;,
  &quot;content&quot;: &quot;Welcome! This is my first post!&quot;,
  &quot;n_likes&quot;: 5,
  &quot;tag&quot;: &quot;Hello&quot;},
 {&quot;_key&quot;:    &quot;Groonga&quot;,
  &quot;content&quot;: &quot;I started to use Groonga. It&#39;s very fast!&quot;,
  &quot;n_likes&quot;: 10,
  &quot;tag&quot;: &quot;Groonga&quot;},
 {&quot;_key&quot;:    &quot;Mroonga&quot;,
  &quot;content&quot;: &quot;I also started to use Mroonga. It&#39;s also very fast! Really fast!&quot;,
  &quot;n_likes&quot;: 15,
  &quot;tag&quot;: &quot;Groonga&quot;},
 {&quot;_key&quot;:    &quot;Good-bye Senna&quot;,
  &quot;content&quot;: &quot;I migrated all Senna system!&quot;,
  &quot;n_likes&quot;: 3,
  &quot;tag&quot;: &quot;Senna&quot;},
 {&quot;_key&quot;:    &quot;Good-bye Tritonn&quot;,
  &quot;content&quot;: &quot;I also migrated all Tritonn system!&quot;,
  &quot;n_likes&quot;: 3,
  &quot;tag&quot;: &quot;Senna&quot;}
 ]

 select Entries \
   --limit -1 \
   --output_columns _id,tag \
   --drilldown tag \
   --drilldown_max_n_target_records 3
 # [
 #   [
 #     0,
 #     1337566253.89858,
 #     0.000355720520019531
 #   ],
 #   [
 #     [
 #       [
 #         5
 #       ],
 #       [
 #         [
 #           &quot;_id&quot;,
 #           &quot;UInt32&quot;
 #         ],
 #         [
 #           &quot;tag&quot;,
 #           &quot;ShortText&quot;
 #         ]
 #       ],
 #       [
 #         1,
 #         &quot;Hello&quot;
 #       ],
 #       [
 #         2,
 #         &quot;Groonga&quot;
 #       ],
 #       [
 #         3,
 #         &quot;Groonga&quot;
 #       ],
 #       [
 #         4,
 #         &quot;Senna&quot;
 #       ],
 #       [
 #         5,
 #         &quot;Senna&quot;
 #       ]
 #     ],
 #     [
 #       [
 #         2
 #       ],
 #       [
 #         [
 #           &quot;_key&quot;,
 #           &quot;ShortText&quot;
 #         ],
 #         [
 #           &quot;_nsubrecs&quot;,
 #           &quot;Int32&quot;
 #         ]
 #       ],
 #       [
 #         &quot;Hello&quot;,
 #         1
 #       ],
 #       [
 #         &quot;Groonga&quot;,
 #         2
 #       ]
 #     ]
 #   ]
 # ]
</pre></div>
</div>
</li>
</ul>
</section>
</section>
<section id="summary">
<h3>概要<a class="headerlink" href="#summary" title="Link to this heading">#</a></h3>
<section id="id23">
<h4>改良<a class="headerlink" href="#id23" title="Link to this heading">#</a></h4>
<p>[<a class="reference internal" href="12.html#release-12-1-2"><span class="std std-ref">12.1.2リリース - 2023-01-29</span></a>]</p>
<ul class="simple">
<li><p>[httpd] バンドルしているnginxのバージョンを1.23.3に更新しました。</p></li>
</ul>
<p>[<a class="reference internal" href="12.html#release-12-1-1"><span class="std std-ref">12.1.1リリース - 2023-01-06</span></a>]</p>
<ul class="simple">
<li><p>[<a class="reference internal" href="../reference/commands/select.html"><span class="doc">select</span></a>][<a class="reference internal" href="../reference/commands/select.html#select-drilldowns-label-key-vector-expansions-power-set"><span class="std std-ref">POWER_SET</span></a>] ドリルダウンでベクターのべき集合を集計できるようになりました。</p></li>
<li><p>[<a class="reference internal" href="../reference/commands/select.html"><span class="doc">select</span></a>] ベクターカラムの特定の要素のみを対象に検索できるようになりました。</p></li>
<li><p>[<a class="reference internal" href="../reference/commands/load.html"><span class="doc">load</span></a>] <code class="docutils literal notranslate"><span class="pre">YYYY-MM-DD</span></code> 形式をサポートしました。</p></li>
</ul>
<p>[<a class="reference internal" href="12.html#release-12-1-0"><span class="std std-ref">12.1.0リリース - 2022-11-29</span></a>]</p>
<ul class="simple">
<li><p>[<a class="reference internal" href="../reference/commands/load.html"><span class="doc">load</span></a>] <code class="docutils literal notranslate"><span class="pre">load</span></code> のスローログの出力に対応しました。</p></li>
<li><p>[<a class="reference internal" href="../reference/api.html"><span class="doc">API</span></a>] 新しいAPI <code class="docutils literal notranslate"><span class="pre">grn_is_reference_count_enable()</span></code> を追加しました。</p></li>
<li><p>[<a class="reference internal" href="../reference/commands/status.html"><span class="doc">status</span></a>] 新しい項目 <code class="docutils literal notranslate"><span class="pre">back_trace</span></code> と <code class="docutils literal notranslate"><span class="pre">reference_count</span></code> を追加しました。</p></li>
</ul>
<p>[<a class="reference internal" href="12.html#release-12-0-9"><span class="std std-ref">12.0.9リリース - 2022-10-28</span></a>]</p>
<ul class="simple">
<li><p>[<a class="reference internal" href="../install/almalinux.html"><span class="doc">AlmaLinux</span></a>] AlmaLinux 9 向けのパッケージをサポートしました。</p></li>
<li><p>[<a class="reference internal" href="../reference/functions/escalate.html"><span class="doc">escalate</span></a>] <code class="docutils literal notranslate"><span class="pre">escalate()</span></code> 関数のドキュメントを追加しました。</p></li>
<li><p>[<a class="reference internal" href="../reference/normalizers.html"><span class="doc">ノーマライザー</span></a>] <code class="docutils literal notranslate"><span class="pre">NormalizerHTML</span></code> を追加しました。（実験的）</p></li>
<li><p>[httpd] バンドルしているnginxのバージョンを1.23.2に更新しました。</p></li>
<li><p>メモリーが不足した際に、同じログが大量に出力されないように変更しました。</p></li>
</ul>
<p>[<a class="reference internal" href="12.html#release-12-0-8"><span class="std std-ref">12.0.8リリース - 2022-10-03</span></a>]</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">escalate()</span></code> 関数（実験的）の仕様を使いやすいように変更しました。</p></li>
<li><p>[<a class="reference internal" href="../install/cmake.html"><span class="doc">CMakeを使ってGroongaをビルドする方法</span></a>] CMakeを使ってビルドする方法を追加しました。</p></li>
<li><p>[<a class="reference internal" href="../install/others.html"><span class="doc">その他</span></a>] GNU Autotoolsを使ってビルドする場合に、Apache Arrowの機能を有効化/無効化する方法について追加しました。</p></li>
<li><p>[<a class="reference internal" href="../reference/commands/select.html"><span class="doc">select</span></a>] <a class="reference internal" href="../reference/commands/select.html#select-drilldowns-label-table"><span class="std std-ref">drilldowns[${LABEL}].table</span></a> のドキュメントを追加しました。</p></li>
<li><p>[<a class="reference internal" href="../contribution/documentation/i18n.html"><span class="doc">国際化</span></a>] 翻訳方法を更新しました。</p></li>
</ul>
<p>[<a class="reference internal" href="12.html#release-12-0-7"><span class="std std-ref">12.0.7リリース - 2022-08-29</span></a>]</p>
<ul class="simple">
<li><p>新しい関数 <code class="docutils literal notranslate"><span class="pre">escalate()</span></code> を追加しました。(実験的)</p></li>
<li><p>[httpd] バンドルしているnginxのバージョンを1.23.1に更新しました。</p></li>
<li><p>[<a class="reference internal" href="../reference/commands/select.html"><span class="doc">select</span></a>] <code class="docutils literal notranslate"><span class="pre">--n_workers</span></code> オプションのドキュメントを追加しました。</p></li>
</ul>
<p>[<a class="reference internal" href="12.html#release-12-0-6"><span class="std std-ref">12.0.6リリース - 2022-08-04</span></a>]</p>
<ul class="simple">
<li><p>groonga-delta用の新しいMuninプラグインを追加しました。</p></li>
<li><p>[<a class="reference internal" href="../reference/commands/column_copy.html"><span class="doc">column_copy</span></a>] 重み付きベクターをサポートしました。</p></li>
<li><p>[<a class="reference internal" href="../install/ubuntu.html"><span class="doc">Ubuntu</span></a>] Ubuntu 21.10 (Impish Indri) のサポートをやめました。</p></li>
<li><p>[<a class="reference internal" href="../install/debian.html"><span class="doc">Debian GNU/Linux</span></a>] Debian 10 (buster) のサポートをやめました。</p></li>
</ul>
<p>[<a class="reference internal" href="12.html#release-12-0-5"><span class="std std-ref">12.0.5リリース - 2022-06-29</span></a>]</p>
<ul class="simple">
<li><p>[<a class="reference internal" href="../reference/commands/select.html"><span class="doc">select</span></a>] 検索エスカレーションによる前方一致検索のパフォーマンスを少し改善しました。</p></li>
<li><p>[<a class="reference internal" href="../reference/commands/select.html"><span class="doc">select</span></a>] <code class="docutils literal notranslate"><span class="pre">drilldowns[LABEL]._key</span></code> に重み付き参照ベクターカラムを指定できるようになりました。</p></li>
<li><p>[<a class="reference internal" href="../reference/commands/select.html"><span class="doc">select</span></a>] <code class="docutils literal notranslate"><span class="pre">query</span></code> や <code class="docutils literal notranslate"><span class="pre">filter</span></code> や <code class="docutils literal notranslate"><span class="pre">post_filter</span></code> を使っていても、ドリルダウンのキーに重み付き参照ベクターカラムを指定できるようになりました。</p></li>
</ul>
<p>[<a class="reference internal" href="12.html#release-12-0-4"><span class="std std-ref">12.0.4リリース - 2022-06-06</span></a>]</p>
<ul class="simple">
<li><p>[<a class="reference internal" href="../install/ubuntu.html"><span class="doc">Ubuntu</span></a>] Ubuntu 22.04 (Jammy Jellyfish)をサポートしました。</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">groonga-benchmark</span></code> の提供をやめました。</p></li>
<li><p>[<a class="reference internal" href="../reference/commands/status.html"><span class="doc">status</span></a>] 新しい項目 <code class="docutils literal notranslate"><span class="pre">memory_map_size</span></code> を追加しました。</p></li>
</ul>
<p>[<a class="reference internal" href="12.html#release-12-0-3"><span class="std std-ref">12.0.3リリース - 2022-04-29</span></a>]</p>
<ul class="simple">
<li><p>[<a class="reference internal" href="../reference/commands/logical_count.html"><span class="doc">logical_count</span></a>] <code class="docutils literal notranslate"><span class="pre">logical_count</span></code> 実行中のメモリー使用量を改善しました。</p></li>
<li><p>[<a class="reference internal" href="../reference/commands/dump.html"><span class="doc">dump</span></a>] <code class="docutils literal notranslate"><span class="pre">MISSING_IGNORE/MISSING_NIL</span></code> をサポートしました。</p></li>
<li><p>[<a class="reference internal" href="../reference/functions/snippet.html"><span class="doc">snippet</span></a>],[<a class="reference internal" href="../reference/functions/snippet_html.html"><span class="doc">snippet_html</span></a>] 入力としてベクターをサポートしました。</p></li>
<li><p>[<code class="docutils literal notranslate"><span class="pre">vector_join</span></code>] 新しい関数 <code class="docutils literal notranslate"><span class="pre">vector_join()</span></code> を追加しました。</p></li>
<li><p>[<a class="reference internal" href="../reference/indexing.html"><span class="doc">インデックス構築</span></a>] 動的インデックス構築のようにとても大きなトークンを無視するようにしました。</p></li>
</ul>
<p>[<a class="reference internal" href="12.html#release-12-0-2"><span class="std std-ref">12.0.2リリース - 2022-03-29</span></a>]</p>
<ul class="simple">
<li><p>[<a class="reference internal" href="../reference/commands/logical_range_filter.html"><span class="doc">logical_range_filter</span></a>] シャードを処理した直後に参照を減らすようにしました。</p></li>
<li><p>クラッシュリカバリー機能の安定性が向上しました。</p></li>
<li><p>無名マッピングが利用可能な時のmmapのパフォーマンスを向上しました。</p></li>
<li><p>[<a class="reference internal" href="../reference/indexing.html"><span class="doc">インデックス構築</span></a>] 以下のタイプのカラムで静的インデックス構築をサポートしました。</p></li>
<li><p>[<a class="reference internal" href="../reference/commands/column_create.html"><span class="doc">column_create</span></a>] 新しいフラグ <code class="docutils literal notranslate"><span class="pre">MISSING_*</span></code> と <code class="docutils literal notranslate"><span class="pre">INVALID_*</span></code> を追加しました。</p></li>
<li><p>[<a class="reference internal" href="../reference/commands/dump.html"><span class="doc">dump</span></a>][<a class="reference internal" href="../reference/commands/column_list.html"><span class="doc">column_list</span></a>] <code class="docutils literal notranslate"><span class="pre">MISSING_*</span></code> と <code class="docutils literal notranslate"><span class="pre">INVALID_*</span></code> フラグをサポートしました。</p></li>
<li><p>[<a class="reference internal" href="../reference/commands/schema.html"><span class="doc">schema</span></a>] <code class="docutils literal notranslate"><span class="pre">MISSING_*</span></code> と <code class="docutils literal notranslate"><span class="pre">INVALID_*</span></code> フラグをサポートしました。</p></li>
<li><p>Amazon Linux 2向けのパッケージを提供するようにしました。</p></li>
<li><p>[Windows] Visual Studio 2017 でのビルドをやめました。</p></li>
</ul>
<p>[<a class="reference internal" href="12.html#release-12-0-1"><span class="std std-ref">12.0.1リリース - 2022-02-28</span></a>]</p>
<ul class="simple">
<li><p>[<a class="reference internal" href="../reference/commands/query_expand.html"><span class="doc">query_expand</span></a>] 同義語グループをサポートしました。</p></li>
<li><p>[<a class="reference internal" href="../reference/commands/query_expand.html"><span class="doc">query_expand</span></a>] 同義語グループにベクターを使えるようにしました。</p></li>
<li><p>環境変数によって、バックトレースを無効にできるようにしました。</p></li>
<li><p>[<a class="reference internal" href="../reference/commands/select.html"><span class="doc">select</span></a>] <code class="docutils literal notranslate"><span class="pre">--slices</span></code> のパフォーマンスを改善しました。</p></li>
<li><p>[Windows] VisualStudio 2022 をサポートしました。</p></li>
<li><p>[<a class="reference internal" href="../reference/commands/select.html"><span class="doc">select</span></a>] 近傍検索でそれぞれの要素ごとの距離を指定できるようになりました。</p></li>
<li><p>[<a class="reference internal" href="../reference/executables/groonga-server-http.html"><span class="doc">Groonga HTTPサーバー</span></a>] RPMパッケージのGroongaであっても、 <code class="docutils literal notranslate"><span class="pre">groonga-server-http</span></code> を使えるようにしました。</p></li>
</ul>
<p>[<a class="reference internal" href="12.html#release-12-0-0"><span class="std std-ref">12.0.0リリース - 2022-02-09</span></a>]</p>
<ul class="simple">
<li><p>[<a class="reference internal" href="../reference/functions/sub_filter.html"><span class="doc">sub_filter</span></a>] 新しいオプション <code class="docutils literal notranslate"><span class="pre">pre_filter_threshold</span></code> を追加しました。</p></li>
<li><p>[index_column_have_source_record] 新しい関数 <code class="docutils literal notranslate"><span class="pre">index_column_have_source_record()</span></code> を追加しました。</p></li>
<li><p>[<a class="reference internal" href="../reference/normalizers/normalizer_nfkc130.html"><span class="doc">NormalizerNFKC130</span></a>] 新しいオプション <code class="docutils literal notranslate"><span class="pre">strip</span></code> を追加しました。</p></li>
<li><p>[<a class="reference internal" href="../reference/commands/select.html"><span class="doc">select</span></a>] 新しい引数 <code class="docutils literal notranslate"><span class="pre">drilldown_max_n_target_records</span></code> と <code class="docutils literal notranslate"><span class="pre">drilldown[${LABEL}].max_n_target_records</span></code> を追加しました。</p></li>
<li><p>[httpd] バンドルしているnginxのバージョンを1.21.6に更新しました。</p></li>
</ul>
</section>
<section id="id24">
<h4>修正<a class="headerlink" href="#id24" title="Link to this heading">#</a></h4>
<p>[<a class="reference internal" href="12.html#release-12-1-1"><span class="std std-ref">12.1.1リリース - 2023-01-06</span></a>]</p>
<ul class="simple">
<li><p>[<a class="reference internal" href="../reference/commands/select.html"><span class="doc">select</span></a>] <code class="docutils literal notranslate"><span class="pre">command_version</span></code> が <code class="docutils literal notranslate"><span class="pre">3</span></code> のとき、 <code class="docutils literal notranslate"><span class="pre">drilldown</span></code> の結果のラベルが不正になる問題を修正しました。</p></li>
<li><p>[<a class="reference internal" href="../reference/normalizers/normalizer_table.html"><span class="doc">NormalizerTable</span></a>] 特定の定義が <code class="docutils literal notranslate"><span class="pre">NormalizerTable</span></code> に存在する場合、Groongaがクラッシュすることがある問題を修正しました。</p></li>
</ul>
<p>[<a class="reference internal" href="12.html#release-12-1-0"><span class="std std-ref">12.1.0リリース - 2022-11-29</span></a>]</p>
<ul class="simple">
<li><p>[<a class="reference internal" href="../reference/commands/select.html"><span class="doc">select</span></a>][<a class="reference internal" href="../reference/columns/vector.html"><span class="doc">ベクターカラム</span></a>] 重み付きベクターカラムで <code class="docutils literal notranslate"><span class="pre">WEIGHT_FLOAT32</span></code> を指定したとき、結果が整数で表示されていた問題を修正しました。</p></li>
</ul>
<p>[<a class="reference internal" href="12.html#release-12-0-9"><span class="std std-ref">12.0.9リリース - 2022-10-28</span></a>]</p>
<ul class="simple">
<li><p>[<a class="reference internal" href="../reference/commands/select.html"><span class="doc">select</span></a>] <a class="reference internal" href="../reference/commands/select.html#select-n-workers"><span class="std std-ref">n_workers</span></a> を指定したとき、Groongaがクラッシュしたり、誤った結果を返すことがある問題を修正しました。</p></li>
</ul>
<p>[<a class="reference internal" href="12.html#release-12-0-8"><span class="std std-ref">12.0.8リリース - 2022-10-03</span></a>]</p>
<ul class="simple">
<li><p><a class="reference internal" href="../reference/normalizers/normalizer_table.html"><span class="doc">NormalizerTable</span></a> で冪等でない（繰り返し実行すると結果が変わることがある）定義をした時に、Groongaが誤った結果を返すことがある問題を修正しました。</p></li>
</ul>
<p>[<a class="reference internal" href="12.html#release-12-0-7"><span class="std std-ref">12.0.7リリース - 2022-08-29</span></a>]</p>
<ul class="simple">
<li><p>OR検索実行中に <code class="docutils literal notranslate"><span class="pre">request_cancel</span></code> を実行した場合、Groongaの応答が遅くなることがある問題を修正しました。</p></li>
</ul>
<p>[<a class="reference internal" href="12.html#release-12-0-6"><span class="std std-ref">12.0.6リリース - 2022-08-04</span></a>]</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">n_workers</span></code> オプションを使ってドリルダウンを並行して実行したときにGroongaがクラッシュすることがある問題を修正しました。</p></li>
<li><p>[<a class="reference internal" href="../reference/commands/select.html"><span class="doc">select</span></a>] <code class="docutils literal notranslate"><span class="pre">--filter</span></code> に非常に長い式を指定するとシンタックスエラーになる問題を修正しました。</p></li>
</ul>
<p>[<a class="reference internal" href="12.html#release-12-0-4"><span class="std std-ref">12.0.4リリース - 2022-06-06</span></a>]</p>
<ul class="simple">
<li><p>検索実行中に <code class="docutils literal notranslate"><span class="pre">request_cancel</span></code> を実行した時Groongaの応答が遅くなることがある問題を修正しました。</p></li>
<li><p>文字列リストをint32のベクターにキャストできない問題を修正しました。</p></li>
<li><p>GroongaのMuninプラグインがAlmaLinux 8 とCentOS 7上で動作しない問題を修正しました。</p></li>
</ul>
<p>[<a class="reference internal" href="12.html#release-12-0-3"><span class="std std-ref">12.0.3リリース - 2022-04-29</span></a>]</p>
<ul class="simple">
<li><p>パトリシアトライのテーブルにキーを追加できなくなることがある問題を修正しました。</p></li>
</ul>
</section>
</section>
</section>
</section>


                </article>
              
              
              
              
              
                <footer class="prev-next-footer d-print-none">
                  
<div class="prev-next-area">
</div>
                </footer>
              
            </div>
            
            
              
                <div class="bd-sidebar-secondary bd-toc"><div class="sidebar-secondary-items sidebar-secondary__inner">


  <div class="sidebar-secondary-item">
<div
    id="pst-page-navigation-heading-2"
    class="page-toc tocsection onthispage">
    <i class="fa-solid fa-list"></i> On this page
  </div>
  <nav class="bd-toc-nav page-toc" aria-labelledby="pst-page-navigation-heading-2">
    <ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#release-13-1-1-2024-01-09">13.1.1リリース - 2024-01-09</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#improvements">改良</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#fixes">修正</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#release-13-1-0-2023-12-26">13.1.0リリース - 2023-12-26</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#id1">改良</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#id2">修正</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#release-13-0-9-2023-10-29">13.0.9リリース - 2023-10-29</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#id3">改良</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#id4">修正</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#thanks">感謝</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#release-13-0-8-2023-09-29">13.0.8リリース - 2023-09-29</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#id5">改良</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#id6">修正</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#release-13-0-7-2023-09-12">13.0.7リリース - 2023-09-12</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#id7">修正</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#release-13-0-6-2023-08-31">13.0.6リリース - 2023-08-31</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#id8">改良</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#id9">修正</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#release-13-0-5-2023-08-02">13.0.5リリース - 2023-08-02</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#id10">修正</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#release-13-0-4-2023-07-26">13.0.4リリース - 2023-07-26</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#id11">改良</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#id12">修正</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#release-13-0-3-2023-07-24">13.0.3リリース - 2023-07-24</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#id13">改良</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#id14">修正</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#release-13-0-2-2023-07-12">13.0.2リリース - 2023-07-12</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#id15">改良</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#id16">修正</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#id17">感謝</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#release-13-0-1-2023-03-24">13.0.1リリース - 2023-03-24</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#id18">改良</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#id19">修正</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#id20">感謝</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#release-13-0-0-2023-02-09">13.0.0リリース - 2023-02-09</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#id21">改良</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#id22">感謝</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#higlight-and-summary-of-changes-from-12-0-0-to-12-1-2">Groonga 12.0.0 から 12.1.2 までの主な変更点</a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#higlight">ハイライト</a></li>
</ul>
</li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#summary">概要</a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#id23">改良</a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#id24">修正</a></li>
</ul>
</li>
</ul>
</li>
</ul>
  </nav></div>

</div></div>
              
            
          </div>
          <footer class="bd-footer-content">
            
          </footer>
        
      </main>
    </div>
  </div>
  
  <!-- Scripts loaded after <body> so the DOM is not blocked -->
  <script src="../_static/scripts/bootstrap.js?digest=3ee479438cf8b5e0d341"></script>
<script src="../_static/scripts/pydata-sphinx-theme.js?digest=3ee479438cf8b5e0d341"></script>

  <footer class="bd-footer">
<div class="bd-footer__inner bd-page-width">
  
    <div class="footer-items__start">
      
        <div class="footer-item">

  <p class="copyright">
    
      © Copyright 2009-2024 Groonga Project.
      <br/>
    
  </p>
</div>
      
    </div>
  
  
  
    <div class="footer-items__end">
      
        <div class="footer-item">
<p class="theme-version">
  Built with the <a href="https://pydata-sphinx-theme.readthedocs.io/en/stable/index.html">PyData Sphinx Theme</a> 0.15.3.
</p></div>
      
    </div>
  
</div>

  </footer>
  </body>
</html>