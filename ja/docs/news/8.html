
<!DOCTYPE html>


<html lang="ja" data-content_root="../" >

  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>お知らせ - 8系 &#8212; Groonga v13.1.1ドキュメント</title>
  
  
  
  <script data-cfasync="false">
    document.documentElement.dataset.mode = localStorage.getItem("mode") || "";
    document.documentElement.dataset.theme = localStorage.getItem("theme") || "light";
  </script>
  
  <!-- Loaded before other Sphinx assets -->
  <link href="../_static/styles/theme.css?digest=bd9e20870c6007c4c509" rel="stylesheet" />
<link href="../_static/styles/bootstrap.css?digest=bd9e20870c6007c4c509" rel="stylesheet" />
<link href="../_static/styles/pydata-sphinx-theme.css?digest=bd9e20870c6007c4c509" rel="stylesheet" />

  
  <link href="../_static/vendor/fontawesome/6.5.1/css/all.min.css?digest=bd9e20870c6007c4c509" rel="stylesheet" />
  <link rel="preload" as="font" type="font/woff2" crossorigin href="../_static/vendor/fontawesome/6.5.1/webfonts/fa-solid-900.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin href="../_static/vendor/fontawesome/6.5.1/webfonts/fa-brands-400.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin href="../_static/vendor/fontawesome/6.5.1/webfonts/fa-regular-400.woff2" />

    <link rel="stylesheet" type="text/css" href="../_static/pygments.css?v=a746c00c" />
  
  <!-- Pre-loaded scripts that we'll load fully later -->
  <link rel="preload" as="script" href="../_static/scripts/bootstrap.js?digest=bd9e20870c6007c4c509" />
<link rel="preload" as="script" href="../_static/scripts/pydata-sphinx-theme.js?digest=bd9e20870c6007c4c509" />
  <script src="../_static/vendor/fontawesome/6.5.1/js/all.min.js?digest=bd9e20870c6007c4c509"></script>

    <script src="../_static/documentation_options.js?v=13bd6792"></script>
    <script src="../_static/doctools.js?v=888ff710"></script>
    <script src="../_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="../_static/translations.js?v=4dbe4bdc"></script>
    <script async="async" src="https://www.googletagmanager.com/gtag/js?id=UA-7532323-1"></script>
    <script>
                window.dataLayer = window.dataLayer || [];
                function gtag(){ dataLayer.push(arguments); }
                gtag('js', new Date());
                gtag('config', 'UA-7532323-1');
            </script>
    <script>
                window.dataLayer = window.dataLayer || [];
                function gtag(){ dataLayer.push(arguments); }
                gtag('js', new Date());
                gtag('config', 'UA-7532323-1');
            </script>
    <script>DOCUMENTATION_OPTIONS.pagename = 'news/8';</script>
    <script>
        DOCUMENTATION_OPTIONS.theme_version = '0.15.1';
        DOCUMENTATION_OPTIONS.theme_switcher_json_url = 'https://groonga.org/docs/_static/switcher.json';
        DOCUMENTATION_OPTIONS.theme_switcher_version_match = 'japanese';
        DOCUMENTATION_OPTIONS.show_version_warning_banner = false;
        </script>
    <link rel="icon" href="../_static/favicon.ico"/>
    <link rel="index" title="索引" href="../genindex.html" />
    <link rel="search" title="検索" href="../search.html" />
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <meta name="docsearch:language" content="ja"/>
  </head>
  
  
  <body data-bs-spy="scroll" data-bs-target=".bd-toc-nav" data-offset="180" data-bs-root-margin="0px 0px -60%" data-default-mode="">

  
  
  <a id="pst-skip-link" class="skip-link" href="#main-content">Skip to main content</a>
  
  <div id="pst-scroll-pixel-helper"></div>

  
  <button type="button" class="btn rounded-pill" id="pst-back-to-top">
    <i class="fa-solid fa-arrow-up"></i>
    Back to top
  </button>

  
  <input type="checkbox"
          class="sidebar-toggle"
          name="__primary"
          id="__primary"/>
  <label class="overlay overlay-primary" for="__primary"></label>
  
  <input type="checkbox"
          class="sidebar-toggle"
          name="__secondary"
          id="__secondary"/>
  <label class="overlay overlay-secondary" for="__secondary"></label>
  
  <div class="search-button__wrapper">
    <div class="search-button__overlay"></div>
    <div class="search-button__search-container">
<form class="bd-search d-flex align-items-center"
      action="../search.html"
      method="get">
  <i class="fa-solid fa-magnifying-glass"></i>
  <input type="search"
         class="form-control"
         name="q"
         id="search-input"
         placeholder="Search the docs ..."
         aria-label="Search the docs ..."
         autocomplete="off"
         autocorrect="off"
         autocapitalize="off"
         spellcheck="false"/>
  <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd>K</kbd></span>
</form></div>
  </div>

  <header>
  
    <div class="bd-header navbar navbar-expand-lg bd-navbar">
<div class="bd-header__inner bd-page-width">
  <label class="sidebar-toggle primary-toggle" for="__primary">
    <span class="fa-solid fa-bars"></span>
  </label>
  
  
  <div class="col-lg-3 navbar-header-items__start">
    
      <div class="navbar-item">

   

<a class="navbar-brand logo" href="https://groonga.org/ja/">
  
  
  
  
  
    
    
      
    
    
    <img src="../_static/groonga.png" class="logo__image only-light" alt="Groonga v13.1.1ドキュメント - Home"/>
    <script>document.write(`<img src="../_static/groonga.png" class="logo__image only-dark" alt="Groonga v13.1.1ドキュメント - Home"/>`);</script>
  
  
</a></div>
    
  </div>
  
  <div class="col-lg-9 navbar-header-items">
    
    
    <div class="navbar-header-items__end">
      
        <div class="navbar-item navbar-persistent--container">
          

 <script>
 document.write(`
   <button class="btn navbar-btn search-button-field search-button__button" title="検索" aria-label="検索" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="fa-solid fa-magnifying-glass"></i>
    <span class="search-button__default-text">検索</span>
    <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd class="kbd-shortcut__modifier">K</kbd></span>
   </button>
 `);
 </script>
        </div>
      
      
        <div class="navbar-item">

<script>
document.write(`
  <button class="btn btn-sm navbar-btn theme-switch-button" title="light/dark" aria-label="light/dark" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <span class="theme-switch nav-link" data-mode="light"><i class="fa-solid fa-sun fa-lg"></i></span>
    <span class="theme-switch nav-link" data-mode="dark"><i class="fa-solid fa-moon fa-lg"></i></span>
    <span class="theme-switch nav-link" data-mode="auto"><i class="fa-solid fa-circle-half-stroke fa-lg"></i></span>
  </button>
`);
</script></div>
      
        <div class="navbar-item"><ul class="navbar-icon-links navbar-nav"
    aria-label="Icon Links">
        <li class="nav-item">
          
          
          
          
          
          
          
          
          <a href="https://github.com/groonga/groonga" title="GitHub" class="nav-link" rel="noopener" target="_blank" data-bs-toggle="tooltip" data-bs-placement="bottom"><span><i class="fa-brands fa-square-github fa-lg" aria-hidden="true"></i></span>
            <span class="sr-only">GitHub</span></a>
        </li>
        <li class="nav-item">
          
          
          
          
          
          
          
          
          <a href="https://twitter.com/groonga" title="Twitter" class="nav-link" rel="noopener" target="_blank" data-bs-toggle="tooltip" data-bs-placement="bottom"><span><i class="fa-brands fa-square-twitter fa-lg" aria-hidden="true"></i></span>
            <span class="sr-only">Twitter</span></a>
        </li>
        <li class="nav-item">
          
          
          
          
          
          
          
          
          <a href="/ja/blog" title="Blog" class="nav-link" rel="noopener" target="_blank" data-bs-toggle="tooltip" data-bs-placement="bottom"><span><i class="fas fa-blog fa-lg" aria-hidden="true"></i></span>
            <span class="sr-only">Blog</span></a>
        </li>
</ul></div>
      
        <div class="navbar-item">
<script>
document.write(`
  <div class="version-switcher__container dropdown">
    <button id="pst-version-switcher-button-2"
      type="button"
      class="version-switcher__button btn btn-sm navbar-btn dropdown-toggle"
      data-bs-toggle="dropdown"
      aria-haspopup="listbox"
      aria-controls="pst-version-switcher-list-2"
      aria-label="Version switcher list"
    >
      Choose version  <!-- this text may get changed later by javascript -->
      <span class="caret"></span>
    </button>
    <div id="pst-version-switcher-list-2"
      class="version-switcher__menu dropdown-menu list-group-flush py-0"
      role="listbox" aria-labelledby="pst-version-switcher-button-2">
      <!-- dropdown will be populated by javascript on page load -->
    </div>
  </div>
`);
</script></div>
      
    </div>
    
  </div>
  
  
    <div class="navbar-persistent--mobile">

 <script>
 document.write(`
   <button class="btn navbar-btn search-button-field search-button__button" title="検索" aria-label="検索" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="fa-solid fa-magnifying-glass"></i>
    <span class="search-button__default-text">検索</span>
    <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd class="kbd-shortcut__modifier">K</kbd></span>
   </button>
 `);
 </script>
    </div>
  

  
    <label class="sidebar-toggle secondary-toggle" for="__secondary" tabindex="0">
      <span class="fa-solid fa-outdent"></span>
    </label>
  
</div>

    </div>
  
  </header>

  <div class="bd-container">
    <div class="bd-container__inner bd-page-width">
      
      
      
        
      
      <div class="bd-sidebar-primary bd-sidebar hide-on-wide">
        

  
  <div class="sidebar-header-items sidebar-primary__section">
    
    
    
    
      <div class="sidebar-header-items__end">
        
          <div class="navbar-item">

<script>
document.write(`
  <button class="btn btn-sm navbar-btn theme-switch-button" title="light/dark" aria-label="light/dark" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <span class="theme-switch nav-link" data-mode="light"><i class="fa-solid fa-sun fa-lg"></i></span>
    <span class="theme-switch nav-link" data-mode="dark"><i class="fa-solid fa-moon fa-lg"></i></span>
    <span class="theme-switch nav-link" data-mode="auto"><i class="fa-solid fa-circle-half-stroke fa-lg"></i></span>
  </button>
`);
</script></div>
        
          <div class="navbar-item"><ul class="navbar-icon-links navbar-nav"
    aria-label="Icon Links">
        <li class="nav-item">
          
          
          
          
          
          
          
          
          <a href="https://github.com/groonga/groonga" title="GitHub" class="nav-link" rel="noopener" target="_blank" data-bs-toggle="tooltip" data-bs-placement="bottom"><span><i class="fa-brands fa-square-github fa-lg" aria-hidden="true"></i></span>
            <span class="sr-only">GitHub</span></a>
        </li>
        <li class="nav-item">
          
          
          
          
          
          
          
          
          <a href="https://twitter.com/groonga" title="Twitter" class="nav-link" rel="noopener" target="_blank" data-bs-toggle="tooltip" data-bs-placement="bottom"><span><i class="fa-brands fa-square-twitter fa-lg" aria-hidden="true"></i></span>
            <span class="sr-only">Twitter</span></a>
        </li>
        <li class="nav-item">
          
          
          
          
          
          
          
          
          <a href="/ja/blog" title="Blog" class="nav-link" rel="noopener" target="_blank" data-bs-toggle="tooltip" data-bs-placement="bottom"><span><i class="fas fa-blog fa-lg" aria-hidden="true"></i></span>
            <span class="sr-only">Blog</span></a>
        </li>
</ul></div>
        
          <div class="navbar-item">
<script>
document.write(`
  <div class="version-switcher__container dropdown">
    <button id="pst-version-switcher-button-3"
      type="button"
      class="version-switcher__button btn btn-sm navbar-btn dropdown-toggle"
      data-bs-toggle="dropdown"
      aria-haspopup="listbox"
      aria-controls="pst-version-switcher-list-3"
      aria-label="Version switcher list"
    >
      Choose version  <!-- this text may get changed later by javascript -->
      <span class="caret"></span>
    </button>
    <div id="pst-version-switcher-list-3"
      class="version-switcher__menu dropdown-menu list-group-flush py-0"
      role="listbox" aria-labelledby="pst-version-switcher-button-3">
      <!-- dropdown will be populated by javascript on page load -->
    </div>
  </div>
`);
</script></div>
        
      </div>
    
  </div>
  
  
  <div class="sidebar-primary-items__end sidebar-primary__section">
  </div>
  
  <div id="rtd-footer-container"></div>


      </div>
      
      <main id="main-content" class="bd-main">
        
        
          <div class="bd-content">
            <div class="bd-article-container">
              
              <div class="bd-header-article">
<div class="header-article-items header-article__inner">
  
    <div class="header-article-items__start">
      
        <div class="header-article-item">



<nav aria-label="Breadcrumb">
  <ul class="bd-breadcrumbs">
    
    <li class="breadcrumb-item breadcrumb-home">
      <a href="../index.html" class="nav-link" aria-label="Home">
        <i class="fa-solid fa-home"></i>
      </a>
    </li>
    <li class="breadcrumb-item active" aria-current="page">お知らせ - 8系</li>
  </ul>
</nav>
</div>
      
    </div>
  
  
</div>
</div>
              
              
              
                
<div id="searchbox"></div>
                <article class="bd-article">
                  
  <section id="news-8-series">
<h1>お知らせ - 8系<a class="headerlink" href="#news-8-series" title="Link to this heading">#</a></h1>
<section id="release-8-1-1-2019-01-29">
<span id="release-8-1-1"></span><h2>8.1.1リリース - 2019-01-29<a class="headerlink" href="#release-8-1-1-2019-01-29" title="Link to this heading">#</a></h2>
<section id="improvements">
<h3>改良<a class="headerlink" href="#improvements" title="Link to this heading">#</a></h3>
<ul class="simple">
<li><p>[<a class="reference internal" href="../reference/commands/logical_select.html"><span class="doc">logical_select</span></a>] 新しい引数 <code class="docutils literal notranslate"><span class="pre">--load_table</span></code> 、<code class="docutils literal notranslate"><span class="pre">--load_columns</span></code> 、 <code class="docutils literal notranslate"><span class="pre">--load_values</span></code> を追加しました。</p>
<ul>
<li><p><code class="docutils literal notranslate"><span class="pre">logical_select</span></code> の結果を <code class="docutils literal notranslate"><span class="pre">--load_table</span></code> で指定したテーブルへ格納できます。</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">--load_values</span></code> オプションは、<code class="docutils literal notranslate"><span class="pre">logical_select</span></code> の結果のカラムを指定します。</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">--load_columns</span></code> オプションは、<code class="docutils literal notranslate"><span class="pre">--load_table</span></code> で指定したテーブルのカラムを指定します。</p></li>
<li><p>このようにして、<code class="docutils literal notranslate"><span class="pre">--load_values</span></code> で指定したカラムの値を、 <code class="docutils literal notranslate"><span class="pre">--load_columns</span></code> で指定したカラムへ格納できます。</p></li>
</ul>
</li>
<li><p>インデックスの更新エラー時のログを改善しました。</p>
<ul>
<li><p>ログに、より詳細な情報を追加しました。</p>
<ul>
<li><p>例えば、ポスティングリストのマージに失敗した時にマージ元のバッファーとチャンクを出力します。</p></li>
<li><p>また、バッファー確保のエラーが発生した時は、バッファーの空き領域と要求サイズをログに出力します。</p></li>
</ul>
</li>
</ul>
</li>
<li><p>[<a class="reference internal" href="../reference/executables/groonga.html"><span class="doc">groonga 実行ファイル</span></a>] 新しいオプション <code class="docutils literal notranslate"><span class="pre">--log-flags</span></code> を追加しました。</p>
<ul>
<li><p>Groongaのログに出力する項目を指定できます。</p></li>
<li><p>以下のような項目を出力できます。</p>
<ul>
<li><p>タイムスタンプ</p></li>
<li><p>ログメッセージ</p></li>
<li><p>ロケーション(ログが出力された場所)</p></li>
<li><p>プロセスID</p></li>
<li><p>スレッドID</p></li>
</ul>
</li>
<li><p>以下のように接頭辞を指定できます。</p>
<ul>
<li><p><code class="docutils literal notranslate"><span class="pre">+</span></code></p>
<ul>
<li><p>この接頭辞は、 &quot;フラグを追加する&quot;という意味です。</p></li>
</ul>
</li>
<li><p><code class="docutils literal notranslate"><span class="pre">-</span></code></p>
<ul>
<li><p>この接頭辞は、&quot;フラグを削除する&quot;という意味です。</p></li>
</ul>
</li>
<li><p>接頭辞無しは、&quot;存在しているフラグを置き換える&quot;という意味です。</p></li>
</ul>
</li>
<li><p>具体的には、以下のようにフラグ指定できます。</p>
<ul>
<li><p><code class="docutils literal notranslate"><span class="pre">none</span></code></p>
<ul>
<li><p>ログに何も出力しません。</p></li>
</ul>
</li>
<li><p><code class="docutils literal notranslate"><span class="pre">time</span></code></p>
<ul>
<li><p>ログにタイムスタンプを出力します。</p></li>
</ul>
</li>
<li><p><code class="docutils literal notranslate"><span class="pre">message</span></code></p>
<ul>
<li><p>ログにメッセージを出力します。</p></li>
</ul>
</li>
<li><p><code class="docutils literal notranslate"><span class="pre">location</span></code></p>
<ul>
<li><p>ログの出力場所(ファイル名、行数、関数名)とプロセスIDを出力します。</p></li>
</ul>
</li>
<li><p><code class="docutils literal notranslate"><span class="pre">process_id</span></code></p>
<ul>
<li><p>ログにプロセスIDを出力します。</p></li>
</ul>
</li>
<li><p><code class="docutils literal notranslate"><span class="pre">pid</span></code></p>
<ul>
<li><p>このフラグは、 <code class="docutils literal notranslate"><span class="pre">process_id</span></code> のエイリアスです。</p></li>
</ul>
</li>
<li><p><code class="docutils literal notranslate"><span class="pre">thread_id</span></code></p>
<ul>
<li><p>ログにスレッドIDを出力します。</p></li>
</ul>
</li>
<li><p><code class="docutils literal notranslate"><span class="pre">all</span></code></p>
<ul>
<li><p>このフラグは、 <code class="docutils literal notranslate"><span class="pre">none</span></code> と <code class="docutils literal notranslate"><span class="pre">default</span></code> 以外の全てのフラグを指定します。</p></li>
</ul>
</li>
<li><p><code class="docutils literal notranslate"><span class="pre">default</span></code></p>
<ul>
<li><p>ログに、タイムスタンプとログメッセージを出力します。</p></li>
</ul>
</li>
</ul>
</li>
<li><p><code class="docutils literal notranslate"><span class="pre">|</span></code> を使って、複数のフラグを指定することもできます。</p></li>
</ul>
</li>
</ul>
</section>
<section id="fixes">
<h3>修正<a class="headerlink" href="#fixes" title="Link to this heading">#</a></h3>
<ul>
<li><p>インデックスの更新エラー発生時にメモリリークする問題を修正しました。</p></li>
<li><p>[<a class="reference internal" href="../reference/normalizers.html"><span class="doc">ノーマライザー</span></a>] ステートレスなノーマライザーとステートフルなノーマライザーを同時に使用した時に、それらが誤った結果を返すバグを修正しました。</p>
<blockquote>
<div><ul class="simple">
<li><p>ステートレスなノーマライザーとは以下です。</p>
<ul>
<li><p><code class="docutils literal notranslate"><span class="pre">unify_kana</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">unify_kana_case</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">unify_kana_voiced_sound_mark</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">unify_hyphen</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">unify_prolonged_sound_mark</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">unify_hyphen_and_prolonged_sound_mark</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">unify_middle_dot</span></code></p></li>
</ul>
</li>
<li><p>ステートフルなノーマライザーとは以下です。</p>
<ul>
<li><p><code class="docutils literal notranslate"><span class="pre">unify_katakana_v_sounds</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">unify_katakana_bu_sound</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">unify_to_romaji</span></code></p></li>
</ul>
</li>
</ul>
</div></blockquote>
</li>
</ul>
</section>
</section>
<section id="release-8-1-0-2018-12-29">
<span id="release-8-1-0"></span><h2>8.1.0リリース - 2018-12-29<a class="headerlink" href="#release-8-1-0-2018-12-29" title="Link to this heading">#</a></h2>
<section id="id1">
<h3>改良<a class="headerlink" href="#id1" title="Link to this heading">#</a></h3>
<ul class="simple">
<li><p>[httpd] バンドルしているnginxのバージョンを1.15.8に更新しました。</p></li>
</ul>
</section>
<section id="id2">
<h3>修正<a class="headerlink" href="#id2" title="Link to this heading">#</a></h3>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">io_flush</span></code> コマンド実行後に、DBに対するアンロックが常にフラッシュの実行後になってしまうバグを修正しました。</p></li>
<li><p>参照先を持たないレコードを持つテーブルに対して <code class="docutils literal notranslate"><span class="pre">reindex</span></code> コマンドを実行した際に、 <code class="docutils literal notranslate"><span class="pre">reindex</span></code> コマンドが終了しないバグを修正しました。</p></li>
</ul>
</section>
</section>
<section id="release-8-0-9-2018-11-29">
<span id="release-8-0-9"></span><h2>8.0.9リリース - 2018-11-29<a class="headerlink" href="#release-8-0-9-2018-11-29" title="Link to this heading">#</a></h2>
<section id="id3">
<h3>改良<a class="headerlink" href="#id3" title="Link to this heading">#</a></h3>
<ul class="simple">
<li><p>[<a class="reference internal" href="../reference/tokenizers.html"><span class="doc">トークナイザー</span></a>] トークナイザーの作成に失敗した際のエラーメッセージにトークナイザーの名前を出力するよう改良。</p></li>
<li><p>[<a class="reference internal" href="../reference/tokenizers.html"><span class="doc">トークナイザー</span></a>][TokenDelimit] トークンの区切り文字のカスタマイズをサポートしました。</p>
<ul>
<li><p>空白以外のトークンを区切り文字に使えます。</p></li>
</ul>
</li>
<li><p>[<a class="reference internal" href="../reference/tokenizers.html"><span class="doc">トークナイザー</span></a>][TokenDelimit] 新しいオプション <code class="docutils literal notranslate"><span class="pre">pattern</span></code> を追加しました。</p>
<ul>
<li><p>このオプションにより、区切り文字にに正規表現を指定できます。</p></li>
</ul>
</li>
<li><p>[<a class="reference internal" href="../reference/tokenizers.html"><span class="doc">トークナイザー</span></a>] 各トークンの情報に <code class="docutils literal notranslate"><span class="pre">force_prefix_search</span></code> の値を追加しました。</p>
<ul>
<li><p>&quot;force_prefix&quot; は後方互換のため残しています。</p></li>
</ul>
</li>
<li><p>[<a class="reference internal" href="../reference/token_filters.html"><span class="doc">トークンフィルター</span></a>] ビルトインのトークンフィルタ <code class="docutils literal notranslate"><span class="pre">TokenFilterNFKC100</span></code> を追加しました。</p>
<ul>
<li><p>NormalizerNFKC100のように <code class="docutils literal notranslate"><span class="pre">unify_kana</span></code> オプションで、カタカナをひらがなへ変換できます。</p></li>
</ul>
</li>
<li><p>[<a class="reference internal" href="../reference/token_filters.html"><span class="doc">トークンフィルター</span></a>][TokenFilterStem] 新しオプション <code class="docutils literal notranslate"><span class="pre">algorithm</span></code> を追加しました。</p>
<ul>
<li><p>このオプションによって、英語以外の言語(フランス語、スペイン語、ポルトガル語、イタリア語、ルーマニア語、ドイツ語、オランダ語、スウェーデン語、ノルウェー語、デンマーク語、ロシア語、フィンランド語)をステミングできます。</p></li>
</ul>
</li>
<li><p>[<a class="reference internal" href="../reference/token_filters.html"><span class="doc">トークンフィルター</span></a>][TokenFilterStopWord] 新しいオプション <code class="docutils literal notranslate"><span class="pre">column</span></code> を追加しました</p>
<ul>
<li><p>このオプションによって、is_stop_word以外のカラムをスットプワードに指定できます。</p></li>
</ul>
</li>
<li><p>[<a class="reference internal" href="../reference/commands/dump.html"><span class="doc">dump</span></a>] トークンフィルターのオプションの出力をサポートしました。</p>
<ul>
<li><p><code class="docutils literal notranslate"><span class="pre">TokenNgram</span></code> や <code class="docutils literal notranslate"><span class="pre">TokenMecab</span></code> 等のようなオプションを持つトークナイザーを指定した場合、それらのオプションも <code class="docutils literal notranslate"><span class="pre">table_list</span></code> コマンドで出力できます。</p></li>
</ul>
</li>
<li><p>[<a class="reference internal" href="../reference/commands/truncate.html"><span class="doc">truncate</span></a>] トークンフィルターのオプションを持ったテーブルをサポートしました。</p>
<ul>
<li><p><code class="docutils literal notranslate"><span class="pre">TokenFilterStem</span></code> や <code class="docutils literal notranslate"><span class="pre">TokenStopWord</span></code> 等のようなオプションを持つトークナイザーを持つテーブルでも <code class="docutils literal notranslate"><span class="pre">truncate</span></code> できます。</p></li>
</ul>
</li>
<li><p>[<a class="reference internal" href="../reference/commands/schema.html"><span class="doc">schema</span></a>] トークンフィルターのオプションの出力をサポートしました。</p></li>
<li><p>[<a class="reference internal" href="../reference/normalizers.html"><span class="doc">ノーマライザー</span></a>] <code class="docutils literal notranslate"><span class="pre">NormalizerNFKC100</span></code> に新しいオプション <code class="docutils literal notranslate"><span class="pre">unify_to_romaji</span></code> を追加しました。</p>
<ul>
<li><p>このオプションによって、ひらがなとカタカナをローマ字に正規化できます。</p></li>
</ul>
</li>
<li><p>[query-log][show-condition] &quot;func() &gt; 0&quot;をサポートしました。</p></li>
<li><p>[Windows] アンマップ前のフラッシュを確実にするよう改善しました。</p></li>
<li><p>ファイル入力のエラーメッセージを改善しました。</p></li>
<li><p>[httpd] バンドルしているnginxのバージョンを1.15.7に更新しました。</p>
<ul>
<li><p>CVE-2018-16843とCVE-2018-16844のセキュリティの修正が含まれています。</p></li>
</ul>
</li>
</ul>
</section>
<section id="id4">
<h3>修正<a class="headerlink" href="#id4" title="Link to this heading">#</a></h3>
<ul>
<li><p>ウインドウ関数を評価する際にメモリリークする問題を修正しました。</p></li>
<li><p>[<a class="reference internal" href="../reference/executables/groonga-httpd.html"><span class="doc">groonga-httpd</span></a>] ログの内容が混在することがあるバグを修正しました。</p></li>
<li><p>output_columnsのスライスのエラーが発生した際に、無効なJSONが生成されるバグを修正しました。</p></li>
<li><p>ネストして参照されているベクターカラムの値を取得する際にメモリリークする問題を修正しました。</p></li>
<li><p>インデックス破損を警告するログを出力する際にクラッシュするバグを修正しました。</p></li>
<li><p>式の評価で一時的なベクターが再利用された時にクラッシュするバグを修正しました。</p>
<ul class="simple">
<li><p>例えば、以下のようにベクターを使った式を評価する時にクラッシュします。</p></li>
</ul>
<p><code class="docutils literal notranslate"><span class="pre">_score</span> <span class="pre">=</span> <span class="pre">_score</span> <span class="pre">+</span> <span class="pre">(vector_size(categories)</span> <span class="pre">&gt;</span> <span class="pre">0)</span></code></p>
</li>
<li><p>deleteコマンドで削除したベクターカラムの値がヒットするバグを修正しました。[dodaisukeさんの報告]</p></li>
</ul>
</section>
<section id="thanks">
<h3>感謝<a class="headerlink" href="#thanks" title="Link to this heading">#</a></h3>
<ul class="simple">
<li><p>dodaisukeさん</p></li>
</ul>
</section>
</section>
<section id="release-8-0-8-2018-10-29">
<span id="release-8-0-8"></span><h2>8.0.8リリース - 2018-10-29<a class="headerlink" href="#release-8-0-8-2018-10-29" title="Link to this heading">#</a></h2>
<section id="id5">
<h3>改良<a class="headerlink" href="#id5" title="Link to this heading">#</a></h3>
<ul>
<li><p>[<a class="reference internal" href="../reference/commands/table_list.html"><span class="doc">table_list</span></a>] デフォルトトークナイザーのオプションをサポートしました。</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">TokenNgram</span></code> や <code class="docutils literal notranslate"><span class="pre">TokenMecab</span></code> 等のようなオプションを持つトークナイザーを指定した場合、それらのオプションも <code class="docutils literal notranslate"><span class="pre">table_list</span></code> コマンドで出力できます。</p></li>
</ul>
</li>
<li><p>[<a class="reference internal" href="../reference/commands/select.html"><span class="doc">select</span></a>] <code class="docutils literal notranslate"><span class="pre">record</span> <span class="pre">&#64;</span> <span class="pre">'query'</span></code> を使ったシーケンシャルマッチでノーマライザーのオプションをサポートしました。</p></li>
<li><p>[<a class="reference internal" href="../reference/commands/truncate.html"><span class="doc">truncate</span></a>] トークナイザーのオプションを持ったテーブルをサポートしました。</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">TokenNgram</span></code> や <code class="docutils literal notranslate"><span class="pre">TokenMecab</span></code> 等のようなオプションを持つトークナイザーを持つテーブルでも <code class="docutils literal notranslate"><span class="pre">truncate</span></code> できます。</p></li>
</ul>
</li>
<li><p>[<a class="reference internal" href="../reference/tokenizers.html"><span class="doc">トークナイザー</span></a>][TokenMecab] <code class="docutils literal notranslate"><span class="pre">TokenMecab</span></code> に <code class="docutils literal notranslate"><span class="pre">target_class</span></code> オプションを追加しました。</p>
<ul>
<li><p>このオプションは、指定した品詞のトークンを検索します。例えば、名詞のみを検索することができます。</p></li>
<li><p>このオプションは、以下のようにサブクラスを指定することや、 <code class="docutils literal notranslate"><span class="pre">+</span></code> や <code class="docutils literal notranslate"><span class="pre">-</span></code> を使って、特定の品詞を追加または除外することもできます。したがって、以下のように代名詞を除外して検索することもできます。</p>
<p><code class="docutils literal notranslate"><span class="pre">'TokenMecab(&quot;target_class&quot;,</span> <span class="pre">&quot;-名詞/代名詞&quot;,</span> <span class="pre">&quot;target_class&quot;,</span> <span class="pre">&quot;+&quot;)'</span></code></p>
</li>
</ul>
</li>
<li><p>[<a class="reference internal" href="../reference/commands/io_flush.html"><span class="doc">io_flush</span></a>] <code class="docutils literal notranslate"><span class="pre">io_flush</span></code> 中のデータベースのロックをサポートしました。</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">io_flush</span></code> 実行中に <code class="docutils literal notranslate"><span class="pre">io_flush</span></code> 対象のテーブルを削除するとGroongaがクラッシュする問題があったためです。</p></li>
</ul>
</li>
<li><p>[<a class="reference internal" href="../reference/functions/cast_loose.html"><span class="doc">cast_loose</span></a>] 新しい関数 <code class="docutils literal notranslate"><span class="pre">cast_loose()</span></code> を追加しました。</p>
<ul class="simple">
<li><p>この関数は、指定した型へキャストします。もし、指定した値がキャストできない場合、値は、指定したデフォルト値になります。</p></li>
</ul>
</li>
<li><p>条件式の評価順序の最適化を追加しました。(実験的)</p>
<ul>
<li><p>以下のように環境変数を設定することでこの機能を有効にできます。</p>
<p><code class="docutils literal notranslate"><span class="pre">GRN_EXPR_OPTIMIZE=yes</span></code></p>
</li>
</ul>
</li>
<li><p>インデックス検索可能な正規表現に <code class="docutils literal notranslate"><span class="pre">(?-mix:XXX)</span></code> 記法をサポートしました。 [groonga-dev,04683][ Masatoshi SEKIさんの報告]</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">(?-mix:XXX)</span></code> は XXX と同じ扱いです。</p></li>
</ul>
</li>
<li><p>[httpd] バンドルしているnginxのバージョンを1.15.5に更新しました。</p></li>
<li><p>Ubuntu 18.10 (Cosmic Cuttlefish)をサポートしました。</p></li>
</ul>
</section>
<section id="id6">
<h3>修正<a class="headerlink" href="#id6" title="Link to this heading">#</a></h3>
<ul class="simple">
<li><p>Groonga GQTP サーバーが新しい接続を受け付けなくなることがあるバグを修正しました。[groonga-dev,04688][Yutaro Shimamuraさんの報告]</p>
<ul>
<li><p>quitを使わずにクライアントプロセスを中断した時に発生します。</p></li>
</ul>
</li>
</ul>
</section>
<section id="id7">
<h3>感謝<a class="headerlink" href="#id7" title="Link to this heading">#</a></h3>
<ul class="simple">
<li><p>Masatoshi SEKIさん</p></li>
<li><p>Yutaro Shimamuraさん</p></li>
</ul>
</section>
</section>
<section id="release-8-0-7-2018-09-29">
<span id="release-8-0-7"></span><h2>8.0.7リリース - 2018-09-29<a class="headerlink" href="#release-8-0-7-2018-09-29" title="Link to this heading">#</a></h2>
<section id="id8">
<h3>改良<a class="headerlink" href="#id8" title="Link to this heading">#</a></h3>
<ul>
<li><p>[<a class="reference internal" href="../reference/tokenizers.html"><span class="doc">トークナイザー</span></a>][TokenMecab] Mecabのメタデータの出力をサポートしました。</p>
<ul>
<li><p><code class="docutils literal notranslate"><span class="pre">TokenMecab</span></code> に <code class="docutils literal notranslate"><span class="pre">include_class</span></code> オプションを追加しました。</p>
<p>このオプションは、Mecabのメタデータの <code class="docutils literal notranslate"><span class="pre">class</span></code> と <code class="docutils literal notranslate"><span class="pre">subclass</span></code> を出力します。</p>
</li>
<li><p><code class="docutils literal notranslate"><span class="pre">TokenMecab</span></code> に <code class="docutils literal notranslate"><span class="pre">include_reading</span></code> オプションを追加しました。</p>
<p>このオプションは、Mecabのメタデータの <code class="docutils literal notranslate"><span class="pre">reading</span></code> を出力します。</p>
</li>
<li><p><code class="docutils literal notranslate"><span class="pre">TokenMecab</span></code> に <code class="docutils literal notranslate"><span class="pre">include_form</span></code> オプションを追加しました。</p>
<p>このオプションは、Mecabのメタデータの <code class="docutils literal notranslate"><span class="pre">inflected_type</span></code> と <code class="docutils literal notranslate"><span class="pre">inflected_form</span></code> 、 <code class="docutils literal notranslate"><span class="pre">base_form</span></code> を出力します。</p>
</li>
<li><p><code class="docutils literal notranslate"><span class="pre">TokenMecab</span></code> に <code class="docutils literal notranslate"><span class="pre">use_reading</span></code> オプションを追加しました。</p>
<p>このオプションは、読みがなによる検索をサポートします。</p>
<p>このオプションは、読みがなを使った検索をするため、表記ゆれの対策として有用です。</p>
</li>
</ul>
</li>
<li><p>[plugin] 複数のディレクトリからプラグインを取得できるようになりました。</p>
<p><code class="docutils literal notranslate"><span class="pre">GRN_PLUGINS_PATH</span></code> に複数のディレクトリを指定できます。Windowsの場合は、&quot;:&quot;でWindows以外では、&quot;;&quot;で区切ります。</p>
<p><code class="docutils literal notranslate"><span class="pre">GRN_PLUGINS_PATH</span></code> は、 <code class="docutils literal notranslate"><span class="pre">GRN_PLUGINS_DIR</span></code> より優先度が高いです。現状、このオプションはWindowsではサポートされていません。</p>
</li>
<li><p>[<a class="reference internal" href="../reference/tokenizers.html"><span class="doc">トークナイザー</span></a>][TokenNgram] <code class="docutils literal notranslate"><span class="pre">TokenNgram</span></code> に <code class="docutils literal notranslate"><span class="pre">unify_alphabet</span></code> オプションを追加しました。</p>
<p><code class="docutils literal notranslate"><span class="pre">unify_alphabet</span></code> を <code class="docutils literal notranslate"><span class="pre">false</span></code> として使うと、 <code class="docutils literal notranslate"><span class="pre">TokenNgram</span></code> はASCII文字のトークナイズ方法にバイグラムを使います。</p>
</li>
<li><p>[<a class="reference internal" href="../reference/tokenizers.html"><span class="doc">トークナイザー</span></a>][TokenNgram] <code class="docutils literal notranslate"><span class="pre">TokenNgram</span></code> に <code class="docutils literal notranslate"><span class="pre">unify_symbol</span></code> オプションを追加しました。</p>
<p><code class="docutils literal notranslate"><span class="pre">TokenNgram(&quot;unify_symbol&quot;,</span> <span class="pre">false)</span></code> は、 <code class="docutils literal notranslate"><span class="pre">TokenBigramSplitSymbol</span></code> と同じ動作です。</p>
</li>
<li><p>[<a class="reference internal" href="../reference/tokenizers.html"><span class="doc">トークナイザー</span></a>][TokenNgram] <code class="docutils literal notranslate"><span class="pre">TokenNgram</span></code> に <code class="docutils literal notranslate"><span class="pre">unify_digit</span></code> オプションを追加しました。</p>
<p><code class="docutils literal notranslate"><span class="pre">unify_digit</span></code> を <code class="docutils literal notranslate"><span class="pre">false</span></code> として使うと、 <code class="docutils literal notranslate"><span class="pre">TokenNgram</span></code> は数字のトークナイズ方法にバイグラムを使います。</p>
</li>
<li><p>[httpd] バンドルしているnginxのバージョンを1.15.4に更新しました。</p></li>
</ul>
</section>
<section id="id9">
<h3>修正<a class="headerlink" href="#id9" title="Link to this heading">#</a></h3>
<ul class="simple">
<li><p>いくつかのケースでの誤ったスコア計算を修正しました。</p>
<ul>
<li><p>ブール値に数値を加算、乗算または除算するときに発生します。</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">！=</span></code> や <code class="docutils literal notranslate"><span class="pre">==</span></code> を使ってスカラーとベクトルの列を比較するときに発生します。</p></li>
</ul>
</li>
</ul>
</section>
</section>
<section id="release-8-0-6-2018-08-29">
<span id="release-8-0-6"></span><h2>8.0.6リリース - 2018-08-29<a class="headerlink" href="#release-8-0-6-2018-08-29" title="Link to this heading">#</a></h2>
<section id="id10">
<h3>改良<a class="headerlink" href="#id10" title="Link to this heading">#</a></h3>
<ul>
<li><p>[<a class="reference internal" href="../reference/tokenizers.html"><span class="doc">トークナイザー</span></a>][TokenMecab] <code class="docutils literal notranslate"><span class="pre">chunked_tokenize</span></code> と <code class="docutils literal notranslate"><span class="pre">chunk_size_threshold</span></code> の両オプションに対応しました。</p></li>
<li><p>[optimizer] query family expressionの推定に対応しました。<code class="docutils literal notranslate"><span class="pre">column</span> <span class="pre">&#64;</span> <span class="pre">query</span></code> や <code class="docutils literal notranslate"><span class="pre">column</span> <span class="pre">&#64;~</span> <span class="pre">pattern</span></code> のようなquery family expressionについて、より効果的な実行計画を立てられます。</p></li>
<li><p>[optimizer] オプティマイザをプラグインから組み込みの機能に変更し、初期状態で無効としました。環境変数を <code class="docutils literal notranslate"><span class="pre">GRN_EXPR_OPTIMIZE=yes</span></code> と定義するか、従来通りに <code class="docutils literal notranslate"><span class="pre">expression_rewriters</span></code> テーブルを使う事で機能を有効化できます。</p></li>
<li><p>充分に絞り込み済みの場合において、初期状態でシーケンシャルサーチを行うようにしました。現在の結果が充分に少数である場合、シーケンシャルサーチはインデックス検索よりも高速です。現在の結果がテーブル内の全レコードの1%で1000件未満の場合、インデックス検索可能な場合であってもシーケンシャルサーチが使われます。</p>
<p>現在、この最適化は、 <code class="docutils literal notranslate"><span class="pre">==</span></code> と <code class="docutils literal notranslate"><span class="pre">&gt;</span></code> と <code class="docutils literal notranslate"><span class="pre">&lt;</span></code> と <code class="docutils literal notranslate"><span class="pre">&gt;=</span></code> と <code class="docutils literal notranslate"><span class="pre">&lt;=</span></code> を使った検索時に適用されます。</p>
<p>絞り込みに指定したカラムを持つテーブルのキーが <code class="docutils literal notranslate"><span class="pre">ShortText</span></code> の場合、この最適化を適用するためには、そのテーブルのノーマライザーを <code class="docutils literal notranslate"><span class="pre">NormalizerAuto</span></code> にする必要があります。</p>
<p>この機能は環境変数で <code class="docutils literal notranslate"><span class="pre">GRN_TABLE_SELECT_ENOUGH_FILTERED_RATIO=0.0</span></code> と設定する事で無効化できます。</p>
</li>
<li><p>[load] エラーメッセージにテーブル名を含めるようにしました。</p></li>
<li><p>[load] <code class="docutils literal notranslate"><span class="pre">lock_table</span></code> オプションを追加しました。<code class="docutils literal notranslate"><span class="pre">--lock_table</span> <span class="pre">yes</span></code> が指定された場合、カラムの更新と <code class="docutils literal notranslate"><span class="pre">--each</span></code> の適用を行っている間、<code class="docutils literal notranslate"><span class="pre">load</span></code> は対象のテーブルをロックします。このオプションは <code class="docutils literal notranslate"><span class="pre">load</span></code> と <code class="docutils literal notranslate"><span class="pre">delete</span></code> の衝突を防ぎますが、読み込みの性能を低下させるでしょう。</p></li>
<li><p>[vector_find] サポートされていないモードでクラッシュしないようにしました。</p></li>
</ul>
</section>
<section id="id11">
<h3>修正<a class="headerlink" href="#id11" title="Link to this heading">#</a></h3>
<ul class="simple">
<li><p>[index] <code class="docutils literal notranslate"><span class="pre">HASH_KEY</span></code> を伴ったテキストのベクターに対するオフラインでのインデックス構築に関して、誤ったセクションIDを持つインデックスが構築されてしまうバグを修正しました。</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">--match_columns</span> <span class="pre">'index[0]</span> <span class="pre">||</span> <span class="pre">index[9]'</span></code> が誤ったセクションを使用してしまう問題を修正しました。</p></li>
<li><p>[highlighter] 語彙表がハッシュテーブルで、且つキーワードがN-gramのNよりも少ない文字数の場合に、誤ったハイライトが行われていた問題を修正しました。</p></li>
<li><p>[mruby] 本当のエラーが隠されていた問題を修正しました。mrubyは引数無しで投げられたエラーの伝搬に対応していません。<a class="github reference external" href="https://github.com/mruby/mruby/issues/290">mruby/mruby#290</a></p></li>
<li><p>[<a class="reference internal" href="../reference/tokenizers.html"><span class="doc">トークナイザー</span></a>][TokenNgram loose]: クエリが曖昧な種類のみであった場合に検索結果が見つからない問題を修正しました。語彙表を伴っての <code class="docutils literal notranslate"><span class="pre">highlight_html()</span></code> も同様に壊れていました。</p></li>
<li><p>テキストから数値への変換において、後続するゴミ部分が無視されていた問題を修正しました。 &quot;0garbage&quot; は変換エラーになります。</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">reference_column</span> <span class="pre">&gt;=</span> <span class="pre">'key_value'</span></code> に当てはまる場合の最適化の問題を修正しました。</p></li>
</ul>
</section>
</section>
<section id="release-8-0-5-2018-07-29">
<span id="release-8-0-5"></span><h2>8.0.5リリース - 2018-07-29<a class="headerlink" href="#release-8-0-5-2018-07-29" title="Link to this heading">#</a></h2>
<section id="id12">
<h3>改良<a class="headerlink" href="#id12" title="Link to this heading">#</a></h3>
<ul class="simple">
<li><p>[<a class="reference internal" href="../reference/grn_expr/script_syntax.html"><span class="doc">スクリプト構文</span></a>] 類似文書検索の補足説明とその日本語訳を追加しました。 [GitHub groonga/GitHub#858] [堀本さんがパッチ提供]</p></li>
<li><p>[<a class="reference internal" href="../reference/functions/time_classify_day_of_week.html"><span class="doc">time_classify_day_of_week</span></a>] 新しい関数 <code class="docutils literal notranslate"><span class="pre">time_classify_day_of_week()</span></code> を追加しました。</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">-fstack-protector</span></code> で警告を抑制するようにしました。（OBATA Akioさんが提案）</p></li>
<li><p>新しいAPI <code class="docutils literal notranslate"><span class="pre">time_format_iso8601()</span></code> を追加しました。</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">grn_raw_string</span></code> 構造体を公開。</p></li>
<li><p>新しいAPI: <code class="docutils literal notranslate"><span class="pre">grn_obj_clear_option_values()</span></code> を追加しました。永続的なデータベースのremoveと一時的なデータベースのcloseの際にオプションの値を消去できます。</p></li>
<li><p>[log] <code class="docutils literal notranslate"><span class="pre">[ii][update][one]</span></code> のエラーメッセージにインデックスカラム名を出力するようにしました。</p></li>
<li><p>[httpd] バンドルしているnginxのバージョンを1.15.2に更新しました。</p></li>
<li><p>[<a class="reference internal" href="../install/ubuntu.html"><span class="doc">Ubuntu</span></a>] Ubuntu 17.10 (Artful Aardvark）のサポートをやめました。2018年7月19日でサポートが切れた（EOLになった）ためです。</p></li>
<li><p>[<a class="reference internal" href="../install/debian.html"><span class="doc">Debian GNU/Linux</span></a>] jessieのサポートをやめました。Debianのセキュリティ＆リリースチームはもはやjessieの更新を提供しません。</p></li>
</ul>
</section>
<section id="id13">
<h3>修正<a class="headerlink" href="#id13" title="Link to this heading">#</a></h3>
<ul class="simple">
<li><p>POSTでの <code class="docutils literal notranslate"><span class="pre">/d/load</span></code> へのデータ送信が中断された後に誤った結果が返されていたのを修正しました。</p></li>
<li><p>KyTeaに関する間違った関数呼び出しを修正しました。</p></li>
<li><p>[<a class="reference internal" href="../reference/executables/grndb.html"><span class="doc">grndb</span></a>] <code class="docutils literal notranslate"><span class="pre">--force-truncate</span></code> オプションのラベルを追加しました。</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">groonga-normalizer-mysql</span></code> のようにプラグインとして提供されているノーマライザーでオプションを使った場合に、データベースを終了するときにクラッシュする問題を修正しました。</p></li>
<li><p>ノーマライザーとトークナイザーのオプションが無視される場合があった問題を修正しました。この問題は同じオブジェクトIDが再利用された場合に発生していました。</p></li>
</ul>
</section>
</section>
<section id="release-8-0-4-2018-06-29">
<span id="release-8-0-4"></span><h2>8.0.4リリース - 2018-06-29<a class="headerlink" href="#release-8-0-4-2018-06-29" title="Link to this heading">#</a></h2>
<section id="id14">
<h3>改良<a class="headerlink" href="#id14" title="Link to this heading">#</a></h3>
<ul class="simple">
<li><p>[log] <code class="docutils literal notranslate"><span class="pre">[ii][update][one]</span></code> のエラーメッセージにサブエラーを追加しました。</p></li>
<li><p>新しいAPI <code class="docutils literal notranslate"><span class="pre">grn_highlighter_clear_keywords()</span></code> を追加しました。</p></li>
<li><p>新しいpredicate <code class="docutils literal notranslate"><span class="pre">grn_obj_is_number_family_bulk()</span></code> を追加しました。</p></li>
<li><p>新しいAPI <code class="docutils literal notranslate"><span class="pre">grn_plugin_proc_get_value_mode()</span></code> を追加しました。</p></li>
<li><p>[<a class="reference internal" href="../reference/functions/vector_find.html"><span class="doc">vector_find</span></a>] 新しい関数 <code class="docutils literal notranslate"><span class="pre">vector_find()</span></code> を追加しました。</p></li>
<li><p>msgpackでのmemcpyの警告を抑制しました。</p></li>
<li><p>mrubyを1.0.0から1.4.1に更新しました。</p></li>
<li><p>[doc][<a class="reference internal" href="../reference/api/grn_obj.html"><span class="doc">grn_obj</span></a>] <code class="docutils literal notranslate"><span class="pre">grn_obj_is_index_column()</span></code> のAPIリファレンスを追加しました。</p></li>
<li><p>[windows] printfフォーマットの警告を抑制しました。</p></li>
<li><p>[windows] msgpackによる警告を抑制しました。</p></li>
<li><p>[<a class="reference internal" href="../reference/api/grn_obj.html"><span class="doc">grn_obj</span></a>][<a class="reference internal" href="../reference/api/plugin.html"><span class="doc">Plugin</span></a>] エンコーディングコンバーターを追加しました。ルール:</p>
<ul>
<li><p>grn_ctx::errbuf: grn_encoding</p></li>
<li><p>grn_logger_put: grn_encoding</p></li>
<li><p>mruby: UTF-8</p></li>
<li><p>path: locale</p></li>
</ul>
</li>
<li><p>[mrb] <code class="docutils literal notranslate"><span class="pre">LocaleOutput</span></code> を追加しました。</p></li>
<li><p>[windows] イメージのパスのgrn_encodingへの変換をサポートしました。</p></li>
<li><p>[<a class="reference internal" href="../reference/tokenizers.html"><span class="doc">トークナイザー</span></a>][TokenMecab] エラーメッセージのエンコーディングを変換するようにしました。</p></li>
<li><p>[<a class="reference internal" href="../reference/window_functions/window_sum.html"><span class="doc">window_sum</span></a>] 対象カラムとしての動的カラムをサポートしました。</p></li>
<li><p>[doc][<a class="reference internal" href="../reference/api/grn_obj.html"><span class="doc">grn_obj</span></a>] <code class="docutils literal notranslate"><span class="pre">grn_obj_is_vector_column()</span></code> のAPIリファレンスを追加しました。</p></li>
<li><p>[<a class="reference internal" href="../reference/commands/column_create.html"><span class="doc">column_create</span></a>] より多くのバリデーションを追加しました。</p>
<ul>
<li><p>1: ベクターカラムの全文検索インデックスは <code class="docutils literal notranslate"><span class="pre">WITH_SECTION</span></code> フラグが必要です。（ただし、 <code class="docutils literal notranslate"><span class="pre">WITH_POSITION</span></code> あり、 <code class="docutils literal notranslate"><span class="pre">WITH_SECTION</span></code> なしのTokenDelmitは許容されます。これはタグ検索に便利なパターンです。)</p></li>
<li><p>2: ベクターカラムの全文検索インデックスはマルチカラムインデックスであってはいけません。詳細: <a class="github reference external" href="https://github.com/groonga/groonga/commit/08e2456ba35407e3d5172f71a0200fac2a770142">groonga/groonga</a></p></li>
</ul>
</li>
<li><p>[<a class="reference internal" href="../reference/executables/grndb.html"><span class="doc">grndb</span></a>] 実装が不十分だったため、ログのチェックを一時的に無効にしました</p></li>
</ul>
</section>
<section id="id15">
<h3>修正<a class="headerlink" href="#id15" title="Link to this heading">#</a></h3>
<ul class="simple">
<li><p>[<a class="reference internal" href="../reference/functions/sub_filter.html"><span class="doc">sub_filter</span></a>] 十分にフィルターされたケースで、スコアが多すぎる問題を修正</p></li>
<li><p>KyTeaがインストールされているとビルドに失敗する問題を修正しました。</p></li>
<li><p>[<a class="reference internal" href="../reference/executables/grndb.html"><span class="doc">grndb</span></a>] 出力チャネルを修正しました。</p></li>
<li><p>[query-log][show-condition] クラッシュするバグを修正しました（まだ残っている可能性があります）。</p></li>
<li><p>[highlighter][lexicon] ハイライトされないバグを修正しました。キーワードの長さがN未満（N-gramのN。多くの場合はBigramなので2未満）の場合、キーワードがハイライトされていませんでした。</p></li>
<li><p>[windows] base path検出時の問題を修正しました。システムロケールのDLLパスが、CP932での「U+8868 CJK UNIFIED IDEOGRAPH-8868」のように0x5c （ASCIIでの <code class="docutils literal notranslate"><span class="pre">\</span></code> )を含む場合に問題がありました。</p></li>
<li><p>[<a class="reference internal" href="../reference/tokenizers.html"><span class="doc">トークナイザー</span></a>][TokenNgram] 最初の文字の長さの誤りを修正しました。この問題は、「U+3231 PARENTHESIZED IDEOGRAPH STOCK」のような「PARENTHESIZED IDEOGRAPH」文字で起きていました。</p></li>
</ul>
</section>
</section>
<section id="release-8-0-3-2018-05-29">
<span id="release-8-0-3"></span><h2>8.0.3リリース - 2018-05-29<a class="headerlink" href="#release-8-0-3-2018-05-29" title="Link to this heading">#</a></h2>
<section id="id16">
<h3>改良<a class="headerlink" href="#id16" title="Link to this heading">#</a></h3>
<ul>
<li><p>[<a class="reference internal" href="../reference/functions/highlight_html.html"><span class="doc">highlight_html</span></a>] <code class="docutils literal notranslate"><span class="pre">NormalizerNFKC100</span></code> または <code class="docutils literal notranslate"><span class="pre">TokenNgram</span></code> を使って検索した結果のハイライトをサポートしました。</p></li>
<li><p>[<a class="reference internal" href="../reference/tokenizers.html"><span class="doc">トークナイザー</span></a>] <code class="docutils literal notranslate"><span class="pre">TokenNgram</span></code> に新しいオプション <code class="docutils literal notranslate"><span class="pre">report_source_location</span> <span class="pre">option</span></code> を追加しました。このオプションは、<code class="docutils literal notranslate"><span class="pre">highlight_html</span></code> で語彙表を使ったハイライトをする時に使用します。</p></li>
<li><p>[<a class="reference internal" href="../reference/normalizers.html"><span class="doc">ノーマライザー</span></a>] <code class="docutils literal notranslate"><span class="pre">NormalizerNFKC100</span></code> に新しいオプション <code class="docutils literal notranslate"><span class="pre">unify_middle_dot</span> <span class="pre">option</span></code> を追加しました。このオプションは、中点を正規化します。<code class="docutils literal notranslate"><span class="pre">・</span></code> の有無や <code class="docutils literal notranslate"><span class="pre">・</span></code> 位置にかかわらず検索できます。</p></li>
<li><p>[<a class="reference internal" href="../reference/normalizers.html"><span class="doc">ノーマライザー</span></a>] <code class="docutils literal notranslate"><span class="pre">NormalizerNFKC100</span></code> に新しいオプション <code class="docutils literal notranslate"><span class="pre">unify_katakana_v_sounds</span> <span class="pre">option</span></code> を追加しました。このオプションは、<code class="docutils literal notranslate"><span class="pre">ヴァヴィヴヴェヴォ</span></code> を <code class="docutils literal notranslate"><span class="pre">バビブベボ</span></code>  へ正規化します。例えば <code class="docutils literal notranslate"><span class="pre">バイオリン</span></code> を <code class="docutils literal notranslate"><span class="pre">ヴァイオリン</span></code> で検索できます。</p></li>
<li><p>[<a class="reference internal" href="../reference/normalizers.html"><span class="doc">ノーマライザー</span></a>] <code class="docutils literal notranslate"><span class="pre">NormalizerNFKC100</span></code> に新しいオプション <code class="docutils literal notranslate"><span class="pre">unify_katakana_bu_sound</span> <span class="pre">option</span></code> を追加しました。このオプションは、<code class="docutils literal notranslate"><span class="pre">ヴァヴィヴゥヴェヴォ</span></code> を <code class="docutils literal notranslate"><span class="pre">ブ</span></code> に正規化します。例えば、<code class="docutils literal notranslate"><span class="pre">セーブル</span></code> や <code class="docutils literal notranslate"><span class="pre">セーヴル</span></code> を <code class="docutils literal notranslate"><span class="pre">セーヴェル</span></code> で検索できます。</p></li>
<li><p>[<a class="reference internal" href="../reference/functions/sub_filter.html"><span class="doc">sub_filter</span></a>] 十分にフィルターされたケースでの <code class="docutils literal notranslate"><span class="pre">sub_filter</span></code> の動作を最適化しました。この最適化は、 <code class="docutils literal notranslate"><span class="pre">sub_filter</span></code> 実行前に十分にレコードが絞り込まれているケースで有効になります。</p></li>
<li><p>[<a class="reference internal" href="../reference/executables/groonga-httpd.html"><span class="doc">groonga-httpd</span></a>] 全てのワーカのコンテキストアドレスをユニークにしました。コンテキストアドレスは、以下のクエリーログの <code class="docutils literal notranslate"><span class="pre">#{ID}</span></code> です。</p>
<div class="line-block">
<div class="line">#{TIME_STAMP}|#{MESSAGE}</div>
<div class="line">#{TIME_STAMP}|#{ID}|&gt;#{QUERY}</div>
<div class="line">#{TIME_STAMP}|#{ID}|:#{ELAPSED_TIME} #{PROGRESS}</div>
<div class="line">#{TIME_STAMP}|#{ID}|&lt;#{ELAPSED_TIME} #{RETURN_CODE}</div>
</div>
</li>
<li><p>[<a class="reference internal" href="../reference/commands/delete.html"><span class="doc">delete</span></a>] 新しいオプション <code class="docutils literal notranslate"><span class="pre">limit</span></code> を追加しました。以下の例のように、削除するレコードの件数を制限できます。<code class="docutils literal notranslate"><span class="pre">delete</span> <span class="pre">--table</span> <span class="pre">Users</span> <span class="pre">--filter</span> <span class="pre">'_key</span> <span class="pre">&#64;^</span> <span class="pre">&quot;b&quot;'</span> <span class="pre">--limit</span> <span class="pre">4</span></code></p></li>
<li><p>[httpd] バンドルしているnginxのバージョンを1.14.0に更新しました。</p></li>
</ul>
</section>
<section id="id17">
<h3>修正<a class="headerlink" href="#id17" title="Link to this heading">#</a></h3>
<ul class="simple">
<li><p>[<a class="reference internal" href="../reference/commands/logical_select.html"><span class="doc">logical_select</span></a>] 動的カラムをフィルターした時にエラーが発生するとメモリリークする不具合を修正しました。</p></li>
<li><p>[<a class="reference internal" href="../reference/commands/logical_count.html"><span class="doc">logical_count</span></a>] 動的カラムの初期化に失敗した際にメモリリークする不具合を修正しました。</p></li>
<li><p>[<a class="reference internal" href="../reference/commands/logical_range_filter.html"><span class="doc">logical_range_filter</span></a>] 動的カラムの評価に失敗した際にメモリリークする不具合を修正しました。</p></li>
<li><p>[<a class="reference internal" href="../reference/tokenizers.html"><span class="doc">トークナイザー</span></a>] <code class="docutils literal notranslate"><span class="pre">loose_symbol</span></code> のように緩いトークナイズをした時に <code class="docutils literal notranslate"><span class="pre">source_offset</span></code> が誤った値になる不具合を修正しました。</p></li>
<li><p>[<a class="reference internal" href="../reference/normalizers.html"><span class="doc">ノーマライザー</span></a>] <code class="docutils literal notranslate"><span class="pre">U+FF21</span> <span class="pre">FULLWIDTH</span> <span class="pre">LATIN</span> <span class="pre">CAPITAL</span> <span class="pre">LETTER</span> <span class="pre">A</span></code> のような全角ラテン大文字が、<code class="docutils literal notranslate"><span class="pre">U+0061</span> <span class="pre">LATIN</span> <span class="pre">SMALL</span> <span class="pre">LETTER</span> <span class="pre">A</span></code> のようなラテン小文字に正規化されない不具合を修正しました。すでに、 <code class="docutils literal notranslate"><span class="pre">NormalizerNFKC100</span></code> を使用している場合は、インデックスを再生成する必要があります。</p></li>
</ul>
</section>
</section>
<section id="release-8-0-2-2018-04-29">
<span id="release-8-0-2"></span><h2>8.0.2リリース - 2018-04-29<a class="headerlink" href="#release-8-0-2-2018-04-29" title="Link to this heading">#</a></h2>
<section id="id18">
<h3>改良<a class="headerlink" href="#id18" title="Link to this heading">#</a></h3>
<ul>
<li><p>[<a class="reference internal" href="../reference/executables/grndb.html"><span class="doc">grndb</span></a>][<a class="reference internal" href="../reference/executables/grndb.html#grndb-force-truncate"><span class="std std-ref">--force-truncate</span></a>]  <code class="docutils literal notranslate"><span class="pre">grndb</span> <span class="pre">recover</span> <span class="pre">--force-truncate</span></code> オプションを指定することで、テーブルにロックが残ったままの状態でも truncate できるようにしました。</p></li>
<li><p>[<a class="reference internal" href="../reference/commands/logical_range_filter.html"><span class="doc">logical_range_filter</span></a>] <code class="docutils literal notranslate"><span class="pre">sort_keys</span></code> オプションに対応しました。</p></li>
<li><p>新しい関数 <code class="docutils literal notranslate"><span class="pre">time_format()</span></code> を追加しました。<code class="docutils literal notranslate"><span class="pre">Time</span></code> 型のカラムの値を時刻表記で出力できます。書式は <code class="docutils literal notranslate"><span class="pre">strftime</span></code> 用の形式を指定できます。</p></li>
<li><p>[<a class="reference internal" href="../reference/tokenizers.html"><span class="doc">トークナイザー</span></a>] 新しいトークナイザー <code class="docutils literal notranslate"><span class="pre">TokenNgram</span></code> を追加しました。このトークナイザーは、オプションを通じて挙動を動的に変えることができます。対応しているオプションは以下の通りです。</p>
<blockquote>
<div><ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">n</span></code> : Ngram の「N」を指定します。例えば trigram の場合は「3」です。</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">loose_symbol</span></code> : 記号を含む語句について、記号の有無の違いを無視して検索できるようにトークナイズします。例えば「090-1111-2222」という語句は、「09011112222」「090」「1111」「2222」「090-1111-2222」のいずれで検索した場合にも検索結果としてヒットするようになります。</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">loose_blank</span></code> : 空白を含む語句について、空白の有無の違いを無視して検索できるようにトークナイズします。例えば「090 1111 2222」という語句は、「09011112222」「090」「1111」「2222」「090 1111 2222」のいずれで検索した場合にも検索結果としてヒットするようになります。</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">remove_blank</span></code> : 空白を含む語句について、空白無しの語句で検索できるようにトークナイズします。例えば「090 1111 2222」という語句は、「09011112222」「090」「1111」「2222」のいずれで検索した場合にも検索結果としてヒットするようになります。空白を含む語句「090 1111 2222」での検索にはヒットしない点にご注意下さい。</p></li>
</ul>
</div></blockquote>
</li>
<li><p>[<a class="reference internal" href="../reference/normalizers.html"><span class="doc">ノーマライザー</span></a>] Unicode 10.0 の NFKC（Normalization Form Compatibility Composition）に基づくノーマライザーである &quot;NormalizerNFKC100&quot; を追加しました。</p></li>
<li><p>[<a class="reference internal" href="../reference/normalizers.html"><span class="doc">ノーマライザー</span></a>] ノーマライザーの &quot;NormalizerNFKC51&quot; と &quot;NormalizerNFKC100&quot; でのオプション指定に対応しました。ノーマライザーの挙動を動的に変えることができます。対応しているオプションは以下の通りです。</p>
<blockquote>
<div><ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">unify_kana</span></code> : 同じ音となる全角ひらがな、全角カタカナ、半角カタカナの文字を同一視します。</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">unify_kana_case</span></code> : 全角ひらがな、全角カタカナ、半角カタカナで拗音、促音などを表す小さな文字（例：「ぁ」「ゃ」「っ」）を大きな文字と同一視します。</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">unify_kana_voiced_sound_mark</span></code> : 全角ひらがな、全角カタカナ、半角カタカナで濁点や半濁点の有無を同一視します。</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">unify_hyphen</span></code> : ハイフンに類する文字すべてをハイフンと同一視します。</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">unify_prolonged_sound_mark</span></code> : 長音記号に類する文字すべてを長音記号と同一視します。</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">unify_hyphen_and_prolonged_sound_mark</span></code> : ハイフンに類する文字と長音記号に類する文字のすべてをハイフンと同一視します。</p></li>
</ul>
</div></blockquote>
</li>
<li><p>[<a class="reference internal" href="../reference/commands/dump.html"><span class="doc">dump</span></a>] トークナイザーとノーマライザーのオプションの出力に対応しました。トークナイザーまたはノーマライザーのオプションを含んだ状態でGroonga 8.0.2およびそれ以降で出力した dump は、Grooga 8.0.1以前のバージョンでは読み込めず、未対応の情報によりエラーとなります。</p></li>
<li><p>[<a class="reference internal" href="../reference/commands/dump.html"><span class="doc">dump</span></a>] トークナイザーとノーマライザーのオプションの出力に対応しました。トークナイザーまたはノーマライザーのオプションを含んだ状態でGroonga 8.0.2およびそれ以降で出力した schema は、Grooga 8.0.1以前のバージョンでは読み込めず、未対応の情報によりエラーとなります。</p></li>
<li><p>Ubuntu 18.04 (Bionic Beaver)をサポートしました。</p></li>
</ul>
</section>
<section id="id19">
<h3>修正<a class="headerlink" href="#id19" title="Link to this heading">#</a></h3>
<ul class="simple">
<li><p>スペースのみの検索クエリが意図しないレコードにマッチする不具合を修正しました。[groonga-dev,04609][satouyuzhさんの報告]</p></li>
<li><p>誤ったスコアラーが使われる場合があった不具合を修正しました。この問題は以下のように複数のスコアラーが使われた時に発生していました： <code class="docutils literal notranslate"><span class="pre">--match_columns</span> <span class="pre">'title</span> <span class="pre">||</span> <span class="pre">scorer_tf_at_most(content,</span> <span class="pre">2.0)'</span></code></p></li>
<li><p>「thread_limit」の変更に時間がかかりすぎる問題を修正しました。</p></li>
</ul>
</section>
<section id="id20">
<h3>感謝<a class="headerlink" href="#id20" title="Link to this heading">#</a></h3>
<ul class="simple">
<li><p>satouyuzhさん</p></li>
</ul>
</section>
</section>
<section id="release-8-0-1-2018-03-29">
<span id="release-8-0-1"></span><h2>8.0.1リリース - 2018-03-29<a class="headerlink" href="#release-8-0-1-2018-03-29" title="Link to this heading">#</a></h2>
<section id="id21">
<h3>改良<a class="headerlink" href="#id21" title="Link to this heading">#</a></h3>
<ul>
<li><p>[<a class="reference internal" href="../reference/log.html"><span class="doc">ログ</span></a>] クエリーログ内で <code class="docutils literal notranslate"><span class="pre">filter</span></code> 条件を表示するようにしました。この機能はデフォルトでは、無効になっています。有効にするためには、環境変数 <code class="docutils literal notranslate"><span class="pre">GRN_QUERY_LOG_SHOW_CONDITION=yes</span></code> を設定します。</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">*.pdb</span></code> を <code class="docutils literal notranslate"><span class="pre">*.dll</span></code> と <code class="docutils literal notranslate"><span class="pre">*.exe</span></code> と同じディレクトリにインストールされるようにしました。</p></li>
<li><p>[<a class="reference internal" href="../reference/commands/logical_count.html"><span class="doc">logical_count</span></a>] <code class="docutils literal notranslate"><span class="pre">filtered</span></code> ステージの動的カラムをサポートしました。</p></li>
<li><p>[<a class="reference internal" href="../reference/commands/logical_count.html"><span class="doc">logical_count</span></a>] [<a class="reference internal" href="../reference/commands/logical_count.html#logical-count-post-filter"><span class="std std-ref">post_filter</span></a>] フィルタータイミングを新規追加しました。 <code class="docutils literal notranslate"><span class="pre">filtered</span></code> ステージのカラムが生成された後に実行されます。</p></li>
<li><p>[<a class="reference internal" href="../reference/commands/logical_select.html"><span class="doc">logical_select</span></a>] [<a class="reference internal" href="../reference/commands/logical_select.html#logical-select-post-filter"><span class="std std-ref">post_filter</span></a>] フィルタータイミングを新規追加しました。 <code class="docutils literal notranslate"><span class="pre">filtered</span></code> ステージのカラムが生成された後に実行されます。</p></li>
<li><p>ベクターデータに対してLZ4/Zstd/zlibの圧縮をサポートしました。</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">_key</span></code> のようなアクセサへのエイリアスをサポートしました。</p></li>
<li><p>[<a class="reference internal" href="../reference/commands/logical_range_filter.html"><span class="doc">logical_range_filter</span></a>] 大きい結果セットに対するウィンドウ関数の動作を最適化しました。一致するレコードが十分見つかった場合は、残りのウィンドウに対してウィンドウ関数を適用しません。</p>
<p>TODO: この最適化は、最適化によるオーバーヘッドが無視出来ない場合、小さな結果セットに対しては、無効になります。 オーバーヘッドがどのくらいになるのかは、まだ評価出来ていません。</p>
</li>
<li><p>[<a class="reference internal" href="../reference/commands/select.html"><span class="doc">select</span></a>] <code class="docutils literal notranslate"><span class="pre">match_escalation</span></code> パラメーターを追加しました。<code class="docutils literal notranslate"><span class="pre">--match_escalation</span> <span class="pre">yes</span></code> とすることによって、マッチ演算のエスカレーションを強制的に有効にします。このパラメータは、 <code class="docutils literal notranslate"><span class="pre">--match_escalation_threshold</span> <span class="pre">99999....999</span></code> よりも強力です。<code class="docutils literal notranslate"><span class="pre">match_escalation</span> <span class="pre">yes</span></code> は、 <code class="docutils literal notranslate"><span class="pre">SOME_CONDITIONS</span> <span class="pre">&amp;&amp;</span> <span class="pre">column</span> <span class="pre">&#64;</span> <span class="pre">'query'</span></code> もエスカレーションしますが、 <code class="docutils literal notranslate"><span class="pre">--match_escalation_threshold</span></code> ではしないためです。</p>
<p>デフォルトは、 <code class="docutils literal notranslate"><span class="pre">--match_escalation</span> <span class="pre">auto</span></code> です。これは、既存の動作と同じです。</p>
<p><code class="docutils literal notranslate"><span class="pre">--match_escalation</span> <span class="pre">no</span></code> とすることで、マッチ演算のエスカレーションを無効にできます。これは、 <code class="docutils literal notranslate"><span class="pre">--match_escalation_threshold</span> <span class="pre">-1</span></code> と同様の動きになります。</p>
</li>
<li><p>[httpd] バンドルしているnginxのバージョンを1.13.10に更新しました。</p></li>
</ul>
</section>
<section id="id22">
<h3>修正<a class="headerlink" href="#id22" title="Link to this heading">#</a></h3>
<ul class="simple">
<li><p>共通接頭辞がどのトークンにもマッチしない時にメモリリークする問題を修正しました。[GitHub#820] [村上さんがパッチ提供]</p></li>
<li><p>同一プロセスで複数のデータベースを開いている時に、異なるデータベースのキャッシュを使用してしまう問題を修正しました。</p></li>
<li><p>誤ったインデックスが構築される問題を修正しました。この問題は、インデックスカラムのソースがベクターカラムでかつ、 <code class="docutils literal notranslate"><span class="pre">WITH_SECTION</span></code> を指定していない時だけ発生します。</p></li>
<li><p>比較時(&gt;,&gt;=,&lt;,&lt;=,==,!=)に定数がオーバーフローまたは、アンダーフローし得る問題を修正しました。</p></li>
</ul>
</section>
<section id="id23">
<h3>感謝<a class="headerlink" href="#id23" title="Link to this heading">#</a></h3>
<ul class="simple">
<li><p>村上さん</p></li>
</ul>
</section>
</section>
<section id="release-8-0-0-2018-02-09">
<span id="release-8-0-0"></span><h2>8.0.0リリース - 2018-02-09<a class="headerlink" href="#release-8-0-0-2018-02-09" title="Link to this heading">#</a></h2>
<p>メジャーバージョンアップです! メジャーバージョンアップですが、互換性は壊れていないので、データベースを再構築することなくアップグレードできます。</p>
<section id="id24">
<h3>改良<a class="headerlink" href="#id24" title="Link to this heading">#</a></h3>
<ul>
<li><p>[<a class="reference internal" href="../reference/commands/select.html"><span class="doc">select</span></a>] <code class="docutils literal notranslate"><span class="pre">--drilldown_adjuster</span></code> と <code class="docutils literal notranslate"><span class="pre">drilldowns[LABEL].adjuster</span></code> を追加しました。drilldown結果に対して、スコア調整できるようになります。</p></li>
<li><p>[<a class="reference internal" href="../reference/indexing.html#online-index-construction"><span class="std std-ref">動的なインデックス構築方法</span></a>] 環境変数の名前を <code class="docutils literal notranslate"><span class="pre">GRN_II_REDUCE_EXPIRE_ENABLE</span></code> から <code class="docutils literal notranslate"><span class="pre">GRN_II_REDUCE_EXPIRE_THRESHOLD</span></code> へ変更しました。</p>
<p><code class="docutils literal notranslate"><span class="pre">GRN_II_REDUCE_EXPIRE_THRESHOLD=0</span> <span class="pre">==</span> <span class="pre">GRN_II_REDUCE_EXPIRE_ENABLE=no</span></code> 。 <code class="docutils literal notranslate"><span class="pre">GRN_II_REDUCE_EXPIRE_THRESHOLD=-1</span></code> とすると、しきい値は <code class="docutils literal notranslate"><span class="pre">ii-&gt;chunk-&gt;max_map_seg</span> <span class="pre">/</span> <span class="pre">2</span></code> となります。<code class="docutils literal notranslate"><span class="pre">GRN_II_REDUCE_EXPIRE_THRESHOLD</span> <span class="pre">&gt;</span> <span class="pre">0</span></code> とすると、しきい値は <code class="docutils literal notranslate"><span class="pre">MIN(ii-&gt;chunk-&gt;max_map_seg</span> <span class="pre">/</span> <span class="pre">2,</span> <span class="pre">GRN_II_REDUCE_EXPIRE_THRESHOLD)</span></code> となります。デフォルト値は、 <code class="docutils literal notranslate"><span class="pre">GRN_II_REDUCE_EXPIRE_THRESHOLD=32</span></code> です。</p>
</li>
<li><p>[<a class="reference internal" href="../reference/functions/between.html"><span class="doc">between</span></a>] 境界値なしの <code class="docutils literal notranslate"><span class="pre">between()</span></code> を受け付けるようにしました。<code class="docutils literal notranslate"><span class="pre">between()</span></code> の引数の数が3つでも実行できます。2番目と3番目の引数が境界を含むものとして処理されます。</p></li>
</ul>
</section>
<section id="id25">
<h3>修正<a class="headerlink" href="#id25" title="Link to this heading">#</a></h3>
<ul class="simple">
<li><p>ハッシュテーブルのメモリリークを修正しました。 [GitHub:mroonga/mroonga#190][fuku1さんの報告]</p></li>
<li><p>配列のメモリリークを修正しました。</p></li>
<li><p>[<a class="reference internal" href="../reference/commands/select.html"><span class="doc">select</span></a>] <code class="docutils literal notranslate"><span class="pre">output_columns</span></code> で結果の変化する関数を使っている時にキャッシュしないようにしました。</p></li>
<li><p>[Windows] <code class="docutils literal notranslate"><span class="pre">WSASend</span></code> が適切なエラーコードを返すようにしました。</p></li>
</ul>
</section>
<section id="id26">
<h3>感謝<a class="headerlink" href="#id26" title="Link to this heading">#</a></h3>
<ul class="simple">
<li><p>fuku1さん</p></li>
</ul>
</section>
</section>
</section>


                </article>
              
              
              
              
              
                <footer class="prev-next-footer">
                  
<div class="prev-next-area">
</div>
                </footer>
              
            </div>
            
            
              
                <div class="bd-sidebar-secondary bd-toc"><div class="sidebar-secondary-items sidebar-secondary__inner">


  <div class="sidebar-secondary-item">
<div
    id="pst-page-navigation-heading-2"
    class="page-toc tocsection onthispage">
    <i class="fa-solid fa-list"></i> On this page
  </div>
  <nav class="bd-toc-nav page-toc" aria-labelledby="pst-page-navigation-heading-2">
    <ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#release-8-1-1-2019-01-29">8.1.1リリース - 2019-01-29</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#improvements">改良</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#fixes">修正</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#release-8-1-0-2018-12-29">8.1.0リリース - 2018-12-29</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#id1">改良</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#id2">修正</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#release-8-0-9-2018-11-29">8.0.9リリース - 2018-11-29</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#id3">改良</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#id4">修正</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#thanks">感謝</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#release-8-0-8-2018-10-29">8.0.8リリース - 2018-10-29</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#id5">改良</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#id6">修正</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#id7">感謝</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#release-8-0-7-2018-09-29">8.0.7リリース - 2018-09-29</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#id8">改良</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#id9">修正</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#release-8-0-6-2018-08-29">8.0.6リリース - 2018-08-29</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#id10">改良</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#id11">修正</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#release-8-0-5-2018-07-29">8.0.5リリース - 2018-07-29</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#id12">改良</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#id13">修正</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#release-8-0-4-2018-06-29">8.0.4リリース - 2018-06-29</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#id14">改良</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#id15">修正</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#release-8-0-3-2018-05-29">8.0.3リリース - 2018-05-29</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#id16">改良</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#id17">修正</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#release-8-0-2-2018-04-29">8.0.2リリース - 2018-04-29</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#id18">改良</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#id19">修正</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#id20">感謝</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#release-8-0-1-2018-03-29">8.0.1リリース - 2018-03-29</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#id21">改良</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#id22">修正</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#id23">感謝</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#release-8-0-0-2018-02-09">8.0.0リリース - 2018-02-09</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#id24">改良</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#id25">修正</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#id26">感謝</a></li>
</ul>
</li>
</ul>
  </nav></div>

</div></div>
              
            
          </div>
          <footer class="bd-footer-content">
            
          </footer>
        
      </main>
    </div>
  </div>
  
  <!-- Scripts loaded after <body> so the DOM is not blocked -->
  <script src="../_static/scripts/bootstrap.js?digest=bd9e20870c6007c4c509"></script>
<script src="../_static/scripts/pydata-sphinx-theme.js?digest=bd9e20870c6007c4c509"></script>

  <footer class="bd-footer">
<div class="bd-footer__inner bd-page-width">
  
    <div class="footer-items__start">
      
        <div class="footer-item">

  <p class="copyright">
    
      © Copyright 2009-2024 Groonga Project.
      <br/>
    
  </p>
</div>
      
    </div>
  
  
  
    <div class="footer-items__end">
      
        <div class="footer-item">
<p class="theme-version">
  Built with the <a href="https://pydata-sphinx-theme.readthedocs.io/en/stable/index.html">PyData Sphinx Theme</a> 0.15.1.
</p></div>
      
    </div>
  
</div>

  </footer>
  </body>
</html>