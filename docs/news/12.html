

<!DOCTYPE html>


<html lang="en" >

  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.19: https://docutils.sourceforge.io/" />

    <title>News - 12 series &#8212; Groonga v13.0.9 documentation</title>
  
  
  
  <script data-cfasync="false">
    document.documentElement.dataset.mode = localStorage.getItem("mode") || "";
    document.documentElement.dataset.theme = localStorage.getItem("theme") || "light";
  </script>
  
  <!-- Loaded before other Sphinx assets -->
  <link href="../_static/styles/theme.css?digest=e353d410970836974a52" rel="stylesheet" />
<link href="../_static/styles/bootstrap.css?digest=e353d410970836974a52" rel="stylesheet" />
<link href="../_static/styles/pydata-sphinx-theme.css?digest=e353d410970836974a52" rel="stylesheet" />

  
  <link href="../_static/vendor/fontawesome/6.1.2/css/all.min.css?digest=e353d410970836974a52" rel="stylesheet" />
  <link rel="preload" as="font" type="font/woff2" crossorigin href="../_static/vendor/fontawesome/6.1.2/webfonts/fa-solid-900.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin href="../_static/vendor/fontawesome/6.1.2/webfonts/fa-brands-400.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin href="../_static/vendor/fontawesome/6.1.2/webfonts/fa-regular-400.woff2" />

    <link rel="stylesheet" type="text/css" href="../_static/pygments.css" />
  
  <!-- Pre-loaded scripts that we'll load fully later -->
  <link rel="preload" as="script" href="../_static/scripts/bootstrap.js?digest=e353d410970836974a52" />
<link rel="preload" as="script" href="../_static/scripts/pydata-sphinx-theme.js?digest=e353d410970836974a52" />

    <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
    <script src="../_static/doctools.js"></script>
    <script src="../_static/sphinx_highlight.js"></script>
    <script async="async" src="https://www.googletagmanager.com/gtag/js?id=UA-7532323-1"></script>
    <script>
                window.dataLayer = window.dataLayer || [];
                function gtag(){ dataLayer.push(arguments); }
                gtag('js', new Date());
                gtag('config', 'UA-7532323-1');
            </script>
    <script>DOCUMENTATION_OPTIONS.pagename = 'news/12';</script>
    <script>
        DOCUMENTATION_OPTIONS.theme_switcher_json_url = 'https://groonga.org/docs/_static/switcher.json';
        DOCUMENTATION_OPTIONS.theme_switcher_version_match = 'english';
        </script>
    <link rel="shortcut icon" href="../_static/favicon.ico"/>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <meta name="docsearch:language" content="en"/>
  </head>
  
  
  <body data-bs-spy="scroll" data-bs-target=".bd-toc-nav" data-offset="180" data-bs-root-margin="0px 0px -60%" data-default-mode="">

  
  
  <a class="skip-link" href="#main-content">Skip to main content</a>
  
  <input type="checkbox"
          class="sidebar-toggle"
          name="__primary"
          id="__primary"/>
  <label class="overlay overlay-primary" for="__primary"></label>
  
  <input type="checkbox"
          class="sidebar-toggle"
          name="__secondary"
          id="__secondary"/>
  <label class="overlay overlay-secondary" for="__secondary"></label>
  
  <div class="search-button__wrapper">
    <div class="search-button__overlay"></div>
    <div class="search-button__search-container">
<form class="bd-search d-flex align-items-center"
      action="../search.html"
      method="get">
  <i class="fa-solid fa-magnifying-glass"></i>
  <input type="search"
         class="form-control"
         name="q"
         id="search-input"
         placeholder="Search the docs ..."
         aria-label="Search the docs ..."
         autocomplete="off"
         autocorrect="off"
         autocapitalize="off"
         spellcheck="false"/>
  <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd>K</kbd></span>
</form></div>
  </div>
  
    <nav class="bd-header navbar navbar-expand-lg bd-navbar">
<div class="bd-header__inner bd-page-width">
  <label class="sidebar-toggle primary-toggle" for="__primary">
    <span class="fa-solid fa-bars"></span>
  </label>
  
  <div class="navbar-header-items__start">
    
      <div class="navbar-item">
   

<a class="navbar-brand logo" href="https://groonga.org/">
  
  
  
  
    
    
      
    
    
    <img src="../_static/groonga.png" class="logo__image only-light" alt="Logo image"/>
    <script>document.write(`<img src="../_static/groonga.png" class="logo__image only-dark" alt="Logo image"/>`);</script>
  
  
</a></div>
    
  </div>
  
  
  <div class="col-lg-9 navbar-header-items">
    
    
    <div class="navbar-header-items__end">
      
        <div class="navbar-item navbar-persistent--container">
          
<script>
document.write(`
  <button class="btn btn-sm navbar-btn search-button search-button__button" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="fa-solid fa-magnifying-glass"></i>
  </button>
`);
</script>
        </div>
      
      
        <div class="navbar-item">
<script>
document.write(`
  <button class="theme-switch-button btn btn-sm btn-outline-primary navbar-btn rounded-circle" title="light/dark" aria-label="light/dark" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <span class="theme-switch" data-mode="light"><i class="fa-solid fa-sun"></i></span>
    <span class="theme-switch" data-mode="dark"><i class="fa-solid fa-moon"></i></span>
    <span class="theme-switch" data-mode="auto"><i class="fa-solid fa-circle-half-stroke"></i></span>
  </button>
`);
</script></div>
      
        <div class="navbar-item"><ul class="navbar-icon-links navbar-nav"
    aria-label="Icon Links">
        <li class="nav-item">
          
          
          
          
          
          
          
          
          <a href="https://github.com/groonga/groonga" title="GitHub" class="nav-link" rel="noopener" target="_blank" data-bs-toggle="tooltip" data-bs-placement="bottom"><span><i class="fa-brands fa-square-github"></i></span>
            <label class="sr-only">GitHub</label></a>
        </li>
        <li class="nav-item">
          
          
          
          
          
          
          
          
          <a href="https://twitter.com/groonga" title="Twitter" class="nav-link" rel="noopener" target="_blank" data-bs-toggle="tooltip" data-bs-placement="bottom"><span><i class="fa-brands fa-square-twitter"></i></span>
            <label class="sr-only">Twitter</label></a>
        </li>
        <li class="nav-item">
          
          
          
          
          
          
          
          
          <a href="/blog" title="Blog" class="nav-link" rel="noopener" target="_blank" data-bs-toggle="tooltip" data-bs-placement="bottom"><span><i class="fas fa-blog"></i></span>
            <label class="sr-only">Blog</label></a>
        </li>
</ul></div>
      
        <div class="navbar-item">
<script>
document.write(`
  <div class="version-switcher__container dropdown">
    <button type="button" class="version-switcher__button btn btn-sm navbar-btn dropdown-toggle" data-bs-toggle="dropdown">
      english  <!-- this text may get changed later by javascript -->
      <span class="caret"></span>
    </button>
    <div class="version-switcher__menu dropdown-menu list-group-flush py-0">
    <!-- dropdown will be populated by javascript on page load -->
    </div>
  </div>
`);
</script></div>
      
    </div>
    
  </div>
  
  
    <div class="navbar-persistent--mobile">
<script>
document.write(`
  <button class="btn btn-sm navbar-btn search-button search-button__button" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="fa-solid fa-magnifying-glass"></i>
  </button>
`);
</script>
    </div>
  

  
    <label class="sidebar-toggle secondary-toggle" for="__secondary">
      <span class="fa-solid fa-outdent"></span>
    </label>
  
</div>

    </nav>
  
  <div class="bd-container">
    <div class="bd-container__inner bd-page-width">
      
      <div class="bd-sidebar-primary bd-sidebar hide-on-wide">
        

  
  <div class="sidebar-header-items sidebar-primary__section">
    
    
    
    
      <div class="sidebar-header-items__end">
        
          <div class="navbar-item">
<script>
document.write(`
  <button class="theme-switch-button btn btn-sm btn-outline-primary navbar-btn rounded-circle" title="light/dark" aria-label="light/dark" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <span class="theme-switch" data-mode="light"><i class="fa-solid fa-sun"></i></span>
    <span class="theme-switch" data-mode="dark"><i class="fa-solid fa-moon"></i></span>
    <span class="theme-switch" data-mode="auto"><i class="fa-solid fa-circle-half-stroke"></i></span>
  </button>
`);
</script></div>
        
          <div class="navbar-item"><ul class="navbar-icon-links navbar-nav"
    aria-label="Icon Links">
        <li class="nav-item">
          
          
          
          
          
          
          
          
          <a href="https://github.com/groonga/groonga" title="GitHub" class="nav-link" rel="noopener" target="_blank" data-bs-toggle="tooltip" data-bs-placement="bottom"><span><i class="fa-brands fa-square-github"></i></span>
            <label class="sr-only">GitHub</label></a>
        </li>
        <li class="nav-item">
          
          
          
          
          
          
          
          
          <a href="https://twitter.com/groonga" title="Twitter" class="nav-link" rel="noopener" target="_blank" data-bs-toggle="tooltip" data-bs-placement="bottom"><span><i class="fa-brands fa-square-twitter"></i></span>
            <label class="sr-only">Twitter</label></a>
        </li>
        <li class="nav-item">
          
          
          
          
          
          
          
          
          <a href="/blog" title="Blog" class="nav-link" rel="noopener" target="_blank" data-bs-toggle="tooltip" data-bs-placement="bottom"><span><i class="fas fa-blog"></i></span>
            <label class="sr-only">Blog</label></a>
        </li>
</ul></div>
        
          <div class="navbar-item">
<script>
document.write(`
  <div class="version-switcher__container dropdown">
    <button type="button" class="version-switcher__button btn btn-sm navbar-btn dropdown-toggle" data-bs-toggle="dropdown">
      english  <!-- this text may get changed later by javascript -->
      <span class="caret"></span>
    </button>
    <div class="version-switcher__menu dropdown-menu list-group-flush py-0">
    <!-- dropdown will be populated by javascript on page load -->
    </div>
  </div>
`);
</script></div>
        
      </div>
    
  </div>
  
  
  <div class="sidebar-primary-items__end sidebar-primary__section">
  </div>
  
  <div id="rtd-footer-container"></div>


      </div>
      
      <main id="main-content" class="bd-main">
        
        
          <div class="bd-content">
            <div class="bd-article-container">
              
              <div class="bd-header-article">
<div class="header-article-items header-article__inner">
  
    <div class="header-article-items__start">
      
        <div class="header-article-item">



<nav aria-label="Breadcrumbs">
  <ul class="bd-breadcrumbs" role="navigation" aria-label="Breadcrumb">
    
    <li class="breadcrumb-item breadcrumb-home">
      <a href="../index.html" class="nav-link" aria-label="Home">
        <i class="fa-solid fa-home"></i>
      </a>
    </li>
    <li class="breadcrumb-item active" aria-current="page">News - 12 series</li>
  </ul>
</nav>
</div>
      
    </div>
  
  
</div>
</div>
              
              
              
                
<div id="searchbox"></div>
                <article class="bd-article" role="main">
                  
  <section id="news-12-series">
<h1>News - 12 series<a class="headerlink" href="#news-12-series" title="Permalink to this heading">#</a></h1>
<section id="release-12-1-2-2023-01-29">
<span id="release-12-1-2"></span><h2>Release 12.1.2 - 2023-01-29<a class="headerlink" href="#release-12-1-2-2023-01-29" title="Permalink to this heading">#</a></h2>
<section id="improvements">
<h3>Improvements<a class="headerlink" href="#improvements" title="Permalink to this heading">#</a></h3>
<ul class="simple">
<li><p>[httpd] Updated bundled nginx to 1.23.3.</p></li>
</ul>
</section>
</section>
<section id="release-12-1-1-2023-01-06">
<span id="release-12-1-1"></span><h2>Release 12.1.1 - 2023-01-06<a class="headerlink" href="#release-12-1-1-2023-01-06" title="Permalink to this heading">#</a></h2>
<section id="id1">
<h3>Improvements<a class="headerlink" href="#id1" title="Permalink to this heading">#</a></h3>
<ul>
<li><p>[<a class="reference internal" href="../reference/commands/select.html"><span class="doc">select</span></a>][<a class="reference internal" href="../reference/commands/select.html#select-drilldowns-label-key-vector-expansions-power-set"><span class="std std-ref">POWER_SET</span></a>] Vector’s power set is now able to aggregate with the drilldowns.</p>
<p>A new option <code class="docutils literal notranslate"><span class="pre">key_vector_expansion</span></code> is added to drilldowns.
Currently, <code class="docutils literal notranslate"><span class="pre">NONE</span></code> or <code class="docutils literal notranslate"><span class="pre">POWER_SET</span></code> can be specified for <code class="docutils literal notranslate"><span class="pre">key_vector_expansion</span></code>.</p>
<p>Specifying <code class="docutils literal notranslate"><span class="pre">POWER_SET</span></code> to <code class="docutils literal notranslate"><span class="pre">key_vector_expansion</span></code> allows to aggregate for power set case.
This method of aggregation is useful to aggregate total number of individual and combination tag occurrence at once.</p>
<p>Following example is to see aggregating total number of individual and combination occurrence for following 3 tags,
<code class="docutils literal notranslate"><span class="pre">Groonga</span></code>, <code class="docutils literal notranslate"><span class="pre">Mroonga</span></code>, and <code class="docutils literal notranslate"><span class="pre">PGroonga</span></code>.</p>
<p>Sample case:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">table_create</span> <span class="n">PowersetDrilldownMemos</span> <span class="n">TABLE_HASH_KEY</span> <span class="n">ShortText</span>
<span class="c1"># [[0, 1337566253.89858, 0.000355720520019531], true]</span>
<span class="n">column_create</span> <span class="n">PowersetDrilldownMemos</span> <span class="n">tags</span> <span class="n">COLUMN_VECTOR</span> <span class="n">ShortText</span>
<span class="c1"># [[0, 1337566253.89858, 0.000355720520019531], true]</span>
<span class="n">load</span> <span class="o">--</span><span class="n">table</span> <span class="n">PowersetDrilldownMemos</span>
<span class="p">[</span>
<span class="p">{</span><span class="s2">&quot;_key&quot;</span><span class="p">:</span> <span class="s2">&quot;Groonga is fast!&quot;</span><span class="p">,</span> <span class="s2">&quot;tags&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;Groonga&quot;</span><span class="p">]},</span>
<span class="p">{</span><span class="s2">&quot;_key&quot;</span><span class="p">:</span> <span class="s2">&quot;Mroonga uses Groonga!&quot;</span><span class="p">,</span> <span class="s2">&quot;tags&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;Groonga&quot;</span><span class="p">,</span> <span class="s2">&quot;Mroonga&quot;</span><span class="p">]},</span>
<span class="p">{</span><span class="s2">&quot;_key&quot;</span><span class="p">:</span> <span class="s2">&quot;PGroonga uses Groonga!&quot;</span><span class="p">,</span> <span class="s2">&quot;tags&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;Groonga&quot;</span><span class="p">,</span> <span class="s2">&quot;PGroonga&quot;</span><span class="p">]},</span>
<span class="p">{</span><span class="s2">&quot;_key&quot;</span><span class="p">:</span> <span class="s2">&quot;Mroonga and PGroonga are Groonga family&quot;</span><span class="p">,</span> <span class="s2">&quot;tags&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;Groonga&quot;</span><span class="p">,</span> <span class="s2">&quot;Mroonga&quot;</span><span class="p">,</span> <span class="s2">&quot;PGroonga&quot;</span><span class="p">]}</span>
<span class="p">]</span>
<span class="c1"># [[0, 1337566253.89858, 0.000355720520019531], 4]</span>
<span class="n">select</span> <span class="n">PowersetDrilldownMemos</span> \
  <span class="o">--</span><span class="n">drilldowns</span><span class="p">[</span><span class="n">tags</span><span class="p">]</span><span class="o">.</span><span class="n">keys</span> <span class="n">tags</span> \
  <span class="o">--</span><span class="n">drilldowns</span><span class="p">[</span><span class="n">tags</span><span class="p">]</span><span class="o">.</span><span class="n">key_vector_expansion</span> <span class="n">POWER_SET</span> \
  <span class="o">--</span><span class="n">drilldowns</span><span class="p">[</span><span class="n">tags</span><span class="p">]</span><span class="o">.</span><span class="n">columns</span><span class="p">[</span><span class="n">power_set</span><span class="p">]</span><span class="o">.</span><span class="n">stage</span> <span class="n">initial</span> \
  <span class="o">--</span><span class="n">drilldowns</span><span class="p">[</span><span class="n">tags</span><span class="p">]</span><span class="o">.</span><span class="n">columns</span><span class="p">[</span><span class="n">power_set</span><span class="p">]</span><span class="o">.</span><span class="n">value</span> <span class="n">_key</span> \
  <span class="o">--</span><span class="n">drilldowns</span><span class="p">[</span><span class="n">tags</span><span class="p">]</span><span class="o">.</span><span class="n">columns</span><span class="p">[</span><span class="n">power_set</span><span class="p">]</span><span class="o">.</span><span class="n">flags</span> <span class="n">COLUMN_VECTOR</span> \
  <span class="o">--</span><span class="n">drilldowns</span><span class="p">[</span><span class="n">tags</span><span class="p">]</span><span class="o">.</span><span class="n">sort_keys</span> <span class="s1">&#39;power_set&#39;</span> \
  <span class="o">--</span><span class="n">drilldowns</span><span class="p">[</span><span class="n">tags</span><span class="p">]</span><span class="o">.</span><span class="n">output_columns</span> <span class="s1">&#39;power_set, _nsubrecs&#39;</span> \
  <span class="o">--</span><span class="n">limit</span> <span class="mi">0</span>
<span class="c1"># [</span>
<span class="c1">#   [</span>
<span class="c1">#     0,</span>
<span class="c1">#     1337566253.89858,</span>
<span class="c1">#     0.000355720520019531</span>
<span class="c1">#   ],</span>
<span class="c1">#   [</span>
<span class="c1">#     [</span>
<span class="c1">#       [</span>
<span class="c1">#         4</span>
<span class="c1">#       ],</span>
<span class="c1">#       [</span>
<span class="c1">#         [</span>
<span class="c1">#           &quot;_id&quot;,</span>
<span class="c1">#           &quot;UInt32&quot;</span>
<span class="c1">#         ],</span>
<span class="c1">#         [</span>
<span class="c1">#           &quot;_key&quot;,</span>
<span class="c1">#           &quot;ShortText&quot;</span>
<span class="c1">#         ],</span>
<span class="c1">#         [</span>
<span class="c1">#           &quot;tags&quot;,</span>
<span class="c1">#           &quot;ShortText&quot;</span>
<span class="c1">#         ]</span>
<span class="c1">#       ]</span>
<span class="c1">#     ],</span>
<span class="c1">#     {</span>
<span class="c1">#       &quot;tags&quot;: [</span>
<span class="c1">#         [</span>
<span class="c1">#           7</span>
<span class="c1">#         ],</span>
<span class="c1">#         [</span>
<span class="c1">#           [</span>
<span class="c1">#             &quot;power_set&quot;,</span>
<span class="c1">#             &quot;Text&quot;</span>
<span class="c1">#           ],</span>
<span class="c1">#           [</span>
<span class="c1">#             &quot;_nsubrecs&quot;,</span>
<span class="c1">#             &quot;Int32&quot;</span>
<span class="c1">#           ]</span>
<span class="c1">#         ],</span>
<span class="c1">#         [</span>
<span class="c1">#           [</span>
<span class="c1">#             &quot;Groonga&quot;</span>
<span class="c1">#           ],</span>
<span class="c1">#           4</span>
<span class="c1">#         ],</span>
<span class="c1">#         [</span>
<span class="c1">#           [</span>
<span class="c1">#             &quot;Mroonga&quot;</span>
<span class="c1">#           ],</span>
<span class="c1">#           2</span>
<span class="c1">#         ],</span>
<span class="c1">#         [</span>
<span class="c1">#           [</span>
<span class="c1">#             &quot;PGroonga&quot;</span>
<span class="c1">#           ],</span>
<span class="c1">#           2</span>
<span class="c1">#         ],</span>
<span class="c1">#         [</span>
<span class="c1">#           [</span>
<span class="c1">#             &quot;Groonga&quot;,</span>
<span class="c1">#             &quot;Mroonga&quot;</span>
<span class="c1">#           ],</span>
<span class="c1">#           2</span>
<span class="c1">#         ],</span>
<span class="c1">#         [</span>
<span class="c1">#           [</span>
<span class="c1">#             &quot;Groonga&quot;,</span>
<span class="c1">#             &quot;PGroonga&quot;</span>
<span class="c1">#           ],</span>
<span class="c1">#           2</span>
<span class="c1">#         ],</span>
<span class="c1">#         [</span>
<span class="c1">#           [</span>
<span class="c1">#             &quot;Mroonga&quot;,</span>
<span class="c1">#             &quot;PGroonga&quot;</span>
<span class="c1">#           ],</span>
<span class="c1">#           1</span>
<span class="c1">#         ],</span>
<span class="c1">#         [</span>
<span class="c1">#           [</span>
<span class="c1">#             &quot;Groonga&quot;,</span>
<span class="c1">#             &quot;Mroonga&quot;,</span>
<span class="c1">#             &quot;PGroonga&quot;</span>
<span class="c1">#           ],</span>
<span class="c1">#           1</span>
<span class="c1">#         ]</span>
<span class="c1">#       ]</span>
<span class="c1">#     }</span>
<span class="c1">#   ]</span>
<span class="c1"># ]</span>
</pre></div>
</div>
<p>This result shows following.</p>
<table class="table">
<tbody>
<tr class="row-odd"><td><p>tag</p></td>
<td><p>number of occurrence</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">Groonga</span></code></p></td>
<td><p>4</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">Mroonga</span></code></p></td>
<td><p>2</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">PGroonga</span></code></p></td>
<td><p>2</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">Groonga</span></code> and <code class="docutils literal notranslate"><span class="pre">Mroonga</span></code></p></td>
<td><p>2</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">Groonga</span></code> and <code class="docutils literal notranslate"><span class="pre">PGroonga</span></code></p></td>
<td><p>2</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">Mroonga</span></code> and <code class="docutils literal notranslate"><span class="pre">PGroonga</span></code></p></td>
<td><p>1</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">Groonga</span></code> and <code class="docutils literal notranslate"><span class="pre">Mroonga</span></code> and <code class="docutils literal notranslate"><span class="pre">PGroonga</span></code></p></td>
<td><p>1</p></td>
</tr>
</tbody>
</table>
<p>This feature is complex. For more information, please refer to  <a class="reference internal" href="../reference/commands/select.html#select-drilldowns-label-key-vector-expansions-power-set"><span class="std std-ref">POWER_SET</span></a>.</p>
</li>
<li><p>[<a class="reference internal" href="../reference/commands/select.html"><span class="doc">select</span></a>] Specific element of vector column is now able to be search target.</p>
<p>It allows specific elements of vector column to be search targets that specifying the specific elements to <code class="docutils literal notranslate"><span class="pre">match_columns</span></code> with index number.</p>
<p>Following is a sample case.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">table_create</span> <span class="n">Memos</span> <span class="n">TABLE_NO_KEY</span>
<span class="n">column_create</span> <span class="n">Memos</span> <span class="n">contents</span> <span class="n">COLUMN_VECTOR</span> <span class="n">ShortText</span>

<span class="n">table_create</span> <span class="n">Lexicon</span> <span class="n">TABLE_PAT_KEY</span> <span class="n">ShortText</span> <span class="o">--</span><span class="n">default_tokenizer</span> <span class="n">TokenBigram</span>
<span class="n">column_create</span> <span class="n">Lexicon</span> <span class="n">memo_index</span> <span class="n">COLUMN_INDEX</span><span class="o">|</span><span class="n">WITH_POSITION</span><span class="o">|</span><span class="n">WITH_SECTION</span> <span class="n">Memos</span> <span class="n">contents</span>
<span class="n">load</span> <span class="o">--</span><span class="n">table</span> <span class="n">Memos</span>
<span class="p">[</span>
<span class="p">[</span><span class="s2">&quot;contents&quot;</span><span class="p">],</span>
<span class="p">[[</span><span class="s2">&quot;I like Groonga&quot;</span><span class="p">,</span> <span class="s2">&quot;Use Groonga with Ruby&quot;</span><span class="p">]],</span>
<span class="p">[[</span><span class="s2">&quot;I like Ruby&quot;</span><span class="p">,</span> <span class="s2">&quot;Use Groonga&quot;</span><span class="p">]]</span>
<span class="p">]</span>
<span class="n">select</span> <span class="n">Memos</span> \
  <span class="o">--</span><span class="n">match_columns</span> <span class="s2">&quot;contents[1]&quot;</span> \
  <span class="o">--</span><span class="n">query</span> <span class="n">Ruby</span> \
  <span class="o">--</span><span class="n">output_columns</span> <span class="s2">&quot;contents, _score&quot;</span>
<span class="c1"># [</span>
<span class="c1">#   [</span>
<span class="c1">#     0,</span>
<span class="c1">#     0.0,</span>
<span class="c1">#     0.0</span>
<span class="c1">#   ],</span>
<span class="c1">#   [</span>
<span class="c1">#     [</span>
<span class="c1">#       [</span>
<span class="c1">#         1</span>
<span class="c1">#       ],</span>
<span class="c1">#       [</span>
<span class="c1">#         [</span>
<span class="c1">#           &quot;contents&quot;,</span>
<span class="c1">#           &quot;ShortText&quot;</span>
<span class="c1">#         ],</span>
<span class="c1">#         [</span>
<span class="c1">#           &quot;_score&quot;,</span>
<span class="c1">#           &quot;Int32&quot;</span>
<span class="c1">#         ]</span>
<span class="c1">#       ],</span>
<span class="c1">#       [</span>
<span class="c1">#         [</span>
<span class="c1">#           &quot;I like Groonga&quot;,</span>
<span class="c1">#           &quot;Use Groonga with Ruby&quot;</span>
<span class="c1">#         ],</span>
<span class="c1">#         1</span>
<span class="c1">#       ]</span>
<span class="c1">#     ]</span>
<span class="c1">#   ]</span>
<span class="c1"># ]</span>
</pre></div>
</div>
<p><code class="docutils literal notranslate"><span class="pre">--match_columns</span> <span class="pre">&quot;contents[1]&quot;</span></code> specifies only 2nd vector elements of <code class="docutils literal notranslate"><span class="pre">contents</span></code> as the search target.
In this sample, <code class="docutils literal notranslate"><span class="pre">[&quot;I</span> <span class="pre">like</span> <span class="pre">Groonga&quot;,</span> <span class="pre">&quot;Use</span> <span class="pre">Groonga</span> <span class="pre">with</span> <span class="pre">Ruby&quot;]</span></code> is shown in the results because <code class="docutils literal notranslate"><span class="pre">Ruby</span></code> is in 2nd element <code class="docutils literal notranslate"><span class="pre">Use</span> <span class="pre">Groonga</span> <span class="pre">with</span> <span class="pre">Ruby</span></code>.
However, <code class="docutils literal notranslate"><span class="pre">[&quot;I</span> <span class="pre">like</span> <span class="pre">Ruby&quot;,</span> <span class="pre">&quot;Use</span> <span class="pre">Groonga&quot;]</span></code> is not shown in results because <code class="docutils literal notranslate"><span class="pre">Ruby</span></code> is not in 2nd element <code class="docutils literal notranslate"><span class="pre">Use</span> <span class="pre">Groonga</span></code>.</p>
</li>
<li><p>[<a class="reference internal" href="../reference/commands/load.html"><span class="doc">load</span></a>] Added support for <code class="docutils literal notranslate"><span class="pre">YYYY-MM-DD</span></code> time format.</p>
<p><code class="docutils literal notranslate"><span class="pre">YYYY-MM-DD</span></code> is a general time format.
Supporting this time format made <code class="docutils literal notranslate"><span class="pre">load</span></code> more useful.</p>
<p>The time of the loaded value is set to <code class="docutils literal notranslate"><span class="pre">00:00:00</span></code> on the local time.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">plugin_register</span> <span class="n">functions</span><span class="o">/</span><span class="n">time</span>
<span class="c1"># [[0,0.0,0.0],true]</span>
<span class="n">table_create</span> <span class="n">Logs</span> <span class="n">TABLE_NO_KEY</span>
<span class="c1"># [[0,0.0,0.0],true]</span>
<span class="n">column_create</span> <span class="n">Logs</span> <span class="n">created_at</span> <span class="n">COLUMN_SCALAR</span> <span class="n">Time</span>
<span class="c1"># [[0,0.0,0.0],true]</span>
<span class="n">column_create</span> <span class="n">Logs</span> <span class="n">created_at_text</span> <span class="n">COLUMN_SCALAR</span> <span class="n">ShortText</span>
<span class="c1"># [[0,0.0,0.0],true]</span>
<span class="n">load</span> <span class="o">--</span><span class="n">table</span> <span class="n">Logs</span>
<span class="p">[</span>
<span class="p">{</span><span class="s2">&quot;created_at&quot;</span><span class="p">:</span> <span class="s2">&quot;2000-01-01&quot;</span><span class="p">,</span> <span class="s2">&quot;created_at_text&quot;</span><span class="p">:</span> <span class="s2">&quot;2000-01-01&quot;</span><span class="p">}</span>
<span class="p">]</span>
<span class="c1"># [[0,0.0,0.0],1]</span>
<span class="n">select</span> <span class="n">Logs</span> <span class="o">--</span><span class="n">output_columns</span> <span class="s2">&quot;time_format_iso8601(created_at), created_at_text&quot;</span>
<span class="c1"># [</span>
<span class="c1">#   [</span>
<span class="c1">#     0,</span>
<span class="c1">#     0.0,</span>
<span class="c1">#     0.0</span>
<span class="c1">#   ],</span>
<span class="c1">#   [</span>
<span class="c1">#     [</span>
<span class="c1">#       [</span>
<span class="c1">#         1</span>
<span class="c1">#       ],</span>
<span class="c1">#       [</span>
<span class="c1">#         [</span>
<span class="c1">#           &quot;time_format_iso8601&quot;,</span>
<span class="c1">#           null</span>
<span class="c1">#         ],</span>
<span class="c1">#         [</span>
<span class="c1">#           &quot;created_at_text&quot;,</span>
<span class="c1">#           &quot;ShortText&quot;</span>
<span class="c1">#         ]</span>
<span class="c1">#       ],</span>
<span class="c1">#       [</span>
<span class="c1">#         &quot;2000-01-01T00:00:00.000000+09:00&quot;,</span>
<span class="c1">#         &quot;2000-01-01&quot;</span>
<span class="c1">#       ]</span>
<span class="c1">#     ]</span>
<span class="c1">#   ]</span>
<span class="c1"># ]</span>
</pre></div>
</div>
</li>
</ul>
</section>
<section id="fixes">
<h3>Fixes<a class="headerlink" href="#fixes" title="Permalink to this heading">#</a></h3>
<ul>
<li><p>[<a class="reference internal" href="../reference/commands/select.html"><span class="doc">select</span></a>] Fix a bug displaying a wrong label in <code class="docutils literal notranslate"><span class="pre">drilldown</span></code> results when <code class="docutils literal notranslate"><span class="pre">command_version</span></code> is <code class="docutils literal notranslate"><span class="pre">3</span></code>.
[groonga-dev,05005][Reported by Atsushi Shinoda]</p>
<p>Following is a sample case.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">table_create</span> <span class="n">Documents</span> <span class="n">TABLE_NO_KEY</span>
<span class="n">column_create</span> <span class="n">Documents</span> <span class="n">tag1</span> <span class="n">COLUMN_SCALAR</span> <span class="n">ShortText</span>
<span class="n">column_create</span> <span class="n">Documents</span> <span class="n">tag2</span> <span class="n">COLUMN_SCALAR</span> <span class="n">ShortText</span>
<span class="n">load</span> <span class="o">--</span><span class="n">table</span> <span class="n">Documents</span>
<span class="p">[</span>
<span class="p">{</span><span class="s2">&quot;tag1&quot;</span><span class="p">:</span> <span class="s2">&quot;1&quot;</span><span class="p">,</span> <span class="s2">&quot;tag2&quot;</span><span class="p">:</span> <span class="s2">&quot;2&quot;</span><span class="p">}</span>
<span class="p">]</span>
<span class="n">select</span> <span class="n">Documents</span> <span class="o">--</span><span class="n">drilldown</span> <span class="n">tag1</span><span class="p">,</span><span class="n">tag2</span> <span class="o">--</span><span class="n">command_version</span> <span class="mi">3</span>
<span class="c1"># {</span>
<span class="c1">#   &quot;header&quot;: {</span>
<span class="c1">#     &quot;return_code&quot;: 0,</span>
<span class="c1">#     &quot;start_time&quot;: 1672123380.653039,</span>
<span class="c1">#     &quot;elapsed_time&quot;: 0.0005846023559570312</span>
<span class="c1">#   },</span>
<span class="c1">#   &quot;body&quot;: {</span>
<span class="c1">#     &quot;n_hits&quot;: 1,</span>
<span class="c1">#     &quot;columns&quot;: [</span>
<span class="c1">#       {</span>
<span class="c1">#         &quot;name&quot;: &quot;_id&quot;,</span>
<span class="c1">#         &quot;type&quot;: &quot;UInt32&quot;</span>
<span class="c1">#       },</span>
<span class="c1">#       {</span>
<span class="c1">#         &quot;name&quot;: &quot;tag1&quot;,</span>
<span class="c1">#         &quot;type&quot;: &quot;ShortText&quot;</span>
<span class="c1">#       },</span>
<span class="c1">#       {</span>
<span class="c1">#         &quot;name&quot;: &quot;tag2&quot;,</span>
<span class="c1">#         &quot;type&quot;: &quot;ShortText&quot;</span>
<span class="c1">#       }</span>
<span class="c1">#     ],</span>
<span class="c1">#     &quot;records&quot;: [</span>
<span class="c1">#       [</span>
<span class="c1">#         1,</span>
<span class="c1">#         &quot;1&quot;,</span>
<span class="c1">#         &quot;2&quot;</span>
<span class="c1">#       ]</span>
<span class="c1">#     ],</span>
<span class="c1">#     &quot;drilldowns&quot;: {</span>
<span class="c1">#       &quot;ctor&quot;: {</span>
<span class="c1">#         &quot;n_hits&quot;: 1,</span>
<span class="c1">#         &quot;columns&quot;: [</span>
<span class="c1">#           {</span>
<span class="c1">#             &quot;name&quot;: &quot;_key&quot;,</span>
<span class="c1">#             &quot;type&quot;: &quot;ShortText&quot;</span>
<span class="c1">#           },</span>
<span class="c1">#           {</span>
<span class="c1">#             &quot;name&quot;: &quot;_nsubrecs&quot;,</span>
<span class="c1">#             &quot;type&quot;: &quot;Int32&quot;</span>
<span class="c1">#           }</span>
<span class="c1">#         ],</span>
<span class="c1">#         &quot;records&quot;: [</span>
<span class="c1">#           [</span>
<span class="c1">#             &quot;1&quot;,</span>
<span class="c1">#             1</span>
<span class="c1">#           ]</span>
<span class="c1">#         ]</span>
<span class="c1">#       },</span>
<span class="c1">#       &quot;tag2&quot;: {</span>
<span class="c1">#         &quot;n_hits&quot;: 1,</span>
<span class="c1">#         &quot;columns&quot;: [</span>
<span class="c1">#           {</span>
<span class="c1">#             &quot;name&quot;: &quot;_key&quot;,</span>
<span class="c1">#             &quot;type&quot;: &quot;ShortText&quot;</span>
<span class="c1">#           },</span>
<span class="c1">#           {</span>
<span class="c1">#             &quot;name&quot;: &quot;_nsubrecs&quot;,</span>
<span class="c1">#             &quot;type&quot;: &quot;Int32&quot;</span>
<span class="c1">#           }</span>
<span class="c1">#         ],</span>
<span class="c1">#         &quot;records&quot;: [</span>
<span class="c1">#           [</span>
<span class="c1">#             &quot;2&quot;,</span>
<span class="c1">#             1</span>
<span class="c1">#           ]</span>
<span class="c1">#         ]</span>
<span class="c1">#       }</span>
<span class="c1">#     }</span>
<span class="c1">#   }</span>
<span class="c1"># }</span>
</pre></div>
</div>
<p><code class="docutils literal notranslate"><span class="pre">ctor</span></code>, displaying right after <code class="docutils literal notranslate"><span class="pre">drilldowns</span></code> as result of <code class="docutils literal notranslate"><span class="pre">select</span></code>, should be <code class="docutils literal notranslate"><span class="pre">tag1</span></code> in correct case.
In this sample, <code class="docutils literal notranslate"><span class="pre">ctor</span></code> is shown instead of <code class="docutils literal notranslate"><span class="pre">tag1</span></code>. However, what kind of value to be shown is unknown.</p>
</li>
<li><p>[<a class="reference internal" href="../reference/normalizers/normalizer_table.html"><span class="doc">NormalizerTable</span></a>] Fix a bug for Groonga to crush with specific definition setting in <code class="docutils literal notranslate"><span class="pre">NormalizerTable</span></code>.
[GitHub:pgroonga/pgroonga#279][Reported by i10a]</p>
<p>Following case as sample.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">table_create</span> <span class="n">Normalizations</span> <span class="n">TABLE_PAT_KEY</span> <span class="n">ShortText</span> <span class="o">--</span><span class="n">normalizer</span> <span class="n">NormalizerNFKC130</span>
<span class="n">column_create</span> <span class="n">Normalizations</span> <span class="n">normalized</span> <span class="n">COLUMN_SCALAR</span> <span class="n">ShortText</span>
<span class="n">load</span> <span class="o">--</span><span class="n">table</span> <span class="n">Normalizations</span>
<span class="p">[</span>
<span class="p">{</span><span class="s2">&quot;_key&quot;</span><span class="p">:</span> <span class="s2">&quot;Ⅰ&quot;</span><span class="p">,</span> <span class="s2">&quot;normalized&quot;</span><span class="p">:</span> <span class="s2">&quot;1&quot;</span><span class="p">},</span>
<span class="p">{</span><span class="s2">&quot;_key&quot;</span><span class="p">:</span> <span class="s2">&quot;Ⅱ&quot;</span><span class="p">,</span> <span class="s2">&quot;normalized&quot;</span><span class="p">:</span> <span class="s2">&quot;2&quot;</span><span class="p">},</span>
<span class="p">{</span><span class="s2">&quot;_key&quot;</span><span class="p">:</span> <span class="s2">&quot;Ⅲ&quot;</span><span class="p">,</span> <span class="s2">&quot;normalized&quot;</span><span class="p">:</span> <span class="s2">&quot;3&quot;</span><span class="p">}</span>
<span class="p">]</span>
<span class="n">normalize</span> <span class="s1">&#39;NormalizerTable(&quot;normalized&quot;, &quot;Normalizations.normalized&quot;)&#39;</span>   <span class="s2">&quot;ⅡⅡ&quot;</span>
</pre></div>
</div>
<p>This bug is reported to occur when condition meet following 1., 2., and 3..</p>
<ol class="arabic">
<li><p>Keys are normalized in the target table.</p>
<p>In this sample, it meets condition specifying <code class="docutils literal notranslate"><span class="pre">--normalizer</span> <span class="pre">NormalizerNFKC130</span></code> in <code class="docutils literal notranslate"><span class="pre">Normalizations</span></code>.
Original keys, <code class="docutils literal notranslate"><span class="pre">Ⅰ</span></code> , <code class="docutils literal notranslate"><span class="pre">Ⅱ</span></code> ,and <code class="docutils literal notranslate"><span class="pre">Ⅲ</span></code>, are normalized each into <code class="docutils literal notranslate"><span class="pre">i</span></code>, <code class="docutils literal notranslate"><span class="pre">ii</span></code>, <code class="docutils literal notranslate"><span class="pre">iii</span></code> with <code class="docutils literal notranslate"><span class="pre">NormalizerNFKC130</span></code>.</p>
</li>
<li><p>Same characters in the normalized key are included in the other normalized key.</p>
<p>In this sample, it meets condition because normalized key <code class="docutils literal notranslate"><span class="pre">iii</span></code> includes the characters <code class="docutils literal notranslate"><span class="pre">ii</span></code> and <code class="docutils literal notranslate"><span class="pre">i</span></code>, same with other normalized keys which are original key <code class="docutils literal notranslate"><span class="pre">Ⅱ</span></code> and <code class="docutils literal notranslate"><span class="pre">Ⅰ</span></code>.</p>
</li>
<li><p>Same characters of 2nd condition are used multiple times.</p>
<p>In this sample, it meets condition because normalized key <code class="docutils literal notranslate"><span class="pre">iiii</span></code>, original key <code class="docutils literal notranslate"><span class="pre">ⅡⅡ</span></code> with <code class="docutils literal notranslate"><span class="pre">NormalizerNFKC130</span></code>, is considered as same with normalized key for <code class="docutils literal notranslate"><span class="pre">Ⅲ</span></code> and <code class="docutils literal notranslate"><span class="pre">Ⅰ</span></code> with <code class="docutils literal notranslate"><span class="pre">NormalizerNFKC130</span></code>.</p>
<p>Normalizing <code class="docutils literal notranslate"><span class="pre">iiii</span></code> with <code class="docutils literal notranslate"><span class="pre">Normalizations</span></code> takes following steps and it meets the condition.</p>
<ul>
<li><p>First <code class="docutils literal notranslate"><span class="pre">iii</span></code> ( applied for <code class="docutils literal notranslate"><span class="pre">Ⅲ</span></code> )</p>
<p><code class="docutils literal notranslate"><span class="pre">ii</span></code> or <code class="docutils literal notranslate"><span class="pre">i</span></code> are not used at first because <a class="reference internal" href="../reference/normalizers/normalizer_table.html"><span class="doc">NormalizerTable</span></a> works
with the Longest-Common-Prefix search.</p>
</li>
<li><p>Last <code class="docutils literal notranslate"><span class="pre">i</span></code> ( applied for  <code class="docutils literal notranslate"><span class="pre">Ⅰ</span></code> )</p></li>
</ul>
</li>
</ol>
</li>
</ul>
</section>
<section id="thanks">
<h3>Thanks<a class="headerlink" href="#thanks" title="Permalink to this heading">#</a></h3>
<ul class="simple">
<li><p>i10a</p></li>
<li><p>Atsushi Shinoda</p></li>
</ul>
</section>
</section>
<section id="release-12-1-0-2022-11-29">
<span id="release-12-1-0"></span><h2>Release 12.1.0 - 2022-11-29<a class="headerlink" href="#release-12-1-0-2022-11-29" title="Permalink to this heading">#</a></h2>
<section id="id2">
<h3>Improvements<a class="headerlink" href="#id2" title="Permalink to this heading">#</a></h3>
<ul>
<li><p>[<a class="reference internal" href="../reference/commands/load.html"><span class="doc">load</span></a>] Added support for slow log output of <code class="docutils literal notranslate"><span class="pre">load</span></code>.</p>
<p>This feature is for Groonga’s performance tuning.
For example, you can use this feature to detect records that are taking time longer than average when <code class="docutils literal notranslate"><span class="pre">load</span></code> is slow.</p>
<p>Slow log output would be enabled with specifying <code class="docutils literal notranslate"><span class="pre">GRN</span> <span class="pre">SLOWLOG</span> <span class="pre">THRESHOLD</span></code> as the Environment variable.</p>
<p>Here is about specifying <code class="docutils literal notranslate"><span class="pre">GRN_SLOW_LOG_THRESHOLD</span></code>.</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">GRN_SLOW_LOG_THRESHOLD</span></code> requires specifying time in seconds as a threshold. The time of the threshold can shorter than a second with specifying decimal number.</p></li>
<li><p>A log with debug level would be output if the processing time takes longer than specifyed time with <code class="docutils literal notranslate"><span class="pre">GRN_SLOW_LOG_THRESHOLD</span></code>.</p></li>
</ul>
<p>Setting for log level would be controled with <a class="reference internal" href="../reference/executables/groonga.html#cmdoption-groonga-l"><code class="xref std std-option docutils literal notranslate"><span class="pre">log-level</span></code></a> or <a class="reference internal" href="../reference/commands/log_level.html"><span class="doc">log_level</span></a>.</p>
<p>What value to specify <code class="docutils literal notranslate"><span class="pre">GRN_SLOW_LOG_THRESHOLD</span></code> would depend on its environment and checking purpose.
For an example, we can use following setting to check which records are taking longer time for <code class="docutils literal notranslate"><span class="pre">load</span></code>.
For this, we specify the value based on necesarry time per 1 record caliculated with  total number and time of <code class="docutils literal notranslate"><span class="pre">load</span></code>.</p>
<p>Necessary time to process <cite>load</cite> would be checked in <a class="reference internal" href="../reference/log.html#query-log"><span class="std std-ref">Query log</span></a>.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="mi">2022</span><span class="o">-</span><span class="mi">11</span><span class="o">-</span><span class="mi">16</span> <span class="mi">16</span><span class="p">:</span><span class="mi">41</span><span class="p">:</span><span class="mf">27.139000</span><span class="o">|</span><span class="mi">000000</span><span class="n">CE63AFF640</span><span class="o">|&gt;</span><span class="n">load</span> <span class="o">--</span><span class="n">table</span> <span class="n">Memo</span>
<span class="mi">2022</span><span class="o">-</span><span class="mi">11</span><span class="o">-</span><span class="mi">16</span> <span class="mi">16</span><span class="p">:</span><span class="mi">43</span><span class="p">:</span><span class="mf">40.841000</span><span class="o">|</span><span class="mi">000000</span><span class="n">CE63AFF640</span><span class="o">|</span><span class="p">:</span><span class="mi">000133702000000</span> <span class="n">load</span><span class="p">(</span><span class="mi">100000</span><span class="p">):</span> <span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="mi">0</span><span class="p">][</span><span class="mi">100000</span><span class="p">]</span>
<span class="mi">2022</span><span class="o">-</span><span class="mi">11</span><span class="o">-</span><span class="mi">16</span> <span class="mi">16</span><span class="p">:</span><span class="mi">43</span><span class="p">:</span><span class="mf">40.842000</span><span class="o">|</span><span class="mi">000000</span><span class="n">CE63AFF640</span><span class="o">|</span><span class="p">:</span><span class="mi">000133703000000</span> <span class="n">send</span><span class="p">(</span><span class="mi">46</span><span class="p">)</span>
<span class="mi">2022</span><span class="o">-</span><span class="mi">11</span><span class="o">-</span><span class="mi">16</span> <span class="mi">16</span><span class="p">:</span><span class="mi">43</span><span class="p">:</span><span class="mf">40.842000</span><span class="o">|</span><span class="mi">000000</span><span class="n">CE63AFF640</span><span class="o">|&lt;</span><span class="mi">000133703000000</span> <span class="n">rc</span><span class="o">=</span><span class="mi">0</span>
</pre></div>
</div>
<p>In this example, the time would be as following;</p>
<ul class="simple">
<li><p>Number of records: 100000</p></li>
<li><p>Time to process: 2 minutes 13 seconds = 133 seconds ( Based on Time stamp for beginning <code class="docutils literal notranslate"><span class="pre">load</span></code> : 16:43:27 and time stamp for end of <code class="docutils literal notranslate"><span class="pre">load</span></code> ( <code class="docutils literal notranslate"><span class="pre">rc=0</span></code> ): 16:43:40 )</p></li>
<li><p>Time to process 1 record:  0.00133 seconds (133 divided with 100000)</p></li>
</ul>
<p>Therefore, we specify <code class="docutils literal notranslate"><span class="pre">0.00133</span></code> as a threshold in <code class="docutils literal notranslate"><span class="pre">GRN_SLOW_LOG_THRESHOLD</span></code> to check which records are taking longer time for <code class="docutils literal notranslate"><span class="pre">load</span></code>.</p>
<p>Note: Enabling slow log may cause following bad effects.</p>
<ul class="simple">
<li><p>Performance degradation</p></li>
<li><p>Larger log size</p></li>
</ul>
<p>Thus, the slow log is recommended to be enabled only necessary occasion.</p>
</li>
<li><p>[<a class="reference internal" href="../reference/api.html"><span class="doc">API</span></a>] Added new API <code class="docutils literal notranslate"><span class="pre">grn_is_reference_count_enable()</span></code>.</p>
<p>This new API would return boolean weather reference count mode is enabled or not.</p>
</li>
<li><p>[<a class="reference internal" href="../reference/api.html"><span class="doc">API</span></a>] Added new API <code class="docutils literal notranslate"><span class="pre">grn_set_reference_count_enable(bool</span> <span class="pre">enable)</span></code>.</p>
<p>This new API would enable or disable reference count mode.</p>
<p>For secure usage,  this API can’t switch reference count mode if there are multiple open database.</p>
</li>
<li><p>[<a class="reference internal" href="../reference/api.html"><span class="doc">API</span></a>] Added new API  <code class="docutils literal notranslate"><span class="pre">grn_is_back_trace_enable()</span></code>.</p>
<p>This new API would return boolean weather logging back trace is enabled or not.</p>
</li>
<li><p>[<a class="reference internal" href="../reference/api.html"><span class="doc">API</span></a>] Added new API <code class="docutils literal notranslate"><span class="pre">grn_set_back_trace_enable(bool</span> <span class="pre">enable)</span></code>.</p>
<p>This new API would enable or disable logging back trace.</p>
<p>In some environments, Groonga crashes when logging back trace,
logging back trace should be disabled in such envoronments.</p>
</li>
<li><p>[<a class="reference internal" href="../reference/commands/status.html"><span class="doc">status</span></a>] Added new items: <code class="docutils literal notranslate"><span class="pre">back_trace</span></code> and <code class="docutils literal notranslate"><span class="pre">/reference_count</span></code>.</p>
<p><code class="docutils literal notranslate"><span class="pre">/reference_count</span></code> indicates weather logging back trace is enabled or not as boolean.</p>
<p><code class="docutils literal notranslate"><span class="pre">back_trace</span></code> indicates weather logging back trace is enabled or not as boolean.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">status</span>
<span class="p">[</span>
  <span class="p">[</span>
    <span class="mi">0</span><span class="p">,</span>
    <span class="mf">1654237168.304533</span><span class="p">,</span>
    <span class="mf">0.0001480579376220703</span>
  <span class="p">],</span>
  <span class="p">{</span>
    <span class="p">(</span><span class="n">omitted</span><span class="p">)</span>
    <span class="s2">&quot;back_trace&quot;</span><span class="p">:</span> <span class="n">true</span><span class="p">,</span>
    <span class="s2">&quot;reference_count&quot;</span><span class="p">:</span> <span class="n">false</span><span class="p">,</span>
  <span class="p">}</span>
<span class="p">]</span>
</pre></div>
</div>
</li>
</ul>
</section>
<section id="id3">
<h3>Fixes<a class="headerlink" href="#id3" title="Permalink to this heading">#</a></h3>
<ul>
<li><p>[<a class="reference internal" href="../reference/commands/select.html"><span class="doc">select</span></a>][<a class="reference internal" href="../reference/columns/vector.html"><span class="doc">Vector column</span></a>] Fixed a bug displaying integer in the results when a weight vector column specifies <cite>WEIGHT FLOAT32</cite>.</p>
<p>This bug was only appeared in use of a weight vector column without reference type. A reference type weight vector column does not have this bug.</p>
<p>The bug only affected on the final result display even though internal processes was in floating-point number.</p>
<p>An example for this bug as follows;</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">table_create</span> <span class="n">Memos</span> <span class="n">TABLE_HASH_KEY</span> <span class="n">ShortText</span>
<span class="c1"># [[0,0.0,0.0],true]</span>
<span class="n">column_create</span> <span class="n">Memos</span> <span class="n">tags</span> <span class="n">COLUMN_VECTOR</span><span class="o">|</span><span class="n">WITH_WEIGHT</span><span class="o">|</span><span class="n">WEIGHT_FLOAT32</span> <span class="n">ShortText</span>
<span class="c1"># [[0,0.0,0.0],true]</span>
<span class="n">load</span> <span class="o">--</span><span class="n">table</span> <span class="n">Memos</span>
<span class="p">[</span>
<span class="p">{</span>
  <span class="s2">&quot;_key&quot;</span><span class="p">:</span> <span class="s2">&quot;Groonga is fast&quot;</span><span class="p">,</span>
  <span class="s2">&quot;tags&quot;</span><span class="p">:</span> <span class="p">{</span>
    <span class="s2">&quot;groonga&quot;</span><span class="p">:</span> <span class="mf">2.8</span><span class="p">,</span>
    <span class="s2">&quot;full text search&quot;</span><span class="p">:</span> <span class="mf">1.2</span>
  <span class="p">}</span>
<span class="p">}</span>
<span class="p">]</span>
<span class="c1"># [[0,0.0,0.0],1]</span>
<span class="n">select</span> <span class="n">Memos</span>
<span class="c1"># [</span>
<span class="c1">#   [</span>
<span class="c1">#     0,</span>
<span class="c1">#     0.0,</span>
<span class="c1">#     0.0</span>
<span class="c1">#   ],</span>
<span class="c1">#   [</span>
<span class="c1">#     [</span>
<span class="c1">#       [</span>
<span class="c1">#         1</span>
<span class="c1">#       ],</span>
<span class="c1">#       [</span>
<span class="c1">#         [</span>
<span class="c1">#           &quot;_id&quot;,</span>
<span class="c1">#           &quot;UInt32&quot;</span>
<span class="c1">#         ],</span>
<span class="c1">#         [</span>
<span class="c1">#           &quot;_key&quot;,</span>
<span class="c1">#           &quot;ShortText&quot;</span>
<span class="c1">#         ],</span>
<span class="c1">#         [</span>
<span class="c1">#           &quot;tags&quot;,</span>
<span class="c1">#           &quot;ShortText&quot;</span>
<span class="c1">#         ]</span>
<span class="c1">#       ],</span>
<span class="c1">#       [</span>
<span class="c1">#         1,</span>
<span class="c1">#         &quot;Groonga is fast&quot;,</span>
<span class="c1">#         {</span>
<span class="c1">#           &quot;groonga&quot;: 2,</span>
<span class="c1">#           &quot;full text search&quot;: 1</span>
<span class="c1">#         }</span>
<span class="c1">#       ]</span>
<span class="c1">#     ]</span>
<span class="c1">#   ]</span>
<span class="c1"># ]</span>
</pre></div>
</div>
<p><code class="docutils literal notranslate"><span class="pre">tags</span></code> column is a <code class="docutils literal notranslate"><span class="pre">ShortText</span></code> type weight vector column, sample of non-reference type weight vector column.</p>
<p>The results in this sample, the value 2 and 1 are returned as below, evne though the correct value should be 2.8 and 1.2.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
  <span class="s2">&quot;groonga&quot;</span><span class="p">:</span> <span class="mi">2</span><span class="p">,</span>
  <span class="s2">&quot;full text search&quot;</span><span class="p">:</span> <span class="mi">1</span>
<span class="p">}</span>
</pre></div>
</div>
<p>Applying this fix, the results would be returned as follows;</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">select</span> <span class="n">Memos</span>
<span class="c1"># [</span>
<span class="c1">#   [</span>
<span class="c1">#     0,</span>
<span class="c1">#     0.0,</span>
<span class="c1">#     0.0</span>
<span class="c1">#   ],</span>
<span class="c1">#   [</span>
<span class="c1">#     [</span>
<span class="c1">#       [</span>
<span class="c1">#         1</span>
<span class="c1">#       ],</span>
<span class="c1">#       [</span>
<span class="c1">#         [</span>
<span class="c1">#           &quot;_id&quot;,</span>
<span class="c1">#           &quot;UInt32&quot;</span>
<span class="c1">#         ],</span>
<span class="c1">#         [</span>
<span class="c1">#           &quot;_key&quot;,</span>
<span class="c1">#           &quot;ShortText&quot;</span>
<span class="c1">#         ],</span>
<span class="c1">#         [</span>
<span class="c1">#           &quot;tags&quot;,</span>
<span class="c1">#           &quot;ShortText&quot;</span>
<span class="c1">#         ]</span>
<span class="c1">#       ],</span>
<span class="c1">#       [</span>
<span class="c1">#         1,</span>
<span class="c1">#         &quot;Groonga is fast&quot;,</span>
<span class="c1">#         {</span>
<span class="c1">#           &quot;groonga&quot;: 2.8,</span>
<span class="c1">#           &quot;full text search&quot;: 1.2</span>
<span class="c1">#         }</span>
<span class="c1">#       ]</span>
<span class="c1">#     ]</span>
<span class="c1">#   ]</span>
<span class="c1"># ]</span>
</pre></div>
</div>
</li>
</ul>
</section>
</section>
<section id="release-12-0-9-2022-10-28">
<span id="release-12-0-9"></span><h2>Release 12.0.9 - 2022-10-28<a class="headerlink" href="#release-12-0-9-2022-10-28" title="Permalink to this heading">#</a></h2>
<section id="id4">
<h3>Improvements<a class="headerlink" href="#id4" title="Permalink to this heading">#</a></h3>
<ul>
<li><p>[<a class="reference internal" href="../install/almalinux.html"><span class="doc">AlmaLinux</span></a>] Added support for AlmaLinux 9.</p>
<p>We had added this support at <a class="reference internal" href="#release-12-0-8"><span class="std std-ref">Release 12.0.8 - 2022-10-03</span></a> but haven’t announced it.</p>
</li>
<li><p>[<a class="reference internal" href="../reference/functions/escalate.html"><span class="doc">escalate</span></a>] Added a document for the <code class="docutils literal notranslate"><span class="pre">escalate()</span></code> function.</p></li>
<li><p>[<a class="reference internal" href="../reference/normalizers.html"><span class="doc">Normalizers</span></a>] Added <code class="docutils literal notranslate"><span class="pre">NormalizerHTML</span></code>. (Experimental)</p>
<p><code class="docutils literal notranslate"><span class="pre">NormalizerHTML</span></code> is a normalizer for HTML.</p>
<p>Currently <code class="docutils literal notranslate"><span class="pre">NormalizerHTML</span></code> supports removing tags like <code class="docutils literal notranslate"><span class="pre">&lt;span&gt;</span></code> or <code class="docutils literal notranslate"><span class="pre">&lt;/span&gt;</span></code> and expanding character references like <code class="docutils literal notranslate"><span class="pre">&amp;amp;</span></code> or <code class="docutils literal notranslate"><span class="pre">&amp;#38;</span></code>.</p>
<p>Here are sample queries for <code class="docutils literal notranslate"><span class="pre">NormalizerHTML</span></code>.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">normalize</span> <span class="n">NormalizerHTML</span> <span class="s2">&quot;&lt;span&gt; Groonga &amp;amp; Mroonga &amp;#38; Rroonga &lt;/span&gt;&quot;</span>
<span class="p">[[</span><span class="mi">0</span><span class="p">,</span><span class="mf">1666923364.883798</span><span class="p">,</span><span class="mf">0.0005481243133544922</span><span class="p">],{</span><span class="s2">&quot;normalized&quot;</span><span class="p">:</span><span class="s2">&quot; Groonga &amp; Mroonga &amp; Rroonga &quot;</span><span class="p">,</span><span class="s2">&quot;types&quot;</span><span class="p">:[],</span><span class="s2">&quot;checks&quot;</span><span class="p">:[]}]</span>
</pre></div>
</div>
<p>In this sample <code class="docutils literal notranslate"><span class="pre">&lt;span&gt;</span></code> and <code class="docutils literal notranslate"><span class="pre">&lt;/span&gt;</span></code> are removed, and <code class="docutils literal notranslate"><span class="pre">&amp;amp;</span></code> and <code class="docutils literal notranslate"><span class="pre">&amp;#38;</span></code> are expanded to <code class="docutils literal notranslate"><span class="pre">&amp;</span></code>.</p>
<p>We can specify whether removing the tags with the <code class="docutils literal notranslate"><span class="pre">remove_tag</span></code> option.
(The default value of the <code class="docutils literal notranslate"><span class="pre">remove_tag</span></code> option is <code class="docutils literal notranslate"><span class="pre">true</span></code>.)</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">normalize</span> <span class="s1">&#39;NormalizerHTML(&quot;remove_tag&quot;, false)&#39;</span> <span class="s2">&quot;&lt;span&gt; Groonga &amp;amp; Mroonga &amp;#38; Rroonga &lt;/span&gt;&quot;</span>
<span class="p">[[</span><span class="mi">0</span><span class="p">,</span><span class="mf">1666924069.278549</span><span class="p">,</span><span class="mf">0.0001978874206542969</span><span class="p">],{</span><span class="s2">&quot;normalized&quot;</span><span class="p">:</span><span class="s2">&quot;&lt;span&gt; Groonga &amp; Mroonga &amp; Rroonga &lt;/span&gt;&quot;</span><span class="p">,</span><span class="s2">&quot;types&quot;</span><span class="p">:[],</span><span class="s2">&quot;checks&quot;</span><span class="p">:[]}]</span>
</pre></div>
</div>
<p>In this sample, <code class="docutils literal notranslate"><span class="pre">&lt;span&gt;</span></code> and <code class="docutils literal notranslate"><span class="pre">&lt;/span&gt;</span></code> are not removed.</p>
<p>We can specify whether expanding the character references with the <code class="docutils literal notranslate"><span class="pre">expand_character_reference</span></code> option.
(The default value of the <code class="docutils literal notranslate"><span class="pre">expand_character_reference</span></code> option is <code class="docutils literal notranslate"><span class="pre">true</span></code>.)</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">normalize</span> <span class="s1">&#39;NormalizerHTML(&quot;expand_character_reference&quot;, false)&#39;</span> <span class="s2">&quot;&lt;span&gt; Groonga &amp;amp; Mroonga &amp;#38; Rroonga &lt;/span&gt;&quot;</span>
<span class="p">[[</span><span class="mi">0</span><span class="p">,</span><span class="mf">1666924357.099782</span><span class="p">,</span><span class="mf">0.0002346038818359375</span><span class="p">],{</span><span class="s2">&quot;normalized&quot;</span><span class="p">:</span><span class="s2">&quot; Groonga &amp;amp; Mroonga &amp;#38; Rroonga &quot;</span><span class="p">,</span><span class="s2">&quot;types&quot;</span><span class="p">:[],</span><span class="s2">&quot;checks&quot;</span><span class="p">:[]}]</span>
</pre></div>
</div>
<p>In this sample, <code class="docutils literal notranslate"><span class="pre">&amp;amp;</span></code> and <code class="docutils literal notranslate"><span class="pre">&amp;#38;</span></code> are not expanded.</p>
</li>
<li><p>[httpd] Updated bundled nginx to 1.23.2.</p>
<p>Contains security fixes of CVE-2022-41741 and CVE-2022-41742.
Please refer to <a class="reference external" href="https://nginx.org/en/CHANGES">https://nginx.org/en/CHANGES</a> about these security fixes.</p>
</li>
<li><p>Suppressed logging a lot of same messages when no memory is available.</p>
<p>Groonga could log a lot of <code class="docutils literal notranslate"><span class="pre">mmap</span> <span class="pre">failed!!!!</span></code> when no memory is available.
We improved to log the above message as less duplicates as possible.</p>
</li>
</ul>
</section>
<section id="id5">
<h3>Fixes<a class="headerlink" href="#id5" title="Permalink to this heading">#</a></h3>
<ul>
<li><p>[<a class="reference internal" href="../reference/commands/select.html"><span class="doc">select</span></a>] Fixed a bug that Groonga could crash or return incorrect results when specifying <a class="reference internal" href="../reference/commands/select.html#select-n-workers"><span class="std std-ref">n_workers</span></a>.</p>
<p>This bug had occurred when using <a class="reference internal" href="../reference/commands/select.html#select-n-workers"><span class="std std-ref">n_workers</span></a> with a value greater than <code class="docutils literal notranslate"><span class="pre">1</span></code> and <code class="docutils literal notranslate"><span class="pre">drilldowns[{LABEL}].filter</span></code> at the same time.</p>
<p>The reason why this bug occurred was because Groonga referenced incorrect values (objects) when performing internal parallel processing.
So if the condition above was satisfied, Groonga sometimes crashed or returned incorrect results depending on the timing of the parallel processing.</p>
</li>
</ul>
</section>
</section>
<section id="release-12-0-8-2022-10-03">
<span id="release-12-0-8"></span><h2>Release 12.0.8 - 2022-10-03<a class="headerlink" href="#release-12-0-8-2022-10-03" title="Permalink to this heading">#</a></h2>
<section id="id6">
<h3>Improvements<a class="headerlink" href="#id6" title="Permalink to this heading">#</a></h3>
<ul>
<li><p>Changed specification of the <code class="docutils literal notranslate"><span class="pre">escalate()</span></code> function (Experimental) to make it easier to use.</p>
<p>We changed to not use results out of <code class="docutils literal notranslate"><span class="pre">escalate()</span></code>.</p>
<p>In the previous specification, users had to guess how many results would be passed to <code class="docutils literal notranslate"><span class="pre">escalate()</span></code> to determin the first threshold, which was incovenient.</p>
<p>Here is a example for the previous <code class="docutils literal notranslate"><span class="pre">escalate()</span></code>.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">number_column</span> <span class="o">&gt;</span> <span class="mi">10</span> <span class="o">&amp;&amp;</span> <span class="n">escalate</span><span class="p">(</span><span class="n">THRESHOLD_1</span><span class="p">,</span> <span class="n">CONDITION_1</span><span class="p">,</span>
                               <span class="o">...</span><span class="p">,</span>
                               <span class="n">THRESHOLD_N</span><span class="p">,</span> <span class="n">CONDITION_N</span><span class="p">)</span>
</pre></div>
</div>
<p><code class="docutils literal notranslate"><span class="pre">CONDITION1</span></code> was executed when the results of <code class="docutils literal notranslate"><span class="pre">number_column</span> <span class="pre">&gt;</span> <span class="pre">10</span></code> was less or equal to <code class="docutils literal notranslate"><span class="pre">THRESHOLD_1</span></code> .
Users had to guess how many results would they get from <code class="docutils literal notranslate"><span class="pre">number_column</span> <span class="pre">&gt;</span> <span class="pre">10</span></code> to determine <code class="docutils literal notranslate"><span class="pre">THRESHOLD_1</span></code>.</p>
<p>From this release, the users don’t need to guess how many results will they get from <code class="docutils literal notranslate"><span class="pre">number_column</span> <span class="pre">&gt;</span> <span class="pre">10</span></code>, making it easier to set the thresholds.</p>
<p>With this change, the syntax of <code class="docutils literal notranslate"><span class="pre">escalate()</span></code> changed as follow.</p>
<p>The previous syntax</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">escalate</span><span class="p">(</span><span class="n">THRESHOLD_1</span><span class="p">,</span> <span class="n">CONDITION_1</span><span class="p">,</span><span class="n">THRESHOLD_2</span><span class="p">,</span> <span class="n">CONDITION_2</span><span class="p">,</span> <span class="o">...</span><span class="p">,</span> <span class="n">THRESHOLD_N</span><span class="p">,</span> <span class="n">CONDITION_N</span><span class="p">)</span>
</pre></div>
</div>
<p>The new syntax</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">escalate</span><span class="p">(</span><span class="n">CONDITION_1</span><span class="p">,</span> <span class="n">THRESHOLD_2</span><span class="p">,</span> <span class="n">CONDITION_2</span><span class="p">,</span> <span class="o">...</span><span class="p">,</span> <span class="n">THRESHOLD_N</span><span class="p">,</span> <span class="n">CONDITION_N</span><span class="p">)</span>
</pre></div>
</div>
<p>Here are details of the syntax changes.</p>
<ul class="simple">
<li><p>Don’t require the threshold for the first condition.</p></li>
<li><p>Don’t allow empty arguments call. The first condition is required.</p></li>
<li><p>Always execute the first condition.</p></li>
</ul>
<p>This function is experimental. These behaviors may be changed in the future.</p>
</li>
<li><p>[<a class="reference internal" href="../install/cmake.html"><span class="doc">How to build Groonga with CMake</span></a>] Added a document about how to build Groonga with CMake.</p></li>
<li><p>[<a class="reference internal" href="../install/others.html"><span class="doc">Others</span></a>] Added descriptions about how to enable/disable Apache Arrow support when building with GNU Autotools.</p></li>
<li><p>[<a class="reference internal" href="../reference/commands/select.html"><span class="doc">select</span></a>] Added a document about <a class="reference internal" href="../reference/commands/select.html#select-drilldowns-label-table"><span class="std std-ref">drilldowns[${LABEL}].table</span></a>.</p></li>
<li><p>[<a class="reference internal" href="../contribution/documentation/i18n.html"><span class="doc">I18N</span></a>] Updated the translation procedure.</p></li>
</ul>
</section>
<section id="id7">
<h3>Fixes<a class="headerlink" href="#id7" title="Permalink to this heading">#</a></h3>
<ul>
<li><p>Fixed a bug that Groonga could return incorrect results when we use <a class="reference internal" href="../reference/normalizers/normalizer_table.html"><span class="doc">NormalizerTable</span></a>
and it contains a non-idempotent (results can be changed when executed repeatedly) definition.</p>
<p>This was caused by that we normalized a search value multiple times: after the value was input and after the value was tokenized.</p>
<p>Groonga tokenizes and normalizes the data to be registered using the tokenizer and normalizer set in the index table when adding a record.
The search value is also tokenized and normalized using the tokenizer and normalizer set in the index table, and then the search value and the index are matched.
If the search value is the same as the data registered in the index, it will be in the same state as stored in the index because both use the same tokenizer and normalizer.</p>
<p>However, Groonga had normalized extra only search keywords.</p>
<p>Built-in normalizers like <a class="reference internal" href="../reference/normalizers/normalizer_auto.html"><span class="doc">NormalizerAuto</span></a> did’t cause this bug because
they are idempotent (results aren’t changed if they are executed repeatedly).
On the other hand, <a class="reference internal" href="../reference/normalizers/normalizer_table.html"><span class="doc">NormalizerTable</span></a> allows the users specify their own normalization definitions,
so they can specify non-idempotent (results can be changed when executed repeatedly) definitions.</p>
<p>If there were non-idempotent definitions in <a class="reference internal" href="../reference/normalizers/normalizer_table.html"><span class="doc">NormalizerTable</span></a>,
the indexed data and the search value did not match in some cases because the search value was normalized extra.</p>
<p>In such cases, the data that should hit was not hit or the data that should not hit was hit.</p>
<p>Here is a example.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">table_create</span> <span class="n">ColumnNormalizations</span> <span class="n">TABLE_NO_KEY</span>
<span class="n">column_create</span> <span class="n">ColumnNormalizations</span> <span class="n">target_column</span> <span class="n">COLUMN_SCALAR</span> <span class="n">ShortText</span>
<span class="n">column_create</span> <span class="n">ColumnNormalizations</span> <span class="n">normalized</span> <span class="n">COLUMN_SCALAR</span> <span class="n">ShortText</span>

<span class="n">load</span> <span class="o">--</span><span class="n">table</span> <span class="n">ColumnNormalizations</span>
<span class="p">[</span>
<span class="p">{</span><span class="s2">&quot;target_column&quot;</span><span class="p">:</span> <span class="s2">&quot;a&quot;</span><span class="p">,</span> <span class="s2">&quot;normalized&quot;</span><span class="p">:</span> <span class="s2">&quot;b&quot;</span><span class="p">},</span>
<span class="p">{</span><span class="s2">&quot;target_column&quot;</span><span class="p">:</span> <span class="s2">&quot;b&quot;</span><span class="p">,</span> <span class="s2">&quot;normalized&quot;</span><span class="p">:</span> <span class="s2">&quot;c&quot;</span><span class="p">}</span>
<span class="p">]</span>

<span class="n">table_create</span> <span class="n">Targets</span> <span class="n">TABLE_PAT_KEY</span> <span class="n">ShortText</span>
<span class="n">column_create</span> <span class="n">Targets</span> <span class="n">column_normalizations_target_column</span> <span class="n">COLUMN_INDEX</span> \
  <span class="n">ColumnNormalizations</span> <span class="n">target_column</span>

<span class="n">table_create</span> <span class="n">Memos</span> <span class="n">TABLE_NO_KEY</span>
<span class="n">column_create</span> <span class="n">Memos</span> <span class="n">content</span> <span class="n">COLUMN_SCALAR</span> <span class="n">ShortText</span>

<span class="n">load</span> <span class="o">--</span><span class="n">table</span> <span class="n">Memos</span>
<span class="p">[</span>
<span class="p">{</span><span class="s2">&quot;content&quot;</span><span class="p">:</span><span class="s2">&quot;a&quot;</span><span class="p">},</span>
<span class="p">{</span><span class="s2">&quot;content&quot;</span><span class="p">:</span><span class="s2">&quot;c&quot;</span><span class="p">},</span>
<span class="p">]</span>

<span class="n">table_create</span> \
  <span class="n">Terms</span> \
  <span class="n">TABLE_PAT_KEY</span> \
  <span class="n">ShortText</span> \
  <span class="o">--</span><span class="n">default_tokenizer</span> <span class="s1">&#39;TokenNgram&#39;</span> \
  <span class="o">--</span><span class="n">normalizers</span> <span class="s1">&#39;NormalizerTable(&quot;normalized&quot;, </span><span class="se">\</span>
<span class="s1">                                &quot;ColumnNormalizations.normalized&quot;, </span><span class="se">\</span>
<span class="s1">                                &quot;target&quot;, </span><span class="se">\</span>
<span class="s1">                                &quot;target_column&quot;)&#39;</span>

<span class="n">column_create</span> <span class="n">Terms</span> <span class="n">memos_content</span> <span class="n">COLUMN_INDEX</span><span class="o">|</span><span class="n">WITH_POSITION</span> <span class="n">Memos</span> <span class="n">content</span>

<span class="n">select</span> <span class="n">Memos</span> <span class="o">--</span><span class="n">query</span> <span class="n">content</span><span class="p">:</span><span class="nd">@a</span>
<span class="p">[[</span><span class="mi">0</span><span class="p">,</span><span class="mf">1664781132.892326</span><span class="p">,</span><span class="mf">0.03527212142944336</span><span class="p">],[[[</span><span class="mi">1</span><span class="p">],[[</span><span class="s2">&quot;_id&quot;</span><span class="p">,</span><span class="s2">&quot;UInt32&quot;</span><span class="p">],[</span><span class="s2">&quot;content&quot;</span><span class="p">,</span><span class="s2">&quot;ShortText&quot;</span><span class="p">]],[</span><span class="mi">2</span><span class="p">,</span><span class="s2">&quot;c&quot;</span><span class="p">]]]]</span>
</pre></div>
</div>
<p>The expected result of <code class="docutils literal notranslate"><span class="pre">select</span> <span class="pre">Memos</span> <span class="pre">--query</span> <span class="pre">content:&#64;a</span></code> is <code class="docutils literal notranslate"><span class="pre">a</span></code>, but Groonga returned <code class="docutils literal notranslate"><span class="pre">c</span></code> as a result.
This was because we normalized the input <code class="docutils literal notranslate"><span class="pre">a</span></code> to <code class="docutils literal notranslate"><span class="pre">b</span></code> by definitions of <code class="docutils literal notranslate"><span class="pre">ColumnNormalizations</span></code>, and after that, we normalized the normalized <code class="docutils literal notranslate"><span class="pre">b</span></code>
again and it was normalized to <code class="docutils literal notranslate"><span class="pre">c</span></code>. As a result, the input <code class="docutils literal notranslate"><span class="pre">a</span></code> was converted to <code class="docutils literal notranslate"><span class="pre">c</span></code> and matched to <code class="docutils literal notranslate"><span class="pre">{&quot;content&quot;:&quot;c&quot;}</span></code> of the <code class="docutils literal notranslate"><span class="pre">Memos</span></code> table.</p>
</li>
</ul>
</section>
</section>
<section id="release-12-0-7-2022-08-29">
<span id="release-12-0-7"></span><h2>Release 12.0.7 - 2022-08-29<a class="headerlink" href="#release-12-0-7-2022-08-29" title="Permalink to this heading">#</a></h2>
<section id="id8">
<h3>Improvements<a class="headerlink" href="#id8" title="Permalink to this heading">#</a></h3>
<ul>
<li><p>Added a new function <code class="docutils literal notranslate"><span class="pre">escalate()</span></code>. (experimental)</p>
<p>The <code class="docutils literal notranslate"><span class="pre">escalate()</span></code> function is similar to the existing match escalation ( <a class="reference internal" href="../spec/search.html"><span class="doc">検索</span></a> ).
We can use this function for any conditions. (The existing match escalation is just for one full text search by invert index.)</p>
<p>The <code class="docutils literal notranslate"><span class="pre">escalate()</span></code> function is useful when we want to limit the number of results of a search.
Even if we use <code class="docutils literal notranslate"><span class="pre">--limit</span></code>, we can limit the number of results of a search. However, <code class="docutils literal notranslate"><span class="pre">--limit</span></code> is evaluated after evaluating all conditions in our query.
The <code class="docutils literal notranslate"><span class="pre">escalate()</span></code> function finish the evaluation of conditions at that point when the result set has greater than <code class="docutils literal notranslate"><span class="pre">THRESHOLD</span></code> records. In other words, The <code class="docutils literal notranslate"><span class="pre">escalate()</span></code> function may reduce the number of evaluating conditions.</p>
<p>The syntax of the <code class="docutils literal notranslate"><span class="pre">escalate()</span></code> function as below:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">escalate</span><span class="p">(</span><span class="n">THRESHOLD_1</span><span class="p">,</span> <span class="n">CONDITION_1</span><span class="p">,</span>
         <span class="n">THRESHOLD_2</span><span class="p">,</span> <span class="n">CONDITION_2</span><span class="p">,</span>
         <span class="o">...</span><span class="p">,</span>
         <span class="n">THRESHOLD_N</span><span class="p">,</span> <span class="n">CONDITION_N</span><span class="p">)</span>
</pre></div>
</div>
<p><code class="docutils literal notranslate"><span class="pre">THRESHOLD_N</span></code> is a positive number such as 0 and 29.
<code class="docutils literal notranslate"><span class="pre">CONDITION_N</span></code> is a string that uses <a class="reference internal" href="../reference/grn_expr/script_syntax.html"><span class="doc">Script syntax</span></a> such as <code class="docutils literal notranslate"><span class="pre">number_column</span> <span class="pre">&gt;</span> <span class="pre">29</span></code>.</p>
<p>If the current result set has less than or equal to <code class="docutils literal notranslate"><span class="pre">THRESHOLD_1</span></code> records, the corresponding <code class="docutils literal notranslate"><span class="pre">CONDITION_1</span></code> is executed.
Similarly, if the next result set has less than or equal to <code class="docutils literal notranslate"><span class="pre">THRESHOLD_2</span></code> records, the corresponding <code class="docutils literal notranslate"><span class="pre">CONDITION_2</span></code> is executed.
If the next result set has greater than <code class="docutils literal notranslate"><span class="pre">THRESHOLD_3</span></code> records, the <code class="docutils literal notranslate"><span class="pre">escalate()</span></code> function is finished.</p>
<p>If all <code class="docutils literal notranslate"><span class="pre">CONDITION</span></code> s are executed, <code class="docutils literal notranslate"><span class="pre">escalate(THRESHOLD_1,</span> <span class="pre">CONDITION_1,</span> <span class="pre">...,</span> <span class="pre">THRESHOLD_N,</span> <span class="pre">CONDITION_N)</span></code> is same as <code class="docutils literal notranslate"><span class="pre">CONDITION_1</span> <span class="pre">||</span> <span class="pre">...</span> <span class="pre">||</span> <span class="pre">CONDITION_N</span></code>.</p>
<p>The <code class="docutils literal notranslate"><span class="pre">escalate()</span></code> function can be worked with logical operators such as <code class="docutils literal notranslate"><span class="pre">&amp;&amp;</span></code> and <code class="docutils literal notranslate"><span class="pre">&amp;!</span></code></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>number_column &gt; 10 &amp;&amp; escalate(THRESHOLD_1, CONDITION_1,
                               ...,
                               THRESHOLD_N, CONDITION_N)
number_column &gt; 10 &amp;! escalate(THRESHOLD_1, CONDITION_1,
                               ...,
                               THRESHOLD_N, CONDITION_N)
</pre></div>
</div>
<p>They are same as <code class="docutils literal notranslate"><span class="pre">number_column</span> <span class="pre">&gt;</span> <span class="pre">10</span> <span class="pre">&amp;&amp;</span> <span class="pre">(CONDITION_1</span> <span class="pre">||</span> <span class="pre">...</span> <span class="pre">||</span> <span class="pre">CONDITION_N)</span></code> and <code class="docutils literal notranslate"><span class="pre">number_column</span> <span class="pre">&gt;</span> <span class="pre">10</span> <span class="pre">&amp;!</span> <span class="pre">(CONDITION_1</span> <span class="pre">||</span> <span class="pre">...</span> <span class="pre">||</span> <span class="pre">CONDITION_N)</span></code> .</p>
<p>However, these behaviors may be changed because they may not be useful.</p>
</li>
<li><p>[httpd] Updated bundled nginx to 1.23.1.</p></li>
<li><p>[<a class="reference internal" href="../reference/commands/select.html"><span class="doc">select</span></a>] Add a document for the <code class="docutils literal notranslate"><span class="pre">--n_workers</span></code> option.</p></li>
</ul>
</section>
<section id="id9">
<h3>Fixes<a class="headerlink" href="#id9" title="Permalink to this heading">#</a></h3>
<ul>
<li><p>Fixed a bug Groonga’s response may be slow when we execute the <code class="docutils literal notranslate"><span class="pre">request_cancel</span></code> while executing a OR search.</p>
<p>When the number of results of the OR search is many and a query has many OR conditions, Groonga may response slow with the “request_cancel” command.</p>
</li>
</ul>
</section>
</section>
<section id="release-12-0-6-2022-08-04">
<span id="release-12-0-6"></span><h2>Release 12.0.6 - 2022-08-04<a class="headerlink" href="#release-12-0-6-2022-08-04" title="Permalink to this heading">#</a></h2>
<section id="id10">
<h3>Improvements<a class="headerlink" href="#id10" title="Permalink to this heading">#</a></h3>
<ul>
<li><p>Added new Munin plugins for groonga-delta.</p>
<p>We can monitoring the following items by plugins for groonga-delta.</p>
<blockquote>
<div><ul class="simple">
<li><p>Whether <code class="docutils literal notranslate"><span class="pre">groonga-delta-import</span></code> can import or not <code class="docutils literal notranslate"><span class="pre">.grn</span></code> file on local storage.</p></li>
<li><p>Whether <code class="docutils literal notranslate"><span class="pre">groonga-delta-import</span></code> can import or not difference data of MySQL.</p></li>
<li><p>Whether <code class="docutils literal notranslate"><span class="pre">groonga-delta-apply</span></code> can apply imported data or not.</p></li>
<li><p>The total size of applying data.</p></li>
</ul>
</div></blockquote>
</li>
<li><p>[<a class="reference internal" href="../reference/commands/column_copy.html"><span class="doc">column_copy</span></a>] Added support for weight vector.</p>
<p>We can copy the value of weight vector by <code class="docutils literal notranslate"><span class="pre">column_copy</span></code> as below.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">table_create</span> <span class="n">Tags</span> <span class="n">TABLE_HASH_KEY</span> <span class="n">ShortText</span>
<span class="p">[[</span><span class="mi">0</span><span class="p">,</span><span class="mf">0.0</span><span class="p">,</span><span class="mf">0.0</span><span class="p">],</span><span class="n">true</span><span class="p">]</span>
<span class="n">table_create</span> <span class="n">CopyFloat32Value</span> <span class="n">TABLE_HASH_KEY</span> <span class="n">ShortText</span>
<span class="p">[[</span><span class="mi">0</span><span class="p">,</span><span class="mf">0.0</span><span class="p">,</span><span class="mf">0.0</span><span class="p">],</span><span class="n">true</span><span class="p">]</span>
<span class="n">column_create</span> <span class="n">CopyFloat32Value</span> <span class="n">source_tags</span> <span class="n">COLUMN_VECTOR</span><span class="o">|</span><span class="n">WITH_WEIGHT</span><span class="o">|</span><span class="n">WEIGHT_FLOAT32</span> <span class="n">Tags</span>
<span class="p">[[</span><span class="mi">0</span><span class="p">,</span><span class="mf">0.0</span><span class="p">,</span><span class="mf">0.0</span><span class="p">],</span><span class="n">true</span><span class="p">]</span>
<span class="n">column_create</span> <span class="n">CopyFloat32Value</span> <span class="n">destination_tags</span> <span class="n">COLUMN_VECTOR</span><span class="o">|</span><span class="n">WITH_WEIGHT</span><span class="o">|</span><span class="n">WEIGHT_FLOAT32</span> <span class="n">Tags</span>
<span class="p">[[</span><span class="mi">0</span><span class="p">,</span><span class="mf">0.0</span><span class="p">,</span><span class="mf">0.0</span><span class="p">],</span><span class="n">true</span><span class="p">]</span>
<span class="n">load</span> <span class="o">--</span><span class="n">table</span> <span class="n">CopyFloat32Value</span>
<span class="p">[</span>
<span class="p">{</span>
  <span class="s2">&quot;_key&quot;</span><span class="p">:</span> <span class="s2">&quot;Groonga is fast!!!&quot;</span><span class="p">,</span>
  <span class="s2">&quot;source_tags&quot;</span><span class="p">:</span> <span class="p">{</span>
    <span class="s2">&quot;Groonga&quot;</span><span class="p">:</span> <span class="mf">2.8</span><span class="p">,</span>
    <span class="s2">&quot;full text search&quot;</span><span class="p">:</span> <span class="mf">1.5</span>
  <span class="p">}</span>
<span class="p">}</span>
<span class="p">]</span>
<span class="p">[[</span><span class="mi">0</span><span class="p">,</span><span class="mf">0.0</span><span class="p">,</span><span class="mf">0.0</span><span class="p">],</span><span class="mi">1</span><span class="p">]</span>
<span class="n">column_copy</span> <span class="n">CopyFloat32Value</span> <span class="n">source_tags</span> <span class="n">CopyFloat32Value</span> <span class="n">destination_tags</span>
<span class="p">[[</span><span class="mi">0</span><span class="p">,</span><span class="mf">0.0</span><span class="p">,</span><span class="mf">0.0</span><span class="p">],</span><span class="n">true</span><span class="p">]</span>
<span class="n">select</span> <span class="n">CopyFloat32Value</span>
<span class="p">[</span>
  <span class="p">[</span>
    <span class="mi">0</span><span class="p">,</span>
    <span class="mf">0.0</span><span class="p">,</span>
    <span class="mf">0.0</span>
  <span class="p">],</span>
  <span class="p">[</span>
    <span class="p">[</span>
      <span class="p">[</span>
        <span class="mi">1</span>
      <span class="p">],</span>
      <span class="p">[</span>
        <span class="p">[</span>
          <span class="s2">&quot;_id&quot;</span><span class="p">,</span>
          <span class="s2">&quot;UInt32&quot;</span>
        <span class="p">],</span>
        <span class="p">[</span>
          <span class="s2">&quot;_key&quot;</span><span class="p">,</span>
          <span class="s2">&quot;ShortText&quot;</span>
        <span class="p">],</span>
        <span class="p">[</span>
          <span class="s2">&quot;destination_tags&quot;</span><span class="p">,</span>
          <span class="s2">&quot;Tags&quot;</span>
        <span class="p">],</span>
        <span class="p">[</span>
          <span class="s2">&quot;source_tags&quot;</span><span class="p">,</span>
          <span class="s2">&quot;Tags&quot;</span>
        <span class="p">]</span>
      <span class="p">],</span>
      <span class="p">[</span>
        <span class="mi">1</span><span class="p">,</span>
        <span class="s2">&quot;Groonga is fast!!!&quot;</span><span class="p">,</span>
        <span class="p">{</span>
          <span class="s2">&quot;Groonga&quot;</span><span class="p">:</span> <span class="mf">2.8</span><span class="p">,</span>
          <span class="s2">&quot;full text search&quot;</span><span class="p">:</span> <span class="mf">1.5</span>
        <span class="p">},</span>
        <span class="p">{</span>
          <span class="s2">&quot;Groonga&quot;</span><span class="p">:</span> <span class="mf">2.8</span><span class="p">,</span>
          <span class="s2">&quot;full text search&quot;</span><span class="p">:</span> <span class="mf">1.5</span>
        <span class="p">}</span>
      <span class="p">]</span>
    <span class="p">]</span>
  <span class="p">]</span>
<span class="p">]</span>
</pre></div>
</div>
</li>
<li><p>[<a class="reference internal" href="../install/ubuntu.html"><span class="doc">Ubuntu</span></a>] Dropped support for Ubuntu 21.10 (Impish Indri).</p>
<p>Because Ubuntu 21.10 reached EOL in July 2022.</p>
</li>
<li><p>[<a class="reference internal" href="../install/debian.html"><span class="doc">Debian GNU/Linux</span></a>] Dropped Debian 10 (buster) support.</p>
<p>Because Debian 10 reaches EOL in August 2022.</p>
</li>
</ul>
</section>
<section id="id11">
<h3>Fixes<a class="headerlink" href="#id11" title="Permalink to this heading">#</a></h3>
<ul>
<li><p>Fixed a bug that Groonga may crash when we execute drilldown in a parallel by <code class="docutils literal notranslate"><span class="pre">n_workers</span></code> option.</p></li>
<li><p>[<a class="reference internal" href="../reference/commands/select.html"><span class="doc">select</span></a>] Fixed a bug that the syntax error occurred when we specify a very long expression in <code class="docutils literal notranslate"><span class="pre">--filter</span></code>.</p>
<p>Because the max stack size for the expression of <code class="docutils literal notranslate"><span class="pre">--filter</span></code> was 100 until now.</p>
</li>
</ul>
</section>
</section>
<section id="release-12-0-5-2022-06-29">
<span id="release-12-0-5"></span><h2>Release 12.0.5 - 2022-06-29<a class="headerlink" href="#release-12-0-5-2022-06-29" title="Permalink to this heading">#</a></h2>
<section id="id12">
<h3>Improvements<a class="headerlink" href="#id12" title="Permalink to this heading">#</a></h3>
<ul>
<li><p>[<a class="reference internal" href="../reference/commands/select.html"><span class="doc">select</span></a>] Improved a little bit of performance for prefix search by search escalation.</p></li>
<li><p>[<a class="reference internal" href="../reference/commands/select.html"><span class="doc">select</span></a>] Added support for specifying a reference vector column with weight in <code class="docutils literal notranslate"><span class="pre">drilldowns[LABEL]._key</span></code>. [GitHub#1366][Patched by naoa]</p>
<p>If we specified a reference vector column with weight in drilldown’s key, Groonga had returned incorrect results until now.</p>
<p>For example, the following tag search had returned incorrect results until now.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">table_create</span> <span class="n">Tags</span> <span class="n">TABLE_PAT_KEY</span> <span class="n">ShortText</span>

<span class="n">table_create</span> <span class="n">Memos</span> <span class="n">TABLE_HASH_KEY</span> <span class="n">ShortText</span>
<span class="n">column_create</span> <span class="n">Memos</span> <span class="n">tags</span> <span class="n">COLUMN_VECTOR</span><span class="o">|</span><span class="n">WITH_WEIGHT</span> <span class="n">Tags</span>
<span class="n">column_create</span> <span class="n">Memos</span> <span class="n">date</span> <span class="n">COLUMN_SCALAR</span> <span class="n">Time</span>

<span class="n">load</span> <span class="o">--</span><span class="n">table</span> <span class="n">Memos</span>
<span class="p">[</span>
<span class="p">{</span><span class="s2">&quot;_key&quot;</span><span class="p">:</span> <span class="s2">&quot;Groonga is fast!&quot;</span><span class="p">,</span> <span class="s2">&quot;tags&quot;</span><span class="p">:</span> <span class="p">{</span><span class="s2">&quot;full-text-search&quot;</span><span class="p">:</span> <span class="mi">100</span><span class="p">},</span> <span class="s2">&quot;date&quot;</span><span class="p">:</span> <span class="s2">&quot;2014-11-16 00:00:00&quot;</span><span class="p">},</span>
<span class="p">{</span><span class="s2">&quot;_key&quot;</span><span class="p">:</span> <span class="s2">&quot;Mroonga is fast!&quot;</span><span class="p">,</span> <span class="s2">&quot;tags&quot;</span><span class="p">:</span> <span class="p">{</span><span class="s2">&quot;mysql&quot;</span><span class="p">:</span> <span class="mi">100</span><span class="p">,</span> <span class="s2">&quot;full-text-search&quot;</span><span class="p">:</span> <span class="mi">80</span><span class="p">},</span> <span class="s2">&quot;date&quot;</span><span class="p">:</span> <span class="s2">&quot;2014-11-16 00:00:00&quot;</span><span class="p">},</span>
<span class="p">{</span><span class="s2">&quot;_key&quot;</span><span class="p">:</span> <span class="s2">&quot;Groonga sticker!&quot;</span><span class="p">,</span> <span class="s2">&quot;tags&quot;</span><span class="p">:</span> <span class="p">{</span><span class="s2">&quot;full-text-search&quot;</span><span class="p">:</span> <span class="mi">100</span><span class="p">,</span> <span class="s2">&quot;sticker&quot;</span><span class="p">:</span> <span class="mi">10</span><span class="p">},</span> <span class="s2">&quot;date&quot;</span><span class="p">:</span> <span class="s2">&quot;2014-11-16 00:00:00&quot;</span><span class="p">},</span>
<span class="p">{</span><span class="s2">&quot;_key&quot;</span><span class="p">:</span> <span class="s2">&quot;Rroonga is fast!&quot;</span><span class="p">,</span> <span class="s2">&quot;tags&quot;</span><span class="p">:</span> <span class="p">{</span><span class="s2">&quot;full-text-search&quot;</span><span class="p">:</span> <span class="mi">100</span><span class="p">,</span> <span class="s2">&quot;ruby&quot;</span><span class="p">:</span> <span class="mi">20</span><span class="p">},</span> <span class="s2">&quot;date&quot;</span><span class="p">:</span> <span class="s2">&quot;2014-11-17 00:00:00&quot;</span><span class="p">},</span>
<span class="p">{</span><span class="s2">&quot;_key&quot;</span><span class="p">:</span> <span class="s2">&quot;Groonga is good!&quot;</span><span class="p">,</span> <span class="s2">&quot;tags&quot;</span><span class="p">:</span> <span class="p">{</span><span class="s2">&quot;full-text-search&quot;</span><span class="p">:</span> <span class="mi">100</span><span class="p">},</span> <span class="s2">&quot;date&quot;</span><span class="p">:</span> <span class="s2">&quot;2014-11-17 00:00:00&quot;</span><span class="p">}</span>
<span class="p">]</span>

<span class="n">select</span> <span class="n">Memos</span> \
  <span class="o">--</span><span class="n">drilldowns</span><span class="p">[</span><span class="n">tags</span><span class="p">]</span><span class="o">.</span><span class="n">keys</span> <span class="n">tags</span> \
  <span class="o">--</span><span class="n">drilldowns</span><span class="p">[</span><span class="n">tags</span><span class="p">]</span><span class="o">.</span><span class="n">output_columns</span> <span class="n">_key</span><span class="p">,</span><span class="n">_nsubrecs</span>
<span class="p">[</span>
  <span class="p">[</span>
    <span class="mi">0</span><span class="p">,</span>
    <span class="mf">1656480220.591901</span><span class="p">,</span>
    <span class="mf">0.0005342960357666016</span>
  <span class="p">],</span>
  <span class="p">[</span>
    <span class="p">[</span>
      <span class="p">[</span>
        <span class="mi">5</span>
      <span class="p">],</span>
      <span class="p">[</span>
        <span class="p">[</span>
          <span class="s2">&quot;_id&quot;</span><span class="p">,</span>
          <span class="s2">&quot;UInt32&quot;</span>
        <span class="p">],</span>
        <span class="p">[</span>
          <span class="s2">&quot;_key&quot;</span><span class="p">,</span>
          <span class="s2">&quot;ShortText&quot;</span>
        <span class="p">],</span>
        <span class="p">[</span>
          <span class="s2">&quot;date&quot;</span><span class="p">,</span>
          <span class="s2">&quot;Time&quot;</span>
        <span class="p">],</span>
        <span class="p">[</span>
          <span class="s2">&quot;tags&quot;</span><span class="p">,</span>
          <span class="s2">&quot;Tags&quot;</span>
        <span class="p">]</span>
      <span class="p">],</span>
      <span class="p">[</span>
        <span class="mi">1</span><span class="p">,</span>
        <span class="s2">&quot;Groonga is fast!&quot;</span><span class="p">,</span>
        <span class="mf">1416063600.0</span><span class="p">,</span>
        <span class="p">{</span><span class="s2">&quot;full-text-search&quot;</span><span class="p">:</span><span class="mi">100</span><span class="p">}</span>
      <span class="p">],</span>
      <span class="p">[</span>
        <span class="mi">2</span><span class="p">,</span>
        <span class="s2">&quot;Mroonga is fast!&quot;</span><span class="p">,</span>
        <span class="mf">1416063600.0</span><span class="p">,</span>
        <span class="p">{</span><span class="s2">&quot;mysql&quot;</span><span class="p">:</span><span class="mi">100</span><span class="p">,</span><span class="s2">&quot;full-text-search&quot;</span><span class="p">:</span><span class="mi">80</span><span class="p">}</span>
      <span class="p">],</span>
      <span class="p">[</span>
        <span class="mi">3</span><span class="p">,</span>
        <span class="s2">&quot;Groonga sticker!&quot;</span><span class="p">,</span>
        <span class="mf">1416063600.0</span><span class="p">,</span>
        <span class="p">{</span><span class="s2">&quot;full-text-search&quot;</span><span class="p">:</span><span class="mi">100</span><span class="p">,</span><span class="s2">&quot;sticker&quot;</span><span class="p">:</span><span class="mi">10</span><span class="p">}</span>
      <span class="p">],</span>
      <span class="p">[</span>
        <span class="mi">4</span><span class="p">,</span>
        <span class="s2">&quot;Rroonga is fast!&quot;</span><span class="p">,</span>
        <span class="mf">1416150000.0</span><span class="p">,</span>
        <span class="p">{</span><span class="s2">&quot;full-text-search&quot;</span><span class="p">:</span><span class="mi">100</span><span class="p">,</span><span class="s2">&quot;ruby&quot;</span><span class="p">:</span><span class="mi">20</span><span class="p">}</span>
      <span class="p">],</span>
      <span class="p">[</span>
        <span class="mi">5</span><span class="p">,</span>
        <span class="s2">&quot;Groonga is good!&quot;</span><span class="p">,</span>
        <span class="mf">1416150000.0</span><span class="p">,</span>
        <span class="p">{</span><span class="s2">&quot;full-text-search&quot;</span><span class="p">:</span><span class="mi">100</span><span class="p">}</span>
      <span class="p">]</span>
    <span class="p">],</span>
    <span class="p">{</span>
      <span class="s2">&quot;tags&quot;</span><span class="p">:</span> <span class="p">[</span>
        <span class="p">[</span>
          <span class="mi">8</span>
        <span class="p">],</span>
        <span class="p">[</span>
          <span class="p">[</span>
            <span class="s2">&quot;_key&quot;</span><span class="p">,</span>
            <span class="s2">&quot;ShortText&quot;</span>
          <span class="p">],</span>
          <span class="p">[</span>
            <span class="s2">&quot;_nsubrecs&quot;</span><span class="p">,</span>
            <span class="s2">&quot;Int32&quot;</span>
          <span class="p">]</span>
        <span class="p">],</span>
        <span class="p">[</span>
          <span class="s2">&quot;full-text-search&quot;</span><span class="p">,</span>
          <span class="mi">5</span>
        <span class="p">],</span>
        <span class="p">[</span>
          <span class="s2">&quot;f&quot;</span><span class="p">,</span>
          <span class="mi">5</span>
        <span class="p">],</span>
        <span class="p">[</span>
          <span class="s2">&quot;mysql&quot;</span><span class="p">,</span>
          <span class="mi">1</span>
        <span class="p">],</span>
        <span class="p">[</span>
          <span class="s2">&quot;f&quot;</span><span class="p">,</span>
          <span class="mi">1</span>
        <span class="p">],</span>
        <span class="p">[</span>
          <span class="s2">&quot;sticker&quot;</span><span class="p">,</span>
          <span class="mi">1</span>
        <span class="p">],</span>
        <span class="p">[</span>
          <span class="s2">&quot;f&quot;</span><span class="p">,</span>
          <span class="mi">1</span>
        <span class="p">],</span>
        <span class="p">[</span>
          <span class="s2">&quot;ruby&quot;</span><span class="p">,</span>
          <span class="mi">1</span>
        <span class="p">],</span>
        <span class="p">[</span>
          <span class="s2">&quot;f&quot;</span><span class="p">,</span>
          <span class="mi">1</span>
        <span class="p">]</span>
      <span class="p">]</span>
    <span class="p">}</span>
  <span class="p">]</span>
</pre></div>
</div>
<p>The above query returns correct results as below since this release.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">select</span> <span class="n">Memos</span>   <span class="o">--</span><span class="n">drilldowns</span><span class="p">[</span><span class="n">tags</span><span class="p">]</span><span class="o">.</span><span class="n">keys</span> <span class="n">tags</span>   <span class="o">--</span><span class="n">drilldowns</span><span class="p">[</span><span class="n">tags</span><span class="p">]</span><span class="o">.</span><span class="n">output_columns</span> <span class="n">_key</span><span class="p">,</span><span class="n">_nsubrecs</span>
<span class="p">[</span>
  <span class="p">[</span>
    <span class="mi">0</span><span class="p">,</span>
    <span class="mf">0.0</span><span class="p">,</span>
    <span class="mf">0.0</span>
  <span class="p">],</span>
  <span class="p">[</span>
    <span class="p">[</span>
      <span class="p">[</span>
        <span class="mi">5</span>
      <span class="p">],</span>
      <span class="p">[</span>
        <span class="p">[</span>
          <span class="s2">&quot;_id&quot;</span><span class="p">,</span>
          <span class="s2">&quot;UInt32&quot;</span>
        <span class="p">],</span>
        <span class="p">[</span>
          <span class="s2">&quot;_key&quot;</span><span class="p">,</span>
          <span class="s2">&quot;ShortText&quot;</span>
        <span class="p">],</span>
        <span class="p">[</span>
          <span class="s2">&quot;date&quot;</span><span class="p">,</span>
          <span class="s2">&quot;Time&quot;</span>
        <span class="p">],</span>
        <span class="p">[</span>
          <span class="s2">&quot;tags&quot;</span><span class="p">,</span>
          <span class="s2">&quot;Tags&quot;</span>
        <span class="p">]</span>
      <span class="p">],</span>
      <span class="p">[</span>
        <span class="mi">1</span><span class="p">,</span>
        <span class="s2">&quot;Groonga is fast!&quot;</span><span class="p">,</span>
        <span class="mf">1416063600.0</span><span class="p">,</span>
        <span class="p">{</span>
          <span class="s2">&quot;full-text-search&quot;</span><span class="p">:</span> <span class="mi">100</span>
        <span class="p">}</span>
      <span class="p">],</span>
      <span class="p">[</span>
        <span class="mi">2</span><span class="p">,</span>
        <span class="s2">&quot;Mroonga is fast!&quot;</span><span class="p">,</span>
        <span class="mf">1416063600.0</span><span class="p">,</span>
        <span class="p">{</span>
          <span class="s2">&quot;mysql&quot;</span><span class="p">:</span> <span class="mi">100</span><span class="p">,</span>
          <span class="s2">&quot;full-text-search&quot;</span><span class="p">:</span> <span class="mi">80</span>
        <span class="p">}</span>
      <span class="p">],</span>
      <span class="p">[</span>
        <span class="mi">3</span><span class="p">,</span>
        <span class="s2">&quot;Groonga sticker!&quot;</span><span class="p">,</span>
        <span class="mf">1416063600.0</span><span class="p">,</span>
        <span class="p">{</span>
          <span class="s2">&quot;full-text-search&quot;</span><span class="p">:</span> <span class="mi">100</span><span class="p">,</span>
          <span class="s2">&quot;sticker&quot;</span><span class="p">:</span> <span class="mi">10</span>
        <span class="p">}</span>
      <span class="p">],</span>
      <span class="p">[</span>
        <span class="mi">4</span><span class="p">,</span>
        <span class="s2">&quot;Rroonga is fast!&quot;</span><span class="p">,</span>
        <span class="mf">1416150000.0</span><span class="p">,</span>
        <span class="p">{</span>
          <span class="s2">&quot;full-text-search&quot;</span><span class="p">:</span> <span class="mi">100</span><span class="p">,</span>
          <span class="s2">&quot;ruby&quot;</span><span class="p">:</span> <span class="mi">20</span>
        <span class="p">}</span>
      <span class="p">],</span>
      <span class="p">[</span>
        <span class="mi">5</span><span class="p">,</span>
        <span class="s2">&quot;Groonga is good!&quot;</span><span class="p">,</span>
        <span class="mf">1416150000.0</span><span class="p">,</span>
        <span class="p">{</span>
          <span class="s2">&quot;full-text-search&quot;</span><span class="p">:</span> <span class="mi">100</span>
        <span class="p">}</span>
      <span class="p">]</span>
    <span class="p">],</span>
    <span class="p">{</span>
      <span class="s2">&quot;tags&quot;</span><span class="p">:</span> <span class="p">[</span>
        <span class="p">[</span>
          <span class="mi">4</span>
        <span class="p">],</span>
        <span class="p">[</span>
          <span class="p">[</span>
            <span class="s2">&quot;_key&quot;</span><span class="p">,</span>
            <span class="s2">&quot;ShortText&quot;</span>
          <span class="p">],</span>
          <span class="p">[</span>
            <span class="s2">&quot;_nsubrecs&quot;</span><span class="p">,</span>
            <span class="s2">&quot;Int32&quot;</span>
          <span class="p">]</span>
        <span class="p">],</span>
        <span class="p">[</span>
          <span class="s2">&quot;full-text-search&quot;</span><span class="p">,</span>
          <span class="mi">5</span>
        <span class="p">],</span>
        <span class="p">[</span>
          <span class="s2">&quot;mysql&quot;</span><span class="p">,</span>
          <span class="mi">1</span>
        <span class="p">],</span>
        <span class="p">[</span>
          <span class="s2">&quot;sticker&quot;</span><span class="p">,</span>
          <span class="mi">1</span>
        <span class="p">],</span>
        <span class="p">[</span>
          <span class="s2">&quot;ruby&quot;</span><span class="p">,</span>
          <span class="mi">1</span>
        <span class="p">]</span>
      <span class="p">]</span>
    <span class="p">}</span>
  <span class="p">]</span>
<span class="p">]</span>
</pre></div>
</div>
</li>
<li><p>[<a class="reference internal" href="../reference/commands/select.html"><span class="doc">select</span></a>] Added support for doing drilldown with a reference vector with weight even if we use <code class="docutils literal notranslate"><span class="pre">query</span></code> or <code class="docutils literal notranslate"><span class="pre">filter</span></code>, or <code class="docutils literal notranslate"><span class="pre">post_filter</span></code>. [GitHub#1367][Patched by naoa]</p>
<p>If we specified a reference vector column with weight in drilldown’s key when we use <code class="docutils literal notranslate"><span class="pre">query</span></code> or <code class="docutils literal notranslate"><span class="pre">filter</span></code>, or <code class="docutils literal notranslate"><span class="pre">post_filter</span></code>, Groonga had returned incorrect results or errors until now.</p>
<p>For example, the following query had been erred until now.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">table_create</span> <span class="n">Tags</span> <span class="n">TABLE_PAT_KEY</span> <span class="n">ShortText</span>

<span class="n">table_create</span> <span class="n">Memos</span> <span class="n">TABLE_HASH_KEY</span> <span class="n">ShortText</span>
<span class="n">column_create</span> <span class="n">Memos</span> <span class="n">tags</span> <span class="n">COLUMN_VECTOR</span><span class="o">|</span><span class="n">WITH_WEIGHT</span> <span class="n">Tags</span>
<span class="n">column_create</span> <span class="n">Memos</span> <span class="n">date</span> <span class="n">COLUMN_SCALAR</span> <span class="n">Time</span>

<span class="n">load</span> <span class="o">--</span><span class="n">table</span> <span class="n">Memos</span>
<span class="p">[</span>
<span class="p">{</span><span class="s2">&quot;_key&quot;</span><span class="p">:</span> <span class="s2">&quot;Groonga is fast!&quot;</span><span class="p">,</span> <span class="s2">&quot;tags&quot;</span><span class="p">:</span> <span class="p">{</span><span class="s2">&quot;full-text-search&quot;</span><span class="p">:</span> <span class="mi">100</span><span class="p">},</span> <span class="s2">&quot;date&quot;</span><span class="p">:</span> <span class="s2">&quot;2014-11-16 00:00:00&quot;</span><span class="p">},</span>
<span class="p">{</span><span class="s2">&quot;_key&quot;</span><span class="p">:</span> <span class="s2">&quot;Mroonga is fast!&quot;</span><span class="p">,</span> <span class="s2">&quot;tags&quot;</span><span class="p">:</span> <span class="p">{</span><span class="s2">&quot;mysql&quot;</span><span class="p">:</span> <span class="mi">100</span><span class="p">,</span> <span class="s2">&quot;full-text-search&quot;</span><span class="p">:</span> <span class="mi">80</span><span class="p">},</span> <span class="s2">&quot;date&quot;</span><span class="p">:</span> <span class="s2">&quot;2014-11-16 00:00:00&quot;</span><span class="p">},</span>
<span class="p">{</span><span class="s2">&quot;_key&quot;</span><span class="p">:</span> <span class="s2">&quot;Groonga sticker!&quot;</span><span class="p">,</span> <span class="s2">&quot;tags&quot;</span><span class="p">:</span> <span class="p">{</span><span class="s2">&quot;full-text-search&quot;</span><span class="p">:</span> <span class="mi">100</span><span class="p">,</span> <span class="s2">&quot;sticker&quot;</span><span class="p">:</span> <span class="mi">10</span><span class="p">},</span> <span class="s2">&quot;date&quot;</span><span class="p">:</span> <span class="s2">&quot;2014-11-16 00:00:00&quot;</span><span class="p">},</span>
<span class="p">{</span><span class="s2">&quot;_key&quot;</span><span class="p">:</span> <span class="s2">&quot;Rroonga is fast!&quot;</span><span class="p">,</span> <span class="s2">&quot;tags&quot;</span><span class="p">:</span> <span class="p">{</span><span class="s2">&quot;full-text-search&quot;</span><span class="p">:</span> <span class="mi">100</span><span class="p">,</span> <span class="s2">&quot;ruby&quot;</span><span class="p">:</span> <span class="mi">20</span><span class="p">},</span> <span class="s2">&quot;date&quot;</span><span class="p">:</span> <span class="s2">&quot;2014-11-17 00:00:00&quot;</span><span class="p">},</span>
<span class="p">{</span><span class="s2">&quot;_key&quot;</span><span class="p">:</span> <span class="s2">&quot;Groonga is good!&quot;</span><span class="p">,</span> <span class="s2">&quot;tags&quot;</span><span class="p">:</span> <span class="p">{</span><span class="s2">&quot;full-text-search&quot;</span><span class="p">:</span> <span class="mi">100</span><span class="p">},</span> <span class="s2">&quot;date&quot;</span><span class="p">:</span> <span class="s2">&quot;2014-11-17 00:00:00&quot;</span><span class="p">}</span>
<span class="p">]</span>

<span class="n">select</span> <span class="n">Memos</span> \
  <span class="o">--</span><span class="nb">filter</span> <span class="n">true</span> \
  <span class="o">--</span><span class="n">post_filter</span> <span class="n">true</span> \
  <span class="o">--</span><span class="n">drilldowns</span><span class="p">[</span><span class="n">tags</span><span class="p">]</span><span class="o">.</span><span class="n">keys</span> <span class="n">tags</span> \
  <span class="o">--</span><span class="n">drilldowns</span><span class="p">[</span><span class="n">tags</span><span class="p">]</span><span class="o">.</span><span class="n">output_columns</span> <span class="n">_key</span><span class="p">,</span><span class="n">_nsubrecs</span>
<span class="p">[</span>
  <span class="p">[</span>
    <span class="o">-</span><span class="mi">22</span><span class="p">,</span>
    <span class="mf">1656473820.734894</span><span class="p">,</span>
    <span class="mf">0.03771400451660156</span><span class="p">,</span>
    <span class="s2">&quot;[hash][add][           ] key size unmatch&quot;</span><span class="p">,</span>
    <span class="p">[</span>
      <span class="p">[</span>
        <span class="s2">&quot;grn_hash_add&quot;</span><span class="p">,</span>
        <span class="s2">&quot;hash.c&quot;</span><span class="p">,</span>
        <span class="mi">3405</span>
      <span class="p">]</span>
    <span class="p">]</span>
  <span class="p">],</span>
  <span class="p">[</span>
    <span class="p">[</span>
    <span class="p">]</span>
  <span class="p">]</span>
<span class="p">]</span>
</pre></div>
</div>
<p>The above query returns correct results as below since this release.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">select</span> <span class="n">Memos</span> \
  <span class="o">--</span><span class="nb">filter</span> <span class="n">true</span> \
  <span class="o">--</span><span class="n">post_filter</span> <span class="n">true</span> \
  <span class="o">--</span><span class="n">drilldowns</span><span class="p">[</span><span class="n">tags</span><span class="p">]</span><span class="o">.</span><span class="n">keys</span> <span class="n">tags</span> \
  <span class="o">--</span><span class="n">drilldowns</span><span class="p">[</span><span class="n">tags</span><span class="p">]</span><span class="o">.</span><span class="n">output_columns</span> <span class="n">_key</span><span class="p">,</span><span class="n">_nsubrecs</span>
<span class="p">[</span>
  <span class="p">[</span>
    <span class="mi">0</span><span class="p">,</span>
    <span class="mf">0.0</span><span class="p">,</span>
    <span class="mf">0.0</span>
  <span class="p">],</span>
  <span class="p">[</span>
    <span class="p">[</span>
      <span class="p">[</span>
        <span class="mi">5</span>
      <span class="p">],</span>
      <span class="p">[</span>
        <span class="p">[</span>
          <span class="s2">&quot;_id&quot;</span><span class="p">,</span>
          <span class="s2">&quot;UInt32&quot;</span>
        <span class="p">],</span>
        <span class="p">[</span>
          <span class="s2">&quot;_key&quot;</span><span class="p">,</span>
          <span class="s2">&quot;ShortText&quot;</span>
        <span class="p">],</span>
        <span class="p">[</span>
          <span class="s2">&quot;date&quot;</span><span class="p">,</span>
          <span class="s2">&quot;Time&quot;</span>
        <span class="p">],</span>
        <span class="p">[</span>
          <span class="s2">&quot;tags&quot;</span><span class="p">,</span>
          <span class="s2">&quot;Tags&quot;</span>
        <span class="p">]</span>
      <span class="p">],</span>
      <span class="p">[</span>
        <span class="mi">1</span><span class="p">,</span>
        <span class="s2">&quot;Groonga is fast!&quot;</span><span class="p">,</span>
        <span class="mf">1416063600.0</span><span class="p">,</span>
        <span class="p">{</span>
          <span class="s2">&quot;full-text-search&quot;</span><span class="p">:</span> <span class="mi">100</span>
        <span class="p">}</span>
      <span class="p">],</span>
      <span class="p">[</span>
        <span class="mi">2</span><span class="p">,</span>
        <span class="s2">&quot;Mroonga is fast!&quot;</span><span class="p">,</span>
        <span class="mf">1416063600.0</span><span class="p">,</span>
        <span class="p">{</span>
          <span class="s2">&quot;mysql&quot;</span><span class="p">:</span> <span class="mi">100</span><span class="p">,</span>
          <span class="s2">&quot;full-text-search&quot;</span><span class="p">:</span> <span class="mi">80</span>
        <span class="p">}</span>
      <span class="p">],</span>
      <span class="p">[</span>
        <span class="mi">3</span><span class="p">,</span>
        <span class="s2">&quot;Groonga sticker!&quot;</span><span class="p">,</span>
        <span class="mf">1416063600.0</span><span class="p">,</span>
        <span class="p">{</span>
          <span class="s2">&quot;full-text-search&quot;</span><span class="p">:</span> <span class="mi">100</span><span class="p">,</span>
          <span class="s2">&quot;sticker&quot;</span><span class="p">:</span> <span class="mi">10</span>
        <span class="p">}</span>
      <span class="p">],</span>
      <span class="p">[</span>
        <span class="mi">4</span><span class="p">,</span>
        <span class="s2">&quot;Rroonga is fast!&quot;</span><span class="p">,</span>
        <span class="mf">1416150000.0</span><span class="p">,</span>
        <span class="p">{</span>
          <span class="s2">&quot;full-text-search&quot;</span><span class="p">:</span> <span class="mi">100</span><span class="p">,</span>
          <span class="s2">&quot;ruby&quot;</span><span class="p">:</span> <span class="mi">20</span>
        <span class="p">}</span>
      <span class="p">],</span>
      <span class="p">[</span>
        <span class="mi">5</span><span class="p">,</span>
        <span class="s2">&quot;Groonga is good!&quot;</span><span class="p">,</span>
        <span class="mf">1416150000.0</span><span class="p">,</span>
        <span class="p">{</span>
          <span class="s2">&quot;full-text-search&quot;</span><span class="p">:</span> <span class="mi">100</span>
        <span class="p">}</span>
      <span class="p">]</span>
    <span class="p">],</span>
    <span class="p">{</span>
      <span class="s2">&quot;tags&quot;</span><span class="p">:</span> <span class="p">[</span>
        <span class="p">[</span>
          <span class="mi">4</span>
        <span class="p">],</span>
        <span class="p">[</span>
          <span class="p">[</span>
            <span class="s2">&quot;_key&quot;</span><span class="p">,</span>
            <span class="s2">&quot;ShortText&quot;</span>
          <span class="p">],</span>
          <span class="p">[</span>
            <span class="s2">&quot;_nsubrecs&quot;</span><span class="p">,</span>
            <span class="s2">&quot;Int32&quot;</span>
          <span class="p">]</span>
        <span class="p">],</span>
        <span class="p">[</span>
          <span class="s2">&quot;full-text-search&quot;</span><span class="p">,</span>
          <span class="mi">5</span>
        <span class="p">],</span>
        <span class="p">[</span>
          <span class="s2">&quot;mysql&quot;</span><span class="p">,</span>
          <span class="mi">1</span>
        <span class="p">],</span>
        <span class="p">[</span>
          <span class="s2">&quot;sticker&quot;</span><span class="p">,</span>
          <span class="mi">1</span>
        <span class="p">],</span>
        <span class="p">[</span>
          <span class="s2">&quot;ruby&quot;</span><span class="p">,</span>
          <span class="mi">1</span>
        <span class="p">]</span>
      <span class="p">]</span>
    <span class="p">}</span>
  <span class="p">]</span>
<span class="p">]</span>
</pre></div>
</div>
</li>
</ul>
</section>
<section id="known-issues">
<h3>Known Issues<a class="headerlink" href="#known-issues" title="Permalink to this heading">#</a></h3>
<ul>
<li><p>Currently, Groonga has a bug that there is possible that data is corrupt when we execute many additions, delete, and update data to vector column.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">*&lt;</span></code> and <code class="docutils literal notranslate"><span class="pre">*&gt;</span></code> only valid when we use <code class="docutils literal notranslate"><span class="pre">query()</span></code> the right side of filter condition.
If we specify as below, <code class="docutils literal notranslate"><span class="pre">*&lt;</span></code> and <code class="docutils literal notranslate"><span class="pre">*&gt;</span></code> work as <code class="docutils literal notranslate"><span class="pre">&amp;&amp;</span></code>.</p>
<blockquote>
<div><ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">'content</span> <span class="pre">&#64;</span> <span class="pre">&quot;Groonga&quot;</span> <span class="pre">*&lt;</span> <span class="pre">content</span> <span class="pre">&#64;</span> <span class="pre">&quot;Mroonga&quot;'</span></code></p></li>
</ul>
</div></blockquote>
</li>
<li><p>Groonga may not return records that should match caused by <code class="docutils literal notranslate"><span class="pre">GRN_II_CURSOR_SET_MIN_ENABLE</span></code>.</p></li>
</ul>
</section>
<section id="id13">
<h3>Thanks<a class="headerlink" href="#id13" title="Permalink to this heading">#</a></h3>
<ul class="simple">
<li><p>naoa</p></li>
</ul>
</section>
</section>
<section id="release-12-0-4-2022-06-06">
<span id="release-12-0-4"></span><h2>Release 12.0.4 - 2022-06-06<a class="headerlink" href="#release-12-0-4-2022-06-06" title="Permalink to this heading">#</a></h2>
<section id="id14">
<h3>Improvements<a class="headerlink" href="#id14" title="Permalink to this heading">#</a></h3>
<ul>
<li><p>[<a class="reference internal" href="../install/ubuntu.html"><span class="doc">Ubuntu</span></a>] Added support for Ubuntu 22.04 (Jammy Jellyfish).</p></li>
<li><p>We don’t provide <cite>groonga-benchmark</cite>.</p>
<p>Because nobody will not use it and we can’t maintain it.</p>
</li>
<li><p>[<a class="reference internal" href="../reference/commands/status.html"><span class="doc">status</span></a>] Added a new item <code class="docutils literal notranslate"><span class="pre">memory_map_size</span></code>.</p>
<p>We can get the total memory map size in bytes of Groonga with <code class="docutils literal notranslate"><span class="pre">status</span></code> command.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">status</span>
<span class="p">[</span>
  <span class="p">[</span>
    <span class="mi">0</span><span class="p">,</span>
    <span class="mf">1654237168.304533</span><span class="p">,</span>
    <span class="mf">0.0001480579376220703</span>
  <span class="p">],</span>
  <span class="p">{</span>
    <span class="p">(</span><span class="n">omitted</span><span class="p">)</span>
    <span class="s2">&quot;memory_map_size&quot;</span><span class="p">:</span> <span class="mi">70098944</span>
  <span class="p">}</span>
<span class="p">]</span>
</pre></div>
</div>
<p>For example, in Windows, if Groonga uses up physical memory and swap area, Groonga can’t more mapping memory than that.
Therefore, we can control properly memory map size by monitoring this value even if the environment does have not enough memory.</p>
</li>
</ul>
</section>
<section id="id15">
<h3>Fixes<a class="headerlink" href="#id15" title="Permalink to this heading">#</a></h3>
<ul>
<li><p>Fixed a bug Groonga’s response may be slow when we execute <code class="docutils literal notranslate"><span class="pre">request_cancel</span></code> while executing a search.</p>
<p>Especially, when the number of records of the search target is many, Groonga’s response may be very slow.</p>
</li>
<li><p>Fixed a bug that string list can’t be casted to int32 vector.</p>
<p>For example, the following cast had failed.</p>
<ul class="simple">
<li><p>[“10”, “100”] -&gt; [10, 100]</p></li>
</ul>
<p>This bug only occurs when we specify <code class="docutils literal notranslate"><span class="pre">apache-arrow</span></code> into <code class="docutils literal notranslate"><span class="pre">input_type</span></code> as the argument of <code class="docutils literal notranslate"><span class="pre">load</span></code>.
This bug occurs in Groonga 12.0.2 or later.</p>
</li>
<li><p>Fixed a bug that Groonga Munin Plugins do not work on AlmaLinux 8 and CentOS 7.</p></li>
</ul>
</section>
</section>
<section id="release-12-0-3-2022-04-29">
<span id="release-12-0-3"></span><h2>Release 12.0.3 - 2022-04-29<a class="headerlink" href="#release-12-0-3-2022-04-29" title="Permalink to this heading">#</a></h2>
<section id="id16">
<h3>Improvements<a class="headerlink" href="#id16" title="Permalink to this heading">#</a></h3>
<ul>
<li><p>[<a class="reference internal" href="../reference/commands/logical_count.html"><span class="doc">logical_count</span></a>] Improved memory usage while <code class="docutils literal notranslate"><span class="pre">logical_count</span></code> executed.</p>
<p>Up to now, Groonga had been keeping objects(objects are tables and columns and indexes, and so on) and temporary tables that were allocated while <code class="docutils literal notranslate"><span class="pre">logical_count</span></code> executed until the execution of <code class="docutils literal notranslate"><span class="pre">logical_count</span></code> finished.</p>
<p>Groonga reduces reference immediately after processing a shard by this feature.
Therefore, Groonga can release memory while <code class="docutils literal notranslate"><span class="pre">logical_count</span></code> executed.
The usage of memory of Groonga may reduce because of these reasons.</p>
<p>This improvement is only valid for the reference count mode.
We can valid the reference count mode by setting <code class="docutils literal notranslate"><span class="pre">GRN_ENABLE_REFERENCE_COUNT=yes</span></code>.</p>
<p>In addition, Groonga releases temporary tables dynamically while <code class="docutils literal notranslate"><span class="pre">logical_count</span></code> is executed by this feature.
Therefore, the usage of memory of Groonga reduces.
This improvement is valid even if we don’t set the reference count mode.</p>
</li>
<li><p>[<a class="reference internal" href="../reference/commands/dump.html"><span class="doc">dump</span></a>] Added support for <code class="docutils literal notranslate"><span class="pre">MISSING_IGNORE/MISSING_NIL</span></code>.</p>
<p>If columns had <code class="docutils literal notranslate"><span class="pre">MISSING_IGNORE/MISSING_NIL</span></code>, the dump of these columns had failed until now.
<code class="docutils literal notranslate"><span class="pre">dump</span></code> command supports these columns since this release.</p>
</li>
<li><p>[<a class="reference internal" href="../reference/functions/snippet.html"><span class="doc">snippet</span></a>],[<a class="reference internal" href="../reference/functions/snippet_html.html"><span class="doc">snippet_html</span></a>] Added support for text vector as input. [groonga-dev,04956][Reported by shinonon]</p>
<p>For example, we can extract snippets of target text around search keywords against vector in JSON data as below.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">table_create</span> <span class="n">Entries</span> <span class="n">TABLE_NO_KEY</span>
<span class="n">column_create</span> <span class="n">Entries</span> <span class="n">title</span> <span class="n">COLUMN_SCALAR</span> <span class="n">ShortText</span>
<span class="n">column_create</span> <span class="n">Entries</span> <span class="n">contents</span> <span class="n">COLUMN_VECTOR</span> <span class="n">ShortText</span>

<span class="n">table_create</span> <span class="n">Tokens</span> <span class="n">TABLE_PAT_KEY</span> <span class="n">ShortText</span>   <span class="o">--</span><span class="n">default_tokenizer</span> <span class="n">TokenNgram</span>   <span class="o">--</span><span class="n">normalizer</span> <span class="n">NormalizerNFKC130</span>
<span class="n">column_create</span> <span class="n">Tokens</span> <span class="n">entries_title</span> <span class="n">COLUMN_INDEX</span><span class="o">|</span><span class="n">WITH_POSITION</span> <span class="n">Entries</span> <span class="n">title</span>
<span class="n">column_create</span> <span class="n">Tokens</span> <span class="n">entries_contents</span> <span class="n">COLUMN_INDEX</span><span class="o">|</span><span class="n">WITH_SECTION</span><span class="o">|</span><span class="n">WITH_POSITION</span>   <span class="n">Entries</span> <span class="n">contents</span>

<span class="n">load</span> <span class="o">--</span><span class="n">table</span> <span class="n">Entries</span>
<span class="p">[</span>
<span class="p">{</span>
  <span class="s2">&quot;title&quot;</span><span class="p">:</span> <span class="s2">&quot;Groonga and MySQL&quot;</span><span class="p">,</span>
  <span class="s2">&quot;contents&quot;</span><span class="p">:</span> <span class="p">[</span>
    <span class="s2">&quot;Groonga is a full text search engine&quot;</span><span class="p">,</span>
    <span class="s2">&quot;MySQL is a RDBMS&quot;</span><span class="p">,</span>
    <span class="s2">&quot;Mroonga is a MySQL storage engine based on Groonga&quot;</span>
  <span class="p">]</span>
<span class="p">}</span>
<span class="p">]</span>

<span class="n">select</span> <span class="n">Entries</span>\
  <span class="o">--</span><span class="n">output_columns</span> <span class="s1">&#39;snippet_html(contents), contents&#39;</span>\
  <span class="o">--</span><span class="n">match_columns</span> <span class="s1">&#39;title&#39;</span>\
  <span class="o">--</span><span class="n">query</span> <span class="n">Groonga</span>
<span class="p">[</span>
  <span class="p">[</span>
    <span class="mi">0</span><span class="p">,</span>
    <span class="mf">0.0</span><span class="p">,</span>
    <span class="mf">0.0</span>
  <span class="p">],</span>
  <span class="p">[</span>
    <span class="p">[</span>
      <span class="p">[</span>
        <span class="mi">1</span>
      <span class="p">],</span>
      <span class="p">[</span>
        <span class="p">[</span>
          <span class="s2">&quot;snippet_html&quot;</span><span class="p">,</span>
          <span class="n">null</span>
        <span class="p">],</span>
        <span class="p">[</span>
          <span class="s2">&quot;contents&quot;</span><span class="p">,</span>
          <span class="s2">&quot;ShortText&quot;</span>
        <span class="p">]</span>
      <span class="p">],</span>
      <span class="p">[</span>
        <span class="p">[</span>
          <span class="s2">&quot;&lt;span class=</span><span class="se">\&quot;</span><span class="s2">keyword</span><span class="se">\&quot;</span><span class="s2">&gt;Groonga&lt;/span&gt; is a full text search engine&quot;</span><span class="p">,</span>
          <span class="s2">&quot;Mroonga is a MySQL storage engine based on &lt;span class=</span><span class="se">\&quot;</span><span class="s2">keyword</span><span class="se">\&quot;</span><span class="s2">&gt;Groonga&lt;/span&gt;&quot;</span>
        <span class="p">],</span>
        <span class="p">[</span>
          <span class="s2">&quot;Groonga is a full text search engine&quot;</span><span class="p">,</span>
          <span class="s2">&quot;MySQL is a RDBMS&quot;</span><span class="p">,</span>
          <span class="s2">&quot;Mroonga is a MySQL storage engine based on Groonga&quot;</span>
        <span class="p">]</span>
      <span class="p">]</span>
    <span class="p">]</span>
  <span class="p">]</span>
<span class="p">]</span>
</pre></div>
</div>
<p>Until now, if we specified <code class="docutils literal notranslate"><span class="pre">snippet*</span></code> like <code class="docutils literal notranslate"><span class="pre">--output_columns</span> <span class="pre">'snippet_html(contents[1])</span></code>,
we could extract snippets of target text around search keywords against the vector as below.
However, we didn’t know which we should output elements. Because we didn’t know which element was hit on search.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">select</span> <span class="n">Entries</span>\
  <span class="o">--</span><span class="n">output_columns</span> <span class="s1">&#39;snippet_html(contents[0]), contents&#39;</span>\
  <span class="o">--</span><span class="n">match_columns</span> <span class="s1">&#39;title&#39;</span>\
  <span class="o">--</span><span class="n">query</span> <span class="n">Groonga</span>
<span class="p">[</span>
  <span class="p">[</span>
    <span class="mi">0</span><span class="p">,</span>
    <span class="mf">0.0</span><span class="p">,</span>
    <span class="mf">0.0</span>
  <span class="p">],</span>
  <span class="p">[</span>
    <span class="p">[</span>
      <span class="p">[</span>
        <span class="mi">1</span>
      <span class="p">],</span>
      <span class="p">[</span>
        <span class="p">[</span>
          <span class="s2">&quot;snippet_html&quot;</span><span class="p">,</span>
          <span class="n">null</span>
        <span class="p">],</span>
        <span class="p">[</span>
          <span class="s2">&quot;contents&quot;</span><span class="p">,</span>
          <span class="s2">&quot;ShortText&quot;</span>
        <span class="p">]</span>
      <span class="p">],</span>
      <span class="p">[</span>
        <span class="p">[</span>
          <span class="s2">&quot;&lt;span class=</span><span class="se">\&quot;</span><span class="s2">keyword</span><span class="se">\&quot;</span><span class="s2">&gt;Groonga&lt;/span&gt; is a full text search engine&quot;</span>
        <span class="p">],</span>
        <span class="p">[</span>
          <span class="s2">&quot;Groonga is a full text search engine&quot;</span><span class="p">,</span>
          <span class="s2">&quot;MySQL is a RDBMS&quot;</span><span class="p">,</span>
          <span class="s2">&quot;Mroonga is a MySQL storage engine based on Groonga&quot;</span>
        <span class="p">]</span>
      <span class="p">]</span>
    <span class="p">]</span>
  <span class="p">]</span>
<span class="p">]</span>
</pre></div>
</div>
</li>
<li><p>[<code class="docutils literal notranslate"><span class="pre">vector_join</span></code>] Added a new function <code class="docutils literal notranslate"><span class="pre">vector_join()</span></code>.[groonga-dev,04956][Reported by shinonon]</p>
<p>This function can concatenate each elements.
We can specify delimiter in the second argument in this function.</p>
<p>For example, we could execute <code class="docutils literal notranslate"><span class="pre">snippet()</span></code> and <code class="docutils literal notranslate"><span class="pre">snippet_html()</span></code> against vector that concatenate each elements as below.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">plugin_register</span> <span class="n">functions</span><span class="o">/</span><span class="n">vector</span>

<span class="n">table_create</span> <span class="n">Entries</span> <span class="n">TABLE_NO_KEY</span>
<span class="n">column_create</span> <span class="n">Entries</span> <span class="n">title</span> <span class="n">COLUMN_SCALAR</span> <span class="n">ShortText</span>
<span class="n">column_create</span> <span class="n">Entries</span> <span class="n">contents</span> <span class="n">COLUMN_VECTOR</span> <span class="n">ShortText</span>

<span class="n">table_create</span> <span class="n">Tokens</span> <span class="n">TABLE_PAT_KEY</span> <span class="n">ShortText</span>   <span class="o">--</span><span class="n">default_tokenizer</span> <span class="n">TokenNgram</span>   <span class="o">--</span><span class="n">normalizer</span> <span class="n">NormalizerNFKC130</span>
<span class="n">column_create</span> <span class="n">Tokens</span> <span class="n">entries_title</span> <span class="n">COLUMN_INDEX</span><span class="o">|</span><span class="n">WITH_POSITION</span> <span class="n">Entries</span> <span class="n">title</span>
<span class="n">column_create</span> <span class="n">Tokens</span> <span class="n">entries_contents</span> <span class="n">COLUMN_INDEX</span><span class="o">|</span><span class="n">WITH_SECTION</span><span class="o">|</span><span class="n">WITH_POSITION</span>   <span class="n">Entries</span> <span class="n">contents</span>

<span class="n">load</span> <span class="o">--</span><span class="n">table</span> <span class="n">Entries</span>
<span class="p">[</span>
<span class="p">{</span>
  <span class="s2">&quot;title&quot;</span><span class="p">:</span> <span class="s2">&quot;Groonga and MySQL&quot;</span><span class="p">,</span>
  <span class="s2">&quot;contents&quot;</span><span class="p">:</span> <span class="p">[</span>
    <span class="s2">&quot;Groonga is a full text search engine&quot;</span><span class="p">,</span>
    <span class="s2">&quot;MySQL is a RDBMS&quot;</span><span class="p">,</span>
    <span class="s2">&quot;Mroonga is a MySQL storage engine based on Groonga&quot;</span>
  <span class="p">]</span>
<span class="p">}</span>
<span class="p">]</span>

<span class="n">select</span> <span class="n">Entries</span>\
  <span class="o">--</span><span class="n">output_columns</span> <span class="s1">&#39;snippet_html(vector_join(contents, &quot;</span><span class="se">\n</span><span class="s1">&quot;)), contents&#39;</span>\
  <span class="o">--</span><span class="n">match_columns</span> <span class="s1">&#39;title&#39;</span>\
  <span class="o">--</span><span class="n">query</span> <span class="n">Groonga</span> <span class="o">--</span><span class="n">output_pretty</span> <span class="n">yes</span>
<span class="p">[</span>
  <span class="p">[</span>
    <span class="mi">0</span><span class="p">,</span>
    <span class="mf">1650849001.524027</span><span class="p">,</span>
    <span class="mf">0.0003361701965332031</span>
  <span class="p">],</span>
  <span class="p">[</span>
    <span class="p">[</span>
      <span class="p">[</span>
        <span class="mi">1</span>
      <span class="p">],</span>
      <span class="p">[</span>
        <span class="p">[</span>
          <span class="s2">&quot;snippet_html&quot;</span><span class="p">,</span>
          <span class="n">null</span>
        <span class="p">],</span>
        <span class="p">[</span>
          <span class="s2">&quot;contents&quot;</span><span class="p">,</span>
          <span class="s2">&quot;ShortText&quot;</span>
        <span class="p">]</span>
      <span class="p">],</span>
      <span class="p">[</span>
        <span class="p">[</span>
          <span class="s2">&quot;&lt;span class=</span><span class="se">\&quot;</span><span class="s2">keyword</span><span class="se">\&quot;</span><span class="s2">&gt;Groonga&lt;/span&gt; is a full text search engine</span><span class="se">\n</span><span class="s2">MySQL is a RDBMS</span><span class="se">\n</span><span class="s2">Mroonga is a MySQL storage engine based on &lt;span class=</span><span class="se">\&quot;</span><span class="s2">keyword</span><span class="se">\&quot;</span><span class="s2">&gt;Groonga&lt;/span&gt;&quot;</span>
        <span class="p">],</span>
        <span class="p">[</span>
          <span class="s2">&quot;Groonga is a full text search engine&quot;</span><span class="p">,</span><span class="s2">&quot;MySQL is a RDBMS&quot;</span><span class="p">,</span><span class="s2">&quot;Mroonga is a MySQL storage engine based on Groonga&quot;</span>
        <span class="p">]</span>
      <span class="p">]</span>
    <span class="p">]</span>
  <span class="p">]</span>
<span class="p">]</span>
</pre></div>
</div>
</li>
<li><p>[<a class="reference internal" href="../reference/indexing.html"><span class="doc">Indexing</span></a>] Ignore too large a token like online index construction. [GitHub:pgroonga/pgroonga#209][Reported by Zhanzhao (Deo) Liang]</p>
<p>Groonga doesn’t occur error, but Groonga ignores too large a token when we execute static index construction.
However, Groonga output warning in this case.</p>
</li>
</ul>
</section>
<section id="id17">
<h3>Fixes<a class="headerlink" href="#id17" title="Permalink to this heading">#</a></h3>
<ul>
<li><p>Fixed a bug that we may be not able to add a key to a table of patricia trie.</p>
<p>This bug occurs in the following conditon.</p>
<ul class="simple">
<li><p>If a table of patricia trie already has a key.</p></li>
<li><p>If the additional key is 4096 bytes.</p></li>
</ul>
</li>
</ul>
</section>
<section id="id18">
<h3>Known Issues<a class="headerlink" href="#id18" title="Permalink to this heading">#</a></h3>
<ul>
<li><p>Currently, Groonga has a bug that there is possible that data is corrupt when we execute many additions, delete, and update data to vector column.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">*&lt;</span></code> and <code class="docutils literal notranslate"><span class="pre">*&gt;</span></code> only valid when we use <code class="docutils literal notranslate"><span class="pre">query()</span></code> the right side of filter condition.
If we specify as below, <code class="docutils literal notranslate"><span class="pre">*&lt;</span></code> and <code class="docutils literal notranslate"><span class="pre">*&gt;</span></code> work as <code class="docutils literal notranslate"><span class="pre">&amp;&amp;</span></code>.</p>
<blockquote>
<div><ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">'content</span> <span class="pre">&#64;</span> <span class="pre">&quot;Groonga&quot;</span> <span class="pre">*&lt;</span> <span class="pre">content</span> <span class="pre">&#64;</span> <span class="pre">&quot;Mroonga&quot;'</span></code></p></li>
</ul>
</div></blockquote>
</li>
<li><p>Groonga may not return records that should match caused by <code class="docutils literal notranslate"><span class="pre">GRN_II_CURSOR_SET_MIN_ENABLE</span></code>.</p></li>
</ul>
</section>
<section id="id19">
<h3>Thanks<a class="headerlink" href="#id19" title="Permalink to this heading">#</a></h3>
<ul class="simple">
<li><p>shinonon</p></li>
<li><p>Zhanzhao (Deo) Liang</p></li>
</ul>
</section>
</section>
<section id="release-12-0-2-2022-03-29">
<span id="release-12-0-2"></span><h2>Release 12.0.2 - 2022-03-29<a class="headerlink" href="#release-12-0-2-2022-03-29" title="Permalink to this heading">#</a></h2>
<section id="id20">
<h3>Improvements<a class="headerlink" href="#id20" title="Permalink to this heading">#</a></h3>
<ul>
<li><p>[<a class="reference internal" href="../reference/commands/logical_range_filter.html"><span class="doc">logical_range_filter</span></a>] Added support for reducing reference immediately after processing a shard.</p>
<p>Groonga had reduced reference all shards when the finish of <code class="docutils literal notranslate"><span class="pre">logical_range_filter</span></code> until now.
Groonga reduces reference immediately after processing a shard by this feature.
The usage of memory may reduce while <code class="docutils literal notranslate"><span class="pre">logical_range_filter</span></code> executes by this feature.</p>
<p>This feature is only valid for the reference count mode.
We can valid the reference count mode by setting <code class="docutils literal notranslate"><span class="pre">GRN_ENABLE_REFERENCE_COUNT=yes</span></code>.</p>
<p>Normally, Groonga keep objects(tables and column and index, and so on) that Groonga opened even once on memory.
However, if we open many objects, Groonga uses much memory.
In the reference count mode release objects that are not referenced anywhere from memory.
The usage of memory of Groonga may reduce by this.</p>
</li>
<li><p>We increased the stability of the feature of recovering on crashes.</p>
<p>This feature is experimental and it is disabled by default.
Therefore, the following improvements are no influence on ordinary users.</p>
<ul class="simple">
<li><p>We fixed a bug that the index was broken when Groonga crashed.</p></li>
<li><p>We fixed a bug that might remain a lock.</p></li>
<li><p>We fixed a bug that Groonga crashed while it was recovering the crash.</p></li>
</ul>
</li>
<li><p>Improved performance for mmap if anonymous mmap available.[GitHub:MariaDB/server#1999][Suggested by David CARLIER]</p>
<p>The performance of Groonga is improved a bit by this improvement.</p>
</li>
<li><p>[<a class="reference internal" href="../reference/indexing.html"><span class="doc">Indexing</span></a>] Added support for the static index construction against the following types of columns.</p>
<ul class="simple">
<li><p>The non-reference vector column with weight</p></li>
<li><p>The reference vector column with weight</p></li>
<li><p>The reference scalar column</p></li>
</ul>
<p>These columns have not supported the static index construction until now.
Therefore, the time of making the index has longed even if we set the index against these columns after we loaded data into them.
By this improvement, the time of making the index is short in this case.</p>
</li>
<li><p>[<a class="reference internal" href="../reference/commands/column_create.html"><span class="doc">column_create</span></a>] Added new flags <code class="docutils literal notranslate"><span class="pre">MISSING_*</span></code> and <code class="docutils literal notranslate"><span class="pre">INVALID_*</span></code>.</p>
<p>We added the following new flags for <code class="docutils literal notranslate"><span class="pre">column_create</span></code>.</p>
<blockquote>
<div><ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">MISSING_ADD</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">MISSING_IGNORE</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">MISSING_NIL</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">INVALID_ERROR</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">INVALID_WARN</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">INVALID_IGNORE</span></code></p></li>
</ul>
</div></blockquote>
<p>Normally, if the data column is a reference data column and the nonexistent key is specified, a new record for the nonexistent key is newly created automatically.</p>
<p>The behavior that Groonga adds the key automatically into the column of reference destination is useful in the search like tag search.
Because Groonga adds data automatically when we load data.</p>
<p>However, this behavior is inconvenient if we need the other data except for the key.
Because a record that only has the key exists.</p>
<p>We can change this behavior by using flags that are added in this release.</p>
<blockquote>
<div><ul>
<li><p><code class="docutils literal notranslate"><span class="pre">MISSING_ADD</span></code>: This is the default value. This is the same behavior as the current.</p>
<p>If the data column is a reference data column and the nonexistent key is specified, a new record for the nonexistent key is newly created automatically.</p>
</li>
<li><p><code class="docutils literal notranslate"><span class="pre">MISSING_IGNORE</span></code>:</p>
<p>If the data column is a reference data column and the nonexistent key is specified, the nonexistent key is ignored.
If the reference data column is a scalar column, the value is <code class="docutils literal notranslate"><span class="pre">GRN_ID_NIL</span></code>.
If the reference data column is a vector column, the element is just ignored as below</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">[</span><span class="s2">&quot;existent1&quot;</span><span class="p">,</span> <span class="s2">&quot;nonexistent&quot;</span><span class="p">,</span> <span class="s2">&quot;existent2&quot;</span><span class="p">]</span> <span class="o">-&gt;</span>
<span class="p">[</span><span class="s2">&quot;existent1&quot;</span> <span class="s2">&quot;existent2&quot;</span><span class="p">]</span>
</pre></div>
</div>
</li>
<li><p><code class="docutils literal notranslate"><span class="pre">MISSING_NIL</span></code>:</p>
<p>If the data column is a reference data column and the nonexistent key is specified, the nonexistent key in a scalar column and a vector column is treated as <code class="docutils literal notranslate"><span class="pre">GRN_ID_NIL</span></code></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">[</span><span class="s2">&quot;existent1&quot;</span><span class="p">,</span> <span class="s2">&quot;nonexistent&quot;</span><span class="p">,</span> <span class="s2">&quot;existent2&quot;</span><span class="p">]</span> <span class="o">-&gt;</span>
<span class="p">[</span><span class="s2">&quot;existent1&quot;</span><span class="p">,</span> <span class="s2">&quot;&quot;</span> <span class="p">(</span><span class="n">GRN_ID_NIL</span><span class="p">),</span> <span class="s2">&quot;existent2&quot;</span><span class="p">]</span>
</pre></div>
</div>
</li>
<li><p><code class="docutils literal notranslate"><span class="pre">INVALID_ERROR</span></code>: This is the default value. This is the same behavior as the current except an error response of a vector column case.</p>
<p>If we set the invalid value (e.g.: <code class="docutils literal notranslate"><span class="pre">XXX</span></code> for <code class="docutils literal notranslate"><span class="pre">UInt8</span></code> scalar column), the set operation is treated as an error.
If the data column is a scalar column, <code class="docutils literal notranslate"><span class="pre">load</span></code> reports an error in log and response.
If the data column is a vector column, <code class="docutils literal notranslate"><span class="pre">load</span></code> reports an error in log but doesn’t report an error in response.
This is an incompatible change.</p>
</li>
<li><p><code class="docutils literal notranslate"><span class="pre">INVALID_WARN</span></code>:</p>
<p>If we set the invalid value (e.g.: <code class="docutils literal notranslate"><span class="pre">XXX</span></code> for <code class="docutils literal notranslate"><span class="pre">UInt8</span></code> scalar column), a warning message is logged and the set operation is ignored.
If the target data column is a reference vector data column, <code class="docutils literal notranslate"><span class="pre">MISSING_IGNORE</span></code> and <code class="docutils literal notranslate"><span class="pre">MISSING_NIL</span></code> are used to determine the behavior.</p>
</li>
<li><p><code class="docutils literal notranslate"><span class="pre">INVALID_IGNORE</span></code>:</p>
<p>If we set the invalid value (e.g.: <code class="docutils literal notranslate"><span class="pre">XXX</span></code> for <code class="docutils literal notranslate"><span class="pre">UInt8</span></code> scalar column), the set operation is ignored.
If the target data column is a reference vector data column, <code class="docutils literal notranslate"><span class="pre">MISSING_IGNORE</span></code> and <code class="docutils literal notranslate"><span class="pre">MISSING_NIL</span></code> are used to determine the behavior.</p>
</li>
</ul>
</div></blockquote>
</li>
<li><p>[<a class="reference internal" href="../reference/commands/dump.html"><span class="doc">dump</span></a>][<a class="reference internal" href="../reference/commands/column_list.html"><span class="doc">column_list</span></a>] Added support for <code class="docutils literal notranslate"><span class="pre">MISSING_*</span></code> and <code class="docutils literal notranslate"><span class="pre">INVALID_*</span></code> flags.</p>
<p>These commands doesn’t show <code class="docutils literal notranslate"><span class="pre">MISSING_ADD</span></code> and <code class="docutils literal notranslate"><span class="pre">INVALID_ERROR</span></code> flags to keep backward compatibility.
Because these flags show the default behavior.</p>
</li>
<li><p>[<a class="reference internal" href="../reference/commands/schema.html"><span class="doc">schema</span></a>] Added support for <code class="docutils literal notranslate"><span class="pre">MISSING_*</span></code> and <code class="docutils literal notranslate"><span class="pre">INVALID_*</span></code> flags.</p>
<p><code class="docutils literal notranslate"><span class="pre">MISSING_AND</span></code> and <code class="docutils literal notranslate"><span class="pre">INVALID_ERROR</span></code> flags aren’t shown in <code class="docutils literal notranslate"><span class="pre">flags</span></code> to keep backward compatibility.
However, new <code class="docutils literal notranslate"><span class="pre">missing</span></code> and <code class="docutils literal notranslate"><span class="pre">invalid</span></code> keys are added to each column.</p>
</li>
<li><p>We provided the package of Amazon Linux 2.</p></li>
<li><p>[Windows] Dropped support for building with Visual Studio 2017.</p>
<p>Because we could not use windows-2016 image on GitHub Actions.</p>
</li>
</ul>
</section>
<section id="id21">
<h3>Known Issues<a class="headerlink" href="#id21" title="Permalink to this heading">#</a></h3>
<ul>
<li><p>Currently, Groonga has a bug that there is possible that data is corrupt when we execute many additions, delete, and update data to vector column.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">*&lt;</span></code> and <code class="docutils literal notranslate"><span class="pre">*&gt;</span></code> only valid when we use <code class="docutils literal notranslate"><span class="pre">query()</span></code> the right side of filter condition.
If we specify as below, <code class="docutils literal notranslate"><span class="pre">*&lt;</span></code> and <code class="docutils literal notranslate"><span class="pre">*&gt;</span></code> work as <code class="docutils literal notranslate"><span class="pre">&amp;&amp;</span></code>.</p>
<blockquote>
<div><ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">'content</span> <span class="pre">&#64;</span> <span class="pre">&quot;Groonga&quot;</span> <span class="pre">*&lt;</span> <span class="pre">content</span> <span class="pre">&#64;</span> <span class="pre">&quot;Mroonga&quot;'</span></code></p></li>
</ul>
</div></blockquote>
</li>
<li><p>Groonga may not return records that should match caused by <code class="docutils literal notranslate"><span class="pre">GRN_II_CURSOR_SET_MIN_ENABLE</span></code>.</p></li>
</ul>
</section>
<section id="id22">
<h3>Thanks<a class="headerlink" href="#id22" title="Permalink to this heading">#</a></h3>
<ul class="simple">
<li><p>David CARLIER</p></li>
</ul>
</section>
</section>
<section id="release-12-0-1-2022-02-28">
<span id="release-12-0-1"></span><h2>Release 12.0.1 - 2022-02-28<a class="headerlink" href="#release-12-0-1-2022-02-28" title="Permalink to this heading">#</a></h2>
<section id="id23">
<h3>Improvements<a class="headerlink" href="#id23" title="Permalink to this heading">#</a></h3>
<ul>
<li><p>[<a class="reference internal" href="../reference/commands/query_expand.html"><span class="doc">query_expand</span></a>] Added a support for synonym group.</p>
<p>Until now, We had to each defined a keyword and synonyms of the keyword as below when we use the synonym search.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">table_create</span> <span class="n">Thesaurus</span> <span class="n">TABLE_PAT_KEY</span> <span class="n">ShortText</span> <span class="o">--</span><span class="n">normalizer</span> <span class="n">NormalizerAuto</span>
<span class="c1"># [[0, 1337566253.89858, 0.000355720520019531], true]</span>
<span class="n">column_create</span> <span class="n">Thesaurus</span> <span class="n">synonym</span> <span class="n">COLUMN_VECTOR</span> <span class="n">ShortText</span>
<span class="c1"># [[0, 1337566253.89858, 0.000355720520019531], true]</span>
<span class="n">load</span> <span class="o">--</span><span class="n">table</span> <span class="n">Thesaurus</span>
<span class="p">[</span>
<span class="p">{</span><span class="s2">&quot;_key&quot;</span><span class="p">:</span> <span class="s2">&quot;mroonga&quot;</span><span class="p">,</span> <span class="s2">&quot;synonym&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;mroonga&quot;</span><span class="p">,</span> <span class="s2">&quot;tritonn&quot;</span><span class="p">,</span> <span class="s2">&quot;groonga mysql&quot;</span><span class="p">]},</span>
<span class="p">{</span><span class="s2">&quot;_key&quot;</span><span class="p">:</span> <span class="s2">&quot;groonga&quot;</span><span class="p">,</span> <span class="s2">&quot;synonym&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;groonga&quot;</span><span class="p">,</span> <span class="s2">&quot;senna&quot;</span><span class="p">]}</span>
<span class="p">]</span>
</pre></div>
</div>
<p>In the above case, if we search <code class="docutils literal notranslate"><span class="pre">mroonga</span></code>, Groonga search <code class="docutils literal notranslate"><span class="pre">mroonga</span> <span class="pre">OR</span> <span class="pre">tritonn</span> <span class="pre">OR</span> <span class="pre">&quot;groonga</span> <span class="pre">mysql&quot;</span></code> as we intended.
However, if we search <code class="docutils literal notranslate"><span class="pre">tritonn</span></code>, Groonga search only <code class="docutils literal notranslate"><span class="pre">tritonn</span></code>.
If we want to search <code class="docutils literal notranslate"><span class="pre">tritonn</span> <span class="pre">OR</span> <span class="pre">mroonga</span> <span class="pre">OR</span> <span class="pre">&quot;groonga</span> <span class="pre">mysql&quot;</span></code> even if we search <code class="docutils literal notranslate"><span class="pre">tritonn</span></code>, we need had added a definition as below.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">load</span> <span class="o">--</span><span class="n">table</span> <span class="n">Thesaurus</span>
<span class="p">[</span>
<span class="p">{</span><span class="s2">&quot;_key&quot;</span><span class="p">:</span> <span class="s2">&quot;tritonn&quot;</span><span class="p">,</span> <span class="s2">&quot;synonym&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;tritonn&quot;</span><span class="p">,</span> <span class="s2">&quot;mroonga&quot;</span><span class="p">,</span> <span class="s2">&quot;groonga mysql&quot;</span><span class="p">]},</span>
<span class="p">]</span>
</pre></div>
</div>
<p>In many cases, if we expand <code class="docutils literal notranslate"><span class="pre">mroonga</span></code> to <code class="docutils literal notranslate"><span class="pre">mroonga</span> <span class="pre">OR</span> <span class="pre">tritonn</span> <span class="pre">OR</span> <span class="pre">&quot;groonga</span> <span class="pre">mysql&quot;</span></code>, we feel we want to expand <code class="docutils literal notranslate"><span class="pre">tritonn</span></code> and <code class="docutils literal notranslate"><span class="pre">&quot;groonga</span> <span class="pre">mysql&quot;</span></code> to <code class="docutils literal notranslate"><span class="pre">mroonga</span> <span class="pre">OR</span> <span class="pre">tritonn</span> <span class="pre">OR</span> <span class="pre">&quot;groonga</span> <span class="pre">mysql&quot;</span></code>.
However, until now, we had needed additional definitions in such a case.
Therefore, if target keywords for synonyms are many, we are troublesome to define synonyms.
Because we need to define many similar definitions.</p>
<p>In addition, when we remove synonyms, we are troublesome because we need to execute remove against many records.</p>
<p>We can make a group by deciding on a representative synonym record since this release.
For example, the all following keywords are the “mroonga” group.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">load</span> <span class="o">--</span><span class="n">table</span> <span class="n">Synonyms</span>
<span class="p">[</span>
  <span class="p">{</span><span class="s2">&quot;_key&quot;</span><span class="p">:</span> <span class="s2">&quot;mroonga&quot;</span><span class="p">:</span> <span class="s2">&quot;representative&quot;</span><span class="p">:</span> <span class="s2">&quot;mroonga&quot;</span><span class="p">}</span>
<span class="p">]</span>

<span class="n">load</span> <span class="o">--</span><span class="n">table</span> <span class="n">Synonyms</span>
<span class="p">[</span>
  <span class="p">{</span><span class="s2">&quot;_key&quot;</span><span class="p">:</span> <span class="s2">&quot;tritonn&quot;</span><span class="p">:</span> <span class="s2">&quot;representative&quot;</span><span class="p">:</span> <span class="s2">&quot;mroonga&quot;</span><span class="p">},</span>
  <span class="p">{</span><span class="s2">&quot;_key&quot;</span><span class="p">:</span> <span class="s2">&quot;groonga mysql&quot;</span><span class="p">:</span> <span class="s2">&quot;representative&quot;</span><span class="p">:</span> <span class="s2">&quot;mroonga&quot;</span><span class="p">}</span>
<span class="p">]</span>
</pre></div>
</div>
<p>In this case, <code class="docutils literal notranslate"><span class="pre">mroonga</span></code> is expanded to <code class="docutils literal notranslate"><span class="pre">mroonga</span> <span class="pre">OR</span> <span class="pre">tritonn</span> <span class="pre">OR</span> <span class="pre">&quot;groonga</span> <span class="pre">mysql&quot;</span></code>.
In addition, <code class="docutils literal notranslate"><span class="pre">tritonn</span></code> and <code class="docutils literal notranslate"><span class="pre">&quot;groonga</span> <span class="pre">mysql&quot;</span></code> are also expanded to <code class="docutils literal notranslate"><span class="pre">mroonga</span> <span class="pre">OR</span> <span class="pre">tritonn</span> <span class="pre">OR</span> <span class="pre">&quot;groonga</span> <span class="pre">mysql&quot;</span></code>.</p>
<p>When we want to remove synonyms, we execute just remove against a target record.
For example, if we want to remove <code class="docutils literal notranslate"><span class="pre">&quot;groonga</span> <span class="pre">mysql&quot;</span></code> from synonyms, we just remove <code class="docutils literal notranslate"><span class="pre">{&quot;_key&quot;:</span> <span class="pre">&quot;groonga</span> <span class="pre">mysql&quot;:</span> <span class="pre">&quot;representative&quot;:</span> <span class="pre">&quot;mroonga&quot;}</span></code>.</p>
</li>
<li><p>[<a class="reference internal" href="../reference/commands/query_expand.html"><span class="doc">query_expand</span></a>] Added a support for text vector and index.</p>
<p>We can use text vector in a synonym group as below.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">table_create</span> <span class="n">SynonymGroups</span> <span class="n">TABLE_NO_KEY</span>
<span class="p">[[</span><span class="mi">0</span><span class="p">,</span><span class="mf">0.0</span><span class="p">,</span><span class="mf">0.0</span><span class="p">],</span><span class="n">true</span><span class="p">]</span>
<span class="n">column_create</span> <span class="n">SynonymGroups</span> <span class="n">synonyms</span> <span class="n">COLUMN_VECTOR</span> <span class="n">ShortText</span>
<span class="p">[[</span><span class="mi">0</span><span class="p">,</span><span class="mf">0.0</span><span class="p">,</span><span class="mf">0.0</span><span class="p">],</span><span class="n">true</span><span class="p">]</span>
<span class="n">table_create</span> <span class="n">Synonyms</span> <span class="n">TABLE_PAT_KEY</span> <span class="n">ShortText</span>
<span class="p">[[</span><span class="mi">0</span><span class="p">,</span><span class="mf">0.0</span><span class="p">,</span><span class="mf">0.0</span><span class="p">],</span><span class="n">true</span><span class="p">]</span>
<span class="n">column_create</span> <span class="n">Synonyms</span> <span class="n">group</span> <span class="n">COLUMN_INDEX</span> <span class="n">SynonymGroups</span> <span class="n">synonyms</span>
<span class="p">[[</span><span class="mi">0</span><span class="p">,</span><span class="mf">0.0</span><span class="p">,</span><span class="mf">0.0</span><span class="p">],</span><span class="n">true</span><span class="p">]</span>
<span class="n">load</span> <span class="o">--</span><span class="n">table</span> <span class="n">SynonymGroups</span>
<span class="p">[</span>
<span class="p">[</span><span class="s2">&quot;synonyms&quot;</span><span class="p">],</span>
<span class="p">[[</span><span class="s2">&quot;rroonga&quot;</span><span class="p">,</span> <span class="s2">&quot;Ruby groonga&quot;</span><span class="p">]],</span>
<span class="p">[[</span><span class="s2">&quot;groonga&quot;</span><span class="p">,</span> <span class="s2">&quot;rroonga&quot;</span><span class="p">,</span> <span class="s2">&quot;mroonga&quot;</span><span class="p">]]</span>
<span class="p">]</span>
<span class="p">[[</span><span class="mi">0</span><span class="p">,</span><span class="mf">0.0</span><span class="p">,</span><span class="mf">0.0</span><span class="p">],</span><span class="mi">2</span><span class="p">]</span>
<span class="n">query_expand</span> <span class="n">Synonyms</span><span class="o">.</span><span class="n">group</span> <span class="s2">&quot;rroonga&quot;</span>
<span class="p">[</span>
  <span class="p">[</span>
    <span class="mi">0</span><span class="p">,</span>
    <span class="mf">0.0</span><span class="p">,</span>
    <span class="mf">0.0</span>
  <span class="p">],</span>
  <span class="s2">&quot;((rroonga) OR (Ruby groonga) OR (groonga) OR (rroonga) OR (mroonga))&quot;</span>
<span class="p">]</span>
</pre></div>
</div>
</li>
<li><p>Added support for disabling a backtrace by the environment variable.</p>
<p>We can disable output a backtrace by using <code class="docutils literal notranslate"><span class="pre">GRN_BACK_TRACE_ENABLE</span></code>.
If we set <code class="docutils literal notranslate"><span class="pre">GRN_BACK_TRACE_ENABLE=no</span></code>, Groonga doesn’t output a backtrace.</p>
<p>Groonga output backtrace to a stack area. Therefore, Groonga may crash because Groonga uses up stack area depending on the OS.
In such cases, we can avoid crashes by using <code class="docutils literal notranslate"><span class="pre">GRN_BACK_TRACE_ENABLE=no</span></code>.</p>
</li>
<li><p>[<a class="reference internal" href="../reference/commands/select.html"><span class="doc">select</span></a>] Improved performance for <code class="docutils literal notranslate"><span class="pre">--slices</span></code>.</p></li>
<li><p>[Windows] Added support for Visual Studio 2022.</p></li>
<li><p>[<a class="reference internal" href="../reference/commands/select.html"><span class="doc">select</span></a>] Added support for specifing max intervals for each elements in near search.</p>
<p>For example, we can specify max intervals for each phrase in a near phrase search.
We make documentation for this feature in the future. Therefore, we will make more details later.</p>
</li>
<li><p>[<a class="reference internal" href="../reference/executables/groonga-server-http.html"><span class="doc">Groonga HTTP server</span></a>] We could use <code class="docutils literal notranslate"><span class="pre">groonga-server-http</span></code> even if Groonga of RPM packages.</p></li>
</ul>
</section>
<section id="id24">
<h3>Fixes<a class="headerlink" href="#id24" title="Permalink to this heading">#</a></h3>
<ul class="simple">
<li><p>[Windows] Fixed a crash bug when Groonga output backtrace.</p></li>
</ul>
</section>
<section id="id25">
<h3>Known Issues<a class="headerlink" href="#id25" title="Permalink to this heading">#</a></h3>
<ul>
<li><p>Currently, Groonga has a bug that there is possible that data is corrupt when we execute many additions, delete, and update data to vector column.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">*&lt;</span></code> and <code class="docutils literal notranslate"><span class="pre">*&gt;</span></code> only valid when we use <code class="docutils literal notranslate"><span class="pre">query()</span></code> the right side of filter condition.
If we specify as below, <code class="docutils literal notranslate"><span class="pre">*&lt;</span></code> and <code class="docutils literal notranslate"><span class="pre">*&gt;</span></code> work as <code class="docutils literal notranslate"><span class="pre">&amp;&amp;</span></code>.</p>
<blockquote>
<div><ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">'content</span> <span class="pre">&#64;</span> <span class="pre">&quot;Groonga&quot;</span> <span class="pre">*&lt;</span> <span class="pre">content</span> <span class="pre">&#64;</span> <span class="pre">&quot;Mroonga&quot;'</span></code></p></li>
</ul>
</div></blockquote>
</li>
<li><p>Groonga may not return records that should match caused by <code class="docutils literal notranslate"><span class="pre">GRN_II_CURSOR_SET_MIN_ENABLE</span></code>.</p></li>
</ul>
</section>
</section>
<section id="release-12-0-0-2022-02-09">
<span id="release-12-0-0"></span><h2>Release 12.0.0 - 2022-02-09<a class="headerlink" href="#release-12-0-0-2022-02-09" title="Permalink to this heading">#</a></h2>
<p>This is a major version up!
But It keeps backward compatibility. We can upgrade to 12.0.0 without rebuilding database.</p>
<p>First of all, we introduce the Summary of changes from Groonga 11.0.0 to 11.1.3.
Then, we introduce the main changes in 12.0.0.</p>
<section id="summary-of-changes-from-groonga-11-0-0-to-11-1-3">
<h3>Summary of changes from Groonga 11.0.0 to 11.1.3<a class="headerlink" href="#summary-of-changes-from-groonga-11-0-0-to-11-1-3" title="Permalink to this heading">#</a></h3>
<section id="new-features-and-improvements">
<h4>New Features and Improvements<a class="headerlink" href="#new-features-and-improvements" title="Permalink to this heading">#</a></h4>
<ul>
<li><p>[<a class="reference internal" href="../reference/functions/snippet.html"><span class="doc">snippet</span></a>] Added support for using the keyword of 32 or more.</p>
<p>We could not specify the keyword of 32 or more with snippet until now.
However, we can specify the keyword of 32 or more by this improvement.</p>
<p>We don’t specify the keyword of 32 or more with snippet in normal use.
However, if the keyword increments automatically by using such as <code class="docutils literal notranslate"><span class="pre">query_expand</span></code>, the number of target keywords may be 32 or more.</p>
<p>In this case, Groonga occurs an error until now. However, Groonga doesn’t occur an error by this improvement.</p>
<p>See <a class="reference internal" href="11.html#release-11-1-3"><span class="std std-ref">release 11.1.3</span></a> for details.</p>
</li>
<li><p>[<a class="reference internal" href="../reference/normalizers/normalizer_nfkc130.html"><span class="doc">NormalizerNFKC130</span></a>] Added a new option <code class="docutils literal notranslate"><span class="pre">remove_symbol</span></code>.</p>
<p>This option removes symbols (e.g. #, !, “, &amp;, %, …) from the string that the target of normalizing.
For example, this option useful when we prevent orthographical variants such as a title of song and name of artist, and a name of store.</p>
<p>See <a class="reference internal" href="11.html#release-11-1-3"><span class="std std-ref">release 11.1.3</span></a> for details.</p>
</li>
<li><p>[<a class="reference internal" href="../reference/commands/load.html"><span class="doc">load</span></a>] Added support for ISO 8601 time format.</p>
<p>ISO 8601 format is the format generally.
Therefore <code class="docutils literal notranslate"><span class="pre">load</span></code> becomes easy to use by Groonga support the more standard format.</p>
<p>See <a class="reference internal" href="11.html#release-11-1-0"><span class="std std-ref">release 11.1.0</span></a> for details.</p>
</li>
<li><p>[<a class="reference internal" href="../reference/functions/snippet.html"><span class="doc">snippet</span></a>] Added a new option <code class="docutils literal notranslate"><span class="pre">delimiter_regexp</span></code> for detecting snippet delimiter with regular expression.</p>
<p>This feature is useful in that we want to show by the sentence the result of the search.</p>
<p><a class="reference internal" href="../reference/functions/snippet.html"><span class="doc">snippet</span></a> extracts text around search keywords.
We call the text that is extracted by <a class="reference internal" href="../reference/functions/snippet.html"><span class="doc">snippet</span></a> snippet.</p>
<p>Normally, <a class="reference internal" href="../reference/functions/snippet.html"><span class="doc">snippet</span></a> () returns the text of 200 bytes around search keywords.
However, <a class="reference internal" href="../reference/functions/snippet.html"><span class="doc">snippet</span></a> () gives no thought to a delimiter of sentences.
The snippet may be composed of multi sentences.</p>
<p><code class="docutils literal notranslate"><span class="pre">delimiter_regexp</span></code> option is useful if we want to only extract the text of the same sentence as search keywords.
For example, we can use <code class="docutils literal notranslate"><span class="pre">\.\s*</span></code> to extract only text in the target sentence.
Note that you need to escape <code class="docutils literal notranslate"><span class="pre">\</span></code> in string.</p>
<p>See <a class="reference internal" href="11.html#release-11-0-9"><span class="std std-ref">release 11.0.9</span></a> for details.</p>
</li>
<li><p>[<a class="reference internal" href="../reference/commands/cache_limit.html"><span class="doc">cache_limit</span></a>] Groonga remove query cache when we execute <code class="docutils literal notranslate"><span class="pre">cache_limit</span> <span class="pre">0</span></code>.</p>
<p>Groonga stores query cache to internally table.
The maximum total size of keys of this table is 4GiB. Because this table is hash table.
Therefore, If we execute many huge queries, Groonga may be unable to store query cache, because the maximum total size of keys may be over 4GiB.
In such cases, We can clear the table for query cache by using <code class="docutils literal notranslate"><span class="pre">cache_limit</span> <span class="pre">0</span></code>, and Groonga can store query cache</p>
<p>We needed to restart Groonga to resolve this problem until now.
However, We can resolve this problem if we just execute <code class="docutils literal notranslate"><span class="pre">cache_limit</span> <span class="pre">0</span></code> by this improvement.</p>
<p>See <a class="reference internal" href="11.html#release-11-0-6"><span class="std std-ref">release 11.0.6</span></a> for details.</p>
</li>
<li><p>[<a class="reference internal" href="../reference/functions/between.html"><span class="doc">between</span></a>] Added support for optimizing the order of evaluation of a conditional expression.</p>
<p>We can use the optimization of  the order of evaluation of a conditional expression in <code class="docutils literal notranslate"><span class="pre">between()</span></code> by setting <code class="docutils literal notranslate"><span class="pre">GRN_EXPR_OPTIMIZE=yes</span></code>.
This optimization is effective with respect if <code class="docutils literal notranslate"><span class="pre">between()</span></code> narrow down records enough or <code class="docutils literal notranslate"><span class="pre">between()</span></code> can’t narrow down few records.</p>
</li>
<li><p>[<a class="reference internal" href="../reference/log.html"><span class="doc">Log</span></a>] Added support for outputting to stdout and stderr.</p>
<p>This feature is useful when we execute Groonga on Docker.
Docker has the feature that records stdout and stderr in standard.
Therefore, we don’t need to login into the environment of Docker to get Groonga’s log.</p>
<p>See <a class="reference internal" href="11.html#release-11-0-4"><span class="std std-ref">release 11.0.4</span></a> for details.</p>
</li>
<li><p>[<a class="reference internal" href="../reference/functions/query.html"><span class="doc">query</span></a>] Added support for ignoring <code class="docutils literal notranslate"><span class="pre">TokenFilterStem</span></code> and <code class="docutils literal notranslate"><span class="pre">TokenFilterStopWord</span></code> by the query.</p>
<p>We are able to search without <code class="docutils literal notranslate"><span class="pre">TokenFilterStem</span></code> and <code class="docutils literal notranslate"><span class="pre">TokenFilterStopWord</span></code> in only a specific query.</p>
<p>This feature is useful when we want to search for the same words exactly as a search keyword.
Normally, Groonga gets better results with enable stemming and stopwords excepting.
However, if we want to search words the same as a keyword of search exactly, These features are needless.</p>
<p>Until now, If we want to search words the same as a keyword of search exactly,
We needed to make the index of the exclusive use.
By this improvement, we can search words the same as a keyword of search exactly
without making the index of the exclusive use.</p>
<p>See <a class="reference internal" href="11.html#release-11-0-3"><span class="std std-ref">release 11.0.3</span></a> for details.</p>
</li>
<li><p>[<a class="reference internal" href="../reference/functions/string_slice.html"><span class="doc">string_slice</span></a>] Added a new function <code class="docutils literal notranslate"><span class="pre">string_slice()</span></code>.</p>
<p><code class="docutils literal notranslate"><span class="pre">string_slice()</span></code> extracts a substring of a string of search results by position or regular expression.
This function is useful if we want to edit search results.</p>
<p>For example, this feature is useful in that we exclude tags from search results.</p>
</li>
<li><p>[<a class="reference internal" href="../reference/functions/query_parallel_or.html"><span class="doc">query_parallel_or</span></a>] Added a new function for processing queries in parallel.</p>
<p><code class="docutils literal notranslate"><span class="pre">query_parallel_or</span></code> is similar to query but <code class="docutils literal notranslate"><span class="pre">query_parallel_or</span></code> processes query that has multiple OR conditions in parallel.
We can increase in speed of the execution of many OR conditions by using this function.</p>
<p>However, <code class="docutils literal notranslate"><span class="pre">query_parallel_or</span></code> alone uses multiple CPUs.
Therefore, queries that are executing at the same time as the query that executes <code class="docutils literal notranslate"><span class="pre">query_parallel_or</span></code> may be slow.</p>
</li>
<li><p>[<a class="reference internal" href="../reference/token_filters.html"><span class="doc">Token filters</span></a>] Added support for multiple token filters with options.</p>
<p>We can use multiple token filters with options as the following example.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">--</span><span class="n">token_filters</span> <span class="s1">&#39;TokenFilterStopWord(&quot;column&quot;, &quot;ignore&quot;), TokenFilterNFKC130(&quot;unify_kana&quot;, true)&#39;</span>
</pre></div>
</div>
</li>
<li><p>[<a class="reference internal" href="../reference/commands/select.html"><span class="doc">select</span></a>] Added support for <code class="docutils literal notranslate"><span class="pre">--post_filter</span></code> and <code class="docutils literal notranslate"><span class="pre">--slices[].post_filter</span></code>.</p>
<p>We can filter again after we execute <code class="docutils literal notranslate"><span class="pre">--filter</span></code> by using <code class="docutils literal notranslate"><span class="pre">--post_filter</span></code> and <code class="docutils literal notranslate"><span class="pre">--slices[].post_filter</span></code>.
The difference between <code class="docutils literal notranslate"><span class="pre">--post_filter</span></code> and <code class="docutils literal notranslate"><span class="pre">--slices[].post_filter</span></code> is response format.</p>
<p>The response format of <code class="docutils literal notranslate"><span class="pre">--post_filter</span></code> same as the response of <code class="docutils literal notranslate"><span class="pre">--filter</span></code>.
The response format of <code class="docutils literal notranslate"><span class="pre">--slices[].post_filter</span></code> show the result of before and after <code class="docutils literal notranslate"><span class="pre">--slices[].post_filter</span></code> executed.</p>
<p>Note that if we use <code class="docutils literal notranslate"><span class="pre">--slices[].post_filter</span></code>, the format of the response is different from the normal <code class="docutils literal notranslate"><span class="pre">select</span></code> ‘s response.</p>
</li>
</ul>
</section>
<section id="id26">
<h4>Fixes<a class="headerlink" href="#id26" title="Permalink to this heading">#</a></h4>
<ul>
<li><p>Fixed a bug that the version up of Groonga failed Because the version up of arrow-libs on which Groonga depends.</p>
<p>However, if arrow-libs update a major version, this problem reproduces.
In this case, we will handle that by rebuilding the Groonga package.</p>
<p>This bug only occurs AlmaLinux 8 and CentOS 7.</p>
</li>
<li><p>[Windows] Fixed a resource leak when Groonga fail open a new file caused by out of memory.</p></li>
<li><p>Fixed a bug that Groonga may not have returned a result of a search query if we sent many search queries when tokenizer, normalizer, or token_filters that support options were used.</p></li>
<li><p>Fixed a bug that there is possible that index is corrupt when Groonga executes many additions, delete, and update information in it.</p>
<p>This bug occurs when we only execute many delete information from index.
However, it doesn’t occur when we only execute many additions information into index.</p>
<p>See <a class="reference internal" href="11.html#release-11-0-0"><span class="std std-ref">release 11.0.0</span></a> for details.</p>
</li>
</ul>
</section>
<section id="newly-supported-oses">
<h4>Newly supported OSes<a class="headerlink" href="#newly-supported-oses" title="Permalink to this heading">#</a></h4>
<ul class="simple">
<li><p>[<a class="reference internal" href="../install/almalinux.html"><span class="doc">AlmaLinux</span></a>] Added support for AlmaLinux 8.</p></li>
<li><p>[<a class="reference internal" href="../install/almalinux.html"><span class="doc">AlmaLinux</span></a>] Added support for AlmaLinux 8 for ARM64.</p></li>
<li><p>[<a class="reference internal" href="../install/debian.html"><span class="doc">Debian GNU/Linux</span></a>] Added support for Debian 11 (Bullseye).</p></li>
<li><p>[<a class="reference internal" href="../install/debian.html"><span class="doc">Debian GNU/Linux</span></a>] Added support for Debian 11 (Bullseye) for ARM64 and Debian 10 (buster) for ARM64.</p></li>
<li><p>[<a class="reference internal" href="../install/ubuntu.html"><span class="doc">Ubuntu</span></a>] Added support for Ubuntu 21.10 (Impish Indri).</p></li>
</ul>
</section>
<section id="dropped-support-oses">
<h4>Dropped support OSes<a class="headerlink" href="#dropped-support-oses" title="Permalink to this heading">#</a></h4>
<ul class="simple">
<li><p>[<a class="reference internal" href="../install/centos.html"><span class="doc">CentOS</span></a>] Dropped support for CentOS 8.</p></li>
<li><p>[<a class="reference internal" href="../install/ubuntu.html"><span class="doc">Ubuntu</span></a>] Dropped support for Ubuntu 21.04 (Hirsute Hippo).</p></li>
<li><p>[<a class="reference internal" href="../install/ubuntu.html"><span class="doc">Ubuntu</span></a>] Dropped support for Ubuntu 20.10 (Groovy Gorilla).</p></li>
<li><p>[<a class="reference internal" href="../install/ubuntu.html"><span class="doc">Ubuntu</span></a>] Dropped support for Ubuntu 16.04 LTS (Xenial Xerus).</p></li>
<li><p>[<a class="reference internal" href="../install/windows.html"><span class="doc">Windows</span></a>] Dropped support for the following packages of Windows version that we had cross-compiled by using MinGW on Linux.</p>
<ul>
<li><p>groonga-x.x.x-x86.exe</p></li>
<li><p>groonga-x.x.x-x86.zip</p></li>
<li><p>groonga-x.x.x-x64.exe</p></li>
<li><p>groonga-x.x.x-x86.zip</p></li>
</ul>
</li>
</ul>
</section>
<section id="id27">
<h4>Thanks<a class="headerlink" href="#id27" title="Permalink to this heading">#</a></h4>
<ul class="simple">
<li><p>naoa</p></li>
<li><p>Anthony M. Cook</p></li>
<li><p>MASUDA Kazuhiro</p></li>
<li><p>poti</p></li>
<li><p>Takashi Hashida</p></li>
<li><p>higchi</p></li>
<li><p>wi24rd</p></li>
<li><p>Josep Sanz</p></li>
<li><p>Keitaro YOSHIMURA</p></li>
<li><p>shibanao4870</p></li>
</ul>
<p>The main changes in 12.0.0 are as follows.</p>
</section>
</section>
<section id="id28">
<h3>Improvements<a class="headerlink" href="#id28" title="Permalink to this heading">#</a></h3>
<ul>
<li><p>[<a class="reference internal" href="../reference/functions/sub_filter.html"><span class="doc">sub_filter</span></a>] Added a new option <code class="docutils literal notranslate"><span class="pre">pre_filter_threshold</span></code>.</p>
<p>We can change the value of <code class="docutils literal notranslate"><span class="pre">GRN_SUB_FILTER_PRE_FILTER_THRESHOLD</span></code> by this option.
If the number of records is less than <code class="docutils literal notranslate"><span class="pre">GRN_SUB_FILTER_PRE_FILTER_THRESHOLD</span></code> when Groonga executes <code class="docutils literal notranslate"><span class="pre">sub_filter</span></code>, Groonga execute <code class="docutils literal notranslate"><span class="pre">sub_filter</span></code> against records that have been already narrowed down.</p>
<p>We can use -1 to always use this optimization.</p>
</li>
<li><p>[index_column_have_source_record] Added a new function <code class="docutils literal notranslate"><span class="pre">index_column_have_source_record()</span></code>.</p>
<p>We can confirm whether a token that is existing in the index is included in any of the records that are registered in Groonga or not.</p>
<p>Groonga does not remove a token even if the token become never used from records in Groonga by updating records.
Therefore, for example, when we use the feature of autocomplete, Groonga may return a token that is not included in any of the records as candidates for search words.
However, we can become that we don’t return the needless token by using this function.</p>
<p>Because this function can detect a token that is not included in any of the records.</p>
</li>
<li><p>[<a class="reference internal" href="../reference/normalizers/normalizer_nfkc130.html"><span class="doc">NormalizerNFKC130</span></a>] Added a new option <code class="docutils literal notranslate"><span class="pre">strip</span></code></p>
<p>This option removes spaces from the start and the end as below.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">normalize</span> \
<span class="s1">&#39;NormalizerNFKC121(&quot;strip&quot;, true, </span><span class="se">\</span>
<span class="s1">                   &quot;report_source_offset&quot;, true)&#39;</span> \
<span class="s2">&quot;  hello world</span><span class="se">\t</span><span class="s2">! </span><span class="se">\t</span><span class="s2"> &quot;</span> \
<span class="n">WITH_CHECKS</span><span class="o">|</span><span class="n">WITH_TYPES</span>
 <span class="p">[</span>
   <span class="p">[</span>
     <span class="mi">0</span><span class="p">,</span>
     <span class="mf">0.0</span><span class="p">,</span>
     <span class="mf">0.0</span>
   <span class="p">],</span>
   <span class="p">{</span>
     <span class="s2">&quot;normalized&quot;</span><span class="p">:</span> <span class="s2">&quot;hello world!&quot;</span><span class="p">,</span>
     <span class="s2">&quot;types&quot;</span><span class="p">:</span> <span class="p">[</span>
       <span class="s2">&quot;alpha&quot;</span><span class="p">,</span>
       <span class="s2">&quot;alpha&quot;</span><span class="p">,</span>
       <span class="s2">&quot;alpha&quot;</span><span class="p">,</span>
       <span class="s2">&quot;alpha&quot;</span><span class="p">,</span>
       <span class="s2">&quot;alpha&quot;</span><span class="p">,</span>
       <span class="s2">&quot;others&quot;</span><span class="p">,</span>
       <span class="s2">&quot;alpha&quot;</span><span class="p">,</span>
       <span class="s2">&quot;alpha&quot;</span><span class="p">,</span>
       <span class="s2">&quot;alpha&quot;</span><span class="p">,</span>
       <span class="s2">&quot;alpha&quot;</span><span class="p">,</span>
       <span class="s2">&quot;alpha|blank&quot;</span><span class="p">,</span>
       <span class="s2">&quot;symbol|blank&quot;</span>
     <span class="p">],</span>
     <span class="s2">&quot;checks&quot;</span><span class="p">:</span> <span class="p">[</span>
       <span class="mi">3</span><span class="p">,</span>
       <span class="mi">1</span><span class="p">,</span>
       <span class="mi">1</span><span class="p">,</span>
       <span class="mi">1</span><span class="p">,</span>
       <span class="mi">1</span><span class="p">,</span>
       <span class="mi">1</span><span class="p">,</span>
       <span class="mi">1</span><span class="p">,</span>
       <span class="mi">1</span><span class="p">,</span>
       <span class="mi">1</span><span class="p">,</span>
       <span class="mi">1</span><span class="p">,</span>
       <span class="mi">1</span><span class="p">,</span>
       <span class="mi">2</span>
     <span class="p">],</span>
     <span class="s2">&quot;offsets&quot;</span><span class="p">:</span> <span class="p">[</span>
       <span class="mi">0</span><span class="p">,</span>
       <span class="mi">3</span><span class="p">,</span>
       <span class="mi">4</span><span class="p">,</span>
       <span class="mi">5</span><span class="p">,</span>
       <span class="mi">6</span><span class="p">,</span>
       <span class="mi">7</span><span class="p">,</span>
       <span class="mi">8</span><span class="p">,</span>
       <span class="mi">9</span><span class="p">,</span>
       <span class="mi">10</span><span class="p">,</span>
       <span class="mi">11</span><span class="p">,</span>
       <span class="mi">12</span><span class="p">,</span>
       <span class="mi">14</span>
     <span class="p">]</span>
   <span class="p">}</span>
 <span class="p">]</span>
</pre></div>
</div>
</li>
<li><p>[<a class="reference internal" href="../reference/commands/select.html"><span class="doc">select</span></a>] Added new arguments <code class="docutils literal notranslate"><span class="pre">drilldown_max_n_target_records</span></code> and <code class="docutils literal notranslate"><span class="pre">drilldown[${LABEL}].max_n_target_records</span></code>.</p>
<p>We can specify the max number of records of the drilldown target table (filtered result) to use drilldown.
If the number of filtered result is larger than the specified value, some records in filtered result aren’t used for drilldown.
The default value of this arguments are <code class="docutils literal notranslate"><span class="pre">-1</span></code>.
If these arguments are set <code class="docutils literal notranslate"><span class="pre">-1</span></code>, Groonga uses all records for drilldown.</p>
<p>This argument is useful when filtered result may be very large.
Because a drilldown against large filtered result may be slow.
We can limit the max number of records to be used for drilldown by this feature.</p>
<p>Here is an example to limit the max number of records to be used for drilldown.
The last 2 records, <code class="docutils literal notranslate"><span class="pre">{\&quot;_id\&quot;:</span> <span class="pre">4,</span> <span class="pre">\&quot;tag\&quot;:</span> <span class="pre">\&quot;Senna\&quot;}</span></code> and <code class="docutils literal notranslate"><span class="pre">{\&quot;_id\&quot;:</span> <span class="pre">5,</span> <span class="pre">\&quot;tag\&quot;:</span> <span class="pre">\&quot;Senna\&quot;}</span></code>, aren’t used.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">table_create</span> <span class="n">Entries</span> <span class="n">TABLE_HASH_KEY</span> <span class="n">ShortText</span>
<span class="n">column_create</span> <span class="n">Entries</span> <span class="n">content</span> <span class="n">COLUMN_SCALAR</span> <span class="n">Text</span>
<span class="n">column_create</span> <span class="n">Entries</span> <span class="n">n_likes</span> <span class="n">COLUMN_SCALAR</span> <span class="n">UInt32</span>
<span class="n">column_create</span> <span class="n">Entries</span> <span class="n">tag</span> <span class="n">COLUMN_SCALAR</span> <span class="n">ShortText</span>

<span class="n">table_create</span> <span class="n">Terms</span> <span class="n">TABLE_PAT_KEY</span> <span class="n">ShortText</span> <span class="o">--</span><span class="n">default_tokenizer</span> <span class="n">TokenBigram</span> <span class="o">--</span><span class="n">normalizer</span> <span class="n">NormalizerAuto</span>
<span class="n">column_create</span> <span class="n">Terms</span> <span class="n">entries_key_index</span> <span class="n">COLUMN_INDEX</span><span class="o">|</span><span class="n">WITH_POSITION</span> <span class="n">Entries</span> <span class="n">_key</span>
<span class="n">column_create</span> <span class="n">Terms</span> <span class="n">entries_content_index</span> <span class="n">COLUMN_INDEX</span><span class="o">|</span><span class="n">WITH_POSITION</span> <span class="n">Entries</span> <span class="n">content</span>
<span class="n">load</span> <span class="o">--</span><span class="n">table</span> <span class="n">Entries</span>
<span class="p">[</span>
<span class="p">{</span><span class="s2">&quot;_key&quot;</span><span class="p">:</span>    <span class="s2">&quot;The first post!&quot;</span><span class="p">,</span>
 <span class="s2">&quot;content&quot;</span><span class="p">:</span> <span class="s2">&quot;Welcome! This is my first post!&quot;</span><span class="p">,</span>
 <span class="s2">&quot;n_likes&quot;</span><span class="p">:</span> <span class="mi">5</span><span class="p">,</span>
 <span class="s2">&quot;tag&quot;</span><span class="p">:</span> <span class="s2">&quot;Hello&quot;</span><span class="p">},</span>
<span class="p">{</span><span class="s2">&quot;_key&quot;</span><span class="p">:</span>    <span class="s2">&quot;Groonga&quot;</span><span class="p">,</span>
 <span class="s2">&quot;content&quot;</span><span class="p">:</span> <span class="s2">&quot;I started to use Groonga. It&#39;s very fast!&quot;</span><span class="p">,</span>
 <span class="s2">&quot;n_likes&quot;</span><span class="p">:</span> <span class="mi">10</span><span class="p">,</span>
 <span class="s2">&quot;tag&quot;</span><span class="p">:</span> <span class="s2">&quot;Groonga&quot;</span><span class="p">},</span>
<span class="p">{</span><span class="s2">&quot;_key&quot;</span><span class="p">:</span>    <span class="s2">&quot;Mroonga&quot;</span><span class="p">,</span>
 <span class="s2">&quot;content&quot;</span><span class="p">:</span> <span class="s2">&quot;I also started to use Mroonga. It&#39;s also very fast! Really fast!&quot;</span><span class="p">,</span>
 <span class="s2">&quot;n_likes&quot;</span><span class="p">:</span> <span class="mi">15</span><span class="p">,</span>
 <span class="s2">&quot;tag&quot;</span><span class="p">:</span> <span class="s2">&quot;Groonga&quot;</span><span class="p">},</span>
<span class="p">{</span><span class="s2">&quot;_key&quot;</span><span class="p">:</span>    <span class="s2">&quot;Good-bye Senna&quot;</span><span class="p">,</span>
 <span class="s2">&quot;content&quot;</span><span class="p">:</span> <span class="s2">&quot;I migrated all Senna system!&quot;</span><span class="p">,</span>
 <span class="s2">&quot;n_likes&quot;</span><span class="p">:</span> <span class="mi">3</span><span class="p">,</span>
 <span class="s2">&quot;tag&quot;</span><span class="p">:</span> <span class="s2">&quot;Senna&quot;</span><span class="p">},</span>
<span class="p">{</span><span class="s2">&quot;_key&quot;</span><span class="p">:</span>    <span class="s2">&quot;Good-bye Tritonn&quot;</span><span class="p">,</span>
 <span class="s2">&quot;content&quot;</span><span class="p">:</span> <span class="s2">&quot;I also migrated all Tritonn system!&quot;</span><span class="p">,</span>
 <span class="s2">&quot;n_likes&quot;</span><span class="p">:</span> <span class="mi">3</span><span class="p">,</span>
 <span class="s2">&quot;tag&quot;</span><span class="p">:</span> <span class="s2">&quot;Senna&quot;</span><span class="p">}</span>
<span class="p">]</span>

<span class="n">select</span> <span class="n">Entries</span> \
  <span class="o">--</span><span class="n">limit</span> <span class="o">-</span><span class="mi">1</span> \
  <span class="o">--</span><span class="n">output_columns</span> <span class="n">_id</span><span class="p">,</span><span class="n">tag</span> \
  <span class="o">--</span><span class="n">drilldown</span> <span class="n">tag</span> \
  <span class="o">--</span><span class="n">drilldown_max_n_target_records</span> <span class="mi">3</span>
<span class="p">[</span>
  <span class="p">[</span>
    <span class="mi">0</span><span class="p">,</span>
    <span class="mf">1337566253.89858</span><span class="p">,</span>
    <span class="mf">0.000355720520019531</span>
  <span class="p">],</span>
  <span class="p">[</span>
    <span class="p">[</span>
      <span class="p">[</span>
        <span class="mi">5</span>
      <span class="p">],</span>
      <span class="p">[</span>
        <span class="p">[</span>
          <span class="s2">&quot;_id&quot;</span><span class="p">,</span>
          <span class="s2">&quot;UInt32&quot;</span>
        <span class="p">],</span>
        <span class="p">[</span>
          <span class="s2">&quot;tag&quot;</span><span class="p">,</span>
          <span class="s2">&quot;ShortText&quot;</span>
        <span class="p">]</span>
      <span class="p">],</span>
      <span class="p">[</span>
        <span class="mi">1</span><span class="p">,</span>
        <span class="s2">&quot;Hello&quot;</span>
      <span class="p">],</span>
      <span class="p">[</span>
        <span class="mi">2</span><span class="p">,</span>
        <span class="s2">&quot;Groonga&quot;</span>
      <span class="p">],</span>
      <span class="p">[</span>
        <span class="mi">3</span><span class="p">,</span>
        <span class="s2">&quot;Groonga&quot;</span>
      <span class="p">],</span>
      <span class="p">[</span>
        <span class="mi">4</span><span class="p">,</span>
        <span class="s2">&quot;Senna&quot;</span>
      <span class="p">],</span>
      <span class="p">[</span>
        <span class="mi">5</span><span class="p">,</span>
        <span class="s2">&quot;Senna&quot;</span>
      <span class="p">]</span>
    <span class="p">],</span>
    <span class="p">[</span>
      <span class="p">[</span>
        <span class="mi">2</span>
      <span class="p">],</span>
      <span class="p">[</span>
        <span class="p">[</span>
          <span class="s2">&quot;_key&quot;</span><span class="p">,</span>
          <span class="s2">&quot;ShortText&quot;</span>
        <span class="p">],</span>
        <span class="p">[</span>
          <span class="s2">&quot;_nsubrecs&quot;</span><span class="p">,</span>
          <span class="s2">&quot;Int32&quot;</span>
        <span class="p">]</span>
      <span class="p">],</span>
      <span class="p">[</span>
        <span class="s2">&quot;Hello&quot;</span><span class="p">,</span>
        <span class="mi">1</span>
      <span class="p">],</span>
      <span class="p">[</span>
        <span class="s2">&quot;Groonga&quot;</span><span class="p">,</span>
        <span class="mi">2</span>
      <span class="p">]</span>
    <span class="p">]</span>
  <span class="p">]</span>
<span class="p">]</span>
</pre></div>
</div>
</li>
<li><p>[httpd] Updated bundled nginx to 1.21.6.</p></li>
</ul>
</section>
</section>
</section>


                </article>
              
              
              
                <footer class="bd-footer-article">
                  
<div class="footer-article-items footer-article__inner">
  
    <div class="footer-article-item"><!-- Previous / next buttons -->
<div class="prev-next-area">
</div></div>
  
</div>

                </footer>
              
            </div>
            
            
              
                <div class="bd-sidebar-secondary bd-toc"><div class="sidebar-secondary-items sidebar-secondary__inner">

  <div class="sidebar-secondary-item">
  <div class="page-toc tocsection onthispage">
    <i class="fa-solid fa-list"></i> On this page
  </div>
  <nav class="bd-toc-nav page-toc">
    <ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#release-12-1-2-2023-01-29">Release 12.1.2 - 2023-01-29</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#improvements">Improvements</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#release-12-1-1-2023-01-06">Release 12.1.1 - 2023-01-06</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#id1">Improvements</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#fixes">Fixes</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#thanks">Thanks</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#release-12-1-0-2022-11-29">Release 12.1.0 - 2022-11-29</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#id2">Improvements</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#id3">Fixes</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#release-12-0-9-2022-10-28">Release 12.0.9 - 2022-10-28</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#id4">Improvements</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#id5">Fixes</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#release-12-0-8-2022-10-03">Release 12.0.8 - 2022-10-03</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#id6">Improvements</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#id7">Fixes</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#release-12-0-7-2022-08-29">Release 12.0.7 - 2022-08-29</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#id8">Improvements</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#id9">Fixes</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#release-12-0-6-2022-08-04">Release 12.0.6 - 2022-08-04</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#id10">Improvements</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#id11">Fixes</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#release-12-0-5-2022-06-29">Release 12.0.5 - 2022-06-29</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#id12">Improvements</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#known-issues">Known Issues</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#id13">Thanks</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#release-12-0-4-2022-06-06">Release 12.0.4 - 2022-06-06</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#id14">Improvements</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#id15">Fixes</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#release-12-0-3-2022-04-29">Release 12.0.3 - 2022-04-29</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#id16">Improvements</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#id17">Fixes</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#id18">Known Issues</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#id19">Thanks</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#release-12-0-2-2022-03-29">Release 12.0.2 - 2022-03-29</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#id20">Improvements</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#id21">Known Issues</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#id22">Thanks</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#release-12-0-1-2022-02-28">Release 12.0.1 - 2022-02-28</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#id23">Improvements</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#id24">Fixes</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#id25">Known Issues</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#release-12-0-0-2022-02-09">Release 12.0.0 - 2022-02-09</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#summary-of-changes-from-groonga-11-0-0-to-11-1-3">Summary of changes from Groonga 11.0.0 to 11.1.3</a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#new-features-and-improvements">New Features and Improvements</a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#id26">Fixes</a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#newly-supported-oses">Newly supported OSes</a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#dropped-support-oses">Dropped support OSes</a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#id27">Thanks</a></li>
</ul>
</li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#id28">Improvements</a></li>
</ul>
</li>
</ul>
  </nav></div>

  <div class="sidebar-secondary-item">
  
  <div class="tocsection editthispage">
    <a href="https://github.com/groonga/groonga/edit/main/doc/source/news/12.rst">
      <i class="fa-solid fa-pencil"></i>
      
      
        
          Edit on GitHub
        
      
    </a>
  </div>
</div>

</div></div>
              
            
          </div>
          <footer class="bd-footer-content">
            
          </footer>
        
      </main>
    </div>
  </div>
  
  <!-- Scripts loaded after <body> so the DOM is not blocked -->
  <script src="../_static/scripts/bootstrap.js?digest=e353d410970836974a52"></script>
<script src="../_static/scripts/pydata-sphinx-theme.js?digest=e353d410970836974a52"></script>

  <footer class="bd-footer">
<div class="bd-footer__inner bd-page-width">
  
    <div class="footer-items__start">
      
        <div class="footer-item">
  <p class="copyright">
    
      © Copyright 2009-2023 Groonga Project.
      <br/>
    
  </p>
</div>
      
    </div>
  
  
    <div class="footer-items__end">
      
        <div class="footer-item"><p class="theme-version">
  Built with the <a href="https://pydata-sphinx-theme.readthedocs.io/en/stable/index.html">PyData Sphinx Theme</a> 0.13.3.
</p></div>
      
    </div>
  
</div>

  </footer>
  </body>
</html>