
<!DOCTYPE html>


<html lang="en" data-content_root="../../" >

  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>7.3.57. select &#8212; Groonga v14.0.6 documentation</title>
  
  
  
  <script data-cfasync="false">
    document.documentElement.dataset.mode = localStorage.getItem("mode") || "";
    document.documentElement.dataset.theme = localStorage.getItem("theme") || "";
  </script>
  
  <!-- Loaded before other Sphinx assets -->
  <link href="../../_static/styles/theme.css?digest=3ee479438cf8b5e0d341" rel="stylesheet" />
<link href="../../_static/styles/bootstrap.css?digest=3ee479438cf8b5e0d341" rel="stylesheet" />
<link href="../../_static/styles/pydata-sphinx-theme.css?digest=3ee479438cf8b5e0d341" rel="stylesheet" />

  
  <link href="../../_static/vendor/fontawesome/6.5.2/css/all.min.css?digest=3ee479438cf8b5e0d341" rel="stylesheet" />
  <link rel="preload" as="font" type="font/woff2" crossorigin href="../../_static/vendor/fontawesome/6.5.2/webfonts/fa-solid-900.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin href="../../_static/vendor/fontawesome/6.5.2/webfonts/fa-brands-400.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin href="../../_static/vendor/fontawesome/6.5.2/webfonts/fa-regular-400.woff2" />

    <link rel="stylesheet" type="text/css" href="../../_static/pygments.css?v=a746c00c" />
  
  <!-- Pre-loaded scripts that we'll load fully later -->
  <link rel="preload" as="script" href="../../_static/scripts/bootstrap.js?digest=3ee479438cf8b5e0d341" />
<link rel="preload" as="script" href="../../_static/scripts/pydata-sphinx-theme.js?digest=3ee479438cf8b5e0d341" />
  <script src="../../_static/vendor/fontawesome/6.5.2/js/all.min.js?digest=3ee479438cf8b5e0d341"></script>

    <script src="../../_static/documentation_options.js?v=bfbd1b05"></script>
    <script src="../../_static/doctools.js?v=888ff710"></script>
    <script src="../../_static/sphinx_highlight.js?v=dc90522c"></script>
    <script async="async" src="https://www.googletagmanager.com/gtag/js?id=UA-7532323-1"></script>
    <script>
                window.dataLayer = window.dataLayer || [];
                function gtag(){ dataLayer.push(arguments); }
                gtag('js', new Date());
                gtag('config', 'UA-7532323-1');
            </script>
    <script>
                window.dataLayer = window.dataLayer || [];
                function gtag(){ dataLayer.push(arguments); }
                gtag('js', new Date());
                gtag('config', 'UA-7532323-1');
            </script>
    <script>DOCUMENTATION_OPTIONS.pagename = 'reference/commands/select';</script>
    <script>
        DOCUMENTATION_OPTIONS.theme_version = '0.15.3';
        DOCUMENTATION_OPTIONS.theme_switcher_json_url = 'https://groonga.org/docs/_static/switcher.json';
        DOCUMENTATION_OPTIONS.theme_switcher_version_match = 'english';
        DOCUMENTATION_OPTIONS.show_version_warning_banner = false;
        </script>
    <link rel="icon" href="../../_static/favicon.ico"/>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="7.3.58. shutdown" href="shutdown.html" />
    <link rel="prev" title="7.3.56. schema" href="schema.html" />
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <meta name="docsearch:language" content="en"/>
  </head>
  
  
  <body data-bs-spy="scroll" data-bs-target=".bd-toc-nav" data-offset="180" data-bs-root-margin="0px 0px -60%" data-default-mode="">

  
  
  <div id="pst-skip-link" class="skip-link d-print-none"><a href="#main-content">Skip to main content</a></div>
  
  <div id="pst-scroll-pixel-helper"></div>
  
  <button type="button" class="btn rounded-pill" id="pst-back-to-top">
    <i class="fa-solid fa-arrow-up"></i>Back to top</button>

  
  <input type="checkbox"
          class="sidebar-toggle"
          id="pst-primary-sidebar-checkbox"/>
  <label class="overlay overlay-primary" for="pst-primary-sidebar-checkbox"></label>
  
  <input type="checkbox"
          class="sidebar-toggle"
          id="pst-secondary-sidebar-checkbox"/>
  <label class="overlay overlay-secondary" for="pst-secondary-sidebar-checkbox"></label>
  
  <div class="search-button__wrapper">
    <div class="search-button__overlay"></div>
    <div class="search-button__search-container">
<form class="bd-search d-flex align-items-center"
      action="../../search.html"
      method="get">
  <i class="fa-solid fa-magnifying-glass"></i>
  <input type="search"
         class="form-control"
         name="q"
         id="search-input"
         placeholder="Search the docs ..."
         aria-label="Search the docs ..."
         autocomplete="off"
         autocorrect="off"
         autocapitalize="off"
         spellcheck="false"/>
  <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd>K</kbd></span>
</form></div>
  </div>

  <div class="pst-async-banner-revealer d-none">
  <aside id="bd-header-version-warning" class="d-none d-print-none" aria-label="Version warning"></aside>
</div>

  
    <header class="bd-header navbar navbar-expand-lg bd-navbar d-print-none">
<div class="bd-header__inner bd-page-width">
  <button class="sidebar-toggle primary-toggle" aria-label="Site navigation">
    <span class="fa-solid fa-bars"></span>
  </button>
  
  
  <div class="col-lg-3 navbar-header-items__start">
    
      <div class="navbar-item">

   

<a class="navbar-brand logo" href="https://groonga.org/">
  
  
  
  
  
    
    
      
    
    
    <img src="../../_static/groonga.png" class="logo__image only-light" alt="Groonga v14.0.6 documentation - Home"/>
    <script>document.write(`<img src="../../_static/groonga.png" class="logo__image only-dark" alt="Groonga v14.0.6 documentation - Home"/>`);</script>
  
  
</a></div>
    
  </div>
  
  <div class="col-lg-9 navbar-header-items">
    
    
    <div class="navbar-header-items__end">
      
        <div class="navbar-item navbar-persistent--container">
          

 <script>
 document.write(`
   <button class="btn navbar-btn search-button-field search-button__button" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="fa-solid fa-magnifying-glass"></i>
    <span class="search-button__default-text">Search</span>
    <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd class="kbd-shortcut__modifier">K</kbd></span>
   </button>
 `);
 </script>
        </div>
      
      
        <div class="navbar-item">

<script>
document.write(`
  <button class="btn btn-sm navbar-btn theme-switch-button" title="light/dark" aria-label="light/dark" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <span class="theme-switch nav-link" data-mode="light"><i class="fa-solid fa-sun fa-lg"></i></span>
    <span class="theme-switch nav-link" data-mode="dark"><i class="fa-solid fa-moon fa-lg"></i></span>
    <span class="theme-switch nav-link" data-mode="auto"><i class="fa-solid fa-circle-half-stroke fa-lg"></i></span>
  </button>
`);
</script></div>
      
        <div class="navbar-item"><ul class="navbar-icon-links navbar-nav"
    aria-label="Icon Links">
        <li class="nav-item">
          
          
          
          
          
          
          
          
          <a href="https://github.com/groonga/groonga" title="GitHub" class="nav-link" rel="noopener" target="_blank" data-bs-toggle="tooltip" data-bs-placement="bottom"><span><i class="fa-brands fa-square-github fa-lg" aria-hidden="true"></i></span>
            <span class="sr-only">GitHub</span></a>
        </li>
        <li class="nav-item">
          
          
          
          
          
          
          
          
          <a href="https://twitter.com/groonga" title="Twitter" class="nav-link" rel="noopener" target="_blank" data-bs-toggle="tooltip" data-bs-placement="bottom"><span><i class="fa-brands fa-square-twitter fa-lg" aria-hidden="true"></i></span>
            <span class="sr-only">Twitter</span></a>
        </li>
        <li class="nav-item">
          
          
          
          
          
          
          
          
          <a href="/blog" title="Blog" class="nav-link" rel="noopener" target="_blank" data-bs-toggle="tooltip" data-bs-placement="bottom"><span><i class="fas fa-blog fa-lg" aria-hidden="true"></i></span>
            <span class="sr-only">Blog</span></a>
        </li>
</ul></div>
      
        <div class="navbar-item">
<script>
document.write(`
  <div class="version-switcher__container dropdown">
    <button id="pst-version-switcher-button-2"
      type="button"
      class="version-switcher__button btn btn-sm navbar-btn dropdown-toggle"
      data-bs-toggle="dropdown"
      aria-haspopup="listbox"
      aria-controls="pst-version-switcher-list-2"
      aria-label="Version switcher list"
    >
      Choose version  <!-- this text may get changed later by javascript -->
      <span class="caret"></span>
    </button>
    <div id="pst-version-switcher-list-2"
      class="version-switcher__menu dropdown-menu list-group-flush py-0"
      role="listbox" aria-labelledby="pst-version-switcher-button-2">
      <!-- dropdown will be populated by javascript on page load -->
    </div>
  </div>
`);
</script></div>
      
    </div>
    
  </div>
  
  
    <div class="navbar-persistent--mobile">

 <script>
 document.write(`
   <button class="btn navbar-btn search-button-field search-button__button" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="fa-solid fa-magnifying-glass"></i>
    <span class="search-button__default-text">Search</span>
    <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd class="kbd-shortcut__modifier">K</kbd></span>
   </button>
 `);
 </script>
    </div>
  

  
    <button class="sidebar-toggle secondary-toggle" aria-label="On this page">
      <span class="fa-solid fa-outdent"></span>
    </button>
  
</div>

    </header>
  

  <div class="bd-container">
    <div class="bd-container__inner bd-page-width">
      
      
      
      <div class="bd-sidebar-primary bd-sidebar">
        

  
  <div class="sidebar-header-items sidebar-primary__section">
    
    
    
    
      <div class="sidebar-header-items__end">
        
          <div class="navbar-item">

<script>
document.write(`
  <button class="btn btn-sm navbar-btn theme-switch-button" title="light/dark" aria-label="light/dark" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <span class="theme-switch nav-link" data-mode="light"><i class="fa-solid fa-sun fa-lg"></i></span>
    <span class="theme-switch nav-link" data-mode="dark"><i class="fa-solid fa-moon fa-lg"></i></span>
    <span class="theme-switch nav-link" data-mode="auto"><i class="fa-solid fa-circle-half-stroke fa-lg"></i></span>
  </button>
`);
</script></div>
        
          <div class="navbar-item"><ul class="navbar-icon-links navbar-nav"
    aria-label="Icon Links">
        <li class="nav-item">
          
          
          
          
          
          
          
          
          <a href="https://github.com/groonga/groonga" title="GitHub" class="nav-link" rel="noopener" target="_blank" data-bs-toggle="tooltip" data-bs-placement="bottom"><span><i class="fa-brands fa-square-github fa-lg" aria-hidden="true"></i></span>
            <span class="sr-only">GitHub</span></a>
        </li>
        <li class="nav-item">
          
          
          
          
          
          
          
          
          <a href="https://twitter.com/groonga" title="Twitter" class="nav-link" rel="noopener" target="_blank" data-bs-toggle="tooltip" data-bs-placement="bottom"><span><i class="fa-brands fa-square-twitter fa-lg" aria-hidden="true"></i></span>
            <span class="sr-only">Twitter</span></a>
        </li>
        <li class="nav-item">
          
          
          
          
          
          
          
          
          <a href="/blog" title="Blog" class="nav-link" rel="noopener" target="_blank" data-bs-toggle="tooltip" data-bs-placement="bottom"><span><i class="fas fa-blog fa-lg" aria-hidden="true"></i></span>
            <span class="sr-only">Blog</span></a>
        </li>
</ul></div>
        
          <div class="navbar-item">
<script>
document.write(`
  <div class="version-switcher__container dropdown">
    <button id="pst-version-switcher-button-3"
      type="button"
      class="version-switcher__button btn btn-sm navbar-btn dropdown-toggle"
      data-bs-toggle="dropdown"
      aria-haspopup="listbox"
      aria-controls="pst-version-switcher-list-3"
      aria-label="Version switcher list"
    >
      Choose version  <!-- this text may get changed later by javascript -->
      <span class="caret"></span>
    </button>
    <div id="pst-version-switcher-list-3"
      class="version-switcher__menu dropdown-menu list-group-flush py-0"
      role="listbox" aria-labelledby="pst-version-switcher-button-3">
      <!-- dropdown will be populated by javascript on page load -->
    </div>
  </div>
`);
</script></div>
        
      </div>
    
  </div>
  
    <div class="sidebar-primary-items__start sidebar-primary__section">
        <div class="sidebar-primary-item">
<nav class="bd-docs-nav bd-links"
     aria-label="Section Navigation">
  <p class="bd-links__title" role="heading" aria-level="1">Section Navigation</p>
  <div class="bd-toc-item navbar-nav"><ul class="current nav bd-sidenav">
<li class="toctree-l1 has-children"><a class="reference internal" href="../executables.html">7.1. Executables</a><details open="open"><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l2"><a class="reference internal" href="../executables/grndb.html">7.1.1. <code class="docutils literal notranslate"><span class="pre">grndb</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="../executables/grnslap.html">7.1.2. grnslap</a></li>
<li class="toctree-l2"><a class="reference internal" href="../executables/groonga.html">7.1.3. <code class="docutils literal notranslate"><span class="pre">groonga</span></code> executable file</a></li>
<li class="toctree-l2"><a class="reference internal" href="../executables/groonga-benchmark.html">7.1.4. groonga-benchmark</a></li>
<li class="toctree-l2"><a class="reference internal" href="../executables/groonga-httpd.html">7.1.5. groonga-httpd</a></li>
<li class="toctree-l2"><a class="reference internal" href="../executables/groonga-server-http.html">7.1.6. Groonga HTTP server</a></li>
<li class="toctree-l2"><a class="reference internal" href="../executables/groonga-suggest-create-dataset.html">7.1.7. groonga-suggest-create-dataset</a></li>
<li class="toctree-l2"><a class="reference internal" href="../executables/groonga-suggest-httpd.html">7.1.8. <code class="docutils literal notranslate"><span class="pre">groonga-suggest-httpd</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="../executables/groonga-suggest-learner.html">7.1.9. groonga-suggest-learner</a></li>
</ul>
</details></li>
<li class="toctree-l1"><a class="reference internal" href="../output.html">7.2. Output</a></li>
<li class="toctree-l1 current active has-children"><a class="reference internal" href="../command.html">7.3. Command</a><details open="open"><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../command/command_version.html">7.3.1. Command version</a></li>
<li class="toctree-l2"><a class="reference internal" href="../command/output_format.html">7.3.2. Output format</a></li>
<li class="toctree-l2"><a class="reference internal" href="../command/output_trace_log.html">7.3.3. Output trace log</a></li>
<li class="toctree-l2"><a class="reference internal" href="../command/pretty_print.html">7.3.4. Pretty print</a></li>
<li class="toctree-l2"><a class="reference internal" href="../command/request_id.html">7.3.5. Request ID</a></li>
<li class="toctree-l2"><a class="reference internal" href="../command/request_timeout.html">7.3.6. Request timeout</a></li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../command/return_code.html">7.3.7. Return code</a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l3"><a class="reference internal" href="../command/return_codes/grn_operation_not_permitted.html">7.3.7.3.1. <code class="docutils literal notranslate"><span class="pre">-2:</span> <span class="pre">GRN_OPERATION_NOT_PERMITTED</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="../command/return_codes/grn_no_such_file_or_directory.html">7.3.7.3.2. <code class="docutils literal notranslate"><span class="pre">-3:</span> <span class="pre">GRN_NO_SUCH_FILE_OR_DIRECTORY</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="../command/return_codes/grn_input_output_error.html">7.3.7.3.3. <code class="docutils literal notranslate"><span class="pre">-6:</span> <span class="pre">GRN_INPUT_OUTPUT_ERROR</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="../command/return_codes/grn_not_enough_space.html">7.3.7.3.4. <code class="docutils literal notranslate"><span class="pre">-13:</span> <span class="pre">GRN_NOT_ENOUGH_SPACE</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="../command/return_codes/grn_invalid_argument.html">7.3.7.3.5. <code class="docutils literal notranslate"><span class="pre">-22:</span> <span class="pre">GRN_INVALID_ARGUMENT</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="../command/return_codes/grn_resource_deadlock_avoided.html">7.3.7.3.6. <code class="docutils literal notranslate"><span class="pre">-34:</span> <span class="pre">GRN_RESOURCE_DEADLOCK_AVOIDED</span></code></a></li>
</ul>
</details></li>
<li class="toctree-l2"><a class="reference internal" href="cache_limit.html">7.3.8. <code class="docutils literal notranslate"><span class="pre">cache_limit</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="check.html">7.3.9. <code class="docutils literal notranslate"><span class="pre">check</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="clearlock.html">7.3.10. <code class="docutils literal notranslate"><span class="pre">clearlock</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="column_copy.html">7.3.11. <code class="docutils literal notranslate"><span class="pre">column_copy</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="column_create.html">7.3.12. <code class="docutils literal notranslate"><span class="pre">column_create</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="column_list.html">7.3.13. <code class="docutils literal notranslate"><span class="pre">column_list</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="column_remove.html">7.3.14. <code class="docutils literal notranslate"><span class="pre">column_remove</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="column_rename.html">7.3.15. <code class="docutils literal notranslate"><span class="pre">column_rename</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="config_delete.html">7.3.16. <code class="docutils literal notranslate"><span class="pre">config_delete</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="config_get.html">7.3.17. <code class="docutils literal notranslate"><span class="pre">config_get</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="config_set.html">7.3.18. <code class="docutils literal notranslate"><span class="pre">config_set</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="database_unmap.html">7.3.19. <code class="docutils literal notranslate"><span class="pre">database_unmap</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="define_selector.html">7.3.20. <code class="docutils literal notranslate"><span class="pre">define_selector</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="defrag.html">7.3.21. <code class="docutils literal notranslate"><span class="pre">defrag</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="delete.html">7.3.22. <code class="docutils literal notranslate"><span class="pre">delete</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="dump.html">7.3.23. <code class="docutils literal notranslate"><span class="pre">dump</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="index_column_diff.html">7.3.24. <code class="docutils literal notranslate"><span class="pre">index_column_diff</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="io_flush.html">7.3.25. <code class="docutils literal notranslate"><span class="pre">io_flush</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="load.html">7.3.26. <code class="docutils literal notranslate"><span class="pre">load</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="lock_acquire.html">7.3.27. <code class="docutils literal notranslate"><span class="pre">lock_acquire</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="lock_clear.html">7.3.28. <code class="docutils literal notranslate"><span class="pre">lock_clear</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="lock_release.html">7.3.29. <code class="docutils literal notranslate"><span class="pre">lock_release</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="log_level.html">7.3.30. <code class="docutils literal notranslate"><span class="pre">log_level</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="log_put.html">7.3.31. <code class="docutils literal notranslate"><span class="pre">log_put</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="log_reopen.html">7.3.32. <code class="docutils literal notranslate"><span class="pre">log_reopen</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="logical_count.html">7.3.33. <code class="docutils literal notranslate"><span class="pre">logical_count</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="logical_parameters.html">7.3.34. <code class="docutils literal notranslate"><span class="pre">logical_parameters</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="logical_range_filter.html">7.3.35. <code class="docutils literal notranslate"><span class="pre">logical_range_filter</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="logical_select.html">7.3.36. <code class="docutils literal notranslate"><span class="pre">logical_select</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="logical_shard_list.html">7.3.37. <code class="docutils literal notranslate"><span class="pre">logical_shard_list</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="logical_table_remove.html">7.3.38. <code class="docutils literal notranslate"><span class="pre">logical_table_remove</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="normalize.html">7.3.39. <code class="docutils literal notranslate"><span class="pre">normalize</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="normalizer_list.html">7.3.40. <code class="docutils literal notranslate"><span class="pre">normalizer_list</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="object_exist.html">7.3.41. <code class="docutils literal notranslate"><span class="pre">object_exist</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="object_inspect.html">7.3.42. <code class="docutils literal notranslate"><span class="pre">object_inspect</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="object_list.html">7.3.43. <code class="docutils literal notranslate"><span class="pre">object_list</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="object_remove.html">7.3.44. <code class="docutils literal notranslate"><span class="pre">object_remove</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="plugin_register.html">7.3.45. <code class="docutils literal notranslate"><span class="pre">plugin_register</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="plugin_unregister.html">7.3.46. <code class="docutils literal notranslate"><span class="pre">plugin_unregister</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="query_expand.html">7.3.47. <code class="docutils literal notranslate"><span class="pre">query_expand</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="quit.html">7.3.48. <code class="docutils literal notranslate"><span class="pre">quit</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="range_filter.html">7.3.49. <code class="docutils literal notranslate"><span class="pre">range_filter</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="reference_acquire.html">7.3.50. <code class="docutils literal notranslate"><span class="pre">reference_acquire</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="reference_release.html">7.3.51. <code class="docutils literal notranslate"><span class="pre">reference_release</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="register.html">7.3.52. <code class="docutils literal notranslate"><span class="pre">register</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="reindex.html">7.3.53. <code class="docutils literal notranslate"><span class="pre">reindex</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="request_cancel.html">7.3.54. <code class="docutils literal notranslate"><span class="pre">request_cancel</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="ruby_eval.html">7.3.55. <code class="docutils literal notranslate"><span class="pre">ruby_eval</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="schema.html">7.3.56. <code class="docutils literal notranslate"><span class="pre">schema</span></code></a></li>
<li class="toctree-l2 current active"><a class="current reference internal" href="#">7.3.57. <code class="docutils literal notranslate"><span class="pre">select</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="shutdown.html">7.3.58. <code class="docutils literal notranslate"><span class="pre">shutdown</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="status.html">7.3.59. <code class="docutils literal notranslate"><span class="pre">status</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="suggest.html">7.3.60. <code class="docutils literal notranslate"><span class="pre">suggest</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="table_copy.html">7.3.61. <code class="docutils literal notranslate"><span class="pre">table_copy</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="table_create.html">7.3.62. <code class="docutils literal notranslate"><span class="pre">table_create</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="table_list.html">7.3.63. <code class="docutils literal notranslate"><span class="pre">table_list</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="table_remove.html">7.3.64. <code class="docutils literal notranslate"><span class="pre">table_remove</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="table_rename.html">7.3.65. <code class="docutils literal notranslate"><span class="pre">table_rename</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="table_tokenize.html">7.3.66. <code class="docutils literal notranslate"><span class="pre">table_tokenize</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="thread_dump.html">7.3.67. <code class="docutils literal notranslate"><span class="pre">thread_dump</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="thread_limit.html">7.3.68. <code class="docutils literal notranslate"><span class="pre">thread_limit</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="tokenize.html">7.3.69. <code class="docutils literal notranslate"><span class="pre">tokenize</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="tokenizer_list.html">7.3.70. <code class="docutils literal notranslate"><span class="pre">tokenizer_list</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="truncate.html">7.3.71. <code class="docutils literal notranslate"><span class="pre">truncate</span></code></a></li>
</ul>
</details></li>
<li class="toctree-l1"><a class="reference internal" href="../types.html">7.4. Data types</a></li>
<li class="toctree-l1"><a class="reference internal" href="../tables.html">7.5. Tables</a></li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../column.html">7.6. Column</a><details open="open"><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l2"><a class="reference internal" href="../columns/scalar.html">7.6.1. Scalar column</a></li>
<li class="toctree-l2"><a class="reference internal" href="../columns/vector.html">7.6.2. Vector column</a></li>
<li class="toctree-l2"><a class="reference internal" href="../columns/pseudo.html">7.6.3. Pseudo column</a></li>
<li class="toctree-l2"><a class="reference internal" href="../columns/index.html">7.6.4. Index column</a></li>
</ul>
</details></li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../normalizers.html">7.7. Normalizers</a><details open="open"><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l2"><a class="reference internal" href="../normalizers/normalizer_auto.html">7.7.2.1. <code class="docutils literal notranslate"><span class="pre">NormalizerAuto</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="../normalizers/normalizer_nfkc100.html">7.7.2.2. <code class="docutils literal notranslate"><span class="pre">NormalizerNFKC100</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="../normalizers/normalizer_nfkc121.html">7.7.2.3. <code class="docutils literal notranslate"><span class="pre">NormalizerNFKC121</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="../normalizers/normalizer_nfkc130.html">7.7.2.4. <code class="docutils literal notranslate"><span class="pre">NormalizerNFKC130</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="../normalizers/normalizer_nfkc150.html">7.7.2.5. <code class="docutils literal notranslate"><span class="pre">NormalizerNFKC150</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="../normalizers/normalizer_nfkc51.html">7.7.2.6. <code class="docutils literal notranslate"><span class="pre">NormalizerNFKC51</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="../normalizers/normalizer_table.html">7.7.2.7. <code class="docutils literal notranslate"><span class="pre">NormalizerTable</span></code></a></li>
</ul>
</details></li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../tokenizers.html">7.8. Tokenizers</a><details open="open"><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l2"><a class="reference internal" href="../tokenizer/summary.html">7.8.1. Summary</a></li>
<li class="toctree-l2"><a class="reference internal" href="../tokenizers/token_bigram.html">7.8.2. <code class="docutils literal notranslate"><span class="pre">TokenBigram</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="../tokenizers/token_bigram_ignore_blank.html">7.8.3. <code class="docutils literal notranslate"><span class="pre">TokenBigramIgnoreBlank</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="../tokenizers/token_bigram_ignore_blank_split_symbol.html">7.8.4. <code class="docutils literal notranslate"><span class="pre">TokenBigramIgnoreBlankSplitSymbol</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="../tokenizers/token_bigram_ignore_blank_split_symbol_alpha.html">7.8.5. <code class="docutils literal notranslate"><span class="pre">TokenBigramIgnoreBlankSplitSymbolAlpha</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="../tokenizers/token_bigram_ignore_blank_split_symbol_alpha_digit.html">7.8.6. <code class="docutils literal notranslate"><span class="pre">TokenBigramIgnoreBlankSplitSymbolAlphaDigit</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="../tokenizers/token_bigram_split_symbol.html">7.8.7. <code class="docutils literal notranslate"><span class="pre">TokenBigramSplitSymbol</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="../tokenizers/token_bigram_split_symbol_alpha.html">7.8.8. <code class="docutils literal notranslate"><span class="pre">TokenBigramSplitSymbolAlpha</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="../tokenizers/token_bigram_split_symbol_alpha_digit.html">7.8.9. <code class="docutils literal notranslate"><span class="pre">TokenBigramSplitSymbolAlphaDigit</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="../tokenizers/token_delimit.html">7.8.10. <code class="docutils literal notranslate"><span class="pre">TokenDelimit</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="../tokenizers/token_delimit_null.html">7.8.11. <code class="docutils literal notranslate"><span class="pre">TokenDelimitNull</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="../tokenizers/token_mecab.html">7.8.12. <code class="docutils literal notranslate"><span class="pre">TokenMecab</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="../tokenizers/token_ngram.html">7.8.13. <code class="docutils literal notranslate"><span class="pre">TokenNgram</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="../tokenizers/token_pattern.html">7.8.14. <code class="docutils literal notranslate"><span class="pre">TokenPattern</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="../tokenizers/token_regexp.html">7.8.15. <code class="docutils literal notranslate"><span class="pre">TokenRegexp</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="../tokenizers/token_table.html">7.8.16. <code class="docutils literal notranslate"><span class="pre">TokenTable</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="../tokenizers/token_trigram.html">7.8.17. <code class="docutils literal notranslate"><span class="pre">TokenTrigram</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="../tokenizers/token_unigram.html">7.8.18. <code class="docutils literal notranslate"><span class="pre">TokenUnigram</span></code></a></li>
</ul>
</details></li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../token_filters.html">7.9. Token filters</a><details open="open"><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l2"><a class="reference internal" href="../token_filter/summary.html">7.9.1. Summary</a></li>
<li class="toctree-l2"><a class="reference internal" href="../token_filters/token_filter_nfkc100.html">7.9.2. <code class="docutils literal notranslate"><span class="pre">TokenFilterNFKC100</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="../token_filters/token_filter_nfkc150.html">7.9.3. <code class="docutils literal notranslate"><span class="pre">TokenFilterNFKC150</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="../token_filters/token_filter_stem.html">7.9.4. <code class="docutils literal notranslate"><span class="pre">TokenFilterStem</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="../token_filters/token_filter_stop_word.html">7.9.5. <code class="docutils literal notranslate"><span class="pre">TokenFilterStopWord</span></code></a></li>
</ul>
</details></li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../query_expanders.html">7.10. Query expanders</a><details open="open"><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l2"><a class="reference internal" href="../query_expanders/tsv.html">7.10.1. QueryExpanderTSV</a></li>
</ul>
</details></li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../scorer.html">7.11. Scorer</a><details open="open"><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l2"><a class="reference internal" href="../scorers/scorer_tf_at_most.html">7.11.3.1. <code class="docutils literal notranslate"><span class="pre">scorer_tf_at_most</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="../scorers/scorer_tf_idf.html">7.11.3.2. <code class="docutils literal notranslate"><span class="pre">scorer_tf_idf</span></code></a></li>
</ul>
</details></li>
<li class="toctree-l1"><a class="reference internal" href="../cast.html">7.12. Cast</a></li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../grn_expr.html">7.13. grn_expr</a><details open="open"><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l2"><a class="reference internal" href="../grn_expr/query_syntax.html">7.13.1. Query syntax</a></li>
<li class="toctree-l2"><a class="reference internal" href="../grn_expr/script_syntax.html">7.13.2. Script syntax</a></li>
</ul>
</details></li>
<li class="toctree-l1"><a class="reference internal" href="../regular_expression.html">7.14. Regular expression</a></li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../function.html">7.15. Function</a><details open="open"><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l2"><a class="reference internal" href="../functions/between.html">7.15.1. <code class="docutils literal notranslate"><span class="pre">between</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="../functions/cast_loose.html">7.15.2. <code class="docutils literal notranslate"><span class="pre">cast_loose</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="../functions/edit_distance.html">7.15.3. edit_distance</a></li>
<li class="toctree-l2"><a class="reference internal" href="../functions/escalate.html">7.15.4. <code class="docutils literal notranslate"><span class="pre">escalate</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="../functions/fuzzy_search.html">7.15.5. <code class="docutils literal notranslate"><span class="pre">fuzzy_search</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="../functions/geo_distance.html">7.15.6. <code class="docutils literal notranslate"><span class="pre">geo_distance</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="../functions/geo_in_circle.html">7.15.7. geo_in_circle</a></li>
<li class="toctree-l2"><a class="reference internal" href="../functions/geo_in_rectangle.html">7.15.8. geo_in_rectangle</a></li>
<li class="toctree-l2"><a class="reference internal" href="../functions/highlight.html">7.15.9. <code class="docutils literal notranslate"><span class="pre">highlight</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="../functions/highlight_full.html">7.15.10. <code class="docutils literal notranslate"><span class="pre">highlight_full</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="../functions/highlight_html.html">7.15.11. <code class="docutils literal notranslate"><span class="pre">highlight_html</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="../functions/html_untag.html">7.15.12. <code class="docutils literal notranslate"><span class="pre">html_untag</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="../functions/in_records.html">7.15.13. <code class="docutils literal notranslate"><span class="pre">in_records</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="../functions/in_values.html">7.15.14. <code class="docutils literal notranslate"><span class="pre">in_values</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="../functions/math_abs.html">7.15.15. <code class="docutils literal notranslate"><span class="pre">math_abs</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="../functions/now.html">7.15.16. now</a></li>
<li class="toctree-l2"><a class="reference internal" href="../functions/number_classify.html">7.15.17. <code class="docutils literal notranslate"><span class="pre">number_classify</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="../functions/prefix_rk_search.html">7.15.18. <code class="docutils literal notranslate"><span class="pre">prefix_rk_search</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="../functions/query.html">7.15.19. <code class="docutils literal notranslate"><span class="pre">query</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="../functions/query_parallel_or.html">7.15.20. <code class="docutils literal notranslate"><span class="pre">query_parallel_or</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="../functions/rand.html">7.15.21. rand</a></li>
<li class="toctree-l2"><a class="reference internal" href="../functions/snippet.html">7.15.22. <code class="docutils literal notranslate"><span class="pre">snippet</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="../functions/snippet_html.html">7.15.23. <code class="docutils literal notranslate"><span class="pre">snippet_html</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="../functions/string_length.html">7.15.24. <code class="docutils literal notranslate"><span class="pre">string_length</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="../functions/string_slice.html">7.15.25. <code class="docutils literal notranslate"><span class="pre">string_slice</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="../functions/string_substring.html">7.15.26. <code class="docutils literal notranslate"><span class="pre">string_substring</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="../functions/sub_filter.html">7.15.27. <code class="docutils literal notranslate"><span class="pre">sub_filter</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="../functions/time_classify_day.html">7.15.28. <code class="docutils literal notranslate"><span class="pre">time_classify_day</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="../functions/time_classify_day_of_week.html">7.15.29. <code class="docutils literal notranslate"><span class="pre">time_classify_day_of_week</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="../functions/time_classify_hour.html">7.15.30. <code class="docutils literal notranslate"><span class="pre">time_classify_hour</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="../functions/time_classify_minute.html">7.15.31. <code class="docutils literal notranslate"><span class="pre">time_classify_minute</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="../functions/time_classify_month.html">7.15.32. <code class="docutils literal notranslate"><span class="pre">time_classify_month</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="../functions/time_classify_second.html">7.15.33. <code class="docutils literal notranslate"><span class="pre">time_classify_second</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="../functions/time_classify_week.html">7.15.34. <code class="docutils literal notranslate"><span class="pre">time_classify_week</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="../functions/time_classify_year.html">7.15.35. <code class="docutils literal notranslate"><span class="pre">time_classify_year</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="../functions/vector_find.html">7.15.36. <code class="docutils literal notranslate"><span class="pre">vector_find</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="../functions/vector_new.html">7.15.37. <code class="docutils literal notranslate"><span class="pre">vector_new</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="../functions/vector_size.html">7.15.38. <code class="docutils literal notranslate"><span class="pre">vector_size</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="../functions/vector_slice.html">7.15.39. <code class="docutils literal notranslate"><span class="pre">vector_slice</span></code></a></li>
</ul>
</details></li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../window_function.html">7.16. Window function</a><details open="open"><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l2"><a class="reference internal" href="../window_functions/record_number.html">7.16.1. <code class="docutils literal notranslate"><span class="pre">record_number</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="../window_functions/window_count.html">7.16.2. <code class="docutils literal notranslate"><span class="pre">window_count</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="../window_functions/window_rank.html">7.16.3. <code class="docutils literal notranslate"><span class="pre">window_rank</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="../window_functions/window_record_number.html">7.16.4. <code class="docutils literal notranslate"><span class="pre">window_record_number</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="../window_functions/window_sum.html">7.16.5. <code class="docutils literal notranslate"><span class="pre">window_sum</span></code></a></li>
</ul>
</details></li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../operations.html">7.17. Operations</a><details open="open"><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l2"><a class="reference internal" href="../operations/geolocation_search.html">7.17.1. Geolocation search</a></li>
<li class="toctree-l2"><a class="reference internal" href="../operations/prefix_rk_search.html">7.17.2. Prefix RK search</a></li>
</ul>
</details></li>
<li class="toctree-l1"><a class="reference internal" href="../configuration.html">7.18. Configuration</a></li>
<li class="toctree-l1"><a class="reference internal" href="../alias.html">7.19. Alias</a></li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../suggest.html">7.20. Suggest</a><details open="open"><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l2"><a class="reference internal" href="../suggest/introduction.html">7.20.1. Introduction</a></li>
<li class="toctree-l2"><a class="reference internal" href="../suggest/completion.html">7.20.2. Completion</a></li>
<li class="toctree-l2"><a class="reference internal" href="../suggest/correction.html">7.20.3. Correction</a></li>
<li class="toctree-l2"><a class="reference internal" href="../suggest/suggestion.html">7.20.4. Suggestion</a></li>
</ul>
</details></li>
<li class="toctree-l1"><a class="reference internal" href="../indexing.html">7.21. Indexing</a></li>
<li class="toctree-l1"><a class="reference internal" href="../sharding.html">7.22. Sharding</a></li>
<li class="toctree-l1"><a class="reference internal" href="../log.html">7.23. Log</a></li>
<li class="toctree-l1"><a class="reference internal" href="../tuning.html">7.24. Tuning</a></li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../api.html">7.25. API</a><details open="open"><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l2"><a class="reference internal" href="../api/overview.html">7.25.1. Overview</a></li>
<li class="toctree-l2"><a class="reference internal" href="../api/global_configurations.html">7.25.2. Global configurations</a></li>
<li class="toctree-l2"><a class="reference internal" href="../api/plugin.html">7.25.3. Plugin</a></li>
<li class="toctree-l2"><a class="reference internal" href="../api/grn_cache.html">7.25.4. <code class="docutils literal notranslate"><span class="pre">grn_cache</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="../api/grn_column.html">7.25.5. <code class="docutils literal notranslate"><span class="pre">grn_column</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="../api/grn_command_version.html">7.25.6. <code class="docutils literal notranslate"><span class="pre">grn_command_version</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="../api/grn_content_type.html">7.25.7. <code class="docutils literal notranslate"><span class="pre">grn_content_type</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="../api/grn_ctx.html">7.25.8. <code class="docutils literal notranslate"><span class="pre">grn_ctx</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="../api/grn_db.html">7.25.9. <code class="docutils literal notranslate"><span class="pre">grn_db</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="../api/grn_encoding.html">7.25.10. <code class="docutils literal notranslate"><span class="pre">grn_encoding</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="../api/grn_expr.html">7.25.11. grn_expr</a></li>
<li class="toctree-l2"><a class="reference internal" href="../api/grn_geo.html">7.25.12. <code class="docutils literal notranslate"><span class="pre">grn_geo</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="../api/grn_hook.html">7.25.13. <code class="docutils literal notranslate"><span class="pre">grn_hook</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="../api/grn_ii.html">7.25.14. <code class="docutils literal notranslate"><span class="pre">grn_ii</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="../api/grn_index_cursor.html">7.25.15. <code class="docutils literal notranslate"><span class="pre">grn_index_cursor</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="../api/grn_info.html">7.25.16. <code class="docutils literal notranslate"><span class="pre">grn_info</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="../api/grn_inspect.html">7.25.17. <code class="docutils literal notranslate"><span class="pre">grn_inspect</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="../api/grn_match_escalation.html">7.25.18. <code class="docutils literal notranslate"><span class="pre">grn_match_escalation</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="../api/grn_obj.html">7.25.19. <code class="docutils literal notranslate"><span class="pre">grn_obj</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="../api/grn_proc.html">7.25.20. <code class="docutils literal notranslate"><span class="pre">grn_proc</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="../api/grn_search.html">7.25.21. <code class="docutils literal notranslate"><span class="pre">grn_search</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="../api/grn_table.html">7.25.22. <code class="docutils literal notranslate"><span class="pre">grn_table</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="../api/grn_table_cursor.html">7.25.23. <code class="docutils literal notranslate"><span class="pre">grn_table_cursor</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="../api/grn_thread.html">7.25.24. <code class="docutils literal notranslate"><span class="pre">grn_thread_*</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="../api/grn_type.html">7.25.25. <code class="docutils literal notranslate"><span class="pre">grn_type</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="../api/grn_user_data.html">7.25.26. <code class="docutils literal notranslate"><span class="pre">grn_user_data</span></code></a></li>
</ul>
</details></li>
</ul>
</div>
</nav></div>
    </div>
  
  
  <div class="sidebar-primary-items__end sidebar-primary__section">
  </div>
  
  <div id="rtd-footer-container"></div>


      </div>
      
      <main id="main-content" class="bd-main" role="main">
        
        
          <div class="bd-content">
            <div class="bd-article-container">
              
              <div class="bd-header-article d-print-none">
<div class="header-article-items header-article__inner">
  
    <div class="header-article-items__start">
      
        <div class="header-article-item">



<nav aria-label="Breadcrumb" class="d-print-none">
  <ul class="bd-breadcrumbs">
    
    <li class="breadcrumb-item breadcrumb-home">
      <a href="../../index.html" class="nav-link" aria-label="Home">
        <i class="fa-solid fa-home"></i>
      </a>
    </li>
    
    <li class="breadcrumb-item"><a href="../../reference.html" class="nav-link"><span class="section-number">7. </span>Reference manual</a></li>
    
    
    <li class="breadcrumb-item"><a href="../command.html" class="nav-link"><span class="section-number">7.3. </span>Command</a></li>
    
    <li class="breadcrumb-item active" aria-current="page"><span...</li>
  </ul>
</nav>
</div>
      
    </div>
  
  
</div>
</div>
              
              
              
                
<div id="searchbox"></div>
                <article class="bd-article">
                  
  <section id="select">
<h1><span class="section-number">7.3.57. </span><code class="docutils literal notranslate"><span class="pre">select</span></code><a class="headerlink" href="#select" title="Link to this heading">#</a></h1>
<section id="summary">
<h2><span class="section-number">7.3.57.1. </span>Summary<a class="headerlink" href="#summary" title="Link to this heading">#</a></h2>
<p><code class="docutils literal notranslate"><span class="pre">select</span></code> searches records that are matched to specified conditions
from a table and then outputs them.</p>
<p><code class="docutils literal notranslate"><span class="pre">select</span></code> is the most important command in groonga. You need to
understand <code class="docutils literal notranslate"><span class="pre">select</span></code> to use the full power of Groonga.</p>
</section>
<section id="syntax">
<h2><span class="section-number">7.3.57.2. </span>Syntax<a class="headerlink" href="#syntax" title="Link to this heading">#</a></h2>
<p>This command takes many parameters.</p>
<p>The required parameter is only <code class="docutils literal notranslate"><span class="pre">table</span></code>. Other parameters are
optional:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">select</span> <span class="n">table</span>
       <span class="p">[</span><span class="n">match_columns</span><span class="o">=</span><span class="n">null</span><span class="p">]</span>
       <span class="p">[</span><span class="n">query</span><span class="o">=</span><span class="n">null</span><span class="p">]</span>
       <span class="p">[</span><span class="nb">filter</span><span class="o">=</span><span class="n">null</span><span class="p">]</span>
       <span class="p">[</span><span class="n">scorer</span><span class="o">=</span><span class="n">null</span><span class="p">]</span>
       <span class="p">[</span><span class="n">sortby</span><span class="o">=</span><span class="n">null</span><span class="p">]</span>
       <span class="p">[</span><span class="n">output_columns</span><span class="o">=</span><span class="s2">&quot;_id, _key, *&quot;</span><span class="p">]</span>
       <span class="p">[</span><span class="n">offset</span><span class="o">=</span><span class="mi">0</span><span class="p">]</span>
       <span class="p">[</span><span class="n">limit</span><span class="o">=</span><span class="mi">10</span><span class="p">]</span>
       <span class="p">[</span><span class="n">drilldown</span><span class="o">=</span><span class="n">null</span><span class="p">]</span>
       <span class="p">[</span><span class="n">drilldown_sortby</span><span class="o">=</span><span class="n">null</span><span class="p">]</span>
       <span class="p">[</span><span class="n">drilldown_output_columns</span><span class="o">=</span><span class="s2">&quot;_key, _nsubrecs&quot;</span><span class="p">]</span>
       <span class="p">[</span><span class="n">drilldown_offset</span><span class="o">=</span><span class="mi">0</span><span class="p">]</span>
       <span class="p">[</span><span class="n">drilldown_limit</span><span class="o">=</span><span class="mi">10</span><span class="p">]</span>
       <span class="p">[</span><span class="n">cache</span><span class="o">=</span><span class="n">yes</span><span class="p">]</span>
       <span class="p">[</span><span class="n">match_escalation_threshold</span><span class="o">=</span><span class="mi">0</span><span class="p">]</span>
       <span class="p">[</span><span class="n">query_expansion</span><span class="o">=</span><span class="n">null</span><span class="p">]</span>
       <span class="p">[</span><span class="n">query_flags</span><span class="o">=</span><span class="n">ALLOW_PRAGMA</span><span class="o">|</span><span class="n">ALLOW_COLUMN</span><span class="p">]</span>
       <span class="p">[</span><span class="n">query_expander</span><span class="o">=</span><span class="n">null</span><span class="p">]</span>
       <span class="p">[</span><span class="n">adjuster</span><span class="o">=</span><span class="n">null</span><span class="p">]</span>
       <span class="p">[</span><span class="n">drilldown_calc_types</span><span class="o">=</span><span class="n">NONE</span><span class="p">]</span>
       <span class="p">[</span><span class="n">drilldown_calc_target</span><span class="o">=</span><span class="n">null</span><span class="p">]</span>
       <span class="p">[</span><span class="n">drilldown_filter</span><span class="o">=</span><span class="n">null</span><span class="p">]</span>
       <span class="p">[</span><span class="n">sort_keys</span><span class="o">=</span><span class="n">null</span><span class="p">]</span>
       <span class="p">[</span><span class="n">drilldown_sort_keys</span><span class="o">=</span><span class="n">null</span><span class="p">]</span>
       <span class="p">[</span><span class="n">match_escalation</span><span class="o">=</span><span class="n">auto</span><span class="p">]</span>
       <span class="p">[</span><span class="n">load_table</span><span class="o">=</span><span class="n">null</span><span class="p">]</span>
       <span class="p">[</span><span class="n">load_columns</span><span class="o">=</span><span class="n">null</span><span class="p">]</span>
       <span class="p">[</span><span class="n">load_values</span><span class="o">=</span><span class="n">null</span><span class="p">]</span>
       <span class="p">[</span><span class="n">drilldown_max_n_target_records</span><span class="o">=-</span><span class="mi">1</span><span class="p">]</span>
       <span class="p">[</span><span class="n">n_workers</span><span class="o">=</span><span class="mi">0</span><span class="p">]</span>
       <span class="p">[</span><span class="n">fuzzy_max_distance_ratio</span><span class="o">=</span><span class="mi">0</span><span class="p">]</span>
       <span class="p">[</span><span class="n">fuzzy_max_distance</span><span class="o">=</span><span class="mi">0</span><span class="p">]</span>
       <span class="p">[</span><span class="n">fuzzy_max_expansions</span><span class="o">=</span><span class="mi">10</span><span class="p">]</span>
       <span class="p">[</span><span class="n">fuzzy_prefix_length</span><span class="o">=</span><span class="mi">0</span><span class="p">]</span>
       <span class="p">[</span><span class="n">fuzzy_with_transposition</span><span class="o">=</span><span class="n">yes</span><span class="p">]</span>
       <span class="p">[</span><span class="n">fuzzy_tokenize</span><span class="o">=</span><span class="n">no</span><span class="p">]</span>
</pre></div>
</div>
<p>This command has the following named parameters for dynamic columns:</p>
<blockquote>
<div><ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">columns[${NAME}].stage=null</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">columns[${NAME}].flags=COLUMN_SCALAR</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">columns[${NAME}].type=null</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">columns[${NAME}].value=null</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">columns[${NAME}].window.sort_keys=null</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">columns[${NAME}].window.group_keys=null</span></code></p></li>
</ul>
</div></blockquote>
<p>You can use one or more alphabets, digits, <code class="docutils literal notranslate"><span class="pre">_</span></code> for <code class="docutils literal notranslate"><span class="pre">${NAME}</span></code>. For
example, <code class="docutils literal notranslate"><span class="pre">column1</span></code> is a valid <code class="docutils literal notranslate"><span class="pre">${NAME}</span></code>. This is the same rule as
normal column. See also <a class="reference internal" href="column_create.html#column-create-name"><span class="std std-ref">name</span></a>.</p>
<p>Parameters that have the same <code class="docutils literal notranslate"><span class="pre">${NAME}</span></code> are grouped.</p>
<p>For example, the following parameters specify one dynamic column:</p>
<blockquote>
<div><ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">--columns[name].stage</span> <span class="pre">initial</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">--columns[name].type</span> <span class="pre">UInt32</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">--columns[name].value</span> <span class="pre">29</span></code></p></li>
</ul>
</div></blockquote>
<p>The following parameters specify two dynamic columns:</p>
<blockquote>
<div><ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">--columns[name1].stage</span> <span class="pre">initial</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">--columns[name1].type</span> <span class="pre">UInt32</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">--columns[name1].value</span> <span class="pre">29</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">--columns[name2].stage</span> <span class="pre">filtered</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">--columns[name2].type</span> <span class="pre">Float</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">--columns[name2].value</span> <span class="pre">'_score</span> <span class="pre">*</span> <span class="pre">0.1'</span></code></p></li>
</ul>
</div></blockquote>
<p>This command has the following named parameters for advanced drilldown:</p>
<blockquote>
<div><ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">drilldowns[${LABEL}].keys=null</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">drilldowns[${LABEL}].sort_keys=null</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">drilldowns[${LABEL}].output_columns=&quot;_key,</span> <span class="pre">_nsubrecs&quot;</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">drilldowns[${LABEL}].offset=0</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">drilldowns[${LABEL}].limit=10</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">drilldowns[${LABEL}].calc_types=NONE</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">drilldowns[${LABEL}].calc_target=null</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">drilldowns[${LABEL}].filter=null</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">drilldowns[${LABEL}].max_n_target_records=-1</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">drilldowns[${LABEL}].columns[${NAME}].stage=null</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">drilldowns[${LABEL}].columns[${NAME}].flags=COLUMN_SCALAR</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">drilldowns[${LABEL}].columns[${NAME}].type=null</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">drilldowns[${LABEL}].columns[${NAME}].value=null</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">drilldowns[${LABEL}].columns[${NAME}].window.sort_keys=null</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">drilldowns[${LABEL}].columns[${NAME}].window.group_keys=null</span></code></p></li>
</ul>
</div></blockquote>
<div class="deprecated">
<p><span class="versionmodified deprecated">Deprecated since version 6.0.3: </span><code class="docutils literal notranslate"><span class="pre">drilldown[...]</span></code> syntax is deprecated, Use <code class="docutils literal notranslate"><span class="pre">drilldowns[...]</span></code>
instead.</p>
</div>
<p>You can use one or more alphabets, digits, <code class="docutils literal notranslate"><span class="pre">_</span></code> and <code class="docutils literal notranslate"><span class="pre">.</span></code> for
<code class="docutils literal notranslate"><span class="pre">${LABEL}</span></code>. For example, <code class="docutils literal notranslate"><span class="pre">parent.sub1</span></code> is a valid <code class="docutils literal notranslate"><span class="pre">${LABEL}</span></code>.</p>
<p>Parameters that have the same <code class="docutils literal notranslate"><span class="pre">${LABEL}</span></code> are grouped.</p>
<p>For example, the following parameters specify one drilldown:</p>
<blockquote>
<div><ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">--drilldowns[label].keys</span> <span class="pre">column</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">--drilldowns[label].sort_keys</span> <span class="pre">-_nsubrecs</span></code></p></li>
</ul>
</div></blockquote>
<p>The following parameters specify two drilldowns:</p>
<blockquote>
<div><ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">--drilldowns[label1].keys</span> <span class="pre">column1</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">--drilldowns[label1].sort_keys</span> <span class="pre">-_nsubrecs</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">--drilldowns[label2].keys</span> <span class="pre">column2</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">--drilldowns[label2].sort_keys</span> <span class="pre">_key</span></code></p></li>
</ul>
</div></blockquote>
</section>
<section id="usage">
<h2><span class="section-number">7.3.57.3. </span>Usage<a class="headerlink" href="#usage" title="Link to this heading">#</a></h2>
<p>Let’s learn about <code class="docutils literal notranslate"><span class="pre">select</span></code> usage with examples. This section shows
many popular usages.</p>
<p>Here are a schema definition and sample data to show usage.</p>
<p>Execution example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">table_create</span> <span class="n">Entries</span> <span class="n">TABLE_HASH_KEY</span> <span class="n">ShortText</span>
<span class="c1"># [[0,1337566253.89858,0.000355720520019531],true]</span>
<span class="n">column_create</span> <span class="n">Entries</span> <span class="n">content</span> <span class="n">COLUMN_SCALAR</span> <span class="n">Text</span>
<span class="c1"># [[0,1337566253.89858,0.000355720520019531],true]</span>
<span class="n">column_create</span> <span class="n">Entries</span> <span class="n">n_likes</span> <span class="n">COLUMN_SCALAR</span> <span class="n">UInt32</span>
<span class="c1"># [[0,1337566253.89858,0.000355720520019531],true]</span>
<span class="n">column_create</span> <span class="n">Entries</span> <span class="n">tag</span> <span class="n">COLUMN_SCALAR</span> <span class="n">ShortText</span>
<span class="c1"># [[0,1337566253.89858,0.000355720520019531],true]</span>
<span class="n">table_create</span> <span class="n">Terms</span> <span class="n">TABLE_PAT_KEY</span> <span class="n">ShortText</span> <span class="o">--</span><span class="n">default_tokenizer</span> <span class="n">TokenBigram</span> <span class="o">--</span><span class="n">normalizer</span> <span class="n">NormalizerAuto</span>
<span class="c1"># [[0,1337566253.89858,0.000355720520019531],true]</span>
<span class="n">column_create</span> <span class="n">Terms</span> <span class="n">entries_key_index</span> <span class="n">COLUMN_INDEX</span><span class="o">|</span><span class="n">WITH_POSITION</span> <span class="n">Entries</span> <span class="n">_key</span>
<span class="c1"># [[0,1337566253.89858,0.000355720520019531],true]</span>
<span class="n">column_create</span> <span class="n">Terms</span> <span class="n">entries_content_index</span> <span class="n">COLUMN_INDEX</span><span class="o">|</span><span class="n">WITH_POSITION</span> <span class="n">Entries</span> <span class="n">content</span>
<span class="c1"># [[0,1337566253.89858,0.000355720520019531],true]</span>
<span class="n">load</span> <span class="o">--</span><span class="n">table</span> <span class="n">Entries</span>
<span class="p">[</span>
<span class="p">{</span><span class="s2">&quot;_key&quot;</span><span class="p">:</span>    <span class="s2">&quot;The first post!&quot;</span><span class="p">,</span>
 <span class="s2">&quot;content&quot;</span><span class="p">:</span> <span class="s2">&quot;Welcome! This is my first post!&quot;</span><span class="p">,</span>
 <span class="s2">&quot;n_likes&quot;</span><span class="p">:</span> <span class="mi">5</span><span class="p">,</span>
 <span class="s2">&quot;tag&quot;</span><span class="p">:</span> <span class="s2">&quot;Hello&quot;</span><span class="p">},</span>
<span class="p">{</span><span class="s2">&quot;_key&quot;</span><span class="p">:</span>    <span class="s2">&quot;Groonga&quot;</span><span class="p">,</span>
 <span class="s2">&quot;content&quot;</span><span class="p">:</span> <span class="s2">&quot;I started to use Groonga. It&#39;s very fast!&quot;</span><span class="p">,</span>
 <span class="s2">&quot;n_likes&quot;</span><span class="p">:</span> <span class="mi">10</span><span class="p">,</span>
 <span class="s2">&quot;tag&quot;</span><span class="p">:</span> <span class="s2">&quot;Groonga&quot;</span><span class="p">},</span>
<span class="p">{</span><span class="s2">&quot;_key&quot;</span><span class="p">:</span>    <span class="s2">&quot;Mroonga&quot;</span><span class="p">,</span>
 <span class="s2">&quot;content&quot;</span><span class="p">:</span> <span class="s2">&quot;I also started to use Mroonga. It&#39;s also very fast! Really fast!&quot;</span><span class="p">,</span>
 <span class="s2">&quot;n_likes&quot;</span><span class="p">:</span> <span class="mi">15</span><span class="p">,</span>
 <span class="s2">&quot;tag&quot;</span><span class="p">:</span> <span class="s2">&quot;Groonga&quot;</span><span class="p">},</span>
<span class="p">{</span><span class="s2">&quot;_key&quot;</span><span class="p">:</span>    <span class="s2">&quot;Good-bye Senna&quot;</span><span class="p">,</span>
 <span class="s2">&quot;content&quot;</span><span class="p">:</span> <span class="s2">&quot;I migrated all Senna system!&quot;</span><span class="p">,</span>
 <span class="s2">&quot;n_likes&quot;</span><span class="p">:</span> <span class="mi">3</span><span class="p">,</span>
 <span class="s2">&quot;tag&quot;</span><span class="p">:</span> <span class="s2">&quot;Senna&quot;</span><span class="p">},</span>
<span class="p">{</span><span class="s2">&quot;_key&quot;</span><span class="p">:</span>    <span class="s2">&quot;Good-bye Tritonn&quot;</span><span class="p">,</span>
 <span class="s2">&quot;content&quot;</span><span class="p">:</span> <span class="s2">&quot;I also migrated all Tritonn system!&quot;</span><span class="p">,</span>
 <span class="s2">&quot;n_likes&quot;</span><span class="p">:</span> <span class="mi">3</span><span class="p">,</span>
 <span class="s2">&quot;tag&quot;</span><span class="p">:</span> <span class="s2">&quot;Senna&quot;</span><span class="p">}</span>
<span class="p">]</span>
<span class="c1"># [[0,1337566253.89858,0.000355720520019531],5]</span>
</pre></div>
</div>
<p>There is a table, <code class="docutils literal notranslate"><span class="pre">Entries</span></code>, for blog entries. An entry has title,
content, the number of likes for the entry and tag. Title is key of
<code class="docutils literal notranslate"><span class="pre">Entries</span></code>. Content is value of <code class="docutils literal notranslate"><span class="pre">Entries.content</span></code> column. The
number of likes is value of <code class="docutils literal notranslate"><span class="pre">Entries.n_likes</span></code> column. Tag is value
of <code class="docutils literal notranslate"><span class="pre">Entries.tag</span></code> column.</p>
<p><code class="docutils literal notranslate"><span class="pre">Entries._key</span></code> column and <code class="docutils literal notranslate"><span class="pre">Entries.content</span></code> column are indexed
using <code class="docutils literal notranslate"><span class="pre">TokenBigram</span></code> tokenizer. So both <code class="docutils literal notranslate"><span class="pre">Entries._key</span></code> and
<code class="docutils literal notranslate"><span class="pre">Entries.content</span></code> are fulltext search ready.</p>
<p>OK. The schema and data for examples are ready.</p>
<section id="simple-usage">
<span id="select-simple-usage"></span><h3><span class="section-number">7.3.57.3.1. </span>Simple usage<a class="headerlink" href="#simple-usage" title="Link to this heading">#</a></h3>
<p>Here is the most simple usage with the above schema and data. It outputs
all records in <code class="docutils literal notranslate"><span class="pre">Entries</span></code> table.</p>
<p>Execution example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">select</span> <span class="n">Entries</span>
<span class="c1"># [</span>
<span class="c1">#   [</span>
<span class="c1">#     0,</span>
<span class="c1">#     1337566253.89858,</span>
<span class="c1">#     0.000355720520019531</span>
<span class="c1">#   ],</span>
<span class="c1">#   [</span>
<span class="c1">#     [</span>
<span class="c1">#       [</span>
<span class="c1">#         5</span>
<span class="c1">#       ],</span>
<span class="c1">#       [</span>
<span class="c1">#         [</span>
<span class="c1">#           &quot;_id&quot;,</span>
<span class="c1">#           &quot;UInt32&quot;</span>
<span class="c1">#         ],</span>
<span class="c1">#         [</span>
<span class="c1">#           &quot;_key&quot;,</span>
<span class="c1">#           &quot;ShortText&quot;</span>
<span class="c1">#         ],</span>
<span class="c1">#         [</span>
<span class="c1">#           &quot;content&quot;,</span>
<span class="c1">#           &quot;Text&quot;</span>
<span class="c1">#         ],</span>
<span class="c1">#         [</span>
<span class="c1">#           &quot;n_likes&quot;,</span>
<span class="c1">#           &quot;UInt32&quot;</span>
<span class="c1">#         ],</span>
<span class="c1">#         [</span>
<span class="c1">#           &quot;tag&quot;,</span>
<span class="c1">#           &quot;ShortText&quot;</span>
<span class="c1">#         ]</span>
<span class="c1">#       ],</span>
<span class="c1">#       [</span>
<span class="c1">#         1,</span>
<span class="c1">#         &quot;The first post!&quot;,</span>
<span class="c1">#         &quot;Welcome! This is my first post!&quot;,</span>
<span class="c1">#         5,</span>
<span class="c1">#         &quot;Hello&quot;</span>
<span class="c1">#       ],</span>
<span class="c1">#       [</span>
<span class="c1">#         2,</span>
<span class="c1">#         &quot;Groonga&quot;,</span>
<span class="c1">#         &quot;I started to use Groonga. It&#39;s very fast!&quot;,</span>
<span class="c1">#         10,</span>
<span class="c1">#         &quot;Groonga&quot;</span>
<span class="c1">#       ],</span>
<span class="c1">#       [</span>
<span class="c1">#         3,</span>
<span class="c1">#         &quot;Mroonga&quot;,</span>
<span class="c1">#         &quot;I also started to use Mroonga. It&#39;s also very fast! Really fast!&quot;,</span>
<span class="c1">#         15,</span>
<span class="c1">#         &quot;Groonga&quot;</span>
<span class="c1">#       ],</span>
<span class="c1">#       [</span>
<span class="c1">#         4,</span>
<span class="c1">#         &quot;Good-bye Senna&quot;,</span>
<span class="c1">#         &quot;I migrated all Senna system!&quot;,</span>
<span class="c1">#         3,</span>
<span class="c1">#         &quot;Senna&quot;</span>
<span class="c1">#       ],</span>
<span class="c1">#       [</span>
<span class="c1">#         5,</span>
<span class="c1">#         &quot;Good-bye Tritonn&quot;,</span>
<span class="c1">#         &quot;I also migrated all Tritonn system!&quot;,</span>
<span class="c1">#         3,</span>
<span class="c1">#         &quot;Senna&quot;</span>
<span class="c1">#       ]</span>
<span class="c1">#     ]</span>
<span class="c1">#   ]</span>
<span class="c1"># ]</span>
</pre></div>
</div>
<p>Why does the command output all records? There are two reasons. The
first reason is that the command doesn’t specify any search
conditions. No search condition means all records are matched. The
second reason is that the number of all records is 5. <code class="docutils literal notranslate"><span class="pre">select</span></code>
command outputs 10 records at a maximum by default. There are only 5
records. It is less than 10. So the command outputs all records.</p>
</section>
<section id="search-conditions">
<h3><span class="section-number">7.3.57.3.2. </span>Search conditions<a class="headerlink" href="#search-conditions" title="Link to this heading">#</a></h3>
<p>Search conditions are specified by <code class="docutils literal notranslate"><span class="pre">query</span></code> or <code class="docutils literal notranslate"><span class="pre">filter</span></code>. You can
also specify both <code class="docutils literal notranslate"><span class="pre">query</span></code> and <code class="docutils literal notranslate"><span class="pre">filter</span></code>. It means that selected
records must be matched against both <code class="docutils literal notranslate"><span class="pre">query</span></code> and <code class="docutils literal notranslate"><span class="pre">filter</span></code>.</p>
<section id="search-condition-query">
<h4><span class="section-number">7.3.57.3.2.1. </span>Search condition: <code class="docutils literal notranslate"><span class="pre">query</span></code><a class="headerlink" href="#search-condition-query" title="Link to this heading">#</a></h4>
<p><code class="docutils literal notranslate"><span class="pre">query</span></code> is designed for search box in Web page. Imagine a search box
in google.com. You specify search conditions for <code class="docutils literal notranslate"><span class="pre">query</span></code> as space
separated keywords. For example, <code class="docutils literal notranslate"><span class="pre">search</span> <span class="pre">engine</span></code> means a matched
record should contain two words, <code class="docutils literal notranslate"><span class="pre">search</span></code> and <code class="docutils literal notranslate"><span class="pre">engine</span></code>.</p>
<p>Normally, <code class="docutils literal notranslate"><span class="pre">query</span></code> parameter is used for specifying fulltext search
conditions. It can be used for non fulltext search conditions but
<code class="docutils literal notranslate"><span class="pre">filter</span></code> is used for the propose.</p>
<p><code class="docutils literal notranslate"><span class="pre">query</span></code> parameter is used with <code class="docutils literal notranslate"><span class="pre">match_columns</span></code> parameter when
<code class="docutils literal notranslate"><span class="pre">query</span></code> parameter is used for specifying fulltext search
conditions. <code class="docutils literal notranslate"><span class="pre">match_columns</span></code> specifies which columnes and indexes are
matched against <code class="docutils literal notranslate"><span class="pre">query</span></code>.</p>
<p>Here is a simple <code class="docutils literal notranslate"><span class="pre">query</span></code> usage example.</p>
<p>Execution example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">select</span> <span class="n">Entries</span> <span class="o">--</span><span class="n">match_columns</span> <span class="n">content</span> <span class="o">--</span><span class="n">query</span> <span class="n">fast</span>
<span class="c1"># [</span>
<span class="c1">#   [</span>
<span class="c1">#     0,</span>
<span class="c1">#     1337566253.89858,</span>
<span class="c1">#     0.000355720520019531</span>
<span class="c1">#   ],</span>
<span class="c1">#   [</span>
<span class="c1">#     [</span>
<span class="c1">#       [</span>
<span class="c1">#         2</span>
<span class="c1">#       ],</span>
<span class="c1">#       [</span>
<span class="c1">#         [</span>
<span class="c1">#           &quot;_id&quot;,</span>
<span class="c1">#           &quot;UInt32&quot;</span>
<span class="c1">#         ],</span>
<span class="c1">#         [</span>
<span class="c1">#           &quot;_key&quot;,</span>
<span class="c1">#           &quot;ShortText&quot;</span>
<span class="c1">#         ],</span>
<span class="c1">#         [</span>
<span class="c1">#           &quot;content&quot;,</span>
<span class="c1">#           &quot;Text&quot;</span>
<span class="c1">#         ],</span>
<span class="c1">#         [</span>
<span class="c1">#           &quot;n_likes&quot;,</span>
<span class="c1">#           &quot;UInt32&quot;</span>
<span class="c1">#         ],</span>
<span class="c1">#         [</span>
<span class="c1">#           &quot;tag&quot;,</span>
<span class="c1">#           &quot;ShortText&quot;</span>
<span class="c1">#         ]</span>
<span class="c1">#       ],</span>
<span class="c1">#       [</span>
<span class="c1">#         2,</span>
<span class="c1">#         &quot;Groonga&quot;,</span>
<span class="c1">#         &quot;I started to use Groonga. It&#39;s very fast!&quot;,</span>
<span class="c1">#         10,</span>
<span class="c1">#         &quot;Groonga&quot;</span>
<span class="c1">#       ],</span>
<span class="c1">#       [</span>
<span class="c1">#         3,</span>
<span class="c1">#         &quot;Mroonga&quot;,</span>
<span class="c1">#         &quot;I also started to use Mroonga. It&#39;s also very fast! Really fast!&quot;,</span>
<span class="c1">#         15,</span>
<span class="c1">#         &quot;Groonga&quot;</span>
<span class="c1">#       ]</span>
<span class="c1">#     ]</span>
<span class="c1">#   ]</span>
<span class="c1"># ]</span>
</pre></div>
</div>
<p>The <code class="docutils literal notranslate"><span class="pre">select</span></code> command searches records that contain a word <code class="docutils literal notranslate"><span class="pre">fast</span></code>
in <code class="docutils literal notranslate"><span class="pre">content</span></code> column value from <code class="docutils literal notranslate"><span class="pre">Entries</span></code> table.</p>
<p><code class="docutils literal notranslate"><span class="pre">query</span></code> has query syntax but its deatils aren’t described here. See
<a class="reference internal" href="../grn_expr/query_syntax.html"><span class="doc">Query syntax</span></a> for datails.</p>
</section>
<section id="search-condition-filter">
<h4><span class="section-number">7.3.57.3.2.2. </span>Search condition: <code class="docutils literal notranslate"><span class="pre">filter</span></code><a class="headerlink" href="#search-condition-filter" title="Link to this heading">#</a></h4>
<p><code class="docutils literal notranslate"><span class="pre">filter</span></code> is designed for complex search conditions. You specify
search conditions for <code class="docutils literal notranslate"><span class="pre">filter</span></code> as ECMAScript like syntax.</p>
<p>Here is a simple <code class="docutils literal notranslate"><span class="pre">filter</span></code> usage example.</p>
<p>Execution example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">select</span> <span class="n">Entries</span> <span class="o">--</span><span class="nb">filter</span> <span class="s1">&#39;content @ &quot;fast&quot; &amp;&amp; _key == &quot;Groonga&quot;&#39;</span>
<span class="c1"># [</span>
<span class="c1">#   [</span>
<span class="c1">#     0,</span>
<span class="c1">#     1337566253.89858,</span>
<span class="c1">#     0.000355720520019531</span>
<span class="c1">#   ],</span>
<span class="c1">#   [</span>
<span class="c1">#     [</span>
<span class="c1">#       [</span>
<span class="c1">#         1</span>
<span class="c1">#       ],</span>
<span class="c1">#       [</span>
<span class="c1">#         [</span>
<span class="c1">#           &quot;_id&quot;,</span>
<span class="c1">#           &quot;UInt32&quot;</span>
<span class="c1">#         ],</span>
<span class="c1">#         [</span>
<span class="c1">#           &quot;_key&quot;,</span>
<span class="c1">#           &quot;ShortText&quot;</span>
<span class="c1">#         ],</span>
<span class="c1">#         [</span>
<span class="c1">#           &quot;content&quot;,</span>
<span class="c1">#           &quot;Text&quot;</span>
<span class="c1">#         ],</span>
<span class="c1">#         [</span>
<span class="c1">#           &quot;n_likes&quot;,</span>
<span class="c1">#           &quot;UInt32&quot;</span>
<span class="c1">#         ],</span>
<span class="c1">#         [</span>
<span class="c1">#           &quot;tag&quot;,</span>
<span class="c1">#           &quot;ShortText&quot;</span>
<span class="c1">#         ]</span>
<span class="c1">#       ],</span>
<span class="c1">#       [</span>
<span class="c1">#         2,</span>
<span class="c1">#         &quot;Groonga&quot;,</span>
<span class="c1">#         &quot;I started to use Groonga. It&#39;s very fast!&quot;,</span>
<span class="c1">#         10,</span>
<span class="c1">#         &quot;Groonga&quot;</span>
<span class="c1">#       ]</span>
<span class="c1">#     ]</span>
<span class="c1">#   ]</span>
<span class="c1"># ]</span>
</pre></div>
</div>
<p>The <code class="docutils literal notranslate"><span class="pre">select</span></code> command searches records that contain a word <code class="docutils literal notranslate"><span class="pre">fast</span></code>
in <code class="docutils literal notranslate"><span class="pre">content</span></code> column value and has <code class="docutils literal notranslate"><span class="pre">Groonga</span></code> as <code class="docutils literal notranslate"><span class="pre">_key</span></code> from
<code class="docutils literal notranslate"><span class="pre">Entries</span></code> table. There are three operators in the command, <code class="docutils literal notranslate"><span class="pre">&#64;</span></code>,
<code class="docutils literal notranslate"><span class="pre">&amp;&amp;</span></code> and <code class="docutils literal notranslate"><span class="pre">==</span></code>. <code class="docutils literal notranslate"><span class="pre">&#64;</span></code> is fulltext search operator. <code class="docutils literal notranslate"><span class="pre">&amp;&amp;</span></code> and
<code class="docutils literal notranslate"><span class="pre">==</span></code> are the same as ECMAScript. <code class="docutils literal notranslate"><span class="pre">&amp;&amp;</span></code> is logical AND operator and
<code class="docutils literal notranslate"><span class="pre">==</span></code> is equality operator.</p>
<p><code class="docutils literal notranslate"><span class="pre">filter</span></code> has more operators and syntax like grouping by <code class="docutils literal notranslate"><span class="pre">(...)</span></code>
its details aren’t described here. See
<a class="reference internal" href="../grn_expr/script_syntax.html"><span class="doc">Script syntax</span></a> for datails.</p>
</section>
</section>
<section id="paging">
<h3><span class="section-number">7.3.57.3.3. </span>Paging<a class="headerlink" href="#paging" title="Link to this heading">#</a></h3>
<p>You can specify range of outputted records by <code class="docutils literal notranslate"><span class="pre">offset</span></code> and <code class="docutils literal notranslate"><span class="pre">limit</span></code>.
Here is an example to output only the 2nd record.</p>
<p>Execution example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">select</span> <span class="n">Entries</span> <span class="o">--</span><span class="n">offset</span> <span class="mi">1</span> <span class="o">--</span><span class="n">limit</span> <span class="mi">1</span>
<span class="c1"># [</span>
<span class="c1">#   [</span>
<span class="c1">#     0,</span>
<span class="c1">#     1337566253.89858,</span>
<span class="c1">#     0.000355720520019531</span>
<span class="c1">#   ],</span>
<span class="c1">#   [</span>
<span class="c1">#     [</span>
<span class="c1">#       [</span>
<span class="c1">#         5</span>
<span class="c1">#       ],</span>
<span class="c1">#       [</span>
<span class="c1">#         [</span>
<span class="c1">#           &quot;_id&quot;,</span>
<span class="c1">#           &quot;UInt32&quot;</span>
<span class="c1">#         ],</span>
<span class="c1">#         [</span>
<span class="c1">#           &quot;_key&quot;,</span>
<span class="c1">#           &quot;ShortText&quot;</span>
<span class="c1">#         ],</span>
<span class="c1">#         [</span>
<span class="c1">#           &quot;content&quot;,</span>
<span class="c1">#           &quot;Text&quot;</span>
<span class="c1">#         ],</span>
<span class="c1">#         [</span>
<span class="c1">#           &quot;n_likes&quot;,</span>
<span class="c1">#           &quot;UInt32&quot;</span>
<span class="c1">#         ],</span>
<span class="c1">#         [</span>
<span class="c1">#           &quot;tag&quot;,</span>
<span class="c1">#           &quot;ShortText&quot;</span>
<span class="c1">#         ]</span>
<span class="c1">#       ],</span>
<span class="c1">#       [</span>
<span class="c1">#         2,</span>
<span class="c1">#         &quot;Groonga&quot;,</span>
<span class="c1">#         &quot;I started to use Groonga. It&#39;s very fast!&quot;,</span>
<span class="c1">#         10,</span>
<span class="c1">#         &quot;Groonga&quot;</span>
<span class="c1">#       ]</span>
<span class="c1">#     ]</span>
<span class="c1">#   ]</span>
<span class="c1"># ]</span>
</pre></div>
</div>
<p><code class="docutils literal notranslate"><span class="pre">offset</span></code> is zero-based. <code class="docutils literal notranslate"><span class="pre">--offset</span> <span class="pre">1</span></code> means output range is
started from the 2nd record.</p>
<p><code class="docutils literal notranslate"><span class="pre">limit</span></code> specifies the max number of output records. <code class="docutils literal notranslate"><span class="pre">--limit</span> <span class="pre">1</span></code>
means the number of output records is 1 at a maximium. If no records
are matched, <code class="docutils literal notranslate"><span class="pre">select</span></code> command outputs no records.</p>
</section>
<section id="the-total-number-of-records">
<h3><span class="section-number">7.3.57.3.4. </span>The total number of records<a class="headerlink" href="#the-total-number-of-records" title="Link to this heading">#</a></h3>
<p>You can use <code class="docutils literal notranslate"><span class="pre">--limit</span> <span class="pre">0</span></code> to retrieve the total number of recrods
without any contents of records.</p>
<p>Execution example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">select</span> <span class="n">Entries</span> <span class="o">--</span><span class="n">limit</span> <span class="mi">0</span>
<span class="c1"># [</span>
<span class="c1">#   [</span>
<span class="c1">#     0,</span>
<span class="c1">#     1337566253.89858,</span>
<span class="c1">#     0.000355720520019531</span>
<span class="c1">#   ],</span>
<span class="c1">#   [</span>
<span class="c1">#     [</span>
<span class="c1">#       [</span>
<span class="c1">#         5</span>
<span class="c1">#       ],</span>
<span class="c1">#       [</span>
<span class="c1">#         [</span>
<span class="c1">#           &quot;_id&quot;,</span>
<span class="c1">#           &quot;UInt32&quot;</span>
<span class="c1">#         ],</span>
<span class="c1">#         [</span>
<span class="c1">#           &quot;_key&quot;,</span>
<span class="c1">#           &quot;ShortText&quot;</span>
<span class="c1">#         ],</span>
<span class="c1">#         [</span>
<span class="c1">#           &quot;content&quot;,</span>
<span class="c1">#           &quot;Text&quot;</span>
<span class="c1">#         ],</span>
<span class="c1">#         [</span>
<span class="c1">#           &quot;n_likes&quot;,</span>
<span class="c1">#           &quot;UInt32&quot;</span>
<span class="c1">#         ],</span>
<span class="c1">#         [</span>
<span class="c1">#           &quot;tag&quot;,</span>
<span class="c1">#           &quot;ShortText&quot;</span>
<span class="c1">#         ]</span>
<span class="c1">#       ]</span>
<span class="c1">#     ]</span>
<span class="c1">#   ]</span>
<span class="c1"># ]</span>
</pre></div>
</div>
<p><code class="docutils literal notranslate"><span class="pre">--limit</span> <span class="pre">0</span></code> is also useful for retrieving only the number of matched
records.</p>
</section>
<section id="drilldown">
<h3><span class="section-number">7.3.57.3.5. </span>Drilldown<a class="headerlink" href="#drilldown" title="Link to this heading">#</a></h3>
<p>You can get additional grouped results against the search result in
one <code class="docutils literal notranslate"><span class="pre">select</span></code>. You need to use two or more <code class="docutils literal notranslate"><span class="pre">SELECT</span></code> s in SQL but
<code class="docutils literal notranslate"><span class="pre">select</span></code> in Groonga can do it in one <code class="docutils literal notranslate"><span class="pre">select</span></code>.</p>
<p>This feature is called as <a class="reference external" href="http://en.wikipedia.org/wiki/Drill_down">drilldown</a> in Groonga. It’s also
called as <a class="reference external" href="http://en.wikipedia.org/wiki/Faceted_search">faceted search</a> in other search
engine.</p>
<p>For example, think about the following situation.</p>
<p>You search entries that has <code class="docutils literal notranslate"><span class="pre">fast</span></code> word:</p>
<p>Execution example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">select</span> <span class="n">Entries</span> <span class="o">--</span><span class="nb">filter</span> <span class="s1">&#39;content @ &quot;fast&quot;&#39;</span>
<span class="c1"># [</span>
<span class="c1">#   [</span>
<span class="c1">#     0,</span>
<span class="c1">#     1337566253.89858,</span>
<span class="c1">#     0.000355720520019531</span>
<span class="c1">#   ],</span>
<span class="c1">#   [</span>
<span class="c1">#     [</span>
<span class="c1">#       [</span>
<span class="c1">#         2</span>
<span class="c1">#       ],</span>
<span class="c1">#       [</span>
<span class="c1">#         [</span>
<span class="c1">#           &quot;_id&quot;,</span>
<span class="c1">#           &quot;UInt32&quot;</span>
<span class="c1">#         ],</span>
<span class="c1">#         [</span>
<span class="c1">#           &quot;_key&quot;,</span>
<span class="c1">#           &quot;ShortText&quot;</span>
<span class="c1">#         ],</span>
<span class="c1">#         [</span>
<span class="c1">#           &quot;content&quot;,</span>
<span class="c1">#           &quot;Text&quot;</span>
<span class="c1">#         ],</span>
<span class="c1">#         [</span>
<span class="c1">#           &quot;n_likes&quot;,</span>
<span class="c1">#           &quot;UInt32&quot;</span>
<span class="c1">#         ],</span>
<span class="c1">#         [</span>
<span class="c1">#           &quot;tag&quot;,</span>
<span class="c1">#           &quot;ShortText&quot;</span>
<span class="c1">#         ]</span>
<span class="c1">#       ],</span>
<span class="c1">#       [</span>
<span class="c1">#         2,</span>
<span class="c1">#         &quot;Groonga&quot;,</span>
<span class="c1">#         &quot;I started to use Groonga. It&#39;s very fast!&quot;,</span>
<span class="c1">#         10,</span>
<span class="c1">#         &quot;Groonga&quot;</span>
<span class="c1">#       ],</span>
<span class="c1">#       [</span>
<span class="c1">#         3,</span>
<span class="c1">#         &quot;Mroonga&quot;,</span>
<span class="c1">#         &quot;I also started to use Mroonga. It&#39;s also very fast! Really fast!&quot;,</span>
<span class="c1">#         15,</span>
<span class="c1">#         &quot;Groonga&quot;</span>
<span class="c1">#       ]</span>
<span class="c1">#     ]</span>
<span class="c1">#   ]</span>
<span class="c1"># ]</span>
</pre></div>
</div>
<p>You want to use <code class="docutils literal notranslate"><span class="pre">tag</span></code> for additional search condition like
<code class="docutils literal notranslate"><span class="pre">--filter</span> <span class="pre">'content</span> <span class="pre">&#64;</span> <span class="pre">&quot;fast&quot;</span> <span class="pre">&amp;&amp;</span> <span class="pre">tag</span> <span class="pre">==</span> <span class="pre">&quot;???&quot;</span></code>. But you don’t know
suitable tag until you see the result of <code class="docutils literal notranslate"><span class="pre">content</span> <span class="pre">&#64;</span> <span class="pre">&quot;fast&quot;</span></code>.</p>
<p>If you know the number of matched records of each available tag, you
can choose suitable tag. You can use drilldown for the case:</p>
<p>Execution example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">select</span> <span class="n">Entries</span> <span class="o">--</span><span class="nb">filter</span> <span class="s1">&#39;content @ &quot;fast&quot;&#39;</span> <span class="o">--</span><span class="n">drilldown</span> <span class="n">tag</span>
<span class="c1"># [</span>
<span class="c1">#   [</span>
<span class="c1">#     0,</span>
<span class="c1">#     1337566253.89858,</span>
<span class="c1">#     0.000355720520019531</span>
<span class="c1">#   ],</span>
<span class="c1">#   [</span>
<span class="c1">#     [</span>
<span class="c1">#       [</span>
<span class="c1">#         2</span>
<span class="c1">#       ],</span>
<span class="c1">#       [</span>
<span class="c1">#         [</span>
<span class="c1">#           &quot;_id&quot;,</span>
<span class="c1">#           &quot;UInt32&quot;</span>
<span class="c1">#         ],</span>
<span class="c1">#         [</span>
<span class="c1">#           &quot;_key&quot;,</span>
<span class="c1">#           &quot;ShortText&quot;</span>
<span class="c1">#         ],</span>
<span class="c1">#         [</span>
<span class="c1">#           &quot;content&quot;,</span>
<span class="c1">#           &quot;Text&quot;</span>
<span class="c1">#         ],</span>
<span class="c1">#         [</span>
<span class="c1">#           &quot;n_likes&quot;,</span>
<span class="c1">#           &quot;UInt32&quot;</span>
<span class="c1">#         ],</span>
<span class="c1">#         [</span>
<span class="c1">#           &quot;tag&quot;,</span>
<span class="c1">#           &quot;ShortText&quot;</span>
<span class="c1">#         ]</span>
<span class="c1">#       ],</span>
<span class="c1">#       [</span>
<span class="c1">#         2,</span>
<span class="c1">#         &quot;Groonga&quot;,</span>
<span class="c1">#         &quot;I started to use Groonga. It&#39;s very fast!&quot;,</span>
<span class="c1">#         10,</span>
<span class="c1">#         &quot;Groonga&quot;</span>
<span class="c1">#       ],</span>
<span class="c1">#       [</span>
<span class="c1">#         3,</span>
<span class="c1">#         &quot;Mroonga&quot;,</span>
<span class="c1">#         &quot;I also started to use Mroonga. It&#39;s also very fast! Really fast!&quot;,</span>
<span class="c1">#         15,</span>
<span class="c1">#         &quot;Groonga&quot;</span>
<span class="c1">#       ]</span>
<span class="c1">#     ],</span>
<span class="c1">#     [</span>
<span class="c1">#       [</span>
<span class="c1">#         1</span>
<span class="c1">#       ],</span>
<span class="c1">#       [</span>
<span class="c1">#         [</span>
<span class="c1">#           &quot;_key&quot;,</span>
<span class="c1">#           &quot;ShortText&quot;</span>
<span class="c1">#         ],</span>
<span class="c1">#         [</span>
<span class="c1">#           &quot;_nsubrecs&quot;,</span>
<span class="c1">#           &quot;Int32&quot;</span>
<span class="c1">#         ]</span>
<span class="c1">#       ],</span>
<span class="c1">#       [</span>
<span class="c1">#         &quot;Groonga&quot;,</span>
<span class="c1">#         2</span>
<span class="c1">#       ]</span>
<span class="c1">#     ]</span>
<span class="c1">#   ]</span>
<span class="c1"># ]</span>
</pre></div>
</div>
<p><code class="docutils literal notranslate"><span class="pre">--drilldown</span> <span class="pre">tag</span></code> returns a list of pair of available tag and the
number of matched records. You can avoid “no hit search” case by
choosing a tag from the list. You can also avoid “too many search
results” case by choosing a tag that the number of matched records is
few from the list.</p>
<p>You can create the following UI with the drilldown results:</p>
<blockquote>
<div><ul class="simple">
<li><p>Links to narrow search results. (Users don’t need to input a
search query by their keyboard. They just click a link.)</p></li>
</ul>
</div></blockquote>
<p>Most EC sites use the UI. See side menu at Amazon.</p>
<p>Groonga supports not only counting grouped records but also finding
the maximum and/or minimum value from grouped records, summing values
in grouped records and so on. See
<a class="reference internal" href="#select-drilldown-related-parameters"><span class="std std-ref">Drilldown related parameters</span></a> for details.</p>
</section>
<section id="dynamic-column">
<h3><span class="section-number">7.3.57.3.6. </span>Dynamic column<a class="headerlink" href="#dynamic-column" title="Link to this heading">#</a></h3>
<p>You can create zero or more columns dynamically while a <code class="docutils literal notranslate"><span class="pre">select</span></code>
execution. You can use them for drilldown by computed value, window
function and so on.</p>
<p>Here is an example that uses dynamic column for drilldown by computed
value. This example creates a new column named
<code class="docutils literal notranslate"><span class="pre">n_likes_class</span></code>. <code class="docutils literal notranslate"><span class="pre">n_likes_class</span></code> column has classified value of
<code class="docutils literal notranslate"><span class="pre">Entry.n_likes</span></code> value. This example classifies <code class="docutils literal notranslate"><span class="pre">Entry.n_likes</span></code>
column value <code class="docutils literal notranslate"><span class="pre">10</span></code> step and the lowest number in the class is the
classified value. If a <code class="docutils literal notranslate"><span class="pre">Entry.n_likes</span></code> value is between <code class="docutils literal notranslate"><span class="pre">0</span></code> and
<code class="docutils literal notranslate"><span class="pre">9</span></code> such as <code class="docutils literal notranslate"><span class="pre">3</span></code> and <code class="docutils literal notranslate"><span class="pre">5</span></code>, <code class="docutils literal notranslate"><span class="pre">n_likes_class</span></code> value (classified
value) is <code class="docutils literal notranslate"><span class="pre">0</span></code>. If <code class="docutils literal notranslate"><span class="pre">Entry.n_likes</span></code> value is between <code class="docutils literal notranslate"><span class="pre">10</span></code> and
<code class="docutils literal notranslate"><span class="pre">19</span></code> such as <code class="docutils literal notranslate"><span class="pre">10</span></code> and <code class="docutils literal notranslate"><span class="pre">15</span></code>, <code class="docutils literal notranslate"><span class="pre">n_likes_class</span></code> value (classified
value) is <code class="docutils literal notranslate"><span class="pre">10</span></code>.</p>
<p>You can use <a class="reference internal" href="../functions/number_classify.html"><span class="doc">number_classify</span></a> function for
the classification. You need to register <code class="docutils literal notranslate"><span class="pre">functions/number</span></code> plugin
by <a class="reference internal" href="plugin_register.html"><span class="doc">plugin_register</span></a> command to use
<a class="reference internal" href="../functions/number_classify.html"><span class="doc">number_classify</span></a> function.</p>
<p>This example does drilldown by <code class="docutils literal notranslate"><span class="pre">n_likes_class</span></code> value. The drilldown
result will help you to know data trend.</p>
<p>Execution example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">plugin_register</span> <span class="n">functions</span><span class="o">/</span><span class="n">number</span>
<span class="c1"># [[0,1337566253.89858,0.000355720520019531],true]</span>
<span class="n">select</span> \
  <span class="o">--</span><span class="n">table</span> <span class="n">Entries</span> \
  <span class="o">--</span><span class="n">columns</span><span class="p">[</span><span class="n">n_likes_class</span><span class="p">]</span><span class="o">.</span><span class="n">stage</span> <span class="n">initial</span> \
  <span class="o">--</span><span class="n">columns</span><span class="p">[</span><span class="n">n_likes_class</span><span class="p">]</span><span class="o">.</span><span class="n">type</span> <span class="n">UInt32</span> \
  <span class="o">--</span><span class="n">columns</span><span class="p">[</span><span class="n">n_likes_class</span><span class="p">]</span><span class="o">.</span><span class="n">value</span> <span class="s1">&#39;number_classify(n_likes, 10)&#39;</span> \
  <span class="o">--</span><span class="n">drilldown</span> <span class="n">n_likes_class</span> \
  <span class="o">--</span><span class="n">drilldown_sort_keys</span> <span class="n">_nsubrecs</span> \
  <span class="o">--</span><span class="n">output_columns</span> <span class="n">n_likes</span><span class="p">,</span><span class="n">n_likes_class</span>
<span class="c1"># [</span>
<span class="c1">#   [</span>
<span class="c1">#     0,</span>
<span class="c1">#     1337566253.89858,</span>
<span class="c1">#     0.000355720520019531</span>
<span class="c1">#   ],</span>
<span class="c1">#   [</span>
<span class="c1">#     [</span>
<span class="c1">#       [</span>
<span class="c1">#         5</span>
<span class="c1">#       ],</span>
<span class="c1">#       [</span>
<span class="c1">#         [</span>
<span class="c1">#           &quot;n_likes&quot;,</span>
<span class="c1">#           &quot;UInt32&quot;</span>
<span class="c1">#         ],</span>
<span class="c1">#         [</span>
<span class="c1">#           &quot;n_likes_class&quot;,</span>
<span class="c1">#           &quot;UInt32&quot;</span>
<span class="c1">#         ]</span>
<span class="c1">#       ],</span>
<span class="c1">#       [</span>
<span class="c1">#         5,</span>
<span class="c1">#         0</span>
<span class="c1">#       ],</span>
<span class="c1">#       [</span>
<span class="c1">#         10,</span>
<span class="c1">#         10</span>
<span class="c1">#       ],</span>
<span class="c1">#       [</span>
<span class="c1">#         15,</span>
<span class="c1">#         10</span>
<span class="c1">#       ],</span>
<span class="c1">#       [</span>
<span class="c1">#         3,</span>
<span class="c1">#         0</span>
<span class="c1">#       ],</span>
<span class="c1">#       [</span>
<span class="c1">#         3,</span>
<span class="c1">#         0</span>
<span class="c1">#       ]</span>
<span class="c1">#     ],</span>
<span class="c1">#     [</span>
<span class="c1">#       [</span>
<span class="c1">#         2</span>
<span class="c1">#       ],</span>
<span class="c1">#       [</span>
<span class="c1">#         [</span>
<span class="c1">#           &quot;_key&quot;,</span>
<span class="c1">#           &quot;UInt32&quot;</span>
<span class="c1">#         ],</span>
<span class="c1">#         [</span>
<span class="c1">#           &quot;_nsubrecs&quot;,</span>
<span class="c1">#           &quot;Int32&quot;</span>
<span class="c1">#         ]</span>
<span class="c1">#       ],</span>
<span class="c1">#       [</span>
<span class="c1">#         10,</span>
<span class="c1">#         2</span>
<span class="c1">#       ],</span>
<span class="c1">#       [</span>
<span class="c1">#         0,</span>
<span class="c1">#         3</span>
<span class="c1">#       ]</span>
<span class="c1">#     ]</span>
<span class="c1">#   ]</span>
<span class="c1"># ]</span>
</pre></div>
</div>
<p>See <a class="reference internal" href="#select-dynamic-column-related-parameters"><span class="std std-ref">Dynamic column related parameters</span></a> for details.</p>
</section>
<section id="window-function">
<h3><span class="section-number">7.3.57.3.7. </span>Window function<a class="headerlink" href="#window-function" title="Link to this heading">#</a></h3>
<p>You can compute each record value from values of grouped records. For
example, you can compute sums of each group and puts sums to each
record. The difference against drilldown is drilldown can compute sums
of each group but it puts sums to each group not record.</p>
<p>Here is the result with window function. Each record has sum:</p>
<div class="pst-scrollable-table-container"><table class="table">
<thead>
<tr class="row-odd"><th class="head"><p>Group No.</p></th>
<th class="head"><p>Target value</p></th>
<th class="head"><p>Sum result</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>1</p></td>
<td><p>5</p></td>
<td><p>5</p></td>
</tr>
<tr class="row-odd"><td><p>2</p></td>
<td><p>10</p></td>
<td><p>25</p></td>
</tr>
<tr class="row-even"><td><p>2</p></td>
<td><p>15</p></td>
<td><p>25</p></td>
</tr>
<tr class="row-odd"><td><p>3</p></td>
<td><p>3</p></td>
<td><p>8</p></td>
</tr>
<tr class="row-even"><td><p>3</p></td>
<td><p>5</p></td>
<td><p>8</p></td>
</tr>
</tbody>
</table>
</div>
<p>Here is the result with drilldown. Each group has sum:</p>
<div class="pst-scrollable-table-container"><table class="table">
<thead>
<tr class="row-odd"><th class="head"><p>Group No.</p></th>
<th class="head"><p>Target values</p></th>
<th class="head"><p>Sum result</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>1</p></td>
<td><p>5</p></td>
<td><p>5</p></td>
</tr>
<tr class="row-odd"><td><p>2</p></td>
<td><p>10, 15</p></td>
<td><p>25</p></td>
</tr>
<tr class="row-even"><td><p>3</p></td>
<td><p>3, 5</p></td>
<td><p>8</p></td>
</tr>
</tbody>
</table>
</div>
<p>Window function is useful for data analysis.</p>
<p>Here is an example that sums <code class="docutils literal notranslate"><span class="pre">Entries.n_likes</span></code> per
<code class="docutils literal notranslate"><span class="pre">Entries.tag</span></code>:</p>
<p>Execution example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">plugin_register</span> <span class="n">functions</span><span class="o">/</span><span class="n">number</span>
<span class="c1"># [[0,1337566253.89858,0.000355720520019531],true]</span>
<span class="n">select</span> \
  <span class="o">--</span><span class="n">table</span> <span class="n">Entries</span> \
  <span class="o">--</span><span class="n">columns</span><span class="p">[</span><span class="n">n_likes_sum_per_tag</span><span class="p">]</span><span class="o">.</span><span class="n">stage</span> <span class="n">initial</span> \
  <span class="o">--</span><span class="n">columns</span><span class="p">[</span><span class="n">n_likes_sum_per_tag</span><span class="p">]</span><span class="o">.</span><span class="n">type</span> <span class="n">UInt32</span> \
  <span class="o">--</span><span class="n">columns</span><span class="p">[</span><span class="n">n_likes_sum_per_tag</span><span class="p">]</span><span class="o">.</span><span class="n">value</span> <span class="s1">&#39;window_sum(n_likes)&#39;</span> \
  <span class="o">--</span><span class="n">columns</span><span class="p">[</span><span class="n">n_likes_sum_per_tag</span><span class="p">]</span><span class="o">.</span><span class="n">window</span><span class="o">.</span><span class="n">group_keys</span> <span class="n">tag</span> \
  <span class="o">--</span><span class="n">output_columns</span> <span class="n">tag</span><span class="p">,</span><span class="n">n_likes</span><span class="p">,</span><span class="n">n_likes_sum_per_tag</span>
<span class="c1"># [</span>
<span class="c1">#   [</span>
<span class="c1">#     0,</span>
<span class="c1">#     1337566253.89858,</span>
<span class="c1">#     0.000355720520019531</span>
<span class="c1">#   ],</span>
<span class="c1">#   [</span>
<span class="c1">#     [</span>
<span class="c1">#       [</span>
<span class="c1">#         5</span>
<span class="c1">#       ],</span>
<span class="c1">#       [</span>
<span class="c1">#         [</span>
<span class="c1">#           &quot;tag&quot;,</span>
<span class="c1">#           &quot;ShortText&quot;</span>
<span class="c1">#         ],</span>
<span class="c1">#         [</span>
<span class="c1">#           &quot;n_likes&quot;,</span>
<span class="c1">#           &quot;UInt32&quot;</span>
<span class="c1">#         ],</span>
<span class="c1">#         [</span>
<span class="c1">#           &quot;n_likes_sum_per_tag&quot;,</span>
<span class="c1">#           &quot;UInt32&quot;</span>
<span class="c1">#         ]</span>
<span class="c1">#       ],</span>
<span class="c1">#       [</span>
<span class="c1">#         &quot;Hello&quot;,</span>
<span class="c1">#         5,</span>
<span class="c1">#         5</span>
<span class="c1">#       ],</span>
<span class="c1">#       [</span>
<span class="c1">#         &quot;Groonga&quot;,</span>
<span class="c1">#         10,</span>
<span class="c1">#         25</span>
<span class="c1">#       ],</span>
<span class="c1">#       [</span>
<span class="c1">#         &quot;Groonga&quot;,</span>
<span class="c1">#         15,</span>
<span class="c1">#         25</span>
<span class="c1">#       ],</span>
<span class="c1">#       [</span>
<span class="c1">#         &quot;Senna&quot;,</span>
<span class="c1">#         3,</span>
<span class="c1">#         6</span>
<span class="c1">#       ],</span>
<span class="c1">#       [</span>
<span class="c1">#         &quot;Senna&quot;,</span>
<span class="c1">#         3,</span>
<span class="c1">#         6</span>
<span class="c1">#       ]</span>
<span class="c1">#     ]</span>
<span class="c1">#   ]</span>
<span class="c1"># ]</span>
</pre></div>
</div>
<p>See <a class="reference internal" href="#select-window-function-related-parameters"><span class="std std-ref">Window function related parameters</span></a> for details.</p>
</section>
<section id="typo-tolerance">
<span id="select-usage-typo-tolerance"></span><h3><span class="section-number">7.3.57.3.8. </span>Typo tolerance<a class="headerlink" href="#typo-tolerance" title="Link to this heading">#</a></h3>
<p>You can implement typo tolerance search by specifying how many
characters to be accepted as typo. If no records are matched by the
given query, Groonga searches with typo fixed query again
automatically.</p>
<p>The number of accepted typo characters is 0 by default. So typo
tolerance search isn’t enabled by default.</p>
<p>You can enable typo tolerance search by specifying
<a class="reference internal" href="#select-fuzzy-max-distance-ratio"><span class="std std-ref">fuzzy_max_distance_ratio</span></a> or
<a class="reference internal" href="#select-fuzzy-max-distance"><span class="std std-ref">fuzzy_max_distance</span></a>. In general,
<code class="docutils literal notranslate"><span class="pre">--fuzzy_max_distance_ratio</span> <span class="pre">0.34</span></code> will be a good parameter.</p>
<p><a class="reference internal" href="#select-fuzzy-max-distance-ratio"><span class="std std-ref">fuzzy_max_distance_ratio</span></a> specifies how many typo
characters is accepted based on the number of characters of each input
term.</p>
<p>Here is a table that shows how many characters are accepted as typo
with <code class="docutils literal notranslate"><span class="pre">--fuzzy_max_distance_ratio</span> <span class="pre">0.34</span></code>:</p>
<div class="pst-scrollable-table-container"><table class="table">
<thead>
<tr class="row-odd"><th class="head"><p>The number of characters of a term</p></th>
<th class="head"><p>The number of accepted typo characters</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>1</p></td>
<td><p>0 (<code class="docutils literal notranslate"><span class="pre">floor(1</span> <span class="pre">*</span> <span class="pre">0.34)</span> <span class="pre">=</span> <span class="pre">floor(0.34)</span> <span class="pre">=</span> <span class="pre">0</span></code>)</p></td>
</tr>
<tr class="row-odd"><td><p>2</p></td>
<td><p>0 (<code class="docutils literal notranslate"><span class="pre">floor(2</span> <span class="pre">*</span> <span class="pre">0.34)</span> <span class="pre">=</span> <span class="pre">floor(0.68)</span> <span class="pre">=</span> <span class="pre">0</span></code>)</p></td>
</tr>
<tr class="row-even"><td><p>3</p></td>
<td><p>1 (<code class="docutils literal notranslate"><span class="pre">floor(3</span> <span class="pre">*</span> <span class="pre">0.34)</span> <span class="pre">=</span> <span class="pre">floor(1.02)</span> <span class="pre">=</span> <span class="pre">1</span></code>)</p></td>
</tr>
<tr class="row-odd"><td><p>4</p></td>
<td><p>1 (<code class="docutils literal notranslate"><span class="pre">floor(4</span> <span class="pre">*</span> <span class="pre">0.34)</span> <span class="pre">=</span> <span class="pre">floor(1.36)</span> <span class="pre">=</span> <span class="pre">1</span></code>)</p></td>
</tr>
<tr class="row-even"><td><p>5</p></td>
<td><p>1 (<code class="docutils literal notranslate"><span class="pre">floor(5</span> <span class="pre">*</span> <span class="pre">0.34)</span> <span class="pre">=</span> <span class="pre">floor(1.7)</span> <span class="pre">=</span> <span class="pre">1</span></code>)</p></td>
</tr>
<tr class="row-odd"><td><p>6</p></td>
<td><p>2 (<code class="docutils literal notranslate"><span class="pre">floor(6</span> <span class="pre">*</span> <span class="pre">0.34)</span> <span class="pre">=</span> <span class="pre">floor(2.04)</span> <span class="pre">=</span> <span class="pre">2</span></code>)</p></td>
</tr>
</tbody>
</table>
</div>
<p>In other words, Groonga doesn’t accept any typo for a short term
(0-2 characters term), accepts 1 typo for a middle term (3-5
characters term) and accepts 2 or more typos for a long term (6-
characters term).</p>
<p>Here is an example that shows that we can search <code class="docutils literal notranslate"><span class="pre">Groonga</span></code> with
<code class="docutils literal notranslate"><span class="pre">Moronga</span></code> (2 typos):</p>
<p>Execution example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">select</span> \
  <span class="o">--</span><span class="n">table</span> <span class="n">Entries</span> \
  <span class="o">--</span><span class="n">fuzzy_max_distance_ratio</span> <span class="mf">0.34</span> \
  <span class="o">--</span><span class="n">match_columns</span> <span class="n">content</span> \
  <span class="o">--</span><span class="n">query</span> <span class="n">Moronga</span> \
  <span class="o">--</span><span class="n">output_columns</span> <span class="n">content</span><span class="p">,</span><span class="n">_score</span>
<span class="c1"># [</span>
<span class="c1">#   [</span>
<span class="c1">#     0,</span>
<span class="c1">#     1337566253.89858,</span>
<span class="c1">#     0.000355720520019531</span>
<span class="c1">#   ],</span>
<span class="c1">#   [</span>
<span class="c1">#     [</span>
<span class="c1">#       [</span>
<span class="c1">#         2</span>
<span class="c1">#       ],</span>
<span class="c1">#       [</span>
<span class="c1">#         [</span>
<span class="c1">#           &quot;content&quot;,</span>
<span class="c1">#           &quot;Text&quot;</span>
<span class="c1">#         ],</span>
<span class="c1">#         [</span>
<span class="c1">#           &quot;_score&quot;,</span>
<span class="c1">#           &quot;Int32&quot;</span>
<span class="c1">#         ]</span>
<span class="c1">#       ],</span>
<span class="c1">#       [</span>
<span class="c1">#         &quot;I started to use Groonga. It&#39;s very fast!&quot;,</span>
<span class="c1">#         1</span>
<span class="c1">#       ],</span>
<span class="c1">#       [</span>
<span class="c1">#         &quot;I also started to use Mroonga. It&#39;s also very fast! Really fast!&quot;,</span>
<span class="c1">#         2</span>
<span class="c1">#       ]</span>
<span class="c1">#     ]</span>
<span class="c1">#   ]</span>
<span class="c1"># ]</span>
</pre></div>
</div>
<p>You can specify the fixed number of typo accept characters by
<a class="reference internal" href="#select-fuzzy-max-distance"><span class="std std-ref">fuzzy_max_distance</span></a>. For example, Groonga accepts 2
characters for all terms with <code class="docutils literal notranslate"><span class="pre">--fuzzy_max_distance</span> <span class="pre">2</span></code>. But
<code class="docutils literal notranslate"><span class="pre">--fuzzy_max_distance_ratio</span></code> will be better for many use cases.</p>
<p>You need correct terms for typo tolerance search. Groonga uses terms
in a lexicon as correct terms. <code class="docutils literal notranslate"><span class="pre">Terms</span></code> is a lexicon for this
case. Terms in a lexicon are generated by a tokenizer. If your data is
alphabet based language such as English, you can use
<a class="reference internal" href="../tokenizers/token_ngram.html"><span class="doc">TokenNgram</span></a>. Because
<a class="reference internal" href="../tokenizers/token_ngram.html"><span class="doc">TokenNgram</span></a> tokenizes a text to (almost)
words for alphabet based languages. If your data isn’t alphabet based
language such as Japanese, you can’t use
<a class="reference internal" href="../tokenizers/token_ngram.html"><span class="doc">TokenNgram</span></a>. Because
<a class="reference internal" href="../tokenizers/token_ngram.html"><span class="doc">TokenNgram</span></a> tokenizes a text to
N-characters for non alphabet based languages. You need to use
morphological analyzer based tokenizer for non alphabet based
languages. For example, you can use
<a class="reference internal" href="../tokenizers/token_mecab.html"><span class="doc">TokenMecab</span></a> for Japanese. (You can use
<a class="reference internal" href="../tokenizers/token_mecab.html"><span class="doc">TokenMecab</span></a> for non Japanese languages
with suitable dictionary.)</p>
<p>Here is an example to use typo tolerance search with Japanese
text. <code class="docutils literal notranslate"><span class="pre">--default_tokenizer</span> <span class="pre">TokenMecab</span></code> for <code class="docutils literal notranslate"><span class="pre">JapaneseTerms</span></code> is
important. <code class="docutils literal notranslate"><span class="pre">JapaneseTerms</span></code> is a lexicon for this case:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">..</span> <span class="n">groonga</span><span class="o">-</span><span class="n">command</span>
<span class="o">..</span> <span class="n">include</span><span class="p">::</span> <span class="o">../../</span><span class="n">example</span><span class="o">/</span><span class="n">reference</span><span class="o">/</span><span class="n">commands</span><span class="o">/</span><span class="n">select</span><span class="o">/</span><span class="n">usage_typo_tolerance_japanese</span><span class="o">.</span><span class="n">log</span>
<span class="o">..</span> <span class="n">table_create</span> <span class="n">JapaneseEntries</span> <span class="n">TABLE_NO_KEY</span>
<span class="o">..</span> <span class="n">column_create</span> <span class="n">JapaneseEntries</span> <span class="n">content</span> <span class="n">COLUMN_SCALAR</span> <span class="n">Text</span>
<span class="o">..</span> <span class="n">table_create</span> <span class="n">JapaneseTerms</span> <span class="n">TABLE_PAT_KEY</span> <span class="n">ShortText</span> \
<span class="o">..</span>   <span class="o">--</span><span class="n">default_tokenizer</span> <span class="n">TokenMecab</span> \
<span class="o">..</span>   <span class="o">--</span><span class="n">normalizer</span> <span class="n">NormalizerNFKC150</span>
<span class="o">..</span> <span class="n">column_create</span> <span class="n">JapaneseTerms</span> <span class="n">japanese_entries_content</span> \
<span class="o">..</span>   <span class="n">COLUMN_INDEX</span><span class="o">|</span><span class="n">WITH_POSITION</span> <span class="n">JapaneseEntries</span> <span class="n">content</span>
<span class="o">..</span> <span class="n">load</span> <span class="o">--</span><span class="n">table</span> <span class="n">JapaneseEntries</span>
<span class="o">..</span> <span class="p">[</span>
<span class="o">..</span> <span class="p">{</span><span class="s2">&quot;content&quot;</span><span class="p">:</span> <span class="s2">&quot;ようこそ！これが最初の投稿です！&quot;</span><span class="p">},</span>
<span class="o">..</span> <span class="p">{</span><span class="s2">&quot;content&quot;</span><span class="p">:</span> <span class="s2">&quot;Groongaを使い始めました。とても速いですね！&quot;</span><span class="p">},</span>
<span class="o">..</span> <span class="p">{</span><span class="s2">&quot;content&quot;</span><span class="p">:</span> <span class="s2">&quot;Mroongaも使い始めました。これもとても速いですね！本当に速い！&quot;</span><span class="p">},</span>
<span class="o">..</span> <span class="p">{</span><span class="s2">&quot;content&quot;</span><span class="p">:</span> <span class="s2">&quot;Sennaのシステムをすべて移行しました！&quot;</span><span class="p">},</span>
<span class="o">..</span> <span class="p">{</span><span class="s2">&quot;content&quot;</span><span class="p">:</span> <span class="s2">&quot;Tritonnのシステムもすべて移行しました！&quot;</span><span class="p">}</span>
<span class="o">..</span> <span class="p">]</span>
<span class="o">..</span> <span class="n">select</span> \
<span class="o">..</span>   <span class="o">--</span><span class="n">table</span> <span class="n">JapaneseEntries</span> \
<span class="o">..</span>   <span class="o">--</span><span class="n">fuzzy_max_distance_ratio</span> <span class="mf">0.34</span> \
<span class="o">..</span>   <span class="o">--</span><span class="n">match_columns</span> <span class="n">content</span> \
<span class="o">..</span>   <span class="o">--</span><span class="n">query</span> <span class="n">ともて</span> \
<span class="o">..</span>   <span class="o">--</span><span class="n">output_columns</span> <span class="n">content</span><span class="p">,</span><span class="n">_score</span>
</pre></div>
</div>
<p>See <a class="reference internal" href="#select-fuzzy-query-related-parameters"><span class="std std-ref">Fuzzy query related parameters</span></a> for details.</p>
</section>
</section>
<section id="parameters">
<h2><span class="section-number">7.3.57.4. </span>Parameters<a class="headerlink" href="#parameters" title="Link to this heading">#</a></h2>
<p>This section describes all parameters. Parameters are categorized.</p>
<section id="required-parameters">
<h3><span class="section-number">7.3.57.4.1. </span>Required parameters<a class="headerlink" href="#required-parameters" title="Link to this heading">#</a></h3>
<p>There is a required parameter, <code class="docutils literal notranslate"><span class="pre">table</span></code>.</p>
<section id="table">
<span id="select-table"></span><h4><span class="section-number">7.3.57.4.1.1. </span><code class="docutils literal notranslate"><span class="pre">table</span></code><a class="headerlink" href="#table" title="Link to this heading">#</a></h4>
<p>Specifies a table to be searched. <code class="docutils literal notranslate"><span class="pre">table</span></code> must be specified.</p>
<p>If nonexistent table is specified, an error is returned.</p>
<p>Execution example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">select</span> <span class="n">Nonexistent</span>
<span class="c1"># [</span>
<span class="c1">#   [</span>
<span class="c1">#     -22,</span>
<span class="c1">#     1337566253.89858,</span>
<span class="c1">#     0.000355720520019531,</span>
<span class="c1">#     &quot;[select][table] invalid name: &lt;Nonexistent&gt;&quot;,</span>
<span class="c1">#     [</span>
<span class="c1">#       [</span>
<span class="c1">#         &quot;execute&quot;,</span>
<span class="c1">#         &quot;lib/proc/proc_select.cpp&quot;,</span>
<span class="c1">#         5002</span>
<span class="c1">#       ]</span>
<span class="c1">#     ]</span>
<span class="c1">#   ]</span>
<span class="c1"># ]</span>
</pre></div>
</div>
</section>
</section>
<section id="search-related-parameters">
<span id="select-search-related-parameters"></span><h3><span class="section-number">7.3.57.4.2. </span>Search related parameters<a class="headerlink" href="#search-related-parameters" title="Link to this heading">#</a></h3>
<p>There are search related parameters. Typically, <code class="docutils literal notranslate"><span class="pre">match_columns</span></code> and
<code class="docutils literal notranslate"><span class="pre">query</span></code> parameters are used for implementing a search
box. <code class="docutils literal notranslate"><span class="pre">filter</span></code> parameters is used for implementing complex search
feature.</p>
<p>If both <code class="docutils literal notranslate"><span class="pre">query</span></code> and <code class="docutils literal notranslate"><span class="pre">filter</span></code> are specified, selected records must
be matched against both <code class="docutils literal notranslate"><span class="pre">query</span></code> and <code class="docutils literal notranslate"><span class="pre">filter</span></code>. If both <code class="docutils literal notranslate"><span class="pre">query</span></code>
and <code class="docutils literal notranslate"><span class="pre">filter</span></code> aren’t specified, all records are selected.</p>
<section id="match-columns">
<span id="select-match-columns"></span><h4><span class="section-number">7.3.57.4.2.1. </span><code class="docutils literal notranslate"><span class="pre">match_columns</span></code><a class="headerlink" href="#match-columns" title="Link to this heading">#</a></h4>
<p>Specifies the default target column for fulltext search by <code class="docutils literal notranslate"><span class="pre">query</span></code>
parameter value. A target column for fulltext search can be specified
in <code class="docutils literal notranslate"><span class="pre">query</span></code> parameter. The difference between <code class="docutils literal notranslate"><span class="pre">match_columns</span></code> and
<code class="docutils literal notranslate"><span class="pre">query</span></code> is whether weight and score function are supported or
not. <code class="docutils literal notranslate"><span class="pre">match_columns</span></code> supports them but <code class="docutils literal notranslate"><span class="pre">query</span></code> doesn’t.</p>
<p>Weight is relative importance of target column. A higher weight target
column gets more hit score rather than a lower weight target column
when a record is matched by fulltext search. The default weight is 1.</p>
<p>Here is a simple <code class="docutils literal notranslate"><span class="pre">match_columns</span></code> usage example.</p>
<p>Execution example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">select</span> <span class="n">Entries</span> <span class="o">--</span><span class="n">match_columns</span> <span class="n">content</span> <span class="o">--</span><span class="n">query</span> <span class="n">fast</span> <span class="o">--</span><span class="n">output_columns</span> <span class="s1">&#39;_key, _score&#39;</span>
<span class="c1"># [</span>
<span class="c1">#   [</span>
<span class="c1">#     0,</span>
<span class="c1">#     1337566253.89858,</span>
<span class="c1">#     0.000355720520019531</span>
<span class="c1">#   ],</span>
<span class="c1">#   [</span>
<span class="c1">#     [</span>
<span class="c1">#       [</span>
<span class="c1">#         2</span>
<span class="c1">#       ],</span>
<span class="c1">#       [</span>
<span class="c1">#         [</span>
<span class="c1">#           &quot;_key&quot;,</span>
<span class="c1">#           &quot;ShortText&quot;</span>
<span class="c1">#         ],</span>
<span class="c1">#         [</span>
<span class="c1">#           &quot;_score&quot;,</span>
<span class="c1">#           &quot;Int32&quot;</span>
<span class="c1">#         ]</span>
<span class="c1">#       ],</span>
<span class="c1">#       [</span>
<span class="c1">#         &quot;Groonga&quot;,</span>
<span class="c1">#         1</span>
<span class="c1">#       ],</span>
<span class="c1">#       [</span>
<span class="c1">#         &quot;Mroonga&quot;,</span>
<span class="c1">#         2</span>
<span class="c1">#       ]</span>
<span class="c1">#     ]</span>
<span class="c1">#   ]</span>
<span class="c1"># ]</span>
</pre></div>
</div>
<p><code class="docutils literal notranslate"><span class="pre">--match_columns</span> <span class="pre">content</span></code> means the default target column for
fulltext search is <code class="docutils literal notranslate"><span class="pre">content</span></code> column and its weight
is 1. <code class="docutils literal notranslate"><span class="pre">--output_columns</span> <span class="pre">'_key,</span> <span class="pre">_score'</span></code> means that the <code class="docutils literal notranslate"><span class="pre">select</span></code>
command outputs <code class="docutils literal notranslate"><span class="pre">_key</span></code> value and <code class="docutils literal notranslate"><span class="pre">_score</span></code> value for matched
records.</p>
<p>Pay attention to <code class="docutils literal notranslate"><span class="pre">_score</span></code> value. <code class="docutils literal notranslate"><span class="pre">_score</span></code> value is the number of
matched counts against <code class="docutils literal notranslate"><span class="pre">query</span></code> parameter value. In the example,
<code class="docutils literal notranslate"><span class="pre">query</span></code> parameter value is <code class="docutils literal notranslate"><span class="pre">fast</span></code>. The fact that <code class="docutils literal notranslate"><span class="pre">_score</span></code> value
is 1 means that <code class="docutils literal notranslate"><span class="pre">fast</span></code> appers in <code class="docutils literal notranslate"><span class="pre">content</span></code> column only once.  The
fact that <code class="docutils literal notranslate"><span class="pre">_score</span></code> value is 2 means that <code class="docutils literal notranslate"><span class="pre">fast</span></code> appears in
<code class="docutils literal notranslate"><span class="pre">content</span></code> column twice.</p>
<p>To specify weight, <code class="docutils literal notranslate"><span class="pre">column</span> <span class="pre">*</span> <span class="pre">weight</span></code> syntax is used. Here is a
weight usage example.</p>
<p>Execution example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">select</span> <span class="n">Entries</span> <span class="o">--</span><span class="n">match_columns</span> <span class="s1">&#39;content * 2&#39;</span> <span class="o">--</span><span class="n">query</span> <span class="n">fast</span> <span class="o">--</span><span class="n">output_columns</span> <span class="s1">&#39;_key, _score&#39;</span>
<span class="c1"># [</span>
<span class="c1">#   [</span>
<span class="c1">#     0,</span>
<span class="c1">#     1337566253.89858,</span>
<span class="c1">#     0.000355720520019531</span>
<span class="c1">#   ],</span>
<span class="c1">#   [</span>
<span class="c1">#     [</span>
<span class="c1">#       [</span>
<span class="c1">#         2</span>
<span class="c1">#       ],</span>
<span class="c1">#       [</span>
<span class="c1">#         [</span>
<span class="c1">#           &quot;_key&quot;,</span>
<span class="c1">#           &quot;ShortText&quot;</span>
<span class="c1">#         ],</span>
<span class="c1">#         [</span>
<span class="c1">#           &quot;_score&quot;,</span>
<span class="c1">#           &quot;Int32&quot;</span>
<span class="c1">#         ]</span>
<span class="c1">#       ],</span>
<span class="c1">#       [</span>
<span class="c1">#         &quot;Groonga&quot;,</span>
<span class="c1">#         2</span>
<span class="c1">#       ],</span>
<span class="c1">#       [</span>
<span class="c1">#         &quot;Mroonga&quot;,</span>
<span class="c1">#         4</span>
<span class="c1">#       ]</span>
<span class="c1">#     ]</span>
<span class="c1">#   ]</span>
<span class="c1"># ]</span>
</pre></div>
</div>
<p><code class="docutils literal notranslate"><span class="pre">--match_columns</span> <span class="pre">'content</span> <span class="pre">*</span> <span class="pre">2'</span></code> means the default target column for
fulltext search is <code class="docutils literal notranslate"><span class="pre">content</span></code> column and its weight is 2.</p>
<p>Pay attention to <code class="docutils literal notranslate"><span class="pre">_score</span></code> value. <code class="docutils literal notranslate"><span class="pre">_score</span></code> value is doubled because
weight is 2.</p>
<p>You can specify one or more columns as the default target columns for
fulltext search. If one or more columns are specified, fulltext search
is done for all columns and scores are accumulated. If one of the
columns is matched against <code class="docutils literal notranslate"><span class="pre">query</span></code> parameter value, the record is
treated as matched.</p>
<p>To specify one or more columns, <code class="docutils literal notranslate"><span class="pre">column1</span> <span class="pre">*</span> <span class="pre">weight1</span> <span class="pre">||</span> <span class="pre">column2</span> <span class="pre">*</span>
<span class="pre">weight2</span> <span class="pre">||</span> <span class="pre">...</span></code> syntax is used. <code class="docutils literal notranslate"><span class="pre">*</span> <span class="pre">weight</span></code> can be omitted. If it is
omitted, 1 is used for weight. Here is a one or more columns usage
example.</p>
<p>Execution example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">select</span> <span class="n">Entries</span> <span class="o">--</span><span class="n">match_columns</span> <span class="s1">&#39;_key * 10 || content&#39;</span> <span class="o">--</span><span class="n">query</span> <span class="n">groonga</span> <span class="o">--</span><span class="n">output_columns</span> <span class="s1">&#39;_key, _score&#39;</span>
<span class="c1"># [</span>
<span class="c1">#   [</span>
<span class="c1">#     0,</span>
<span class="c1">#     1337566253.89858,</span>
<span class="c1">#     0.000355720520019531</span>
<span class="c1">#   ],</span>
<span class="c1">#   [</span>
<span class="c1">#     [</span>
<span class="c1">#       [</span>
<span class="c1">#         1</span>
<span class="c1">#       ],</span>
<span class="c1">#       [</span>
<span class="c1">#         [</span>
<span class="c1">#           &quot;_key&quot;,</span>
<span class="c1">#           &quot;ShortText&quot;</span>
<span class="c1">#         ],</span>
<span class="c1">#         [</span>
<span class="c1">#           &quot;_score&quot;,</span>
<span class="c1">#           &quot;Int32&quot;</span>
<span class="c1">#         ]</span>
<span class="c1">#       ],</span>
<span class="c1">#       [</span>
<span class="c1">#         &quot;Groonga&quot;,</span>
<span class="c1">#         11</span>
<span class="c1">#       ]</span>
<span class="c1">#     ]</span>
<span class="c1">#   ]</span>
<span class="c1"># ]</span>
</pre></div>
</div>
<p><code class="docutils literal notranslate"><span class="pre">--match_columns</span> <span class="pre">'_key</span> <span class="pre">*</span> <span class="pre">10</span> <span class="pre">||</span> <span class="pre">content'</span></code> means the default target
columns for fulltext search are <code class="docutils literal notranslate"><span class="pre">_key</span></code> and <code class="docutils literal notranslate"><span class="pre">content</span></code> columns and
<code class="docutils literal notranslate"><span class="pre">_key</span></code> column’s weight is 10 and <code class="docutils literal notranslate"><span class="pre">content</span></code> column’s weight
is 1. This weight allocation means <code class="docutils literal notranslate"><span class="pre">_key</span></code> column value is more
important rather than <code class="docutils literal notranslate"><span class="pre">content</span></code> column value. In this example, title
of blog entry is more important rather thatn content of blog entry.</p>
<p>You can also specify score function. See <a class="reference internal" href="../scorer.html"><span class="doc">Scorer</span></a> for
details.</p>
<p>Note that score function isn’t related to <a class="reference internal" href="#select-scorer"><span class="std std-ref">scorer</span></a>
parameter.</p>
<p>You can also specify index columns to <code class="docutils literal notranslate"><span class="pre">--match_columns</span></code>
parameter. In such a case, you can control what index column should be
used and what data column should be searched explicitly.</p>
<p>If data column is specified to <code class="docutils literal notranslate"><span class="pre">--match_columns</span></code>, Groonga searches
related index column automatically, but it is not defined as a spec
that which index column is actually selected. Thus, if multiple index
columns are created against one data column, there is no way to know
which index column will be selected in advance. (In most cases, latest
created index column will be selected, but it is undocumented
behavior.)</p>
<p>Here is a use case how to specify index column.</p>
<ul class="simple">
<li><p>index column for one data column</p></li>
<li><p>index column for multiple data column</p></li>
</ul>
<p>If you use index column for one data column, index column which
corresponds to data column is paired. Thus,
<code class="docutils literal notranslate"><span class="pre">TERMS_TABLE.INDEX_COLUMN</span></code> should be specified. On the otherhand, if
you use index column for multiple data column, all data column is
searched by default. If you want to use specific multiple index column
to search specific data column, Specify index column with data column
name such as <code class="docutils literal notranslate"><span class="pre">TERMS_TABLE.INDEX_COLUMN.DATA_COLUMN</span></code>. See example use
case <a class="reference internal" href="../../tutorial/match_columns.html#full-text-search-with-specific-index-name"><span class="std std-ref">Full text search with specific index name</span></a> for details.</p>
</section>
<section id="query">
<span id="select-query"></span><h4><span class="section-number">7.3.57.4.2.2. </span><code class="docutils literal notranslate"><span class="pre">query</span></code><a class="headerlink" href="#query" title="Link to this heading">#</a></h4>
<p>Specifies the query text. Normally, it is used for fulltext search
with <code class="docutils literal notranslate"><span class="pre">match_columns</span></code> parameter. <code class="docutils literal notranslate"><span class="pre">query</span></code> parameter is designed for
a fulltext search form in a Web page. A query text should be formatted
in <a class="reference internal" href="../grn_expr/query_syntax.html"><span class="doc">Query syntax</span></a>. The syntax is similar to common search
form like Google’s search form. For example, <code class="docutils literal notranslate"><span class="pre">word1</span> <span class="pre">word2</span></code> means
that groonga searches records that contain both <code class="docutils literal notranslate"><span class="pre">word1</span></code> and
<code class="docutils literal notranslate"><span class="pre">word2</span></code>. <code class="docutils literal notranslate"><span class="pre">word1</span> <span class="pre">OR</span> <span class="pre">word2</span></code> means that groonga searches records that
contain either <code class="docutils literal notranslate"><span class="pre">word1</span></code> or <code class="docutils literal notranslate"><span class="pre">word2</span></code>.</p>
<p>Here is a simple logical and search example.</p>
<p>Execution example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">select</span> <span class="n">Entries</span> <span class="o">--</span><span class="n">match_columns</span> <span class="n">content</span> <span class="o">--</span><span class="n">query</span> <span class="s2">&quot;fast groonga&quot;</span>
<span class="c1"># [</span>
<span class="c1">#   [</span>
<span class="c1">#     0,</span>
<span class="c1">#     1337566253.89858,</span>
<span class="c1">#     0.000355720520019531</span>
<span class="c1">#   ],</span>
<span class="c1">#   [</span>
<span class="c1">#     [</span>
<span class="c1">#       [</span>
<span class="c1">#         1</span>
<span class="c1">#       ],</span>
<span class="c1">#       [</span>
<span class="c1">#         [</span>
<span class="c1">#           &quot;_id&quot;,</span>
<span class="c1">#           &quot;UInt32&quot;</span>
<span class="c1">#         ],</span>
<span class="c1">#         [</span>
<span class="c1">#           &quot;_key&quot;,</span>
<span class="c1">#           &quot;ShortText&quot;</span>
<span class="c1">#         ],</span>
<span class="c1">#         [</span>
<span class="c1">#           &quot;content&quot;,</span>
<span class="c1">#           &quot;Text&quot;</span>
<span class="c1">#         ],</span>
<span class="c1">#         [</span>
<span class="c1">#           &quot;n_likes&quot;,</span>
<span class="c1">#           &quot;UInt32&quot;</span>
<span class="c1">#         ],</span>
<span class="c1">#         [</span>
<span class="c1">#           &quot;tag&quot;,</span>
<span class="c1">#           &quot;ShortText&quot;</span>
<span class="c1">#         ]</span>
<span class="c1">#       ],</span>
<span class="c1">#       [</span>
<span class="c1">#         2,</span>
<span class="c1">#         &quot;Groonga&quot;,</span>
<span class="c1">#         &quot;I started to use Groonga. It&#39;s very fast!&quot;,</span>
<span class="c1">#         10,</span>
<span class="c1">#         &quot;Groonga&quot;</span>
<span class="c1">#       ]</span>
<span class="c1">#     ]</span>
<span class="c1">#   ]</span>
<span class="c1"># ]</span>
</pre></div>
</div>
<p>The <code class="docutils literal notranslate"><span class="pre">select</span></code> command searches records that contain two words
<code class="docutils literal notranslate"><span class="pre">fast</span></code> and <code class="docutils literal notranslate"><span class="pre">groonga</span></code> in <code class="docutils literal notranslate"><span class="pre">content</span></code> column value from <code class="docutils literal notranslate"><span class="pre">Entries</span></code>
table.</p>
<p>Here is a simple logical or search example.</p>
<p>Execution example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">select</span> <span class="n">Entries</span> <span class="o">--</span><span class="n">match_columns</span> <span class="n">content</span> <span class="o">--</span><span class="n">query</span> <span class="s2">&quot;groonga OR mroonga&quot;</span>
<span class="c1"># [</span>
<span class="c1">#   [</span>
<span class="c1">#     0,</span>
<span class="c1">#     1337566253.89858,</span>
<span class="c1">#     0.000355720520019531</span>
<span class="c1">#   ],</span>
<span class="c1">#   [</span>
<span class="c1">#     [</span>
<span class="c1">#       [</span>
<span class="c1">#         2</span>
<span class="c1">#       ],</span>
<span class="c1">#       [</span>
<span class="c1">#         [</span>
<span class="c1">#           &quot;_id&quot;,</span>
<span class="c1">#           &quot;UInt32&quot;</span>
<span class="c1">#         ],</span>
<span class="c1">#         [</span>
<span class="c1">#           &quot;_key&quot;,</span>
<span class="c1">#           &quot;ShortText&quot;</span>
<span class="c1">#         ],</span>
<span class="c1">#         [</span>
<span class="c1">#           &quot;content&quot;,</span>
<span class="c1">#           &quot;Text&quot;</span>
<span class="c1">#         ],</span>
<span class="c1">#         [</span>
<span class="c1">#           &quot;n_likes&quot;,</span>
<span class="c1">#           &quot;UInt32&quot;</span>
<span class="c1">#         ],</span>
<span class="c1">#         [</span>
<span class="c1">#           &quot;tag&quot;,</span>
<span class="c1">#           &quot;ShortText&quot;</span>
<span class="c1">#         ]</span>
<span class="c1">#       ],</span>
<span class="c1">#       [</span>
<span class="c1">#         2,</span>
<span class="c1">#         &quot;Groonga&quot;,</span>
<span class="c1">#         &quot;I started to use Groonga. It&#39;s very fast!&quot;,</span>
<span class="c1">#         10,</span>
<span class="c1">#         &quot;Groonga&quot;</span>
<span class="c1">#       ],</span>
<span class="c1">#       [</span>
<span class="c1">#         3,</span>
<span class="c1">#         &quot;Mroonga&quot;,</span>
<span class="c1">#         &quot;I also started to use Mroonga. It&#39;s also very fast! Really fast!&quot;,</span>
<span class="c1">#         15,</span>
<span class="c1">#         &quot;Groonga&quot;</span>
<span class="c1">#       ]</span>
<span class="c1">#     ]</span>
<span class="c1">#   ]</span>
<span class="c1"># ]</span>
</pre></div>
</div>
<p>The <code class="docutils literal notranslate"><span class="pre">select</span></code> command searches records that contain one of two words
<code class="docutils literal notranslate"><span class="pre">groonga</span></code> or <code class="docutils literal notranslate"><span class="pre">mroonga</span></code> in <code class="docutils literal notranslate"><span class="pre">content</span></code> column value from
<code class="docutils literal notranslate"><span class="pre">Entries</span></code> table.</p>
<p>See <a class="reference internal" href="../grn_expr/query_syntax.html"><span class="doc">Query syntax</span></a> for other syntax.</p>
<p>It can be used for not only fulltext search but also other
conditions. For example, <code class="docutils literal notranslate"><span class="pre">column:value</span></code> means the value of
<code class="docutils literal notranslate"><span class="pre">column</span></code> column is equal to <code class="docutils literal notranslate"><span class="pre">value</span></code>. <code class="docutils literal notranslate"><span class="pre">column:&lt;value</span></code> means the
value of <code class="docutils literal notranslate"><span class="pre">column</span></code> column is less than <code class="docutils literal notranslate"><span class="pre">value</span></code>.</p>
<p>Here is a simple equality operator search example.</p>
<p>Execution example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">select</span> <span class="n">Entries</span> <span class="o">--</span><span class="n">query</span> <span class="n">_key</span><span class="p">:</span><span class="n">Groonga</span>
<span class="c1"># [</span>
<span class="c1">#   [</span>
<span class="c1">#     0,</span>
<span class="c1">#     1337566253.89858,</span>
<span class="c1">#     0.000355720520019531</span>
<span class="c1">#   ],</span>
<span class="c1">#   [</span>
<span class="c1">#     [</span>
<span class="c1">#       [</span>
<span class="c1">#         1</span>
<span class="c1">#       ],</span>
<span class="c1">#       [</span>
<span class="c1">#         [</span>
<span class="c1">#           &quot;_id&quot;,</span>
<span class="c1">#           &quot;UInt32&quot;</span>
<span class="c1">#         ],</span>
<span class="c1">#         [</span>
<span class="c1">#           &quot;_key&quot;,</span>
<span class="c1">#           &quot;ShortText&quot;</span>
<span class="c1">#         ],</span>
<span class="c1">#         [</span>
<span class="c1">#           &quot;content&quot;,</span>
<span class="c1">#           &quot;Text&quot;</span>
<span class="c1">#         ],</span>
<span class="c1">#         [</span>
<span class="c1">#           &quot;n_likes&quot;,</span>
<span class="c1">#           &quot;UInt32&quot;</span>
<span class="c1">#         ],</span>
<span class="c1">#         [</span>
<span class="c1">#           &quot;tag&quot;,</span>
<span class="c1">#           &quot;ShortText&quot;</span>
<span class="c1">#         ]</span>
<span class="c1">#       ],</span>
<span class="c1">#       [</span>
<span class="c1">#         2,</span>
<span class="c1">#         &quot;Groonga&quot;,</span>
<span class="c1">#         &quot;I started to use Groonga. It&#39;s very fast!&quot;,</span>
<span class="c1">#         10,</span>
<span class="c1">#         &quot;Groonga&quot;</span>
<span class="c1">#       ]</span>
<span class="c1">#     ]</span>
<span class="c1">#   ]</span>
<span class="c1"># ]</span>
</pre></div>
</div>
<p>The <code class="docutils literal notranslate"><span class="pre">select</span></code> command searches records that <code class="docutils literal notranslate"><span class="pre">_key</span></code> column value is
<code class="docutils literal notranslate"><span class="pre">Groonga</span></code> from <code class="docutils literal notranslate"><span class="pre">Entries</span></code> table.</p>
<p>Here is a simple less than operator search example.</p>
<p>Execution example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">select</span> <span class="n">Entries</span> <span class="o">--</span><span class="n">query</span> <span class="n">n_likes</span><span class="p">:</span><span class="o">&lt;</span><span class="mi">11</span>
<span class="c1"># [</span>
<span class="c1">#   [</span>
<span class="c1">#     0,</span>
<span class="c1">#     1337566253.89858,</span>
<span class="c1">#     0.000355720520019531</span>
<span class="c1">#   ],</span>
<span class="c1">#   [</span>
<span class="c1">#     [</span>
<span class="c1">#       [</span>
<span class="c1">#         4</span>
<span class="c1">#       ],</span>
<span class="c1">#       [</span>
<span class="c1">#         [</span>
<span class="c1">#           &quot;_id&quot;,</span>
<span class="c1">#           &quot;UInt32&quot;</span>
<span class="c1">#         ],</span>
<span class="c1">#         [</span>
<span class="c1">#           &quot;_key&quot;,</span>
<span class="c1">#           &quot;ShortText&quot;</span>
<span class="c1">#         ],</span>
<span class="c1">#         [</span>
<span class="c1">#           &quot;content&quot;,</span>
<span class="c1">#           &quot;Text&quot;</span>
<span class="c1">#         ],</span>
<span class="c1">#         [</span>
<span class="c1">#           &quot;n_likes&quot;,</span>
<span class="c1">#           &quot;UInt32&quot;</span>
<span class="c1">#         ],</span>
<span class="c1">#         [</span>
<span class="c1">#           &quot;tag&quot;,</span>
<span class="c1">#           &quot;ShortText&quot;</span>
<span class="c1">#         ]</span>
<span class="c1">#       ],</span>
<span class="c1">#       [</span>
<span class="c1">#         1,</span>
<span class="c1">#         &quot;The first post!&quot;,</span>
<span class="c1">#         &quot;Welcome! This is my first post!&quot;,</span>
<span class="c1">#         5,</span>
<span class="c1">#         &quot;Hello&quot;</span>
<span class="c1">#       ],</span>
<span class="c1">#       [</span>
<span class="c1">#         2,</span>
<span class="c1">#         &quot;Groonga&quot;,</span>
<span class="c1">#         &quot;I started to use Groonga. It&#39;s very fast!&quot;,</span>
<span class="c1">#         10,</span>
<span class="c1">#         &quot;Groonga&quot;</span>
<span class="c1">#       ],</span>
<span class="c1">#       [</span>
<span class="c1">#         4,</span>
<span class="c1">#         &quot;Good-bye Senna&quot;,</span>
<span class="c1">#         &quot;I migrated all Senna system!&quot;,</span>
<span class="c1">#         3,</span>
<span class="c1">#         &quot;Senna&quot;</span>
<span class="c1">#       ],</span>
<span class="c1">#       [</span>
<span class="c1">#         5,</span>
<span class="c1">#         &quot;Good-bye Tritonn&quot;,</span>
<span class="c1">#         &quot;I also migrated all Tritonn system!&quot;,</span>
<span class="c1">#         3,</span>
<span class="c1">#         &quot;Senna&quot;</span>
<span class="c1">#       ]</span>
<span class="c1">#     ]</span>
<span class="c1">#   ]</span>
<span class="c1"># ]</span>
</pre></div>
</div>
<p>The <code class="docutils literal notranslate"><span class="pre">select</span></code> command searches records that <code class="docutils literal notranslate"><span class="pre">n_likes</span></code> column value
is less than <code class="docutils literal notranslate"><span class="pre">11</span></code> from <code class="docutils literal notranslate"><span class="pre">Entries</span></code> table.</p>
<p>See <a class="reference internal" href="../grn_expr/query_syntax.html"><span class="doc">Query syntax</span></a> for other operations.</p>
</section>
<section id="filter">
<span id="select-filter"></span><h4><span class="section-number">7.3.57.4.2.3. </span><code class="docutils literal notranslate"><span class="pre">filter</span></code><a class="headerlink" href="#filter" title="Link to this heading">#</a></h4>
<p>Specifies the filter text. Normally, it is used for complex search
conditions. <code class="docutils literal notranslate"><span class="pre">filter</span></code> can be used with <code class="docutils literal notranslate"><span class="pre">query</span></code> parameter. If both
<code class="docutils literal notranslate"><span class="pre">filter</span></code> and <code class="docutils literal notranslate"><span class="pre">query</span></code> are specified, there are conbined with
logical and. It means that matched records should be matched against
both <code class="docutils literal notranslate"><span class="pre">filter</span></code> and <code class="docutils literal notranslate"><span class="pre">query</span></code>.</p>
<p><code class="docutils literal notranslate"><span class="pre">filter</span></code> parameter is designed for complex conditions. A filter text
should be formatted in <a class="reference internal" href="../grn_expr/script_syntax.html"><span class="doc">Script syntax</span></a>. The syntax is
similar to ECMAScript. For example, <code class="docutils literal notranslate"><span class="pre">column</span> <span class="pre">==</span> <span class="pre">&quot;value&quot;</span></code> means that
the value of <code class="docutils literal notranslate"><span class="pre">column</span></code> column is equal to <code class="docutils literal notranslate"><span class="pre">&quot;value&quot;</span></code>. <code class="docutils literal notranslate"><span class="pre">column</span> <span class="pre">&lt;</span>
<span class="pre">value</span></code> means that the value of <code class="docutils literal notranslate"><span class="pre">column</span></code> column is less than
<code class="docutils literal notranslate"><span class="pre">value</span></code>.</p>
<p>Here is a simple equality operator search example.</p>
<p>Execution example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">select</span> <span class="n">Entries</span> <span class="o">--</span><span class="nb">filter</span> <span class="s1">&#39;_key == &quot;Groonga&quot;&#39;</span>
<span class="c1"># [</span>
<span class="c1">#   [</span>
<span class="c1">#     0,</span>
<span class="c1">#     1337566253.89858,</span>
<span class="c1">#     0.000355720520019531</span>
<span class="c1">#   ],</span>
<span class="c1">#   [</span>
<span class="c1">#     [</span>
<span class="c1">#       [</span>
<span class="c1">#         1</span>
<span class="c1">#       ],</span>
<span class="c1">#       [</span>
<span class="c1">#         [</span>
<span class="c1">#           &quot;_id&quot;,</span>
<span class="c1">#           &quot;UInt32&quot;</span>
<span class="c1">#         ],</span>
<span class="c1">#         [</span>
<span class="c1">#           &quot;_key&quot;,</span>
<span class="c1">#           &quot;ShortText&quot;</span>
<span class="c1">#         ],</span>
<span class="c1">#         [</span>
<span class="c1">#           &quot;content&quot;,</span>
<span class="c1">#           &quot;Text&quot;</span>
<span class="c1">#         ],</span>
<span class="c1">#         [</span>
<span class="c1">#           &quot;n_likes&quot;,</span>
<span class="c1">#           &quot;UInt32&quot;</span>
<span class="c1">#         ],</span>
<span class="c1">#         [</span>
<span class="c1">#           &quot;tag&quot;,</span>
<span class="c1">#           &quot;ShortText&quot;</span>
<span class="c1">#         ]</span>
<span class="c1">#       ],</span>
<span class="c1">#       [</span>
<span class="c1">#         2,</span>
<span class="c1">#         &quot;Groonga&quot;,</span>
<span class="c1">#         &quot;I started to use Groonga. It&#39;s very fast!&quot;,</span>
<span class="c1">#         10,</span>
<span class="c1">#         &quot;Groonga&quot;</span>
<span class="c1">#       ]</span>
<span class="c1">#     ]</span>
<span class="c1">#   ]</span>
<span class="c1"># ]</span>
</pre></div>
</div>
<p>The <code class="docutils literal notranslate"><span class="pre">select</span></code> command searches records that <code class="docutils literal notranslate"><span class="pre">_key</span></code> column value is
<code class="docutils literal notranslate"><span class="pre">Groonga</span></code> from <code class="docutils literal notranslate"><span class="pre">Entries</span></code> table.</p>
<p>Here is a simple less than operator search example.</p>
<p>Execution example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">select</span> <span class="n">Entries</span> <span class="o">--</span><span class="nb">filter</span> <span class="s1">&#39;n_likes &lt; 11&#39;</span>
<span class="c1"># [</span>
<span class="c1">#   [</span>
<span class="c1">#     0,</span>
<span class="c1">#     1337566253.89858,</span>
<span class="c1">#     0.000355720520019531</span>
<span class="c1">#   ],</span>
<span class="c1">#   [</span>
<span class="c1">#     [</span>
<span class="c1">#       [</span>
<span class="c1">#         4</span>
<span class="c1">#       ],</span>
<span class="c1">#       [</span>
<span class="c1">#         [</span>
<span class="c1">#           &quot;_id&quot;,</span>
<span class="c1">#           &quot;UInt32&quot;</span>
<span class="c1">#         ],</span>
<span class="c1">#         [</span>
<span class="c1">#           &quot;_key&quot;,</span>
<span class="c1">#           &quot;ShortText&quot;</span>
<span class="c1">#         ],</span>
<span class="c1">#         [</span>
<span class="c1">#           &quot;content&quot;,</span>
<span class="c1">#           &quot;Text&quot;</span>
<span class="c1">#         ],</span>
<span class="c1">#         [</span>
<span class="c1">#           &quot;n_likes&quot;,</span>
<span class="c1">#           &quot;UInt32&quot;</span>
<span class="c1">#         ],</span>
<span class="c1">#         [</span>
<span class="c1">#           &quot;tag&quot;,</span>
<span class="c1">#           &quot;ShortText&quot;</span>
<span class="c1">#         ]</span>
<span class="c1">#       ],</span>
<span class="c1">#       [</span>
<span class="c1">#         1,</span>
<span class="c1">#         &quot;The first post!&quot;,</span>
<span class="c1">#         &quot;Welcome! This is my first post!&quot;,</span>
<span class="c1">#         5,</span>
<span class="c1">#         &quot;Hello&quot;</span>
<span class="c1">#       ],</span>
<span class="c1">#       [</span>
<span class="c1">#         2,</span>
<span class="c1">#         &quot;Groonga&quot;,</span>
<span class="c1">#         &quot;I started to use Groonga. It&#39;s very fast!&quot;,</span>
<span class="c1">#         10,</span>
<span class="c1">#         &quot;Groonga&quot;</span>
<span class="c1">#       ],</span>
<span class="c1">#       [</span>
<span class="c1">#         4,</span>
<span class="c1">#         &quot;Good-bye Senna&quot;,</span>
<span class="c1">#         &quot;I migrated all Senna system!&quot;,</span>
<span class="c1">#         3,</span>
<span class="c1">#         &quot;Senna&quot;</span>
<span class="c1">#       ],</span>
<span class="c1">#       [</span>
<span class="c1">#         5,</span>
<span class="c1">#         &quot;Good-bye Tritonn&quot;,</span>
<span class="c1">#         &quot;I also migrated all Tritonn system!&quot;,</span>
<span class="c1">#         3,</span>
<span class="c1">#         &quot;Senna&quot;</span>
<span class="c1">#       ]</span>
<span class="c1">#     ]</span>
<span class="c1">#   ]</span>
<span class="c1"># ]</span>
</pre></div>
</div>
<p>The <code class="docutils literal notranslate"><span class="pre">select</span></code> command searches records that <code class="docutils literal notranslate"><span class="pre">n_likes</span></code> column value
is less than <code class="docutils literal notranslate"><span class="pre">11</span></code> from <code class="docutils literal notranslate"><span class="pre">Entries</span></code> table.</p>
<p>See <a class="reference internal" href="../grn_expr/script_syntax.html"><span class="doc">Script syntax</span></a> for other operators.</p>
</section>
<section id="load-table">
<span id="select-load-table"></span><h4><span class="section-number">7.3.57.4.2.4. </span><code class="docutils literal notranslate"><span class="pre">load_table</span></code><a class="headerlink" href="#load-table" title="Link to this heading">#</a></h4>
<div class="versionadded">
<p><span class="versionmodified added">New in version 9.0.1.</span></p>
</div>
<p>You can store specified a table a result of <code class="docutils literal notranslate"><span class="pre">select</span></code> with <code class="docutils literal notranslate"><span class="pre">--load_table</span></code>, <code class="docutils literal notranslate"><span class="pre">--load-columns</span></code> and <code class="docutils literal notranslate"><span class="pre">--load_values</span></code> arguments.
<code class="docutils literal notranslate"><span class="pre">--load_table</span></code> specifies a table name for storing a result of <code class="docutils literal notranslate"><span class="pre">select</span></code>.</p>
<p>You must specify a table that already exists.</p>
<p>This argument must use with <a class="reference internal" href="#select-load-columns"><span class="std std-ref">load_columns</span></a> and <a class="reference internal" href="#select-load-values"><span class="std std-ref">load_values</span></a>.</p>
<p>Here is an example that can store <code class="docutils literal notranslate"><span class="pre">_id</span></code> and <code class="docutils literal notranslate"><span class="pre">timestamp</span></code> that a result of <code class="docutils literal notranslate"><span class="pre">select</span></code> in a Logs table specified by <code class="docutils literal notranslate"><span class="pre">--load_table</span></code>.</p>
<p>Execution example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">table_create</span> <span class="n">Logs_20150203</span> <span class="n">TABLE_HASH_KEY</span> <span class="n">ShortText</span>
<span class="c1"># [[0,1337566253.89858,0.000355720520019531],true]</span>
<span class="n">column_create</span> <span class="n">Logs_20150203</span> <span class="n">timestamp</span> <span class="n">COLUMN_SCALAR</span> <span class="n">Time</span>
<span class="c1"># [[0,1337566253.89858,0.000355720520019531],true]</span>
<span class="n">table_create</span> <span class="n">Logs</span> <span class="n">TABLE_HASH_KEY</span> <span class="n">ShortText</span>
<span class="c1"># [[0,1337566253.89858,0.000355720520019531],true]</span>
<span class="n">column_create</span> <span class="n">Logs</span> <span class="n">original_id</span> <span class="n">COLUMN_SCALAR</span> <span class="n">UInt32</span>
<span class="c1"># [[0,1337566253.89858,0.000355720520019531],true]</span>
<span class="n">column_create</span> <span class="n">Logs</span> <span class="n">timestamp_text</span> <span class="n">COLUMN_SCALAR</span> <span class="n">ShortText</span>
<span class="c1"># [[0,1337566253.89858,0.000355720520019531],true]</span>
<span class="n">load</span> <span class="o">--</span><span class="n">table</span> <span class="n">Logs_20150203</span>
<span class="p">[</span>
<span class="p">{</span>
  <span class="s2">&quot;_key&quot;</span><span class="p">:</span> <span class="s2">&quot;2015-02-03:1&quot;</span><span class="p">,</span>
  <span class="s2">&quot;timestamp&quot;</span><span class="p">:</span> <span class="s2">&quot;2015-02-03 10:49:00&quot;</span>
<span class="p">},</span>
<span class="p">{</span>
  <span class="s2">&quot;_key&quot;</span><span class="p">:</span> <span class="s2">&quot;2015-02-03:2&quot;</span><span class="p">,</span>
  <span class="s2">&quot;timestamp&quot;</span><span class="p">:</span> <span class="s2">&quot;2015-02-03 12:49:00&quot;</span>
<span class="p">}</span>
<span class="p">]</span>
<span class="c1"># [[0,1337566253.89858,0.000355720520019531],2]</span>
<span class="n">select</span> \
  <span class="o">--</span><span class="n">table</span> <span class="n">Logs_20150203</span> \
  <span class="o">--</span><span class="n">load_table</span> <span class="n">Logs</span> \
  <span class="o">--</span><span class="n">load_columns</span> <span class="s2">&quot;_key, original_id, timestamp_text&quot;</span> \
  <span class="o">--</span><span class="n">load_values</span> <span class="s2">&quot;_key, _id, timestamp&quot;</span>
<span class="c1"># [</span>
<span class="c1">#   [</span>
<span class="c1">#     0,</span>
<span class="c1">#     1337566253.89858,</span>
<span class="c1">#     0.000355720520019531</span>
<span class="c1">#   ],</span>
<span class="c1">#   [</span>
<span class="c1">#     [</span>
<span class="c1">#       [</span>
<span class="c1">#         2</span>
<span class="c1">#       ],</span>
<span class="c1">#       [</span>
<span class="c1">#         [</span>
<span class="c1">#           &quot;_id&quot;,</span>
<span class="c1">#           &quot;UInt32&quot;</span>
<span class="c1">#         ],</span>
<span class="c1">#         [</span>
<span class="c1">#           &quot;_key&quot;,</span>
<span class="c1">#           &quot;ShortText&quot;</span>
<span class="c1">#         ],</span>
<span class="c1">#         [</span>
<span class="c1">#           &quot;timestamp&quot;,</span>
<span class="c1">#           &quot;Time&quot;</span>
<span class="c1">#         ]</span>
<span class="c1">#       ],</span>
<span class="c1">#       [</span>
<span class="c1">#         1,</span>
<span class="c1">#         &quot;2015-02-03:1&quot;,</span>
<span class="c1">#         1422928140.0</span>
<span class="c1">#       ],</span>
<span class="c1">#       [</span>
<span class="c1">#         2,</span>
<span class="c1">#         &quot;2015-02-03:2&quot;,</span>
<span class="c1">#         1422935340.0</span>
<span class="c1">#       ]</span>
<span class="c1">#     ]</span>
<span class="c1">#   ]</span>
<span class="c1"># ]</span>
<span class="n">select</span> <span class="o">--</span><span class="n">table</span> <span class="n">Logs</span>
<span class="c1"># [</span>
<span class="c1">#   [</span>
<span class="c1">#     0,</span>
<span class="c1">#     1337566253.89858,</span>
<span class="c1">#     0.000355720520019531</span>
<span class="c1">#   ],</span>
<span class="c1">#   [</span>
<span class="c1">#     [</span>
<span class="c1">#       [</span>
<span class="c1">#         2</span>
<span class="c1">#       ],</span>
<span class="c1">#       [</span>
<span class="c1">#         [</span>
<span class="c1">#           &quot;_id&quot;,</span>
<span class="c1">#           &quot;UInt32&quot;</span>
<span class="c1">#         ],</span>
<span class="c1">#         [</span>
<span class="c1">#           &quot;_key&quot;,</span>
<span class="c1">#           &quot;ShortText&quot;</span>
<span class="c1">#         ],</span>
<span class="c1">#         [</span>
<span class="c1">#           &quot;original_id&quot;,</span>
<span class="c1">#           &quot;UInt32&quot;</span>
<span class="c1">#         ],</span>
<span class="c1">#         [</span>
<span class="c1">#           &quot;timestamp_text&quot;,</span>
<span class="c1">#           &quot;ShortText&quot;</span>
<span class="c1">#         ]</span>
<span class="c1">#       ],</span>
<span class="c1">#       [</span>
<span class="c1">#         1,</span>
<span class="c1">#         &quot;2015-02-03:1&quot;,</span>
<span class="c1">#         1,</span>
<span class="c1">#         &quot;1422928140000000&quot;</span>
<span class="c1">#       ],</span>
<span class="c1">#       [</span>
<span class="c1">#         2,</span>
<span class="c1">#         &quot;2015-02-03:2&quot;,</span>
<span class="c1">#         2,</span>
<span class="c1">#         &quot;1422935340000000&quot;</span>
<span class="c1">#       ]</span>
<span class="c1">#     ]</span>
<span class="c1">#   ]</span>
<span class="c1"># ]</span>
</pre></div>
</div>
</section>
<section id="load-columns">
<span id="select-load-columns"></span><h4><span class="section-number">7.3.57.4.2.5. </span><code class="docutils literal notranslate"><span class="pre">load_columns</span></code><a class="headerlink" href="#load-columns" title="Link to this heading">#</a></h4>
<div class="versionadded">
<p><span class="versionmodified added">New in version 9.0.1.</span></p>
</div>
<p>Specifies columns of a table that specifying <code class="docutils literal notranslate"><span class="pre">--load-table</span></code>.
Stores value of columns that specified with <a class="reference internal" href="#select-load-values"><span class="std std-ref">load_values</span></a> in columns that specified with this argument.
You must specify columns that already exists.</p>
<p>This argument must use with <a class="reference internal" href="#select-load-table"><span class="std std-ref">load_table</span></a> and <a class="reference internal" href="#select-load-values"><span class="std std-ref">load_values</span></a>.</p>
<p>See example of <code class="docutils literal notranslate"><span class="pre">--load_table</span></code> for how to use this argument.</p>
</section>
<section id="load-values">
<span id="select-load-values"></span><h4><span class="section-number">7.3.57.4.2.6. </span><code class="docutils literal notranslate"><span class="pre">load_values</span></code><a class="headerlink" href="#load-values" title="Link to this heading">#</a></h4>
<div class="versionadded">
<p><span class="versionmodified added">New in version 9.0.1.</span></p>
</div>
<p>Specifies columns of result of <code class="docutils literal notranslate"><span class="pre">select</span></code>.
Specifies columns for storing values into columns that specified with <a class="reference internal" href="#select-load-columns"><span class="std std-ref">load_columns</span></a>.
You must specify columns that already exists.</p>
<p>This argument must use with <a class="reference internal" href="#select-load-table"><span class="std std-ref">load_table</span></a> and <a class="reference internal" href="#select-load-columns"><span class="std std-ref">load_columns</span></a>.</p>
<p>See example of <code class="docutils literal notranslate"><span class="pre">--load_table</span></code> for how to use this argument.</p>
</section>
</section>
<section id="advanced-search-parameters">
<span id="select-advanced-search-parameters"></span><h3><span class="section-number">7.3.57.4.3. </span>Advanced search parameters<a class="headerlink" href="#advanced-search-parameters" title="Link to this heading">#</a></h3>
<section id="match-escalation-threshold">
<span id="select-match-escalation-threshold"></span><h4><span class="section-number">7.3.57.4.3.1. </span><code class="docutils literal notranslate"><span class="pre">match_escalation_threshold</span></code><a class="headerlink" href="#match-escalation-threshold" title="Link to this heading">#</a></h4>
<div class="versionadded">
<p><span class="versionmodified added">New in version 8.0.1.</span></p>
</div>
<p>Specifies threshold to determine whether search storategy
escalation is used or not. The threshold is compared against the
number of matched records. If the number of matched records is equal
to or less than the threshold, the search storategy escalation is
used. See <a class="reference internal" href="../../spec/search.html"><span class="doc">検索</span></a> about the search storategy escalation.</p>
<p>The default threshold is 0. It means that search storategy escalation
is used only when no records are matched.</p>
<p>The default threshold can be customized by one of the followings.</p>
<blockquote>
<div><ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">--with-match-escalation-threshold</span></code> option of configure</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">--match-escalation-threshold</span></code> option of groonga command</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">match-escalation-threshold</span></code> configuration item in configuration
file</p></li>
</ul>
</div></blockquote>
<p>Here is a simple <code class="docutils literal notranslate"><span class="pre">match_escalation_threshold</span></code> usage example. The
first <code class="docutils literal notranslate"><span class="pre">select</span></code> doesn’t have <code class="docutils literal notranslate"><span class="pre">match_escalation_threshold</span></code>
parameter. The second <code class="docutils literal notranslate"><span class="pre">select</span></code> has <code class="docutils literal notranslate"><span class="pre">match_escalation_threshold</span></code>
parameter.</p>
<p>Execution example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">select</span> <span class="n">Entries</span> <span class="o">--</span><span class="n">match_columns</span> <span class="n">content</span> <span class="o">--</span><span class="n">query</span> <span class="n">groo</span>
<span class="c1"># [</span>
<span class="c1">#   [</span>
<span class="c1">#     0,</span>
<span class="c1">#     1337566253.89858,</span>
<span class="c1">#     0.000355720520019531</span>
<span class="c1">#   ],</span>
<span class="c1">#   [</span>
<span class="c1">#     [</span>
<span class="c1">#       [</span>
<span class="c1">#         1</span>
<span class="c1">#       ],</span>
<span class="c1">#       [</span>
<span class="c1">#         [</span>
<span class="c1">#           &quot;_id&quot;,</span>
<span class="c1">#           &quot;UInt32&quot;</span>
<span class="c1">#         ],</span>
<span class="c1">#         [</span>
<span class="c1">#           &quot;_key&quot;,</span>
<span class="c1">#           &quot;ShortText&quot;</span>
<span class="c1">#         ],</span>
<span class="c1">#         [</span>
<span class="c1">#           &quot;content&quot;,</span>
<span class="c1">#           &quot;Text&quot;</span>
<span class="c1">#         ],</span>
<span class="c1">#         [</span>
<span class="c1">#           &quot;n_likes&quot;,</span>
<span class="c1">#           &quot;UInt32&quot;</span>
<span class="c1">#         ],</span>
<span class="c1">#         [</span>
<span class="c1">#           &quot;tag&quot;,</span>
<span class="c1">#           &quot;ShortText&quot;</span>
<span class="c1">#         ]</span>
<span class="c1">#       ],</span>
<span class="c1">#       [</span>
<span class="c1">#         2,</span>
<span class="c1">#         &quot;Groonga&quot;,</span>
<span class="c1">#         &quot;I started to use Groonga. It&#39;s very fast!&quot;,</span>
<span class="c1">#         10,</span>
<span class="c1">#         &quot;Groonga&quot;</span>
<span class="c1">#       ]</span>
<span class="c1">#     ]</span>
<span class="c1">#   ]</span>
<span class="c1"># ]</span>
<span class="n">select</span> <span class="n">Entries</span> <span class="o">--</span><span class="n">match_columns</span> <span class="n">content</span> <span class="o">--</span><span class="n">query</span> <span class="n">groo</span> <span class="o">--</span><span class="n">match_escalation_threshold</span> <span class="o">-</span><span class="mi">1</span>
<span class="c1"># [</span>
<span class="c1">#   [</span>
<span class="c1">#     0,</span>
<span class="c1">#     1337566253.89858,</span>
<span class="c1">#     0.000355720520019531</span>
<span class="c1">#   ],</span>
<span class="c1">#   [</span>
<span class="c1">#     [</span>
<span class="c1">#       [</span>
<span class="c1">#         0</span>
<span class="c1">#       ],</span>
<span class="c1">#       [</span>
<span class="c1">#         [</span>
<span class="c1">#           &quot;_id&quot;,</span>
<span class="c1">#           &quot;UInt32&quot;</span>
<span class="c1">#         ],</span>
<span class="c1">#         [</span>
<span class="c1">#           &quot;_key&quot;,</span>
<span class="c1">#           &quot;ShortText&quot;</span>
<span class="c1">#         ],</span>
<span class="c1">#         [</span>
<span class="c1">#           &quot;content&quot;,</span>
<span class="c1">#           &quot;Text&quot;</span>
<span class="c1">#         ],</span>
<span class="c1">#         [</span>
<span class="c1">#           &quot;n_likes&quot;,</span>
<span class="c1">#           &quot;UInt32&quot;</span>
<span class="c1">#         ],</span>
<span class="c1">#         [</span>
<span class="c1">#           &quot;tag&quot;,</span>
<span class="c1">#           &quot;ShortText&quot;</span>
<span class="c1">#         ]</span>
<span class="c1">#       ]</span>
<span class="c1">#     ]</span>
<span class="c1">#   ]</span>
<span class="c1"># ]</span>
</pre></div>
</div>
<p>The first <code class="docutils literal notranslate"><span class="pre">select</span></code> command searches records that contain a word
<code class="docutils literal notranslate"><span class="pre">groo</span></code> in <code class="docutils literal notranslate"><span class="pre">content</span></code> column value from <code class="docutils literal notranslate"><span class="pre">Entries</span></code> table. But no
records are matched because the <code class="docutils literal notranslate"><span class="pre">TokenBigram</span></code> tokenizer tokenizes
<code class="docutils literal notranslate"><span class="pre">groonga</span></code> to <code class="docutils literal notranslate"><span class="pre">groonga</span></code> not <code class="docutils literal notranslate"><span class="pre">gr|ro|oo|on|ng|ga</span></code>. (The
<code class="docutils literal notranslate"><span class="pre">TokenBigramSplitSymbolAlpha</span></code> tokenizer tokenizes <code class="docutils literal notranslate"><span class="pre">groonga</span></code> to
<code class="docutils literal notranslate"><span class="pre">gr|ro|oo|on|ng|ga</span></code>. See <a class="reference internal" href="../tokenizers.html"><span class="doc">Tokenizers</span></a> for details.)
It means that <code class="docutils literal notranslate"><span class="pre">groonga</span></code> is indexed but <code class="docutils literal notranslate"><span class="pre">groo</span></code> isn’t indexed. So no
records are matched against <code class="docutils literal notranslate"><span class="pre">groo</span></code> by exact match. In the case, the
search storategy escalation is used because the number of matched
records (0) is equal to <code class="docutils literal notranslate"><span class="pre">match_escalation_threshold</span></code> (0). One record
is matched against <code class="docutils literal notranslate"><span class="pre">groo</span></code> by unsplit search.</p>
<p>The second <code class="docutils literal notranslate"><span class="pre">select</span></code> command also searches records that contain a
word <code class="docutils literal notranslate"><span class="pre">groo</span></code> in <code class="docutils literal notranslate"><span class="pre">content</span></code> column value from <code class="docutils literal notranslate"><span class="pre">Entries</span></code> table. And
it also doesn’t find matched records. In this case, the search
storategy escalation is not used because the number of matched
records (0) is larger than <code class="docutils literal notranslate"><span class="pre">match_escalation_threshold</span></code> (-1). So no
more searches aren’t executed. And no records are matched.</p>
</section>
<section id="match-escalation">
<span id="select-match-escalation"></span><h4><span class="section-number">7.3.57.4.3.2. </span><code class="docutils literal notranslate"><span class="pre">match_escalation</span></code><a class="headerlink" href="#match-escalation" title="Link to this heading">#</a></h4>
<p>Specifies how to use match escalation. See also
<a class="reference internal" href="#select-match-escalation"><span class="std std-ref">match_escalation</span></a> and <a class="reference internal" href="../../spec/search.html"><span class="doc">検索</span></a> about the match
escalation.</p>
<p>Here are available values:</p>
<div class="pst-scrollable-table-container"><table class="table">
<thead>
<tr class="row-odd"><th class="head"><p>Value</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">auto</span></code></p></td>
<td><p>Groonga uses <a class="reference internal" href="#select-match-escalation-threshold"><span class="std std-ref">match_escalation_threshold</span></a> to
determine whether match escalation is used or not.</p>
<p>This is the default.</p>
</td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">yes</span></code></p></td>
<td><p>Groonga always uses match escalation.</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">no</span></code></p></td>
<td><p>Groonga never use match escalation.</p></td>
</tr>
</tbody>
</table>
</div>
<p><code class="docutils literal notranslate"><span class="pre">--match_escalation</span> <span class="pre">yes</span></code> is stronger than
<code class="docutils literal notranslate"><span class="pre">--match_escalation_threshold</span> <span class="pre">9999...999</span></code>. <code class="docutils literal notranslate"><span class="pre">--filter</span> <span class="pre">'true</span> <span class="pre">&amp;&amp;</span>
<span class="pre">column</span> <span class="pre">&#64;</span> <span class="pre">&quot;query&quot;</span></code> with <code class="docutils literal notranslate"><span class="pre">--match_escalation</span> <span class="pre">yes</span></code> uses match
escalation. <code class="docutils literal notranslate"><span class="pre">--filter</span> <span class="pre">'true</span> <span class="pre">&amp;&amp;</span> <span class="pre">column</span> <span class="pre">&#64;</span> <span class="pre">&quot;query&quot;</span></code> with
<code class="docutils literal notranslate"><span class="pre">--match_escalation_threshold</span> <span class="pre">9999...999</span></code> doesn’t use match
escalation.</p>
<p>Here is a simple <code class="docutils literal notranslate"><span class="pre">match_escalation</span></code> usage example. The first
<code class="docutils literal notranslate"><span class="pre">select</span></code> doesn’t have <code class="docutils literal notranslate"><span class="pre">match_escalation</span></code> parameter. The
second <code class="docutils literal notranslate"><span class="pre">select</span></code> has <code class="docutils literal notranslate"><span class="pre">match_escalation</span></code> parameter.</p>
<p>Execution example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">select</span> <span class="n">Entries</span> <span class="o">--</span><span class="nb">filter</span> <span class="s1">&#39;true &amp;&amp; content @ &quot;groo&quot;&#39;</span>
<span class="c1"># [</span>
<span class="c1">#   [</span>
<span class="c1">#     0,</span>
<span class="c1">#     1337566253.89858,</span>
<span class="c1">#     0.000355720520019531</span>
<span class="c1">#   ],</span>
<span class="c1">#   [</span>
<span class="c1">#     [</span>
<span class="c1">#       [</span>
<span class="c1">#         0</span>
<span class="c1">#       ],</span>
<span class="c1">#       [</span>
<span class="c1">#         [</span>
<span class="c1">#           &quot;_id&quot;,</span>
<span class="c1">#           &quot;UInt32&quot;</span>
<span class="c1">#         ],</span>
<span class="c1">#         [</span>
<span class="c1">#           &quot;_key&quot;,</span>
<span class="c1">#           &quot;ShortText&quot;</span>
<span class="c1">#         ],</span>
<span class="c1">#         [</span>
<span class="c1">#           &quot;content&quot;,</span>
<span class="c1">#           &quot;Text&quot;</span>
<span class="c1">#         ],</span>
<span class="c1">#         [</span>
<span class="c1">#           &quot;n_likes&quot;,</span>
<span class="c1">#           &quot;UInt32&quot;</span>
<span class="c1">#         ],</span>
<span class="c1">#         [</span>
<span class="c1">#           &quot;tag&quot;,</span>
<span class="c1">#           &quot;ShortText&quot;</span>
<span class="c1">#         ]</span>
<span class="c1">#       ]</span>
<span class="c1">#     ]</span>
<span class="c1">#   ]</span>
<span class="c1"># ]</span>
<span class="n">select</span> <span class="n">Entries</span> <span class="o">--</span><span class="nb">filter</span> <span class="s1">&#39;true &amp;&amp; content @ &quot;groo&quot;&#39;</span> <span class="o">--</span><span class="n">match_escalation</span> <span class="n">yes</span>
<span class="c1"># [</span>
<span class="c1">#   [</span>
<span class="c1">#     0,</span>
<span class="c1">#     1337566253.89858,</span>
<span class="c1">#     0.000355720520019531</span>
<span class="c1">#   ],</span>
<span class="c1">#   [</span>
<span class="c1">#     [</span>
<span class="c1">#       [</span>
<span class="c1">#         1</span>
<span class="c1">#       ],</span>
<span class="c1">#       [</span>
<span class="c1">#         [</span>
<span class="c1">#           &quot;_id&quot;,</span>
<span class="c1">#           &quot;UInt32&quot;</span>
<span class="c1">#         ],</span>
<span class="c1">#         [</span>
<span class="c1">#           &quot;_key&quot;,</span>
<span class="c1">#           &quot;ShortText&quot;</span>
<span class="c1">#         ],</span>
<span class="c1">#         [</span>
<span class="c1">#           &quot;content&quot;,</span>
<span class="c1">#           &quot;Text&quot;</span>
<span class="c1">#         ],</span>
<span class="c1">#         [</span>
<span class="c1">#           &quot;n_likes&quot;,</span>
<span class="c1">#           &quot;UInt32&quot;</span>
<span class="c1">#         ],</span>
<span class="c1">#         [</span>
<span class="c1">#           &quot;tag&quot;,</span>
<span class="c1">#           &quot;ShortText&quot;</span>
<span class="c1">#         ]</span>
<span class="c1">#       ],</span>
<span class="c1">#       [</span>
<span class="c1">#         2,</span>
<span class="c1">#         &quot;Groonga&quot;,</span>
<span class="c1">#         &quot;I started to use Groonga. It&#39;s very fast!&quot;,</span>
<span class="c1">#         10,</span>
<span class="c1">#         &quot;Groonga&quot;</span>
<span class="c1">#       ]</span>
<span class="c1">#     ]</span>
<span class="c1">#   ]</span>
<span class="c1"># ]</span>
</pre></div>
</div>
<p>The first <code class="docutils literal notranslate"><span class="pre">select</span></code> command searches records that contain a word
<code class="docutils literal notranslate"><span class="pre">groo</span></code> in <code class="docutils literal notranslate"><span class="pre">content</span></code> column value from <code class="docutils literal notranslate"><span class="pre">Entries</span></code> table. But no
records are matched because the <code class="docutils literal notranslate"><span class="pre">TokenBigram</span></code> tokenizer tokenizes
<code class="docutils literal notranslate"><span class="pre">groonga</span></code> to <code class="docutils literal notranslate"><span class="pre">groonga</span></code> not <code class="docutils literal notranslate"><span class="pre">gr|ro|oo|on|ng|ga</span></code>.</p>
<p>The second <code class="docutils literal notranslate"><span class="pre">select</span></code> command also searches records that contain a
word <code class="docutils literal notranslate"><span class="pre">groo</span></code> in <code class="docutils literal notranslate"><span class="pre">content</span></code> column value from <code class="docutils literal notranslate"><span class="pre">Entries</span></code> table. And
it uses match escalation. So it can find matched records.</p>
</section>
<section id="query-expansion">
<span id="select-query-expansion"></span><h4><span class="section-number">7.3.57.4.3.3. </span><code class="docutils literal notranslate"><span class="pre">query_expansion</span></code><a class="headerlink" href="#query-expansion" title="Link to this heading">#</a></h4>
<div class="deprecated">
<p><span class="versionmodified deprecated">Deprecated since version 3.0.2: </span>Use <a class="reference internal" href="#select-query-expander"><span class="std std-ref">query_expander</span></a> instead.</p>
</div>
</section>
<section id="query-flags">
<span id="select-query-flags"></span><h4><span class="section-number">7.3.57.4.3.4. </span><code class="docutils literal notranslate"><span class="pre">query_flags</span></code><a class="headerlink" href="#query-flags" title="Link to this heading">#</a></h4>
<p>It customs <code class="docutils literal notranslate"><span class="pre">query</span></code> parameter syntax. You cannot update column value
by <code class="docutils literal notranslate"><span class="pre">query</span></code> parameter by default. But if you specify
<code class="docutils literal notranslate"><span class="pre">ALLOW_COLUMN|ALLOW_UPDATE</span></code> as <code class="docutils literal notranslate"><span class="pre">query_flags</span></code>, you can update
column value by <code class="docutils literal notranslate"><span class="pre">query</span></code>.</p>
<p>Here are available values:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">ALLOW_PRAGMA</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">ALLOW_COLUMN</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">ALLOW_UPDATE</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">ALLOW_LEADING_NOT</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">QUERY_NO_SYNTAX_ERROR</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">NONE</span></code></p></li>
</ul>
<p><code class="docutils literal notranslate"><span class="pre">ALLOW_PRAGMA</span></code> enables pragma at the head of <code class="docutils literal notranslate"><span class="pre">query</span></code>. This is not
implemented yet.</p>
<p><code class="docutils literal notranslate"><span class="pre">ALLOW_COLUMN</span></code> enables search againt columns that are not included
in <code class="docutils literal notranslate"><span class="pre">match_columns</span></code>. To specify column, there are <code class="docutils literal notranslate"><span class="pre">COLUMN:...</span></code>
syntaxes.</p>
<p><code class="docutils literal notranslate"><span class="pre">ALLOW_UPDATE</span></code> enables column update by <code class="docutils literal notranslate"><span class="pre">query</span></code> with
<code class="docutils literal notranslate"><span class="pre">COLUMN:=NEW_VALUE</span></code> syntax. <code class="docutils literal notranslate"><span class="pre">ALLOW_COLUMN</span></code> is also required to
update column because the column update syntax specifies column.</p>
<p><code class="docutils literal notranslate"><span class="pre">ALLOW_LEADING_NOT</span></code> enables leading NOT condition with <code class="docutils literal notranslate"><span class="pre">-WORD</span></code>
syntax. The query searches records that doesn’t match
<code class="docutils literal notranslate"><span class="pre">WORD</span></code>. Leading NOT condition query is heavy query in many cases
because it matches many records. So this flag is disabled by
default. Be careful about it when you use the flag.</p>
<p><code class="docutils literal notranslate"><span class="pre">QUERY_NO_SYNTAX_ERROR</span></code> enables never causes syntax error for query.
This flag is useful when an application uses user input directly and doesn’t want to show syntax error to the user and in a log.
This flag is disabled by default.</p>
<p><code class="docutils literal notranslate"><span class="pre">NONE</span></code> is just ignores. You can use <code class="docutils literal notranslate"><span class="pre">NONE</span></code> for specifying no flags.</p>
<p>They can be combined by separated <code class="docutils literal notranslate"><span class="pre">|</span></code> such as
<code class="docutils literal notranslate"><span class="pre">ALLOW_COLUMN|ALLOW_UPDATE</span></code>.</p>
<p>The default value is <code class="docutils literal notranslate"><span class="pre">ALLOW_PRAGMA|ALLOW_COLUMN</span></code>.</p>
<p>Here is a usage example of <code class="docutils literal notranslate"><span class="pre">ALLOW_COLUMN</span></code>.</p>
<p>Execution example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">select</span> <span class="n">Entries</span> <span class="o">--</span><span class="n">query</span> <span class="n">content</span><span class="p">:</span><span class="nd">@mroonga</span> <span class="o">--</span><span class="n">query_flags</span> <span class="n">ALLOW_COLUMN</span>
<span class="c1"># [</span>
<span class="c1">#   [</span>
<span class="c1">#     0,</span>
<span class="c1">#     1337566253.89858,</span>
<span class="c1">#     0.000355720520019531</span>
<span class="c1">#   ],</span>
<span class="c1">#   [</span>
<span class="c1">#     [</span>
<span class="c1">#       [</span>
<span class="c1">#         1</span>
<span class="c1">#       ],</span>
<span class="c1">#       [</span>
<span class="c1">#         [</span>
<span class="c1">#           &quot;_id&quot;,</span>
<span class="c1">#           &quot;UInt32&quot;</span>
<span class="c1">#         ],</span>
<span class="c1">#         [</span>
<span class="c1">#           &quot;_key&quot;,</span>
<span class="c1">#           &quot;ShortText&quot;</span>
<span class="c1">#         ],</span>
<span class="c1">#         [</span>
<span class="c1">#           &quot;content&quot;,</span>
<span class="c1">#           &quot;Text&quot;</span>
<span class="c1">#         ],</span>
<span class="c1">#         [</span>
<span class="c1">#           &quot;n_likes&quot;,</span>
<span class="c1">#           &quot;UInt32&quot;</span>
<span class="c1">#         ],</span>
<span class="c1">#         [</span>
<span class="c1">#           &quot;tag&quot;,</span>
<span class="c1">#           &quot;ShortText&quot;</span>
<span class="c1">#         ]</span>
<span class="c1">#       ],</span>
<span class="c1">#       [</span>
<span class="c1">#         3,</span>
<span class="c1">#         &quot;Mroonga&quot;,</span>
<span class="c1">#         &quot;I also started to use Mroonga. It&#39;s also very fast! Really fast!&quot;,</span>
<span class="c1">#         15,</span>
<span class="c1">#         &quot;Groonga&quot;</span>
<span class="c1">#       ]</span>
<span class="c1">#     ]</span>
<span class="c1">#   ]</span>
<span class="c1"># ]</span>
</pre></div>
</div>
<p>The <code class="docutils literal notranslate"><span class="pre">select</span></code> command searches records that contain <code class="docutils literal notranslate"><span class="pre">mroonga</span></code> in
<code class="docutils literal notranslate"><span class="pre">content</span></code> column value from <code class="docutils literal notranslate"><span class="pre">Entries</span></code> table.</p>
<p>Here is a usage example of <code class="docutils literal notranslate"><span class="pre">ALLOW_UPDATE</span></code>.</p>
<p>Execution example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">table_create</span> <span class="n">Users</span> <span class="n">TABLE_HASH_KEY</span> <span class="n">ShortText</span>
<span class="c1"># [[0,1337566253.89858,0.000355720520019531],true]</span>
<span class="n">column_create</span> <span class="n">Users</span> <span class="n">age</span> <span class="n">COLUMN_SCALAR</span> <span class="n">UInt32</span>
<span class="c1"># [[0,1337566253.89858,0.000355720520019531],true]</span>
<span class="n">load</span> <span class="o">--</span><span class="n">table</span> <span class="n">Users</span>
<span class="p">[</span>
<span class="p">{</span><span class="s2">&quot;_key&quot;</span><span class="p">:</span> <span class="s2">&quot;alice&quot;</span><span class="p">,</span> <span class="s2">&quot;age&quot;</span><span class="p">:</span> <span class="mi">18</span><span class="p">},</span>
<span class="p">{</span><span class="s2">&quot;_key&quot;</span><span class="p">:</span> <span class="s2">&quot;bob&quot;</span><span class="p">,</span>   <span class="s2">&quot;age&quot;</span><span class="p">:</span> <span class="mi">20</span><span class="p">}</span>
<span class="p">]</span>
<span class="c1"># [[0,1337566253.89858,0.000355720520019531],2]</span>
<span class="n">select</span> <span class="n">Users</span> <span class="o">--</span><span class="n">query</span> <span class="n">age</span><span class="o">:=</span><span class="mi">19</span> <span class="o">--</span><span class="n">query_flags</span> <span class="n">ALLOW_COLUMN</span><span class="o">|</span><span class="n">ALLOW_UPDATE</span>
<span class="c1"># [</span>
<span class="c1">#   [</span>
<span class="c1">#     0,</span>
<span class="c1">#     1337566253.89858,</span>
<span class="c1">#     0.000355720520019531</span>
<span class="c1">#   ],</span>
<span class="c1">#   [</span>
<span class="c1">#     [</span>
<span class="c1">#       [</span>
<span class="c1">#         2</span>
<span class="c1">#       ],</span>
<span class="c1">#       [</span>
<span class="c1">#         [</span>
<span class="c1">#           &quot;_id&quot;,</span>
<span class="c1">#           &quot;UInt32&quot;</span>
<span class="c1">#         ],</span>
<span class="c1">#         [</span>
<span class="c1">#           &quot;_key&quot;,</span>
<span class="c1">#           &quot;ShortText&quot;</span>
<span class="c1">#         ],</span>
<span class="c1">#         [</span>
<span class="c1">#           &quot;age&quot;,</span>
<span class="c1">#           &quot;UInt32&quot;</span>
<span class="c1">#         ]</span>
<span class="c1">#       ],</span>
<span class="c1">#       [</span>
<span class="c1">#         1,</span>
<span class="c1">#         &quot;alice&quot;,</span>
<span class="c1">#         19</span>
<span class="c1">#       ],</span>
<span class="c1">#       [</span>
<span class="c1">#         2,</span>
<span class="c1">#         &quot;bob&quot;,</span>
<span class="c1">#         19</span>
<span class="c1">#       ]</span>
<span class="c1">#     ]</span>
<span class="c1">#   ]</span>
<span class="c1"># ]</span>
<span class="n">select</span> <span class="n">Users</span>
<span class="c1"># [</span>
<span class="c1">#   [</span>
<span class="c1">#     0,</span>
<span class="c1">#     1337566253.89858,</span>
<span class="c1">#     0.000355720520019531</span>
<span class="c1">#   ],</span>
<span class="c1">#   [</span>
<span class="c1">#     [</span>
<span class="c1">#       [</span>
<span class="c1">#         2</span>
<span class="c1">#       ],</span>
<span class="c1">#       [</span>
<span class="c1">#         [</span>
<span class="c1">#           &quot;_id&quot;,</span>
<span class="c1">#           &quot;UInt32&quot;</span>
<span class="c1">#         ],</span>
<span class="c1">#         [</span>
<span class="c1">#           &quot;_key&quot;,</span>
<span class="c1">#           &quot;ShortText&quot;</span>
<span class="c1">#         ],</span>
<span class="c1">#         [</span>
<span class="c1">#           &quot;age&quot;,</span>
<span class="c1">#           &quot;UInt32&quot;</span>
<span class="c1">#         ]</span>
<span class="c1">#       ],</span>
<span class="c1">#       [</span>
<span class="c1">#         1,</span>
<span class="c1">#         &quot;alice&quot;,</span>
<span class="c1">#         19</span>
<span class="c1">#       ],</span>
<span class="c1">#       [</span>
<span class="c1">#         2,</span>
<span class="c1">#         &quot;bob&quot;,</span>
<span class="c1">#         19</span>
<span class="c1">#       ]</span>
<span class="c1">#     ]</span>
<span class="c1">#   ]</span>
<span class="c1"># ]</span>
</pre></div>
</div>
<p>The first <code class="docutils literal notranslate"><span class="pre">select</span></code> command sets <code class="docutils literal notranslate"><span class="pre">age</span></code> column value of all records
to <code class="docutils literal notranslate"><span class="pre">19</span></code>. The second <code class="docutils literal notranslate"><span class="pre">select</span></code> command outputs updated <code class="docutils literal notranslate"><span class="pre">age</span></code>
column values.</p>
<p>Here is a usage example of <code class="docutils literal notranslate"><span class="pre">ALLOW_LEADING_NOT</span></code>.</p>
<p>Execution example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">select</span> <span class="n">Entries</span> <span class="o">--</span><span class="n">match_columns</span> <span class="n">content</span> <span class="o">--</span><span class="n">query</span> <span class="o">-</span><span class="n">mroonga</span> <span class="o">--</span><span class="n">query_flags</span> <span class="n">ALLOW_LEADING_NOT</span>
<span class="c1"># [</span>
<span class="c1">#   [</span>
<span class="c1">#     0,</span>
<span class="c1">#     1337566253.89858,</span>
<span class="c1">#     0.000355720520019531</span>
<span class="c1">#   ],</span>
<span class="c1">#   [</span>
<span class="c1">#     [</span>
<span class="c1">#       [</span>
<span class="c1">#         4</span>
<span class="c1">#       ],</span>
<span class="c1">#       [</span>
<span class="c1">#         [</span>
<span class="c1">#           &quot;_id&quot;,</span>
<span class="c1">#           &quot;UInt32&quot;</span>
<span class="c1">#         ],</span>
<span class="c1">#         [</span>
<span class="c1">#           &quot;_key&quot;,</span>
<span class="c1">#           &quot;ShortText&quot;</span>
<span class="c1">#         ],</span>
<span class="c1">#         [</span>
<span class="c1">#           &quot;content&quot;,</span>
<span class="c1">#           &quot;Text&quot;</span>
<span class="c1">#         ],</span>
<span class="c1">#         [</span>
<span class="c1">#           &quot;n_likes&quot;,</span>
<span class="c1">#           &quot;UInt32&quot;</span>
<span class="c1">#         ],</span>
<span class="c1">#         [</span>
<span class="c1">#           &quot;tag&quot;,</span>
<span class="c1">#           &quot;ShortText&quot;</span>
<span class="c1">#         ]</span>
<span class="c1">#       ],</span>
<span class="c1">#       [</span>
<span class="c1">#         1,</span>
<span class="c1">#         &quot;The first post!&quot;,</span>
<span class="c1">#         &quot;Welcome! This is my first post!&quot;,</span>
<span class="c1">#         5,</span>
<span class="c1">#         &quot;Hello&quot;</span>
<span class="c1">#       ],</span>
<span class="c1">#       [</span>
<span class="c1">#         2,</span>
<span class="c1">#         &quot;Groonga&quot;,</span>
<span class="c1">#         &quot;I started to use Groonga. It&#39;s very fast!&quot;,</span>
<span class="c1">#         10,</span>
<span class="c1">#         &quot;Groonga&quot;</span>
<span class="c1">#       ],</span>
<span class="c1">#       [</span>
<span class="c1">#         4,</span>
<span class="c1">#         &quot;Good-bye Senna&quot;,</span>
<span class="c1">#         &quot;I migrated all Senna system!&quot;,</span>
<span class="c1">#         3,</span>
<span class="c1">#         &quot;Senna&quot;</span>
<span class="c1">#       ],</span>
<span class="c1">#       [</span>
<span class="c1">#         5,</span>
<span class="c1">#         &quot;Good-bye Tritonn&quot;,</span>
<span class="c1">#         &quot;I also migrated all Tritonn system!&quot;,</span>
<span class="c1">#         3,</span>
<span class="c1">#         &quot;Senna&quot;</span>
<span class="c1">#       ]</span>
<span class="c1">#     ]</span>
<span class="c1">#   ]</span>
<span class="c1"># ]</span>
</pre></div>
</div>
<p>The <code class="docutils literal notranslate"><span class="pre">select</span></code> command searches records that don’t contain <code class="docutils literal notranslate"><span class="pre">mroonga</span></code>
in <code class="docutils literal notranslate"><span class="pre">content</span></code> column value from <code class="docutils literal notranslate"><span class="pre">Entries</span></code> table.</p>
<p>Here are a schema definition and sample data to describe other flags:</p>
<p>Execution example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">table_create</span> <span class="o">--</span><span class="n">name</span> <span class="n">Magazine</span> <span class="o">--</span><span class="n">flags</span> <span class="n">TABLE_HASH_KEY</span> <span class="o">--</span><span class="n">key_type</span> <span class="n">ShortText</span>
<span class="c1"># [[0,1337566253.89858,0.000355720520019531],true]</span>
<span class="n">column_create</span> <span class="o">--</span><span class="n">table</span> <span class="n">Magazine</span> <span class="o">--</span><span class="n">name</span> <span class="n">title</span> <span class="o">--</span><span class="nb">type</span> <span class="n">ShortText</span>
<span class="c1"># [[0,1337566253.89858,0.000355720520019531],true]</span>
<span class="n">load</span> <span class="o">--</span><span class="n">table</span> <span class="n">Magazine</span>
<span class="p">[</span>
<span class="p">{</span><span class="s2">&quot;_key&quot;</span><span class="p">:</span><span class="s2">&quot;http://test.jp/magazine/webplus&quot;</span><span class="p">,</span><span class="s2">&quot;title&quot;</span><span class="p">:</span><span class="s2">&quot;WEB+&quot;</span><span class="p">},</span>
<span class="p">{</span><span class="s2">&quot;_key&quot;</span><span class="p">:</span><span class="s2">&quot;http://test.jp/magazine/database&quot;</span><span class="p">,</span><span class="s2">&quot;title&quot;</span><span class="p">:</span><span class="s2">&quot;DataBase&quot;</span><span class="p">},</span>
<span class="p">]</span>
<span class="c1"># [[0,1337566253.89858,0.000355720520019531],2]</span>
</pre></div>
</div>
<p>Here is an example of <code class="docutils literal notranslate"><span class="pre">QUERY_NO_SYNTAX_ERROR</span></code>:</p>
<p>Execution example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">select</span> <span class="n">Magazine</span> <span class="o">--</span><span class="n">match_columns</span> <span class="n">title</span> <span class="o">--</span><span class="n">query</span> <span class="s1">&#39;WEB +&#39;</span>  <span class="o">--</span><span class="n">query_flags</span> <span class="n">ALLOW_PRAGMA</span><span class="o">|</span><span class="n">ALLOW_COLUMN</span><span class="o">|</span><span class="n">QUERY_NO_SYNTAX_ERROR</span>
<span class="c1"># [</span>
<span class="c1">#   [</span>
<span class="c1">#     0,</span>
<span class="c1">#     1337566253.89858,</span>
<span class="c1">#     0.000355720520019531</span>
<span class="c1">#   ],</span>
<span class="c1">#   [</span>
<span class="c1">#     [</span>
<span class="c1">#       [</span>
<span class="c1">#         1</span>
<span class="c1">#       ],</span>
<span class="c1">#       [</span>
<span class="c1">#         [</span>
<span class="c1">#           &quot;_id&quot;,</span>
<span class="c1">#           &quot;UInt32&quot;</span>
<span class="c1">#         ],</span>
<span class="c1">#         [</span>
<span class="c1">#           &quot;_key&quot;,</span>
<span class="c1">#           &quot;ShortText&quot;</span>
<span class="c1">#         ],</span>
<span class="c1">#         [</span>
<span class="c1">#           &quot;title&quot;,</span>
<span class="c1">#           &quot;ShortText&quot;</span>
<span class="c1">#         ]</span>
<span class="c1">#       ],</span>
<span class="c1">#       [</span>
<span class="c1">#         1,</span>
<span class="c1">#         &quot;http://test.jp/magazine/webplus&quot;,</span>
<span class="c1">#         &quot;WEB+&quot;</span>
<span class="c1">#       ]</span>
<span class="c1">#     ]</span>
<span class="c1">#   ]</span>
<span class="c1"># ]</span>
</pre></div>
</div>
<p>If you don’t specify this flag, the quey causes a syntax error as below.</p>
<p>Execution example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">select</span> <span class="n">Magazine</span> <span class="o">--</span><span class="n">match_columns</span> <span class="n">title</span> <span class="o">--</span><span class="n">query</span> <span class="s1">&#39;WEB +&#39;</span>  <span class="o">--</span><span class="n">query_flags</span> <span class="n">ALLOW_PRAGMA</span><span class="o">|</span><span class="n">ALLOW_COLUMN</span>
<span class="c1"># [</span>
<span class="c1">#   [</span>
<span class="c1">#     -63,</span>
<span class="c1">#     1337566253.89858,</span>
<span class="c1">#     0.000355720520019531,</span>
<span class="c1">#     &quot;Syntax error: &lt;WEB +||&gt;&quot;,</span>
<span class="c1">#     [</span>
<span class="c1">#       [</span>
<span class="c1">#         &quot;yy_syntax_error&quot;,</span>
<span class="c1">#         &quot;lib/grn_ecmascript.lemon&quot;,</span>
<span class="c1">#         168</span>
<span class="c1">#       ]</span>
<span class="c1">#     ]</span>
<span class="c1">#   ]</span>
<span class="c1"># ]</span>
</pre></div>
</div>
<p>Here is a usage example of <code class="docutils literal notranslate"><span class="pre">NONE</span></code>.</p>
<p>Execution example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">select</span> <span class="n">Entries</span> <span class="o">--</span><span class="n">match_columns</span> <span class="n">content</span> <span class="o">--</span><span class="n">query</span> <span class="s1">&#39;mroonga OR _key:Groonga&#39;</span> <span class="o">--</span><span class="n">query_flags</span> <span class="n">NONE</span>
<span class="c1"># [</span>
<span class="c1">#   [</span>
<span class="c1">#     0,</span>
<span class="c1">#     1337566253.89858,</span>
<span class="c1">#     0.000355720520019531</span>
<span class="c1">#   ],</span>
<span class="c1">#   [</span>
<span class="c1">#     [</span>
<span class="c1">#       [</span>
<span class="c1">#         1</span>
<span class="c1">#       ],</span>
<span class="c1">#       [</span>
<span class="c1">#         [</span>
<span class="c1">#           &quot;_id&quot;,</span>
<span class="c1">#           &quot;UInt32&quot;</span>
<span class="c1">#         ],</span>
<span class="c1">#         [</span>
<span class="c1">#           &quot;_key&quot;,</span>
<span class="c1">#           &quot;ShortText&quot;</span>
<span class="c1">#         ],</span>
<span class="c1">#         [</span>
<span class="c1">#           &quot;content&quot;,</span>
<span class="c1">#           &quot;Text&quot;</span>
<span class="c1">#         ],</span>
<span class="c1">#         [</span>
<span class="c1">#           &quot;n_likes&quot;,</span>
<span class="c1">#           &quot;UInt32&quot;</span>
<span class="c1">#         ],</span>
<span class="c1">#         [</span>
<span class="c1">#           &quot;tag&quot;,</span>
<span class="c1">#           &quot;ShortText&quot;</span>
<span class="c1">#         ]</span>
<span class="c1">#       ],</span>
<span class="c1">#       [</span>
<span class="c1">#         3,</span>
<span class="c1">#         &quot;Mroonga&quot;,</span>
<span class="c1">#         &quot;I also started to use Mroonga. It&#39;s also very fast! Really fast!&quot;,</span>
<span class="c1">#         15,</span>
<span class="c1">#         &quot;Groonga&quot;</span>
<span class="c1">#       ]</span>
<span class="c1">#     ]</span>
<span class="c1">#   ]</span>
<span class="c1"># ]</span>
</pre></div>
</div>
<p>The <code class="docutils literal notranslate"><span class="pre">select</span></code> command searches records that contain one of two words
<code class="docutils literal notranslate"><span class="pre">mroonga</span></code> or <code class="docutils literal notranslate"><span class="pre">_key:Groonga</span></code> in <code class="docutils literal notranslate"><span class="pre">content</span></code> from <code class="docutils literal notranslate"><span class="pre">Entries</span></code> table.
Note that <code class="docutils literal notranslate"><span class="pre">_key:Groonga</span></code> doesn’t mean that the value of <code class="docutils literal notranslate"><span class="pre">_key</span></code>
column is equal to <code class="docutils literal notranslate"><span class="pre">Groonga</span></code>. Because <code class="docutils literal notranslate"><span class="pre">ALLOW_COLUMN</span></code> flag is not
specified.</p>
<p>See also <a class="reference internal" href="../grn_expr/query_syntax.html"><span class="doc">Query syntax</span></a>.</p>
</section>
<section id="query-expander">
<span id="select-query-expander"></span><h4><span class="section-number">7.3.57.4.3.5. </span><code class="docutils literal notranslate"><span class="pre">query_expander</span></code><a class="headerlink" href="#query-expander" title="Link to this heading">#</a></h4>
<p>It’s for query expansion. Query expansion substitutes specific words
to another words in query. Nomally, it’s used for synonym search.</p>
<p>It specifies a column that is used to substitute <code class="docutils literal notranslate"><span class="pre">query</span></code> parameter
value. The format of this parameter value is
“<code class="docutils literal notranslate"><span class="pre">${TABLE}.${COLUMN}</span></code>”. For example, “<code class="docutils literal notranslate"><span class="pre">Terms.synonym</span></code>” specifies
<code class="docutils literal notranslate"><span class="pre">synonym</span></code> column in <code class="docutils literal notranslate"><span class="pre">Terms</span></code> table.</p>
<p>Table for query expansion is called “substitution table”. Substitution
table’s key must be <code class="docutils literal notranslate"><span class="pre">ShortText</span></code>. So array table (<code class="docutils literal notranslate"><span class="pre">TABLE_NO_KEY</span></code>)
can’t be used for query expansion. Because array table doesn’t have
key.</p>
<p>Column for query expansion is called “substitution
column”. Substitution column’s value type must be
<code class="docutils literal notranslate"><span class="pre">ShortText</span></code>. Column type must be vector (<code class="docutils literal notranslate"><span class="pre">COLUMN_VECTOR</span></code>).</p>
<p>Query expansion substitutes key of substitution table in query with
values in substitution column. If a word in <code class="docutils literal notranslate"><span class="pre">query</span></code> is a key of
substitution table, the word is substituted with substitution column
value that is associated with the key. Substition isn’t performed
recursively. It means that substitution target words in substituted
query aren’t substituted.</p>
<p>Here is a sample substitution table to show a simple
<code class="docutils literal notranslate"><span class="pre">query_expander</span></code> usage example.</p>
<p>Execution example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">table_create</span> <span class="n">Thesaurus</span> <span class="n">TABLE_PAT_KEY</span> <span class="n">ShortText</span> <span class="o">--</span><span class="n">normalizer</span> <span class="n">NormalizerAuto</span>
<span class="c1"># [[0,1337566253.89858,0.000355720520019531],true]</span>
<span class="n">column_create</span> <span class="n">Thesaurus</span> <span class="n">synonym</span> <span class="n">COLUMN_VECTOR</span> <span class="n">ShortText</span>
<span class="c1"># [[0,1337566253.89858,0.000355720520019531],true]</span>
<span class="n">load</span> <span class="o">--</span><span class="n">table</span> <span class="n">Thesaurus</span>
<span class="p">[</span>
<span class="p">{</span><span class="s2">&quot;_key&quot;</span><span class="p">:</span> <span class="s2">&quot;mroonga&quot;</span><span class="p">,</span> <span class="s2">&quot;synonym&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;mroonga&quot;</span><span class="p">,</span> <span class="s2">&quot;tritonn&quot;</span><span class="p">,</span> <span class="s2">&quot;groonga mysql&quot;</span><span class="p">]},</span>
<span class="p">{</span><span class="s2">&quot;_key&quot;</span><span class="p">:</span> <span class="s2">&quot;groonga&quot;</span><span class="p">,</span> <span class="s2">&quot;synonym&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;groonga&quot;</span><span class="p">,</span> <span class="s2">&quot;senna&quot;</span><span class="p">]}</span>
<span class="p">]</span>
<span class="c1"># [[0,1337566253.89858,0.000355720520019531],2]</span>
</pre></div>
</div>
<p><code class="docutils literal notranslate"><span class="pre">Thesaurus</span></code> substitution table has two synonyms, <code class="docutils literal notranslate"><span class="pre">&quot;mroonga&quot;</span></code> and
<code class="docutils literal notranslate"><span class="pre">&quot;groonga&quot;</span></code>. If an user searches with <code class="docutils literal notranslate"><span class="pre">&quot;mroonga&quot;</span></code>, Groonga
searches with <code class="docutils literal notranslate"><span class="pre">&quot;((mroonga)</span> <span class="pre">OR</span> <span class="pre">(tritonn)</span> <span class="pre">OR</span> <span class="pre">(groonga</span> <span class="pre">mysql))&quot;</span></code>. If an
user searches with <code class="docutils literal notranslate"><span class="pre">&quot;groonga&quot;</span></code>, Groonga searches with <code class="docutils literal notranslate"><span class="pre">&quot;((groonga)</span>
<span class="pre">OR</span> <span class="pre">(senna))&quot;</span></code>.</p>
<p>Normally, it’s good idea that substitution table uses a
normalizer. For example, if normalizer is used, substitute target word
is matched in case insensitive manner. See
<a class="reference internal" href="../normalizers.html"><span class="doc">Normalizers</span></a> for available normalizers.</p>
<p>Note that those synonym values include the key value such as
<code class="docutils literal notranslate"><span class="pre">&quot;mroonga&quot;</span></code> and <code class="docutils literal notranslate"><span class="pre">&quot;groonga&quot;</span></code>. It’s recommended that you include the
key value. If you don’t include key value, substituted value doesn’t
include the original substitute target value. Normally, including the
original value is better search result. If you have a word that you
don’t want to be searched, you should not include the original
word. For example, you can implement “stop words” by an empty vector
value.</p>
<p>Here is a simple <code class="docutils literal notranslate"><span class="pre">query_expander</span></code> usage example.</p>
<p>Execution example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">select</span> <span class="n">Entries</span> <span class="o">--</span><span class="n">match_columns</span> <span class="n">content</span> <span class="o">--</span><span class="n">query</span> <span class="s2">&quot;mroonga&quot;</span>
<span class="c1"># [</span>
<span class="c1">#   [</span>
<span class="c1">#     0,</span>
<span class="c1">#     1337566253.89858,</span>
<span class="c1">#     0.000355720520019531</span>
<span class="c1">#   ],</span>
<span class="c1">#   [</span>
<span class="c1">#     [</span>
<span class="c1">#       [</span>
<span class="c1">#         1</span>
<span class="c1">#       ],</span>
<span class="c1">#       [</span>
<span class="c1">#         [</span>
<span class="c1">#           &quot;_id&quot;,</span>
<span class="c1">#           &quot;UInt32&quot;</span>
<span class="c1">#         ],</span>
<span class="c1">#         [</span>
<span class="c1">#           &quot;_key&quot;,</span>
<span class="c1">#           &quot;ShortText&quot;</span>
<span class="c1">#         ],</span>
<span class="c1">#         [</span>
<span class="c1">#           &quot;content&quot;,</span>
<span class="c1">#           &quot;Text&quot;</span>
<span class="c1">#         ],</span>
<span class="c1">#         [</span>
<span class="c1">#           &quot;n_likes&quot;,</span>
<span class="c1">#           &quot;UInt32&quot;</span>
<span class="c1">#         ],</span>
<span class="c1">#         [</span>
<span class="c1">#           &quot;tag&quot;,</span>
<span class="c1">#           &quot;ShortText&quot;</span>
<span class="c1">#         ]</span>
<span class="c1">#       ],</span>
<span class="c1">#       [</span>
<span class="c1">#         3,</span>
<span class="c1">#         &quot;Mroonga&quot;,</span>
<span class="c1">#         &quot;I also started to use Mroonga. It&#39;s also very fast! Really fast!&quot;,</span>
<span class="c1">#         15,</span>
<span class="c1">#         &quot;Groonga&quot;</span>
<span class="c1">#       ]</span>
<span class="c1">#     ]</span>
<span class="c1">#   ]</span>
<span class="c1"># ]</span>
<span class="n">select</span> <span class="n">Entries</span> <span class="o">--</span><span class="n">match_columns</span> <span class="n">content</span> <span class="o">--</span><span class="n">query</span> <span class="s2">&quot;mroonga&quot;</span> <span class="o">--</span><span class="n">query_expander</span> <span class="n">Thesaurus</span><span class="o">.</span><span class="n">synonym</span>
<span class="c1"># [</span>
<span class="c1">#   [</span>
<span class="c1">#     0,</span>
<span class="c1">#     1337566253.89858,</span>
<span class="c1">#     0.000355720520019531</span>
<span class="c1">#   ],</span>
<span class="c1">#   [</span>
<span class="c1">#     [</span>
<span class="c1">#       [</span>
<span class="c1">#         2</span>
<span class="c1">#       ],</span>
<span class="c1">#       [</span>
<span class="c1">#         [</span>
<span class="c1">#           &quot;_id&quot;,</span>
<span class="c1">#           &quot;UInt32&quot;</span>
<span class="c1">#         ],</span>
<span class="c1">#         [</span>
<span class="c1">#           &quot;_key&quot;,</span>
<span class="c1">#           &quot;ShortText&quot;</span>
<span class="c1">#         ],</span>
<span class="c1">#         [</span>
<span class="c1">#           &quot;content&quot;,</span>
<span class="c1">#           &quot;Text&quot;</span>
<span class="c1">#         ],</span>
<span class="c1">#         [</span>
<span class="c1">#           &quot;n_likes&quot;,</span>
<span class="c1">#           &quot;UInt32&quot;</span>
<span class="c1">#         ],</span>
<span class="c1">#         [</span>
<span class="c1">#           &quot;tag&quot;,</span>
<span class="c1">#           &quot;ShortText&quot;</span>
<span class="c1">#         ]</span>
<span class="c1">#       ],</span>
<span class="c1">#       [</span>
<span class="c1">#         3,</span>
<span class="c1">#         &quot;Mroonga&quot;,</span>
<span class="c1">#         &quot;I also started to use Mroonga. It&#39;s also very fast! Really fast!&quot;,</span>
<span class="c1">#         15,</span>
<span class="c1">#         &quot;Groonga&quot;</span>
<span class="c1">#       ],</span>
<span class="c1">#       [</span>
<span class="c1">#         5,</span>
<span class="c1">#         &quot;Good-bye Tritonn&quot;,</span>
<span class="c1">#         &quot;I also migrated all Tritonn system!&quot;,</span>
<span class="c1">#         3,</span>
<span class="c1">#         &quot;Senna&quot;</span>
<span class="c1">#       ]</span>
<span class="c1">#     ]</span>
<span class="c1">#   ]</span>
<span class="c1"># ]</span>
<span class="n">select</span> <span class="n">Entries</span> <span class="o">--</span><span class="n">match_columns</span> <span class="n">content</span> <span class="o">--</span><span class="n">query</span> <span class="s2">&quot;((mroonga) OR (tritonn) OR (groonga mysql))&quot;</span>
<span class="c1"># [</span>
<span class="c1">#   [</span>
<span class="c1">#     0,</span>
<span class="c1">#     1337566253.89858,</span>
<span class="c1">#     0.000355720520019531</span>
<span class="c1">#   ],</span>
<span class="c1">#   [</span>
<span class="c1">#     [</span>
<span class="c1">#       [</span>
<span class="c1">#         2</span>
<span class="c1">#       ],</span>
<span class="c1">#       [</span>
<span class="c1">#         [</span>
<span class="c1">#           &quot;_id&quot;,</span>
<span class="c1">#           &quot;UInt32&quot;</span>
<span class="c1">#         ],</span>
<span class="c1">#         [</span>
<span class="c1">#           &quot;_key&quot;,</span>
<span class="c1">#           &quot;ShortText&quot;</span>
<span class="c1">#         ],</span>
<span class="c1">#         [</span>
<span class="c1">#           &quot;content&quot;,</span>
<span class="c1">#           &quot;Text&quot;</span>
<span class="c1">#         ],</span>
<span class="c1">#         [</span>
<span class="c1">#           &quot;n_likes&quot;,</span>
<span class="c1">#           &quot;UInt32&quot;</span>
<span class="c1">#         ],</span>
<span class="c1">#         [</span>
<span class="c1">#           &quot;tag&quot;,</span>
<span class="c1">#           &quot;ShortText&quot;</span>
<span class="c1">#         ]</span>
<span class="c1">#       ],</span>
<span class="c1">#       [</span>
<span class="c1">#         3,</span>
<span class="c1">#         &quot;Mroonga&quot;,</span>
<span class="c1">#         &quot;I also started to use Mroonga. It&#39;s also very fast! Really fast!&quot;,</span>
<span class="c1">#         15,</span>
<span class="c1">#         &quot;Groonga&quot;</span>
<span class="c1">#       ],</span>
<span class="c1">#       [</span>
<span class="c1">#         5,</span>
<span class="c1">#         &quot;Good-bye Tritonn&quot;,</span>
<span class="c1">#         &quot;I also migrated all Tritonn system!&quot;,</span>
<span class="c1">#         3,</span>
<span class="c1">#         &quot;Senna&quot;</span>
<span class="c1">#       ]</span>
<span class="c1">#     ]</span>
<span class="c1">#   ]</span>
<span class="c1"># ]</span>
</pre></div>
</div>
<p>The first <code class="docutils literal notranslate"><span class="pre">select</span></code> command doesn’t use query expansion. So a record
that has <code class="docutils literal notranslate"><span class="pre">&quot;tritonn&quot;</span></code> isn’t found. The second <code class="docutils literal notranslate"><span class="pre">select</span></code> command uses
query expansion. So a record that has <code class="docutils literal notranslate"><span class="pre">&quot;tritonn&quot;</span></code> is found. The
third <code class="docutils literal notranslate"><span class="pre">select</span></code> command doesn’t use query expansion but it is same as
the second <code class="docutils literal notranslate"><span class="pre">select</span></code> command. The third one uses expanded query.</p>
<p>Each substitute value can contain any <a class="reference internal" href="../grn_expr/query_syntax.html"><span class="doc">Query syntax</span></a> syntax
such as <code class="docutils literal notranslate"><span class="pre">(...)</span></code> and <code class="docutils literal notranslate"><span class="pre">OR</span></code>. You can use complex substitution by
using those syntax.</p>
<p>Here is a complex substitution usage example that uses query syntax.</p>
<p>Execution example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">load</span> <span class="o">--</span><span class="n">table</span> <span class="n">Thesaurus</span>
<span class="p">[</span>
<span class="p">{</span><span class="s2">&quot;_key&quot;</span><span class="p">:</span> <span class="s2">&quot;popular&quot;</span><span class="p">,</span> <span class="s2">&quot;synonym&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;popular&quot;</span><span class="p">,</span> <span class="s2">&quot;n_likes:&gt;=10&quot;</span><span class="p">]}</span>
<span class="p">]</span>
<span class="c1"># [[0,1337566253.89858,0.000355720520019531],1]</span>
<span class="n">select</span> <span class="n">Entries</span> <span class="o">--</span><span class="n">match_columns</span> <span class="n">content</span> <span class="o">--</span><span class="n">query</span> <span class="s2">&quot;popular&quot;</span> <span class="o">--</span><span class="n">query_expander</span> <span class="n">Thesaurus</span><span class="o">.</span><span class="n">synonym</span>
<span class="c1"># [</span>
<span class="c1">#   [</span>
<span class="c1">#     0,</span>
<span class="c1">#     1337566253.89858,</span>
<span class="c1">#     0.000355720520019531</span>
<span class="c1">#   ],</span>
<span class="c1">#   [</span>
<span class="c1">#     [</span>
<span class="c1">#       [</span>
<span class="c1">#         2</span>
<span class="c1">#       ],</span>
<span class="c1">#       [</span>
<span class="c1">#         [</span>
<span class="c1">#           &quot;_id&quot;,</span>
<span class="c1">#           &quot;UInt32&quot;</span>
<span class="c1">#         ],</span>
<span class="c1">#         [</span>
<span class="c1">#           &quot;_key&quot;,</span>
<span class="c1">#           &quot;ShortText&quot;</span>
<span class="c1">#         ],</span>
<span class="c1">#         [</span>
<span class="c1">#           &quot;content&quot;,</span>
<span class="c1">#           &quot;Text&quot;</span>
<span class="c1">#         ],</span>
<span class="c1">#         [</span>
<span class="c1">#           &quot;n_likes&quot;,</span>
<span class="c1">#           &quot;UInt32&quot;</span>
<span class="c1">#         ],</span>
<span class="c1">#         [</span>
<span class="c1">#           &quot;tag&quot;,</span>
<span class="c1">#           &quot;ShortText&quot;</span>
<span class="c1">#         ]</span>
<span class="c1">#       ],</span>
<span class="c1">#       [</span>
<span class="c1">#         2,</span>
<span class="c1">#         &quot;Groonga&quot;,</span>
<span class="c1">#         &quot;I started to use Groonga. It&#39;s very fast!&quot;,</span>
<span class="c1">#         10,</span>
<span class="c1">#         &quot;Groonga&quot;</span>
<span class="c1">#       ],</span>
<span class="c1">#       [</span>
<span class="c1">#         3,</span>
<span class="c1">#         &quot;Mroonga&quot;,</span>
<span class="c1">#         &quot;I also started to use Mroonga. It&#39;s also very fast! Really fast!&quot;,</span>
<span class="c1">#         15,</span>
<span class="c1">#         &quot;Groonga&quot;</span>
<span class="c1">#       ]</span>
<span class="c1">#     ]</span>
<span class="c1">#   ]</span>
<span class="c1"># ]</span>
</pre></div>
</div>
<p>The <code class="docutils literal notranslate"><span class="pre">load</span></code> command registers a new synonym <code class="docutils literal notranslate"><span class="pre">&quot;popular&quot;</span></code>. It is
substituted with <code class="docutils literal notranslate"><span class="pre">((popular)</span> <span class="pre">OR</span> <span class="pre">(n_likes:&gt;=10))</span></code>. The substituted
query means that “popular” is containing the word “popular” or 10 or
more liked entries.</p>
<p>The <code class="docutils literal notranslate"><span class="pre">select</span></code> command outputs records that <code class="docutils literal notranslate"><span class="pre">n_likes</span></code> column value
is equal to or more than <code class="docutils literal notranslate"><span class="pre">10</span></code> from <code class="docutils literal notranslate"><span class="pre">Entries</span></code> table.</p>
</section>
<section id="n-workers">
<span id="select-n-workers"></span><h4><span class="section-number">7.3.57.4.3.6. </span><code class="docutils literal notranslate"><span class="pre">n_workers</span></code><a class="headerlink" href="#n-workers" title="Link to this heading">#</a></h4>
<div class="versionadded">
<p><span class="versionmodified added">New in version 12.0.5.</span></p>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>This is an experimental feature. Currently, this feature is still not stable.</p>
<p>This feature requires <a class="reference internal" href="../command/command_version.html"><span class="doc">Command version</span></a> 3 or later.</p>
<p>This feature requires that Apache Arrow is enabled in Groonga.</p>
<p>It depends on package provider whether Apache Arrow is enabled or not.</p>
<p>To check whether Apache Arrow is enabled, you can use <a class="reference internal" href="status.html"><span class="doc">status</span></a> command that show the result of  <code class="docutils literal notranslate"><span class="pre">apache_arrow</span></code> is <code class="docutils literal notranslate"><span class="pre">true</span></code> or not.</p>
<p>If Apache Arrow is disabled, you should build Groonga from the source code with enabling Apache Arrow following the steps in <a class="reference internal" href="../../install.html"><span class="doc">Install</span></a> or
request to enable Apache Arrow to the package provider.</p>
</div>
<p><a class="reference internal" href="#select-drilldown"><span class="std std-ref">drilldown</span></a> , <a class="reference internal" href="#select-advanced-drilldown-related-parameters"><span class="std std-ref">drilldowns</span></a> and <a class="reference internal" href="#select-slice-related-parameters"><span class="std std-ref">slices</span></a>
are executed in parallel when this parameter is specified <code class="docutils literal notranslate"><span class="pre">-1</span></code> or <code class="docutils literal notranslate"><span class="pre">2</span></code> or more.</p>
<p>In a default setting, <code class="docutils literal notranslate"><span class="pre">drilldown</span></code>, <code class="docutils literal notranslate"><span class="pre">drilldowns</span></code> and <code class="docutils literal notranslate"><span class="pre">slices</span></code> are executed in serial.
In other words, a next process is executed after a current process is finished.
So, queries tend to take a long time if there are a lot of <code class="docutils literal notranslate"><span class="pre">drilldown</span></code>, <code class="docutils literal notranslate"><span class="pre">drilldowns</span></code> and <code class="docutils literal notranslate"><span class="pre">slices</span></code>.</p>
<p><code class="docutils literal notranslate"><span class="pre">n_workers</span></code> enables to execute independent <code class="docutils literal notranslate"><span class="pre">drilldown</span></code>, <code class="docutils literal notranslate"><span class="pre">drilldowns</span></code> and <code class="docutils literal notranslate"><span class="pre">slices</span></code> in parallel.
The execution time of the total sum of processes can be shourtend by executing them in parallel.
This parallel execution is done for each <code class="docutils literal notranslate"><span class="pre">select</span></code> command.</p>
<p>“independent” means not using <code class="docutils literal notranslate"><span class="pre">dorilldowns.table</span></code> to reference the results of other drilldowns or slices.</p>
<p>If there are dependencies as same meaning as using <code class="docutils literal notranslate"><span class="pre">dorilldowns.table</span></code>, it wait for finish the dependent drilldowns or slices.
Therefore, the degree of parallelism is reduced if they have dependencies.</p>
<p>Executing in parallel means using multiple CPUs at the same time.
If executing in parallel without free CPU resource, it may actually slow down the execution time.
This is because they have to wait for the other process being executed by the target CPU to finish.</p>
<p>It depends on a system configuration whether or not there are free CPU resources and how many <code class="docutils literal notranslate"><span class="pre">n_workers</span></code> should be specified.</p>
<p>For example, consider using <a class="reference internal" href="../executables/groonga-server-http.html"><span class="doc">Groonga HTTP server</span></a> on a system with 6 CPUs.</p>
<p><a class="reference internal" href="../executables/groonga-server-http.html"><span class="doc">Groonga HTTP server</span></a> allocates 1 thread (= 1CPU) for each request.</p>
<p>When the average number of concurrent connections is 6, there are no free CPU resources because 6 CPUs are already in use.
All the CPU is used to process each request.</p>
<p>When the average number of concurrent connections is 2, there are 4 free CPU resources because only 2 CPUs are already in use.
When specifying <code class="docutils literal notranslate"><span class="pre">2</span></code> for <code class="docutils literal notranslate"><span class="pre">n_workers</span></code>, the <code class="docutils literal notranslate"><span class="pre">select</span></code> command will use at most 3 CPUs, including the thread for processing requests.
Therefore, if two <code class="docutils literal notranslate"><span class="pre">select</span></code> commands with <code class="docutils literal notranslate"><span class="pre">2</span></code> specified for <code class="docutils literal notranslate"><span class="pre">n_workers</span></code> are requested at the same time,
they will use at most 6 CPUs in total and will be processed fastly by using all of the resources.
When specifying greater than <code class="docutils literal notranslate"><span class="pre">2</span></code>, the degree of parallelism can be higher than the CPU resources, so it may actually slow down the execution time.</p>
<p><code class="docutils literal notranslate"><span class="pre">n_workers</span></code> behaves as follows depending on the specified value.</p>
<ul class="simple">
<li><p>When specifying <code class="docutils literal notranslate"><span class="pre">0</span></code> or <code class="docutils literal notranslate"><span class="pre">1</span></code></p>
<ul>
<li><p>Executes the <cite>select</cite> command in serial</p></li>
</ul>
</li>
<li><p>When specifying <code class="docutils literal notranslate"><span class="pre">2</span></code> or more</p>
<ul>
<li><p>Executes the <cite>select</cite> command in parallel with at most the specified number of threads.</p></li>
</ul>
</li>
<li><p>When specifying <code class="docutils literal notranslate"><span class="pre">-1</span></code> or less</p>
<ul>
<li><p>Executes the <cite>select</cite> command in parallel with the threads of at most the number of CPU cores.</p></li>
</ul>
</li>
</ul>
<p>The default value of this parameter is <code class="docutils literal notranslate"><span class="pre">0</span></code> .
It means that the <cite>select</cite> command is executed in serial in default.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The default value can be changed by specifying the environment variable <code class="docutils literal notranslate"><span class="pre">GRN_SELECT_N_WORKERS_DEFAULT</span></code>.</p>
</div>
</section>
</section>
<section id="output-related-parameters">
<h3><span class="section-number">7.3.57.4.4. </span>Output related parameters<a class="headerlink" href="#output-related-parameters" title="Link to this heading">#</a></h3>
<section id="output-columns">
<span id="select-output-columns"></span><h4><span class="section-number">7.3.57.4.4.1. </span><code class="docutils literal notranslate"><span class="pre">output_columns</span></code><a class="headerlink" href="#output-columns" title="Link to this heading">#</a></h4>
<p>Specifies output columns separated by <code class="docutils literal notranslate"><span class="pre">,</span></code>.</p>
<p>Here is a simple <code class="docutils literal notranslate"><span class="pre">output_columns</span></code> usage example.</p>
<p>Execution example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">select</span> <span class="n">Entries</span> <span class="o">--</span><span class="n">output_columns</span> <span class="s1">&#39;_id, _key&#39;</span> <span class="o">--</span><span class="n">limit</span> <span class="mi">1</span>
<span class="c1"># [</span>
<span class="c1">#   [</span>
<span class="c1">#     0,</span>
<span class="c1">#     1337566253.89858,</span>
<span class="c1">#     0.000355720520019531</span>
<span class="c1">#   ],</span>
<span class="c1">#   [</span>
<span class="c1">#     [</span>
<span class="c1">#       [</span>
<span class="c1">#         5</span>
<span class="c1">#       ],</span>
<span class="c1">#       [</span>
<span class="c1">#         [</span>
<span class="c1">#           &quot;_id&quot;,</span>
<span class="c1">#           &quot;UInt32&quot;</span>
<span class="c1">#         ],</span>
<span class="c1">#         [</span>
<span class="c1">#           &quot;_key&quot;,</span>
<span class="c1">#           &quot;ShortText&quot;</span>
<span class="c1">#         ]</span>
<span class="c1">#       ],</span>
<span class="c1">#       [</span>
<span class="c1">#         1,</span>
<span class="c1">#         &quot;The first post!&quot;</span>
<span class="c1">#       ]</span>
<span class="c1">#     ]</span>
<span class="c1">#   ]</span>
<span class="c1"># ]</span>
</pre></div>
</div>
<p>The <code class="docutils literal notranslate"><span class="pre">select</span></code> command just outputs <code class="docutils literal notranslate"><span class="pre">_id</span></code> and <code class="docutils literal notranslate"><span class="pre">_key</span></code> column
values.</p>
<p><code class="docutils literal notranslate"><span class="pre">*</span></code> is a special value. It means that all columns that are not
<a class="reference internal" href="../columns/pseudo.html"><span class="doc">Pseudo column</span></a>.</p>
<p>Here is a <code class="docutils literal notranslate"><span class="pre">*</span></code> usage example.</p>
<p>Execution example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">select</span> <span class="n">Entries</span> <span class="o">--</span><span class="n">output_columns</span> <span class="s1">&#39;_key, *&#39;</span> <span class="o">--</span><span class="n">limit</span> <span class="mi">1</span>
<span class="c1"># [</span>
<span class="c1">#   [</span>
<span class="c1">#     0,</span>
<span class="c1">#     1337566253.89858,</span>
<span class="c1">#     0.000355720520019531</span>
<span class="c1">#   ],</span>
<span class="c1">#   [</span>
<span class="c1">#     [</span>
<span class="c1">#       [</span>
<span class="c1">#         5</span>
<span class="c1">#       ],</span>
<span class="c1">#       [</span>
<span class="c1">#         [</span>
<span class="c1">#           &quot;_key&quot;,</span>
<span class="c1">#           &quot;ShortText&quot;</span>
<span class="c1">#         ],</span>
<span class="c1">#         [</span>
<span class="c1">#           &quot;content&quot;,</span>
<span class="c1">#           &quot;Text&quot;</span>
<span class="c1">#         ],</span>
<span class="c1">#         [</span>
<span class="c1">#           &quot;n_likes&quot;,</span>
<span class="c1">#           &quot;UInt32&quot;</span>
<span class="c1">#         ],</span>
<span class="c1">#         [</span>
<span class="c1">#           &quot;tag&quot;,</span>
<span class="c1">#           &quot;ShortText&quot;</span>
<span class="c1">#         ]</span>
<span class="c1">#       ],</span>
<span class="c1">#       [</span>
<span class="c1">#         &quot;The first post!&quot;,</span>
<span class="c1">#         &quot;Welcome! This is my first post!&quot;,</span>
<span class="c1">#         5,</span>
<span class="c1">#         &quot;Hello&quot;</span>
<span class="c1">#       ]</span>
<span class="c1">#     ]</span>
<span class="c1">#   ]</span>
<span class="c1"># ]</span>
</pre></div>
</div>
<p>The <code class="docutils literal notranslate"><span class="pre">select</span></code> command outputs <code class="docutils literal notranslate"><span class="pre">_key</span></code> pseudo column, <code class="docutils literal notranslate"><span class="pre">content</span></code>
column and <code class="docutils literal notranslate"><span class="pre">n_likes</span></code> column values but doesn’t output <code class="docutils literal notranslate"><span class="pre">_id</span></code> pseudo
column value.</p>
<p>The default value is <code class="docutils literal notranslate"><span class="pre">_id,</span> <span class="pre">_key,</span> <span class="pre">*</span></code>. It means that all column
values except <code class="docutils literal notranslate"><span class="pre">_score</span></code> are outputted.</p>
</section>
<section id="sortby">
<span id="select-sortby"></span><h4><span class="section-number">7.3.57.4.4.2. </span><code class="docutils literal notranslate"><span class="pre">sortby</span></code><a class="headerlink" href="#sortby" title="Link to this heading">#</a></h4>
<div class="deprecated">
<p><span class="versionmodified deprecated">Deprecated since version 6.0.3: </span>Use <a class="reference internal" href="#select-sort-keys"><span class="std std-ref">sort_keys</span></a> instead.</p>
</div>
</section>
<section id="sort-keys">
<span id="select-sort-keys"></span><h4><span class="section-number">7.3.57.4.4.3. </span><code class="docutils literal notranslate"><span class="pre">sort_keys</span></code><a class="headerlink" href="#sort-keys" title="Link to this heading">#</a></h4>
<p>Specifies sort keys separated by <code class="docutils literal notranslate"><span class="pre">,</span></code>. Each sort key is column
name.</p>
<p>Here is a simple <code class="docutils literal notranslate"><span class="pre">sort_keys</span></code> usage example.</p>
<p>Execution example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">select</span> <span class="n">Entries</span> <span class="o">--</span><span class="n">sort_keys</span> <span class="s1">&#39;n_likes, _id&#39;</span>
<span class="c1"># [</span>
<span class="c1">#   [</span>
<span class="c1">#     0,</span>
<span class="c1">#     1337566253.89858,</span>
<span class="c1">#     0.000355720520019531</span>
<span class="c1">#   ],</span>
<span class="c1">#   [</span>
<span class="c1">#     [</span>
<span class="c1">#       [</span>
<span class="c1">#         5</span>
<span class="c1">#       ],</span>
<span class="c1">#       [</span>
<span class="c1">#         [</span>
<span class="c1">#           &quot;_id&quot;,</span>
<span class="c1">#           &quot;UInt32&quot;</span>
<span class="c1">#         ],</span>
<span class="c1">#         [</span>
<span class="c1">#           &quot;_key&quot;,</span>
<span class="c1">#           &quot;ShortText&quot;</span>
<span class="c1">#         ],</span>
<span class="c1">#         [</span>
<span class="c1">#           &quot;content&quot;,</span>
<span class="c1">#           &quot;Text&quot;</span>
<span class="c1">#         ],</span>
<span class="c1">#         [</span>
<span class="c1">#           &quot;n_likes&quot;,</span>
<span class="c1">#           &quot;UInt32&quot;</span>
<span class="c1">#         ],</span>
<span class="c1">#         [</span>
<span class="c1">#           &quot;tag&quot;,</span>
<span class="c1">#           &quot;ShortText&quot;</span>
<span class="c1">#         ]</span>
<span class="c1">#       ],</span>
<span class="c1">#       [</span>
<span class="c1">#         4,</span>
<span class="c1">#         &quot;Good-bye Senna&quot;,</span>
<span class="c1">#         &quot;I migrated all Senna system!&quot;,</span>
<span class="c1">#         3,</span>
<span class="c1">#         &quot;Senna&quot;</span>
<span class="c1">#       ],</span>
<span class="c1">#       [</span>
<span class="c1">#         5,</span>
<span class="c1">#         &quot;Good-bye Tritonn&quot;,</span>
<span class="c1">#         &quot;I also migrated all Tritonn system!&quot;,</span>
<span class="c1">#         3,</span>
<span class="c1">#         &quot;Senna&quot;</span>
<span class="c1">#       ],</span>
<span class="c1">#       [</span>
<span class="c1">#         1,</span>
<span class="c1">#         &quot;The first post!&quot;,</span>
<span class="c1">#         &quot;Welcome! This is my first post!&quot;,</span>
<span class="c1">#         5,</span>
<span class="c1">#         &quot;Hello&quot;</span>
<span class="c1">#       ],</span>
<span class="c1">#       [</span>
<span class="c1">#         2,</span>
<span class="c1">#         &quot;Groonga&quot;,</span>
<span class="c1">#         &quot;I started to use Groonga. It&#39;s very fast!&quot;,</span>
<span class="c1">#         10,</span>
<span class="c1">#         &quot;Groonga&quot;</span>
<span class="c1">#       ],</span>
<span class="c1">#       [</span>
<span class="c1">#         3,</span>
<span class="c1">#         &quot;Mroonga&quot;,</span>
<span class="c1">#         &quot;I also started to use Mroonga. It&#39;s also very fast! Really fast!&quot;,</span>
<span class="c1">#         15,</span>
<span class="c1">#         &quot;Groonga&quot;</span>
<span class="c1">#       ]</span>
<span class="c1">#     ]</span>
<span class="c1">#   ]</span>
<span class="c1"># ]</span>
</pre></div>
</div>
<p>The <code class="docutils literal notranslate"><span class="pre">select</span></code> command sorts by <code class="docutils literal notranslate"><span class="pre">n_likes</span></code> column value in ascending
order. For records that has the same <code class="docutils literal notranslate"><span class="pre">n_likes</span></code> are sorted by <code class="docutils literal notranslate"><span class="pre">_id</span></code>
in ascending order. <code class="docutils literal notranslate"><span class="pre">&quot;Good-bye</span> <span class="pre">Senna&quot;</span></code> and <code class="docutils literal notranslate"><span class="pre">&quot;Good-bye</span> <span class="pre">Tritonn&quot;</span></code>
are the case.</p>
<p>If you want to sort in descending order, add <code class="docutils literal notranslate"><span class="pre">-</span></code> before column name.</p>
<p>Here is a descending order <code class="docutils literal notranslate"><span class="pre">sort_keys</span></code> usage example.</p>
<p>Execution example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">select</span> <span class="n">Entries</span> <span class="o">--</span><span class="n">sort_keys</span> <span class="s1">&#39;-n_likes, _id&#39;</span>
<span class="c1"># [</span>
<span class="c1">#   [</span>
<span class="c1">#     0,</span>
<span class="c1">#     1337566253.89858,</span>
<span class="c1">#     0.000355720520019531</span>
<span class="c1">#   ],</span>
<span class="c1">#   [</span>
<span class="c1">#     [</span>
<span class="c1">#       [</span>
<span class="c1">#         5</span>
<span class="c1">#       ],</span>
<span class="c1">#       [</span>
<span class="c1">#         [</span>
<span class="c1">#           &quot;_id&quot;,</span>
<span class="c1">#           &quot;UInt32&quot;</span>
<span class="c1">#         ],</span>
<span class="c1">#         [</span>
<span class="c1">#           &quot;_key&quot;,</span>
<span class="c1">#           &quot;ShortText&quot;</span>
<span class="c1">#         ],</span>
<span class="c1">#         [</span>
<span class="c1">#           &quot;content&quot;,</span>
<span class="c1">#           &quot;Text&quot;</span>
<span class="c1">#         ],</span>
<span class="c1">#         [</span>
<span class="c1">#           &quot;n_likes&quot;,</span>
<span class="c1">#           &quot;UInt32&quot;</span>
<span class="c1">#         ],</span>
<span class="c1">#         [</span>
<span class="c1">#           &quot;tag&quot;,</span>
<span class="c1">#           &quot;ShortText&quot;</span>
<span class="c1">#         ]</span>
<span class="c1">#       ],</span>
<span class="c1">#       [</span>
<span class="c1">#         3,</span>
<span class="c1">#         &quot;Mroonga&quot;,</span>
<span class="c1">#         &quot;I also started to use Mroonga. It&#39;s also very fast! Really fast!&quot;,</span>
<span class="c1">#         15,</span>
<span class="c1">#         &quot;Groonga&quot;</span>
<span class="c1">#       ],</span>
<span class="c1">#       [</span>
<span class="c1">#         2,</span>
<span class="c1">#         &quot;Groonga&quot;,</span>
<span class="c1">#         &quot;I started to use Groonga. It&#39;s very fast!&quot;,</span>
<span class="c1">#         10,</span>
<span class="c1">#         &quot;Groonga&quot;</span>
<span class="c1">#       ],</span>
<span class="c1">#       [</span>
<span class="c1">#         1,</span>
<span class="c1">#         &quot;The first post!&quot;,</span>
<span class="c1">#         &quot;Welcome! This is my first post!&quot;,</span>
<span class="c1">#         5,</span>
<span class="c1">#         &quot;Hello&quot;</span>
<span class="c1">#       ],</span>
<span class="c1">#       [</span>
<span class="c1">#         4,</span>
<span class="c1">#         &quot;Good-bye Senna&quot;,</span>
<span class="c1">#         &quot;I migrated all Senna system!&quot;,</span>
<span class="c1">#         3,</span>
<span class="c1">#         &quot;Senna&quot;</span>
<span class="c1">#       ],</span>
<span class="c1">#       [</span>
<span class="c1">#         5,</span>
<span class="c1">#         &quot;Good-bye Tritonn&quot;,</span>
<span class="c1">#         &quot;I also migrated all Tritonn system!&quot;,</span>
<span class="c1">#         3,</span>
<span class="c1">#         &quot;Senna&quot;</span>
<span class="c1">#       ]</span>
<span class="c1">#     ]</span>
<span class="c1">#   ]</span>
<span class="c1"># ]</span>
</pre></div>
</div>
<p>The <code class="docutils literal notranslate"><span class="pre">select</span></code> command sorts by <code class="docutils literal notranslate"><span class="pre">n_likes</span></code> column value in descending
order. But ascending order is used for sorting by <code class="docutils literal notranslate"><span class="pre">_id</span></code>.</p>
<p>You can use <code class="docutils literal notranslate"><span class="pre">_score</span></code> pseudo column in <code class="docutils literal notranslate"><span class="pre">sort_keys</span></code> if you use
<code class="docutils literal notranslate"><span class="pre">query</span></code> or <code class="docutils literal notranslate"><span class="pre">filter</span></code> parameter.</p>
<p>Execution example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">select</span> <span class="n">Entries</span> <span class="o">--</span><span class="n">match_columns</span> <span class="n">content</span> <span class="o">--</span><span class="n">query</span> <span class="n">fast</span> <span class="o">--</span><span class="n">sort_keys</span> <span class="o">-</span><span class="n">_score</span> <span class="o">--</span><span class="n">output_columns</span> <span class="s1">&#39;_key, _score&#39;</span>
<span class="c1"># [</span>
<span class="c1">#   [</span>
<span class="c1">#     0,</span>
<span class="c1">#     1337566253.89858,</span>
<span class="c1">#     0.000355720520019531</span>
<span class="c1">#   ],</span>
<span class="c1">#   [</span>
<span class="c1">#     [</span>
<span class="c1">#       [</span>
<span class="c1">#         2</span>
<span class="c1">#       ],</span>
<span class="c1">#       [</span>
<span class="c1">#         [</span>
<span class="c1">#           &quot;_key&quot;,</span>
<span class="c1">#           &quot;ShortText&quot;</span>
<span class="c1">#         ],</span>
<span class="c1">#         [</span>
<span class="c1">#           &quot;_score&quot;,</span>
<span class="c1">#           &quot;Int32&quot;</span>
<span class="c1">#         ]</span>
<span class="c1">#       ],</span>
<span class="c1">#       [</span>
<span class="c1">#         &quot;Mroonga&quot;,</span>
<span class="c1">#         2</span>
<span class="c1">#       ],</span>
<span class="c1">#       [</span>
<span class="c1">#         &quot;Groonga&quot;,</span>
<span class="c1">#         1</span>
<span class="c1">#       ]</span>
<span class="c1">#     ]</span>
<span class="c1">#   ]</span>
<span class="c1"># ]</span>
</pre></div>
</div>
<p>The <code class="docutils literal notranslate"><span class="pre">select</span></code> command sorts matched records by hit score in
descending order and outputs record key and hit score.</p>
<p>If you use <code class="docutils literal notranslate"><span class="pre">_score</span></code> without <code class="docutils literal notranslate"><span class="pre">query</span></code> nor <code class="docutils literal notranslate"><span class="pre">filter</span></code> parameters,
it’s just ignored but get a warning in log file.</p>
</section>
<section id="offset">
<span id="select-offset"></span><h4><span class="section-number">7.3.57.4.4.4. </span><code class="docutils literal notranslate"><span class="pre">offset</span></code><a class="headerlink" href="#offset" title="Link to this heading">#</a></h4>
<p>Specifies offset to determine output records range. Offset is
zero-based. <code class="docutils literal notranslate"><span class="pre">--offset</span> <span class="pre">1</span></code> means output range is started from the 2nd
record.</p>
<p>Execution example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">select</span> <span class="n">Entries</span> <span class="o">--</span><span class="n">sort_keys</span> <span class="n">_id</span> <span class="o">--</span><span class="n">offset</span> <span class="mi">3</span> <span class="o">--</span><span class="n">output_columns</span> <span class="n">_key</span>
<span class="c1"># [</span>
<span class="c1">#   [</span>
<span class="c1">#     0,</span>
<span class="c1">#     1337566253.89858,</span>
<span class="c1">#     0.000355720520019531</span>
<span class="c1">#   ],</span>
<span class="c1">#   [</span>
<span class="c1">#     [</span>
<span class="c1">#       [</span>
<span class="c1">#         5</span>
<span class="c1">#       ],</span>
<span class="c1">#       [</span>
<span class="c1">#         [</span>
<span class="c1">#           &quot;_key&quot;,</span>
<span class="c1">#           &quot;ShortText&quot;</span>
<span class="c1">#         ]</span>
<span class="c1">#       ],</span>
<span class="c1">#       [</span>
<span class="c1">#         &quot;Good-bye Senna&quot;</span>
<span class="c1">#       ],</span>
<span class="c1">#       [</span>
<span class="c1">#         &quot;Good-bye Tritonn&quot;</span>
<span class="c1">#       ]</span>
<span class="c1">#     ]</span>
<span class="c1">#   ]</span>
<span class="c1"># ]</span>
</pre></div>
</div>
<p>The <code class="docutils literal notranslate"><span class="pre">select</span></code> command outputs from the 4th record.</p>
<p>You can specify negative value. It means that <code class="docutils literal notranslate"><span class="pre">the</span> <span class="pre">number</span> <span class="pre">of</span> <span class="pre">matched</span>
<span class="pre">records</span> <span class="pre">+</span> <span class="pre">offset</span></code>. If you have 3 matched records and specify
<code class="docutils literal notranslate"><span class="pre">--offset</span> <span class="pre">-2</span></code>, you get records from the 2nd (<code class="docutils literal notranslate"><span class="pre">3</span> <span class="pre">+</span> <span class="pre">-2</span> <span class="pre">=</span> <span class="pre">1</span></code>. <code class="docutils literal notranslate"><span class="pre">1</span></code>
means 2nd. Remember that offset is zero-based.) record to the 3rd
record.</p>
<p>Execution example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">select</span> <span class="n">Entries</span> <span class="o">--</span><span class="n">sort_keys</span> <span class="n">_id</span> <span class="o">--</span><span class="n">offset</span> <span class="o">-</span><span class="mi">2</span> <span class="o">--</span><span class="n">output_columns</span> <span class="n">_key</span>
<span class="c1"># [</span>
<span class="c1">#   [</span>
<span class="c1">#     0,</span>
<span class="c1">#     1337566253.89858,</span>
<span class="c1">#     0.000355720520019531</span>
<span class="c1">#   ],</span>
<span class="c1">#   [</span>
<span class="c1">#     [</span>
<span class="c1">#       [</span>
<span class="c1">#         5</span>
<span class="c1">#       ],</span>
<span class="c1">#       [</span>
<span class="c1">#         [</span>
<span class="c1">#           &quot;_key&quot;,</span>
<span class="c1">#           &quot;ShortText&quot;</span>
<span class="c1">#         ]</span>
<span class="c1">#       ],</span>
<span class="c1">#       [</span>
<span class="c1">#         &quot;Good-bye Senna&quot;</span>
<span class="c1">#       ],</span>
<span class="c1">#       [</span>
<span class="c1">#         &quot;Good-bye Tritonn&quot;</span>
<span class="c1">#       ]</span>
<span class="c1">#     ]</span>
<span class="c1">#   ]</span>
<span class="c1"># ]</span>
</pre></div>
</div>
<p>The <code class="docutils literal notranslate"><span class="pre">select</span></code> command outputs from the 4th record because the total
number of records is <code class="docutils literal notranslate"><span class="pre">5</span></code>.</p>
<p>The default value is <code class="docutils literal notranslate"><span class="pre">0</span></code>.</p>
</section>
<section id="limit">
<span id="select-limit"></span><h4><span class="section-number">7.3.57.4.4.5. </span><code class="docutils literal notranslate"><span class="pre">limit</span></code><a class="headerlink" href="#limit" title="Link to this heading">#</a></h4>
<p>Specifies the max number of output records. If the number of
matched records is less than <code class="docutils literal notranslate"><span class="pre">limit</span></code>, all records are outputted.</p>
<p>Here is a simple <code class="docutils literal notranslate"><span class="pre">limit</span></code> usage example.</p>
<p>Execution example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">select</span> <span class="n">Entries</span> <span class="o">--</span><span class="n">sort_keys</span> <span class="n">_id</span> <span class="o">--</span><span class="n">offset</span> <span class="mi">2</span> <span class="o">--</span><span class="n">limit</span> <span class="mi">3</span> <span class="o">--</span><span class="n">output_columns</span> <span class="n">_key</span>
<span class="c1"># [</span>
<span class="c1">#   [</span>
<span class="c1">#     0,</span>
<span class="c1">#     1337566253.89858,</span>
<span class="c1">#     0.000355720520019531</span>
<span class="c1">#   ],</span>
<span class="c1">#   [</span>
<span class="c1">#     [</span>
<span class="c1">#       [</span>
<span class="c1">#         5</span>
<span class="c1">#       ],</span>
<span class="c1">#       [</span>
<span class="c1">#         [</span>
<span class="c1">#           &quot;_key&quot;,</span>
<span class="c1">#           &quot;ShortText&quot;</span>
<span class="c1">#         ]</span>
<span class="c1">#       ],</span>
<span class="c1">#       [</span>
<span class="c1">#         &quot;Mroonga&quot;</span>
<span class="c1">#       ],</span>
<span class="c1">#       [</span>
<span class="c1">#         &quot;Good-bye Senna&quot;</span>
<span class="c1">#       ],</span>
<span class="c1">#       [</span>
<span class="c1">#         &quot;Good-bye Tritonn&quot;</span>
<span class="c1">#       ]</span>
<span class="c1">#     ]</span>
<span class="c1">#   ]</span>
<span class="c1"># ]</span>
</pre></div>
</div>
<p>The <code class="docutils literal notranslate"><span class="pre">select</span></code> command outputs the 3rd, the 4th and the 5th records.</p>
<p>You can specify negative value. It means that <code class="docutils literal notranslate"><span class="pre">the</span> <span class="pre">number</span> <span class="pre">of</span> <span class="pre">matched</span>
<span class="pre">records</span> <span class="pre">+</span> <span class="pre">limit</span> <span class="pre">+</span> <span class="pre">1</span></code>. For example, <code class="docutils literal notranslate"><span class="pre">--limit</span> <span class="pre">-1</span></code> outputs all
records. It’s very useful value to show all records.</p>
<p>Here is a simple negative <code class="docutils literal notranslate"><span class="pre">limit</span></code> value usage example.</p>
<p>Execution example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">select</span> <span class="n">Entries</span> <span class="o">--</span><span class="n">limit</span> <span class="o">-</span><span class="mi">1</span>
<span class="c1"># [</span>
<span class="c1">#   [</span>
<span class="c1">#     0,</span>
<span class="c1">#     1337566253.89858,</span>
<span class="c1">#     0.000355720520019531</span>
<span class="c1">#   ],</span>
<span class="c1">#   [</span>
<span class="c1">#     [</span>
<span class="c1">#       [</span>
<span class="c1">#         5</span>
<span class="c1">#       ],</span>
<span class="c1">#       [</span>
<span class="c1">#         [</span>
<span class="c1">#           &quot;_id&quot;,</span>
<span class="c1">#           &quot;UInt32&quot;</span>
<span class="c1">#         ],</span>
<span class="c1">#         [</span>
<span class="c1">#           &quot;_key&quot;,</span>
<span class="c1">#           &quot;ShortText&quot;</span>
<span class="c1">#         ],</span>
<span class="c1">#         [</span>
<span class="c1">#           &quot;content&quot;,</span>
<span class="c1">#           &quot;Text&quot;</span>
<span class="c1">#         ],</span>
<span class="c1">#         [</span>
<span class="c1">#           &quot;n_likes&quot;,</span>
<span class="c1">#           &quot;UInt32&quot;</span>
<span class="c1">#         ],</span>
<span class="c1">#         [</span>
<span class="c1">#           &quot;tag&quot;,</span>
<span class="c1">#           &quot;ShortText&quot;</span>
<span class="c1">#         ]</span>
<span class="c1">#       ],</span>
<span class="c1">#       [</span>
<span class="c1">#         1,</span>
<span class="c1">#         &quot;The first post!&quot;,</span>
<span class="c1">#         &quot;Welcome! This is my first post!&quot;,</span>
<span class="c1">#         5,</span>
<span class="c1">#         &quot;Hello&quot;</span>
<span class="c1">#       ],</span>
<span class="c1">#       [</span>
<span class="c1">#         2,</span>
<span class="c1">#         &quot;Groonga&quot;,</span>
<span class="c1">#         &quot;I started to use Groonga. It&#39;s very fast!&quot;,</span>
<span class="c1">#         10,</span>
<span class="c1">#         &quot;Groonga&quot;</span>
<span class="c1">#       ],</span>
<span class="c1">#       [</span>
<span class="c1">#         3,</span>
<span class="c1">#         &quot;Mroonga&quot;,</span>
<span class="c1">#         &quot;I also started to use Mroonga. It&#39;s also very fast! Really fast!&quot;,</span>
<span class="c1">#         15,</span>
<span class="c1">#         &quot;Groonga&quot;</span>
<span class="c1">#       ],</span>
<span class="c1">#       [</span>
<span class="c1">#         4,</span>
<span class="c1">#         &quot;Good-bye Senna&quot;,</span>
<span class="c1">#         &quot;I migrated all Senna system!&quot;,</span>
<span class="c1">#         3,</span>
<span class="c1">#         &quot;Senna&quot;</span>
<span class="c1">#       ],</span>
<span class="c1">#       [</span>
<span class="c1">#         5,</span>
<span class="c1">#         &quot;Good-bye Tritonn&quot;,</span>
<span class="c1">#         &quot;I also migrated all Tritonn system!&quot;,</span>
<span class="c1">#         3,</span>
<span class="c1">#         &quot;Senna&quot;</span>
<span class="c1">#       ]</span>
<span class="c1">#     ]</span>
<span class="c1">#   ]</span>
<span class="c1"># ]</span>
</pre></div>
</div>
<p>The <code class="docutils literal notranslate"><span class="pre">select</span></code> command outputs all records.</p>
<p>The default value is <code class="docutils literal notranslate"><span class="pre">10</span></code>.</p>
</section>
<section id="scorer">
<span id="select-scorer"></span><h4><span class="section-number">7.3.57.4.4.6. </span><code class="docutils literal notranslate"><span class="pre">scorer</span></code><a class="headerlink" href="#scorer" title="Link to this heading">#</a></h4>
<p>TODO: write in English and add example.</p>
<p>検索条件にマッチする全てのレコードに対して適用するgrn_exprをscript形式で指定します。</p>
<p>scorerは、検索処理が完了し、ソート処理が実行される前に呼び出されます。従って、各レコードのスコアを操作する式を指定しておけば、検索結果のソート順序をカスタマイズできるようになります。</p>
</section>
</section>
<section id="fuzzy-query-related-parameters">
<span id="select-fuzzy-query-related-parameters"></span><h3><span class="section-number">7.3.57.4.5. </span>Fuzzy query related parameters<a class="headerlink" href="#fuzzy-query-related-parameters" title="Link to this heading">#</a></h3>
<div class="versionadded">
<p><span class="versionmodified added">New in version 13.0.8.</span></p>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>This is an experimental feature. Currently, this feature is still
not stable.</p>
</div>
<p>This section describes fuzzy query related parameters. See also
<a class="reference internal" href="#select-usage-typo-tolerance"><span class="std std-ref">Typo tolerance</span></a> as a use case of fuzzy query.</p>
<p>You need to specify at least <a class="reference internal" href="#select-fuzzy-max-distance-ratio"><span class="std std-ref">fuzzy_max_distance_ratio</span></a> or
<a class="reference internal" href="#select-fuzzy-max-distance"><span class="std std-ref">fuzzy_max_distance</span></a> to use fuzzy query.</p>
<p>Fuzzy query is executed automatically when no record is matched with
the original query. It means that fuzzy query is implemented as one of
match escalation methods. See also
<a class="reference internal" href="#select-match-escalation-threshold"><span class="std std-ref">match_escalation_threshold</span></a> for match escalation.</p>
<section id="fuzzy-max-distance-ratio">
<span id="select-fuzzy-max-distance-ratio"></span><h4><span class="section-number">7.3.57.4.5.1. </span><code class="docutils literal notranslate"><span class="pre">fuzzy_max_distance_ratio</span></code><a class="headerlink" href="#fuzzy-max-distance-ratio" title="Link to this heading">#</a></h4>
<div class="versionadded">
<p><span class="versionmodified added">New in version 13.0.8.</span></p>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>This is an experimental feature. Currently, this feature is still
not stable.</p>
</div>
<p>The default value is <code class="docutils literal notranslate"><span class="pre">0</span></code>.</p>
<p>You need to specify <a class="reference internal" href="#select-fuzzy-max-distance-ratio"><span class="std std-ref">fuzzy_max_distance_ratio</span></a> or
<a class="reference internal" href="#select-fuzzy-max-distance"><span class="std std-ref">fuzzy_max_distance</span></a> to enable fuzzy query. If you specify
both of them, <a class="reference internal" href="#select-fuzzy-max-distance-ratio"><span class="std std-ref">fuzzy_max_distance_ratio</span></a> is used.</p>
<p>You can specify how long edit distance is accepted based on the target
query. For most use cases, this parameter is more suitable than
<a class="reference internal" href="#select-fuzzy-max-distance"><span class="std std-ref">fuzzy_max_distance</span></a>.</p>
<p>In general, long edit distance for short query isn’t suitable. Because
it will increase noisy results. For example, <code class="docutils literal notranslate"><span class="pre">hye</span></code> with edit
distance <code class="docutils literal notranslate"><span class="pre">3</span></code> accepts the following terms:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">hey</span></code> (preferable result)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">eye</span></code> (preferable result)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">bye</span></code> (preferable result)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">hyper</span></code> (preferable result?)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">hyphen</span></code> (preferable result?)</p></li>
</ul>
<p><a class="reference internal" href="#select-fuzzy-max-distance"><span class="std std-ref">fuzzy_max_distance</span></a> specifies a fixed size edit distance
for all queries (both of short queries and long queries).</p>
<p>You can specify an edit distance for each query based on the number of
characters of the target query by this parameter. For example, edit
distance <code class="docutils literal notranslate"><span class="pre">1</span></code> is used for <code class="docutils literal notranslate"><span class="pre">hye</span></code> with <code class="docutils literal notranslate"><span class="pre">--fuzzy_max_distance_ratio</span>
<span class="pre">0.34</span></code>. Edit distance <code class="docutils literal notranslate"><span class="pre">2</span></code> is used for <code class="docutils literal notranslate"><span class="pre">hypehn</span></code> with
<code class="docutils literal notranslate"><span class="pre">--fuzzy_max_distance_ratio</span> <span class="pre">0.34</span></code>. It’s calculated by
<code class="docutils literal notranslate"><span class="pre">floor(${THE_NUMBER_OF_CHARACTERS}</span> <span class="pre">*</span> <span class="pre">${FUZZY_MAX_DISTANCE_RATIO})</span></code>:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">hye</span></code>: <code class="docutils literal notranslate"><span class="pre">floor(3</span> <span class="pre">*</span> <span class="pre">0.34)</span> <span class="pre">=</span> <span class="pre">floor(1.02)</span> <span class="pre">=</span> <span class="pre">1</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">hypehn</span></code>: <code class="docutils literal notranslate"><span class="pre">floor(6</span> <span class="pre">*</span> <span class="pre">0.34)</span> <span class="pre">=</span> <span class="pre">floor(2.04)</span> <span class="pre">=</span> <span class="pre">2</span></code></p></li>
</ul>
<p>In general, <code class="docutils literal notranslate"><span class="pre">--fuzzy_max_distance_ratio</span> <span class="pre">0.34</span></code> is a good value. If
the value doesn’t fix your use case, you can change the value.</p>
<p>Here is a table that shows how many characters are accepted as typo
with <code class="docutils literal notranslate"><span class="pre">--fuzzy_max_distance_ratio</span> <span class="pre">0.34</span></code>:</p>
<div class="pst-scrollable-table-container"><table class="table">
<thead>
<tr class="row-odd"><th class="head"><p>The number of characters of a term</p></th>
<th class="head"><p>The number of accepted typo characters</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>1</p></td>
<td><p>0 (<code class="docutils literal notranslate"><span class="pre">floor(1</span> <span class="pre">*</span> <span class="pre">0.34)</span> <span class="pre">=</span> <span class="pre">floor(0.34)</span> <span class="pre">=</span> <span class="pre">0</span></code>)</p></td>
</tr>
<tr class="row-odd"><td><p>2</p></td>
<td><p>0 (<code class="docutils literal notranslate"><span class="pre">floor(2</span> <span class="pre">*</span> <span class="pre">0.34)</span> <span class="pre">=</span> <span class="pre">floor(0.68)</span> <span class="pre">=</span> <span class="pre">0</span></code>)</p></td>
</tr>
<tr class="row-even"><td><p>3</p></td>
<td><p>1 (<code class="docutils literal notranslate"><span class="pre">floor(3</span> <span class="pre">*</span> <span class="pre">0.34)</span> <span class="pre">=</span> <span class="pre">floor(1.02)</span> <span class="pre">=</span> <span class="pre">1</span></code>)</p></td>
</tr>
<tr class="row-odd"><td><p>4</p></td>
<td><p>1 (<code class="docutils literal notranslate"><span class="pre">floor(4</span> <span class="pre">*</span> <span class="pre">0.34)</span> <span class="pre">=</span> <span class="pre">floor(1.36)</span> <span class="pre">=</span> <span class="pre">1</span></code>)</p></td>
</tr>
<tr class="row-even"><td><p>5</p></td>
<td><p>1 (<code class="docutils literal notranslate"><span class="pre">floor(5</span> <span class="pre">*</span> <span class="pre">0.34)</span> <span class="pre">=</span> <span class="pre">floor(1.7)</span> <span class="pre">=</span> <span class="pre">1</span></code>)</p></td>
</tr>
<tr class="row-odd"><td><p>6</p></td>
<td><p>2 (<code class="docutils literal notranslate"><span class="pre">floor(6</span> <span class="pre">*</span> <span class="pre">0.34)</span> <span class="pre">=</span> <span class="pre">floor(2.04)</span> <span class="pre">=</span> <span class="pre">2</span></code>)</p></td>
</tr>
</tbody>
</table>
</div>
<p>Here is an example that accepts 1 typo character for <code class="docutils literal notranslate"><span class="pre">vary</span></code> and 2
typo characters for <code class="docutils literal notranslate"><span class="pre">Gnoonag</span></code>. This example specifies <code class="docutils literal notranslate"><span class="pre">yes</span></code> as
<a class="reference internal" href="#select-match-escalation"><span class="std std-ref">match_escalation</span></a> to enable fuzzy query for all queries
(<code class="docutils literal notranslate"><span class="pre">vary</span></code> and <code class="docutils literal notranslate"><span class="pre">Gnoonag</span></code>). In general, you should not specify
<code class="docutils literal notranslate"><span class="pre">--match_escalation</span> <span class="pre">yes</span></code> because it may increase noisy results.</p>
<p>Execution example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">select</span> \
  <span class="o">--</span><span class="n">table</span> <span class="n">Entries</span> \
  <span class="o">--</span><span class="n">fuzzy_max_distance_ratio</span> <span class="mf">0.34</span> \
  <span class="o">--</span><span class="n">match_columns</span> <span class="n">content</span> \
  <span class="o">--</span><span class="n">query</span> <span class="s1">&#39;vary Gnoonag&#39;</span> \
  <span class="o">--</span><span class="n">match_escalation</span> <span class="n">yes</span> \
  <span class="o">--</span><span class="n">output_columns</span> <span class="n">content</span><span class="p">,</span><span class="n">_score</span>
<span class="c1"># [</span>
<span class="c1">#   [</span>
<span class="c1">#     0,</span>
<span class="c1">#     1337566253.89858,</span>
<span class="c1">#     0.000355720520019531</span>
<span class="c1">#   ],</span>
<span class="c1">#   [</span>
<span class="c1">#     [</span>
<span class="c1">#       [</span>
<span class="c1">#         1</span>
<span class="c1">#       ],</span>
<span class="c1">#       [</span>
<span class="c1">#         [</span>
<span class="c1">#           &quot;content&quot;,</span>
<span class="c1">#           &quot;Text&quot;</span>
<span class="c1">#         ],</span>
<span class="c1">#         [</span>
<span class="c1">#           &quot;_score&quot;,</span>
<span class="c1">#           &quot;Int32&quot;</span>
<span class="c1">#         ]</span>
<span class="c1">#       ],</span>
<span class="c1">#       [</span>
<span class="c1">#         &quot;I started to use Groonga. It&#39;s very fast!&quot;,</span>
<span class="c1">#         2</span>
<span class="c1">#       ]</span>
<span class="c1">#     ]</span>
<span class="c1">#   ]</span>
<span class="c1"># ]</span>
</pre></div>
</div>
</section>
<section id="fuzzy-max-distance">
<span id="select-fuzzy-max-distance"></span><h4><span class="section-number">7.3.57.4.5.2. </span><code class="docutils literal notranslate"><span class="pre">fuzzy_max_distance</span></code><a class="headerlink" href="#fuzzy-max-distance" title="Link to this heading">#</a></h4>
<div class="versionadded">
<p><span class="versionmodified added">New in version 13.0.8.</span></p>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>This is an experimental feature. Currently, this feature is still
not stable.</p>
</div>
<p>The default value is <code class="docutils literal notranslate"><span class="pre">0</span></code>.</p>
<p>You need to specify <a class="reference internal" href="#select-fuzzy-max-distance-ratio"><span class="std std-ref">fuzzy_max_distance_ratio</span></a> or
<a class="reference internal" href="#select-fuzzy-max-distance"><span class="std std-ref">fuzzy_max_distance</span></a> to enable fuzzy query. If you specify
both of them, <a class="reference internal" href="#select-fuzzy-max-distance-ratio"><span class="std std-ref">fuzzy_max_distance_ratio</span></a> is used.</p>
<p>You can specify a fixed edit distance to be accepted by this
parameter. For most use cases, <a class="reference internal" href="#select-fuzzy-max-distance"><span class="std std-ref">fuzzy_max_distance</span></a> is
more suitable than this parameter.</p>
<p>Here is an example that accepts 1 typo character for <code class="docutils literal notranslate"><span class="pre">vary</span></code>:</p>
<p>Execution example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">select</span> \
  <span class="o">--</span><span class="n">table</span> <span class="n">Entries</span> \
  <span class="o">--</span><span class="n">fuzzy_max_distance</span> <span class="mi">1</span> \
  <span class="o">--</span><span class="n">match_columns</span> <span class="n">content</span> \
  <span class="o">--</span><span class="n">query</span> <span class="n">vary</span> \
  <span class="o">--</span><span class="n">output_columns</span> <span class="n">content</span><span class="p">,</span><span class="n">_score</span>
<span class="c1"># [</span>
<span class="c1">#   [</span>
<span class="c1">#     0,</span>
<span class="c1">#     1337566253.89858,</span>
<span class="c1">#     0.000355720520019531</span>
<span class="c1">#   ],</span>
<span class="c1">#   [</span>
<span class="c1">#     [</span>
<span class="c1">#       [</span>
<span class="c1">#         2</span>
<span class="c1">#       ],</span>
<span class="c1">#       [</span>
<span class="c1">#         [</span>
<span class="c1">#           &quot;content&quot;,</span>
<span class="c1">#           &quot;Text&quot;</span>
<span class="c1">#         ],</span>
<span class="c1">#         [</span>
<span class="c1">#           &quot;_score&quot;,</span>
<span class="c1">#           &quot;Int32&quot;</span>
<span class="c1">#         ]</span>
<span class="c1">#       ],</span>
<span class="c1">#       [</span>
<span class="c1">#         &quot;I started to use Groonga. It&#39;s very fast!&quot;,</span>
<span class="c1">#         1</span>
<span class="c1">#       ],</span>
<span class="c1">#       [</span>
<span class="c1">#         &quot;I also started to use Mroonga. It&#39;s also very fast! Really fast!&quot;,</span>
<span class="c1">#         1</span>
<span class="c1">#       ]</span>
<span class="c1">#     ]</span>
<span class="c1">#   ]</span>
<span class="c1"># ]</span>
</pre></div>
</div>
</section>
<section id="fuzzy-max-expansions">
<span id="select-fuzzy-max-expansions"></span><h4><span class="section-number">7.3.57.4.5.3. </span><code class="docutils literal notranslate"><span class="pre">fuzzy_max_expansions</span></code><a class="headerlink" href="#fuzzy-max-expansions" title="Link to this heading">#</a></h4>
<div class="versionadded">
<p><span class="versionmodified added">New in version 13.0.8.</span></p>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>This is an experimental feature. Currently, this feature is still
not stable.</p>
</div>
<p>The default value is <code class="docutils literal notranslate"><span class="pre">10</span></code>.</p>
<p>You can specify the max number of terms as fixed terms. If <code class="docutils literal notranslate"><span class="pre">hye</span></code> is
the given query, this parameter is <code class="docutils literal notranslate"><span class="pre">2</span></code> and <code class="docutils literal notranslate"><span class="pre">hey</span></code>, <code class="docutils literal notranslate"><span class="pre">eye</span></code> and
<code class="docutils literal notranslate"><span class="pre">hyper</span></code> are candidates of fixed terms, <code class="docutils literal notranslate"><span class="pre">hey</span></code> and <code class="docutils literal notranslate"><span class="pre">eye</span></code> (2 terms)
are only used as fixed terms.</p>
<p>Here is an example that uses 1 fixed terms for <code class="docutils literal notranslate"><span class="pre">alx</span></code>. <code class="docutils literal notranslate"><span class="pre">all</span></code> is
only used. <code class="docutils literal notranslate"><span class="pre">also</span></code> isn’t used.</p>
<p>Execution example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">select</span> \
  <span class="o">--</span><span class="n">table</span> <span class="n">Entries</span> \
  <span class="o">--</span><span class="n">fuzzy_max_distance</span> <span class="mi">2</span> \
  <span class="o">--</span><span class="n">fuzzy_max_expansions</span> <span class="mi">1</span> \
  <span class="o">--</span><span class="n">match_columns</span> <span class="n">content</span> \
  <span class="o">--</span><span class="n">query</span> <span class="n">alx</span> \
  <span class="o">--</span><span class="n">output_columns</span> <span class="n">content</span><span class="p">,</span><span class="n">_score</span>
<span class="c1"># [</span>
<span class="c1">#   [</span>
<span class="c1">#     0,</span>
<span class="c1">#     1337566253.89858,</span>
<span class="c1">#     0.000355720520019531</span>
<span class="c1">#   ],</span>
<span class="c1">#   [</span>
<span class="c1">#     [</span>
<span class="c1">#       [</span>
<span class="c1">#         2</span>
<span class="c1">#       ],</span>
<span class="c1">#       [</span>
<span class="c1">#         [</span>
<span class="c1">#           &quot;content&quot;,</span>
<span class="c1">#           &quot;Text&quot;</span>
<span class="c1">#         ],</span>
<span class="c1">#         [</span>
<span class="c1">#           &quot;_score&quot;,</span>
<span class="c1">#           &quot;Int32&quot;</span>
<span class="c1">#         ]</span>
<span class="c1">#       ],</span>
<span class="c1">#       [</span>
<span class="c1">#         &quot;I migrated all Senna system!&quot;,</span>
<span class="c1">#         2</span>
<span class="c1">#       ],</span>
<span class="c1">#       [</span>
<span class="c1">#         &quot;I also migrated all Tritonn system!&quot;,</span>
<span class="c1">#         2</span>
<span class="c1">#       ]</span>
<span class="c1">#     ]</span>
<span class="c1">#   ]</span>
<span class="c1"># ]</span>
</pre></div>
</div>
</section>
<section id="fuzzy-prefix-length">
<span id="select-fuzzy-prefix-length"></span><h4><span class="section-number">7.3.57.4.5.4. </span><code class="docutils literal notranslate"><span class="pre">fuzzy_prefix_length</span></code><a class="headerlink" href="#fuzzy-prefix-length" title="Link to this heading">#</a></h4>
<div class="versionadded">
<p><span class="versionmodified added">New in version 13.0.8.</span></p>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>This is an experimental feature. Currently, this feature is still
not stable.</p>
</div>
<p>The default value is <code class="docutils literal notranslate"><span class="pre">0</span></code>.</p>
<p>You can specify the number of prefix characters. If this value is
<code class="docutils literal notranslate"><span class="pre">1</span></code> and the given term is <code class="docutils literal notranslate"><span class="pre">hye</span></code>, the prefix is <code class="docutils literal notranslate"><span class="pre">h</span></code>. Fixed terms
must be started with <code class="docutils literal notranslate"><span class="pre">h</span></code>. For example, <code class="docutils literal notranslate"><span class="pre">hey</span></code> can be used as a
fixed term but <code class="docutils literal notranslate"><span class="pre">eye</span></code> and <code class="docutils literal notranslate"><span class="pre">bye</span></code> can’t be used as a fixed terms.</p>
<p>This option will improve performance when a lexicon has many terms.</p>
<p>Here is an example that requires <code class="docutils literal notranslate"><span class="pre">gr</span></code> prefix for fixed terms with
<code class="docutils literal notranslate"><span class="pre">groonag</span></code> query. <code class="docutils literal notranslate"><span class="pre">Groonga</span></code> (case insensitive for this case because
you use <a class="reference internal" href="../normalizers/normalizer_auto.html"><span class="doc">NormalizerAuto</span></a> for this case)
can be used for a fixed term but <code class="docutils literal notranslate"><span class="pre">Mroonga</span></code> can’t be used for a fixed
term. Because <code class="docutils literal notranslate"><span class="pre">Mroonga</span></code> isn’t started with <code class="docutils literal notranslate"><span class="pre">gr</span></code>.</p>
<p>Execution example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">select</span> \
  <span class="o">--</span><span class="n">table</span> <span class="n">Entries</span> \
  <span class="o">--</span><span class="n">fuzzy_max_distance</span> <span class="mi">2</span> \
  <span class="o">--</span><span class="n">fuzzy_prefix_length</span> <span class="mi">2</span> \
  <span class="o">--</span><span class="n">match_columns</span> <span class="n">content</span> \
  <span class="o">--</span><span class="n">query</span> <span class="n">groonag</span> \
  <span class="o">--</span><span class="n">output_columns</span> <span class="n">content</span><span class="p">,</span><span class="n">_score</span>
<span class="c1"># [</span>
<span class="c1">#   [</span>
<span class="c1">#     0,</span>
<span class="c1">#     1337566253.89858,</span>
<span class="c1">#     0.000355720520019531</span>
<span class="c1">#   ],</span>
<span class="c1">#   [</span>
<span class="c1">#     [</span>
<span class="c1">#       [</span>
<span class="c1">#         1</span>
<span class="c1">#       ],</span>
<span class="c1">#       [</span>
<span class="c1">#         [</span>
<span class="c1">#           &quot;content&quot;,</span>
<span class="c1">#           &quot;Text&quot;</span>
<span class="c1">#         ],</span>
<span class="c1">#         [</span>
<span class="c1">#           &quot;_score&quot;,</span>
<span class="c1">#           &quot;Int32&quot;</span>
<span class="c1">#         ]</span>
<span class="c1">#       ],</span>
<span class="c1">#       [</span>
<span class="c1">#         &quot;I started to use Groonga. It&#39;s very fast!&quot;,</span>
<span class="c1">#         2</span>
<span class="c1">#       ]</span>
<span class="c1">#     ]</span>
<span class="c1">#   ]</span>
<span class="c1"># ]</span>
</pre></div>
</div>
</section>
<section id="fuzzy-with-transposition">
<span id="select-fuzzy-with-transposition"></span><h4><span class="section-number">7.3.57.4.5.5. </span><code class="docutils literal notranslate"><span class="pre">fuzzy_with_transposition</span></code><a class="headerlink" href="#fuzzy-with-transposition" title="Link to this heading">#</a></h4>
<div class="versionadded">
<p><span class="versionmodified added">New in version 13.0.9.</span></p>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>This is an experimental feature. Currently, this feature is still
not stable.</p>
</div>
<p>The default value is <code class="docutils literal notranslate"><span class="pre">yes</span></code>.</p>
<p>You can choose edit distance <code class="docutils literal notranslate"><span class="pre">1</span></code> or <code class="docutils literal notranslate"><span class="pre">2</span></code> for the transposition
case. An example of the transposition case is <code class="docutils literal notranslate"><span class="pre">hello</span></code> and <code class="docutils literal notranslate"><span class="pre">ehllo</span></code>.
<code class="docutils literal notranslate"><span class="pre">h</span></code> and <code class="docutils literal notranslate"><span class="pre">e</span></code> is transposed. If this parameter is <code class="docutils literal notranslate"><span class="pre">yes</span></code>, the edit
distance of this case is <code class="docutils literal notranslate"><span class="pre">1</span></code>. It’s <code class="docutils literal notranslate"><span class="pre">2</span></code> (because insertion and
deletion are needed) otherwise.</p>
<p>Here is an example that uses edit distance <code class="docutils literal notranslate"><span class="pre">2</span></code> for transposition. In
this example, you can’t use <code class="docutils literal notranslate"><span class="pre">Mroonga</span></code> as a fixed term for <code class="docutils literal notranslate"><span class="pre">groonag</span></code>
because it has edit distance <code class="docutils literal notranslate"><span class="pre">3</span></code>:</p>
<ol class="arabic simple">
<li><p>Substitute <code class="docutils literal notranslate"><span class="pre">g</span></code> with <code class="docutils literal notranslate"><span class="pre">M</span></code>: <code class="docutils literal notranslate"><span class="pre">groonag</span></code> -&gt; <code class="docutils literal notranslate"><span class="pre">Mroonag</span></code></p></li>
<li><p>Add <code class="docutils literal notranslate"><span class="pre">a</span></code>: <code class="docutils literal notranslate"><span class="pre">Mroonag</span></code> -&gt; <code class="docutils literal notranslate"><span class="pre">Mroonaga</span></code></p></li>
<li><p>Remove <code class="docutils literal notranslate"><span class="pre">a</span></code>: <code class="docutils literal notranslate"><span class="pre">Mroonaga</span></code> -&gt; <code class="docutils literal notranslate"><span class="pre">Mroonga</span></code></p></li>
</ol>
<p>Execution example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">select</span> \
  <span class="o">--</span><span class="n">table</span> <span class="n">Entries</span> \
  <span class="o">--</span><span class="n">fuzzy_max_distance</span> <span class="mi">2</span> \
  <span class="o">--</span><span class="n">fuzzy_with_transposition</span> <span class="n">no</span> \
  <span class="o">--</span><span class="n">match_columns</span> <span class="n">content</span> \
  <span class="o">--</span><span class="n">query</span> <span class="n">groonag</span> \
  <span class="o">--</span><span class="n">output_columns</span> <span class="n">content</span><span class="p">,</span><span class="n">_score</span>
<span class="c1"># [</span>
<span class="c1">#   [</span>
<span class="c1">#     0,</span>
<span class="c1">#     1337566253.89858,</span>
<span class="c1">#     0.000355720520019531</span>
<span class="c1">#   ],</span>
<span class="c1">#   [</span>
<span class="c1">#     [</span>
<span class="c1">#       [</span>
<span class="c1">#         1</span>
<span class="c1">#       ],</span>
<span class="c1">#       [</span>
<span class="c1">#         [</span>
<span class="c1">#           &quot;content&quot;,</span>
<span class="c1">#           &quot;Text&quot;</span>
<span class="c1">#         ],</span>
<span class="c1">#         [</span>
<span class="c1">#           &quot;_score&quot;,</span>
<span class="c1">#           &quot;Int32&quot;</span>
<span class="c1">#         ]</span>
<span class="c1">#       ],</span>
<span class="c1">#       [</span>
<span class="c1">#         &quot;I started to use Groonga. It&#39;s very fast!&quot;,</span>
<span class="c1">#         1</span>
<span class="c1">#       ]</span>
<span class="c1">#     ]</span>
<span class="c1">#   ]</span>
<span class="c1"># ]</span>
</pre></div>
</div>
</section>
<section id="fuzzy-with-tokenize">
<span id="select-fuzzy-tokenize"></span><h4><span class="section-number">7.3.57.4.5.6. </span><code class="docutils literal notranslate"><span class="pre">fuzzy_with_tokenize</span></code><a class="headerlink" href="#fuzzy-with-tokenize" title="Link to this heading">#</a></h4>
<div class="versionadded">
<p><span class="versionmodified added">New in version 13.0.9.</span></p>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>This is an experimental feature. Currently, this feature is still
not stable.</p>
</div>
<p>The default value is <code class="docutils literal notranslate"><span class="pre">no</span></code>.</p>
<p>You can choose whether tokenize the given term or not before fuzzy
query. If tokenizer is <a class="reference internal" href="../tokenizers/token_ngram.html"><span class="doc">TokenNgram</span></a> and
the given term is <code class="docutils literal notranslate"><span class="pre">he11o</span></code>, it’s tokenized to <code class="docutils literal notranslate"><span class="pre">he</span></code>, <code class="docutils literal notranslate"><span class="pre">11</span></code> and
<code class="docutils literal notranslate"><span class="pre">o</span></code>. If this value is <code class="docutils literal notranslate"><span class="pre">yes</span></code>, fixed terms are searched for each of
them. For example, <code class="docutils literal notranslate"><span class="pre">hi</span></code> is found as a fixed term of <code class="docutils literal notranslate"><span class="pre">he</span></code>, <code class="docutils literal notranslate"><span class="pre">12</span></code>
is found as a fixed term of <code class="docutils literal notranslate"><span class="pre">11</span></code> and <code class="docutils literal notranslate"><span class="pre">x</span></code> is found as a fixed term
of <code class="docutils literal notranslate"><span class="pre">o</span></code>. And <code class="docutils literal notranslate"><span class="pre">hi12x</span></code> is searched. If this value is <code class="docutils literal notranslate"><span class="pre">no</span></code>, fixed
terms are searched for <code class="docutils literal notranslate"><span class="pre">he11o</span></code>. For example, <code class="docutils literal notranslate"><span class="pre">hello</span></code> is found as a
fixed term of <code class="docutils literal notranslate"><span class="pre">he11o</span></code> and <code class="docutils literal notranslate"><span class="pre">hello</span></code> is searched.</p>
<p>Note that each term is separated by ore or more space characters
before fuzzy query is executed. For example, <code class="docutils literal notranslate"><span class="pre">hello</span> <span class="pre">world</span></code> are
separated to <code class="docutils literal notranslate"><span class="pre">hello</span></code> and <code class="docutils literal notranslate"><span class="pre">world</span></code> by query parser. (See also
<a class="reference internal" href="../grn_expr/query_syntax.html"><span class="doc">Query syntax</span></a>.) <code class="docutils literal notranslate"><span class="pre">hello</span></code> and <code class="docutils literal notranslate"><span class="pre">world</span></code> are
processed separately.</p>
<p>For morphological analyzer based tokenizer such as
<a class="reference internal" href="../tokenizers/token_mecab.html"><span class="doc">TokenMecab</span></a>, <code class="docutils literal notranslate"><span class="pre">no</span></code> is suitable. Because
typo-ed term isn’t tokenized as you expected for most cases. For
example, <code class="docutils literal notranslate"><span class="pre">ともて</span></code> (a typo of <code class="docutils literal notranslate"><span class="pre">とても</span></code>) may be tokenized to <code class="docutils literal notranslate"><span class="pre">とも</span>
<span class="pre">``</span> <span class="pre">(adjective)</span> <span class="pre">and</span> <span class="pre">``て</span></code> (conjunctive particle) not <code class="docutils literal notranslate"><span class="pre">ともて</span></code>
(adverb).</p>
<p>Here is an example that tokenizes the given term before fuzzy
query. In this example, you can’t use <code class="docutils literal notranslate"><span class="pre">Groonga</span></code> as a fixed term for
<code class="docutils literal notranslate"><span class="pre">gr00nga</span></code> because <code class="docutils literal notranslate"><span class="pre">gr</span></code>, <code class="docutils literal notranslate"><span class="pre">00</span></code> and <code class="docutils literal notranslate"><span class="pre">nga</span></code> are processed separately.</p>
<p>Execution example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">select</span> \
  <span class="o">--</span><span class="n">table</span> <span class="n">Entries</span> \
  <span class="o">--</span><span class="n">fuzzy_max_distance</span> <span class="mi">2</span> \
  <span class="o">--</span><span class="n">fuzzy_tokenize</span> <span class="n">yes</span> \
  <span class="o">--</span><span class="n">match_columns</span> <span class="n">content</span> \
  <span class="o">--</span><span class="n">query</span> <span class="n">gr00nga</span> \
  <span class="o">--</span><span class="n">output_columns</span> <span class="n">content</span><span class="p">,</span><span class="n">_score</span>
<span class="c1"># [</span>
<span class="c1">#   [</span>
<span class="c1">#     0,</span>
<span class="c1">#     1337566253.89858,</span>
<span class="c1">#     0.000355720520019531</span>
<span class="c1">#   ],</span>
<span class="c1">#   [</span>
<span class="c1">#     [</span>
<span class="c1">#       [</span>
<span class="c1">#         0</span>
<span class="c1">#       ],</span>
<span class="c1">#       [</span>
<span class="c1">#         [</span>
<span class="c1">#           &quot;content&quot;,</span>
<span class="c1">#           &quot;Text&quot;</span>
<span class="c1">#         ],</span>
<span class="c1">#         [</span>
<span class="c1">#           &quot;_score&quot;,</span>
<span class="c1">#           &quot;Int32&quot;</span>
<span class="c1">#         ]</span>
<span class="c1">#       ]</span>
<span class="c1">#     ]</span>
<span class="c1">#   ]</span>
<span class="c1"># ]</span>
</pre></div>
</div>
</section>
</section>
<section id="dynamic-column-related-parameters">
<span id="select-dynamic-column-related-parameters"></span><h3><span class="section-number">7.3.57.4.6. </span>Dynamic column related parameters<a class="headerlink" href="#dynamic-column-related-parameters" title="Link to this heading">#</a></h3>
<div class="versionadded">
<p><span class="versionmodified added">New in version 6.0.6.</span></p>
</div>
<p>This section describes dynamic column related parameters. You can use
dynamic column for window function but this section doesn’t describe
window function. See <a class="reference internal" href="#select-window-function-related-parameters"><span class="std std-ref">Window function related parameters</span></a>
for window function.</p>
<p>You can create zero or more columns and fill values into these columns
while a <code class="docutils literal notranslate"><span class="pre">select</span></code> execution. These columns are called as “dynamic
columns”. You can use dynamic columns as same as normal columns after
dynamic columns are created.</p>
<p>Dynamic column has performance merit because its values are computed
at once and reused computed values.</p>
<p>Dynamic column increases memory usage because its values are kept
while the <code class="docutils literal notranslate"><span class="pre">select</span></code> execution.</p>
<p>You need to use dynamic column in the following cases:</p>
<blockquote>
<div><ul class="simple">
<li><p>You want to name values like <code class="docutils literal notranslate"><span class="pre">AS</span></code> in SQL.</p></li>
<li><p>You want to use computed values for drilldown. Groonga doesn’t
support drilldown target value computation in drilldown.</p></li>
<li><p>You want to use window function.</p></li>
</ul>
</div></blockquote>
<p>There are some points to create dynamic columns. You must specify
<code class="docutils literal notranslate"><span class="pre">stage</span></code> to each dynamic column to control dynamic columns creation
points. It’s important that you choose proper point to get better
performance.</p>
<p>For example, it’s not a good idea that you create a dynamic column
that is only used for output for all records. The number of output
records will be a little even if there are many records in a
table. Because you will filter, sort and limit all records and output
only the limited records in many cases.</p>
<p>See <a class="reference internal" href="#select-columns-name-stage"><span class="std std-ref">columns[${NAME}].stage</span></a> for <code class="docutils literal notranslate"><span class="pre">stage</span></code> detail.</p>
<p>Here are parameters for dynamic column. They don’t include window
function related parameters. See
<a class="reference internal" href="#select-window-function-related-parameters"><span class="std std-ref">Window function related parameters</span></a> for window function
related parameters:</p>
<div class="pst-scrollable-table-container"><table class="table">
<thead>
<tr class="row-odd"><th class="head"><p>Name</p></th>
<th class="head"><p>Default value</p></th>
<th class="head"><p>Required or optional</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">columns[${NAME}].stage</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">null</span></code></p></td>
<td><p>Required</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">columns[${NAME}].flags</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">COLUMN_SCALAR</span></code></p></td>
<td><p>Optional</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">columns[${NAME}].type</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">null</span></code></p></td>
<td><p>Required</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">columns[${NAME}].value</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">null</span></code></p></td>
<td><p>Required</p></td>
</tr>
</tbody>
</table>
</div>
<p>You need to specify multiple parameters for a dynamic
column. <code class="docutils literal notranslate"><span class="pre">${NAME}</span></code> is the name for each dynamic column. Parameters
that use the same <code class="docutils literal notranslate"><span class="pre">${NAME}</span></code> are treated as parameters for the same
dynamic column. Here is an example to specify parameters for 2 dynamic
columns (<code class="docutils literal notranslate"><span class="pre">name1</span></code> and <code class="docutils literal notranslate"><span class="pre">name2</span></code>):</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">--</span><span class="n">columns</span><span class="p">[</span><span class="n">name1</span><span class="p">]</span><span class="o">.</span><span class="n">stage</span> <span class="n">initial</span>
<span class="o">--</span><span class="n">columns</span><span class="p">[</span><span class="n">name1</span><span class="p">]</span><span class="o">.</span><span class="n">type</span> <span class="n">UInt32</span>
<span class="o">--</span><span class="n">columns</span><span class="p">[</span><span class="n">name1</span><span class="p">]</span><span class="o">.</span><span class="n">value</span> <span class="mi">29</span>

<span class="o">--</span><span class="n">columns</span><span class="p">[</span><span class="n">name2</span><span class="p">]</span><span class="o">.</span><span class="n">stage</span> <span class="n">filtered</span>
<span class="o">--</span><span class="n">columns</span><span class="p">[</span><span class="n">name2</span><span class="p">]</span><span class="o">.</span><span class="n">type</span> <span class="n">ShortText</span>
<span class="o">--</span><span class="n">columns</span><span class="p">[</span><span class="n">name2</span><span class="p">]</span><span class="o">.</span><span class="n">value</span> <span class="s2">&quot;29&quot;</span>
</pre></div>
</div>
<section id="columns-name-stage">
<span id="select-columns-name-stage"></span><h4><span class="section-number">7.3.57.4.6.1. </span><code class="docutils literal notranslate"><span class="pre">columns[${NAME}].stage</span></code><a class="headerlink" href="#columns-name-stage" title="Link to this heading">#</a></h4>
<div class="versionadded">
<p><span class="versionmodified added">New in version 6.0.6.</span></p>
</div>
<p>Specifies when the dynamic column is created. This is a required
parameter to create a dynamic column.</p>
<p>Here are available stages:</p>
<div class="pst-scrollable-table-container"><table class="table">
<thead>
<tr class="row-odd"><th class="head"><p>Name</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">initial</span></code></p></td>
<td><p>Dynamic column is created at first.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">filtered</span></code></p></td>
<td><p>Dynamic column is created after <a class="reference internal" href="#select-query"><span class="std std-ref">query</span></a> and
<a class="reference internal" href="#select-filter"><span class="std std-ref">filter</span></a> are evaluated.</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">output</span></code></p></td>
<td><p>Dynamic column is created before <a class="reference internal" href="#select-output-columns"><span class="std std-ref">output_columns</span></a>
is evaluated.</p></td>
</tr>
</tbody>
</table>
</div>
<p>Here is the <code class="docutils literal notranslate"><span class="pre">select</span></code> process flow with dynamic column creation
points. You should choose stage as late as possible:</p>
<blockquote>
<div><ol class="arabic simple">
<li><p>Creates dynamic columns for <code class="docutils literal notranslate"><span class="pre">initial</span></code> stage. All records have
these dynamic columns.</p></li>
<li><p>Evaluates <a class="reference internal" href="#select-query"><span class="std std-ref">query</span></a> and <a class="reference internal" href="#select-filter"><span class="std std-ref">filter</span></a>. You can
use dynamic columns created in <code class="docutils literal notranslate"><span class="pre">initial</span></code> stage.</p></li>
<li><p>Creates dynamic columns for <code class="docutils literal notranslate"><span class="pre">filtered</span></code> stage. Only filtered
records have these dynamic columns.</p></li>
<li><p>Evaluates <a class="reference internal" href="#select-adjuster"><span class="std std-ref">adjuster</span></a>. You can use dynamic columns
created in <code class="docutils literal notranslate"><span class="pre">initial</span></code> stage and <code class="docutils literal notranslate"><span class="pre">filtered</span></code> stage.</p></li>
<li><p>Evaluates <a class="reference internal" href="#select-scorer"><span class="std std-ref">scorer</span></a>. You can use dynamic columns
created in <code class="docutils literal notranslate"><span class="pre">initial</span></code> stage and <code class="docutils literal notranslate"><span class="pre">filtered</span></code> stage.</p></li>
<li><p>Evaluates <a class="reference internal" href="#select-sort-keys"><span class="std std-ref">sort_keys</span></a>, <a class="reference internal" href="#select-offset"><span class="std std-ref">offset</span></a> and
<a class="reference internal" href="#select-limit"><span class="std std-ref">limit</span></a>. You can use dynamic columns created in
<code class="docutils literal notranslate"><span class="pre">initial</span></code> stage and <code class="docutils literal notranslate"><span class="pre">filtered</span></code> stage.</p></li>
<li><p>Evaluates <a class="reference internal" href="#select-slice-related-parameters"><span class="std std-ref">Slice related parameters</span></a>. You can use
dynamic columns created in <code class="docutils literal notranslate"><span class="pre">initial</span></code> stage and <code class="docutils literal notranslate"><span class="pre">filtered</span></code> stage.</p></li>
<li><p>Evaluates <a class="reference internal" href="#select-drilldown-related-parameters"><span class="std std-ref">Drilldown related parameters</span></a> and
<a class="reference internal" href="#select-advanced-drilldown-related-parameters"><span class="std std-ref">Advanced drilldown related parameters</span></a>. You can use
dynamic columns created in <code class="docutils literal notranslate"><span class="pre">initial</span></code> stage and <code class="docutils literal notranslate"><span class="pre">filtered</span></code> stage.
Note that you can create dynamic columns in each drilldown.</p></li>
<li><p>Creates dynamic columns for <code class="docutils literal notranslate"><span class="pre">output</span></code> stage. Only
<a class="reference internal" href="#select-limit"><span class="std std-ref">limit</span></a> records have these dynamic columns.</p></li>
<li><p>Evaluates <a class="reference internal" href="#select-output-columns"><span class="std std-ref">output_columns</span></a>. You can use dynamic
columns created in <code class="docutils literal notranslate"><span class="pre">initial</span></code> stage, <code class="docutils literal notranslate"><span class="pre">filtered</span></code> stage and
<code class="docutils literal notranslate"><span class="pre">output</span></code> stage.</p></li>
</ol>
</div></blockquote>
<p>Here is an example that creates <code class="docutils literal notranslate"><span class="pre">is_popular</span></code> column at <code class="docutils literal notranslate"><span class="pre">initial</span></code>
stage. You can use <code class="docutils literal notranslate"><span class="pre">is_popular</span></code> in all parameters such as <code class="docutils literal notranslate"><span class="pre">filter</span></code>
and <code class="docutils literal notranslate"><span class="pre">output_columns</span></code>:</p>
<p>Execution example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">select</span> <span class="n">Entries</span> \
  <span class="o">--</span><span class="n">columns</span><span class="p">[</span><span class="n">is_popular</span><span class="p">]</span><span class="o">.</span><span class="n">stage</span> <span class="n">initial</span> \
  <span class="o">--</span><span class="n">columns</span><span class="p">[</span><span class="n">is_popular</span><span class="p">]</span><span class="o">.</span><span class="n">type</span> <span class="n">Bool</span> \
  <span class="o">--</span><span class="n">columns</span><span class="p">[</span><span class="n">is_popular</span><span class="p">]</span><span class="o">.</span><span class="n">value</span> <span class="s1">&#39;n_likes &gt;= 10&#39;</span> \
  <span class="o">--</span><span class="nb">filter</span> <span class="n">is_popular</span> \
  <span class="o">--</span><span class="n">output_columns</span> <span class="n">_id</span><span class="p">,</span><span class="n">is_popular</span><span class="p">,</span><span class="n">n_likes</span>
<span class="c1"># [</span>
<span class="c1">#   [</span>
<span class="c1">#     0,</span>
<span class="c1">#     1337566253.89858,</span>
<span class="c1">#     0.000355720520019531</span>
<span class="c1">#   ],</span>
<span class="c1">#   [</span>
<span class="c1">#     [</span>
<span class="c1">#       [</span>
<span class="c1">#         2</span>
<span class="c1">#       ],</span>
<span class="c1">#       [</span>
<span class="c1">#         [</span>
<span class="c1">#           &quot;_id&quot;,</span>
<span class="c1">#           &quot;UInt32&quot;</span>
<span class="c1">#         ],</span>
<span class="c1">#         [</span>
<span class="c1">#           &quot;is_popular&quot;,</span>
<span class="c1">#           &quot;Bool&quot;</span>
<span class="c1">#         ],</span>
<span class="c1">#         [</span>
<span class="c1">#           &quot;n_likes&quot;,</span>
<span class="c1">#           &quot;UInt32&quot;</span>
<span class="c1">#         ]</span>
<span class="c1">#       ],</span>
<span class="c1">#       [</span>
<span class="c1">#         2,</span>
<span class="c1">#         true,</span>
<span class="c1">#         10</span>
<span class="c1">#       ],</span>
<span class="c1">#       [</span>
<span class="c1">#         3,</span>
<span class="c1">#         true,</span>
<span class="c1">#         15</span>
<span class="c1">#       ]</span>
<span class="c1">#     ]</span>
<span class="c1">#   ]</span>
<span class="c1"># ]</span>
</pre></div>
</div>
</section>
<section id="columns-name-flags">
<span id="select-columns-name-flags"></span><h4><span class="section-number">7.3.57.4.6.2. </span><code class="docutils literal notranslate"><span class="pre">columns[${NAME}].flags</span></code><a class="headerlink" href="#columns-name-flags" title="Link to this heading">#</a></h4>
<div class="versionadded">
<p><span class="versionmodified added">New in version 6.0.6.</span></p>
</div>
<p>Specifies flags for the dynamic column. It’s the same as <code class="docutils literal notranslate"><span class="pre">flags</span></code>
parameter for <a class="reference internal" href="column_create.html"><span class="doc">column_create</span></a>. See <a class="reference internal" href="column_create.html#column-create-flags"><span class="std std-ref">flags</span></a> for
available flags.</p>
<p>The default value is <code class="docutils literal notranslate"><span class="pre">COLUMN_SCALAR</span></code>.</p>
<p>Here is a <code class="docutils literal notranslate"><span class="pre">columns[${NAME}].flags</span></code> example. It creates a vector
column by <code class="docutils literal notranslate"><span class="pre">COLUMN_VECTOR</span></code> flags. <code class="docutils literal notranslate"><span class="pre">plugin_register</span>
<span class="pre">functions/vector</span></code> is for using <a class="reference internal" href="../functions/vector_new.html"><span class="doc">vector_new</span></a>
function:</p>
<p>Execution example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">plugin_register</span> <span class="n">functions</span><span class="o">/</span><span class="n">vector</span>
<span class="c1"># [[0,1337566253.89858,0.000355720520019531],true]</span>
<span class="n">select</span> <span class="n">Entries</span> \
  <span class="o">--</span><span class="n">columns</span><span class="p">[</span><span class="n">vector</span><span class="p">]</span><span class="o">.</span><span class="n">stage</span> <span class="n">initial</span> \
  <span class="o">--</span><span class="n">columns</span><span class="p">[</span><span class="n">vector</span><span class="p">]</span><span class="o">.</span><span class="n">flags</span> <span class="n">COLUMN_VECTOR</span> \
  <span class="o">--</span><span class="n">columns</span><span class="p">[</span><span class="n">vector</span><span class="p">]</span><span class="o">.</span><span class="n">type</span> <span class="n">UInt32</span> \
  <span class="o">--</span><span class="n">columns</span><span class="p">[</span><span class="n">vector</span><span class="p">]</span><span class="o">.</span><span class="n">value</span> <span class="s1">&#39;vector_new(1, 2, 3)&#39;</span> \
  <span class="o">--</span><span class="n">output_columns</span> <span class="n">_id</span><span class="p">,</span><span class="n">vector</span>
<span class="c1"># [</span>
<span class="c1">#   [</span>
<span class="c1">#     0,</span>
<span class="c1">#     1337566253.89858,</span>
<span class="c1">#     0.000355720520019531</span>
<span class="c1">#   ],</span>
<span class="c1">#   [</span>
<span class="c1">#     [</span>
<span class="c1">#       [</span>
<span class="c1">#         5</span>
<span class="c1">#       ],</span>
<span class="c1">#       [</span>
<span class="c1">#         [</span>
<span class="c1">#           &quot;_id&quot;,</span>
<span class="c1">#           &quot;UInt32&quot;</span>
<span class="c1">#         ],</span>
<span class="c1">#         [</span>
<span class="c1">#           &quot;vector&quot;,</span>
<span class="c1">#           &quot;UInt32&quot;</span>
<span class="c1">#         ]</span>
<span class="c1">#       ],</span>
<span class="c1">#       [</span>
<span class="c1">#         1,</span>
<span class="c1">#         [</span>
<span class="c1">#           1,</span>
<span class="c1">#           2,</span>
<span class="c1">#           3</span>
<span class="c1">#         ]</span>
<span class="c1">#       ],</span>
<span class="c1">#       [</span>
<span class="c1">#         2,</span>
<span class="c1">#         [</span>
<span class="c1">#           1,</span>
<span class="c1">#           2,</span>
<span class="c1">#           3</span>
<span class="c1">#         ]</span>
<span class="c1">#       ],</span>
<span class="c1">#       [</span>
<span class="c1">#         3,</span>
<span class="c1">#         [</span>
<span class="c1">#           1,</span>
<span class="c1">#           2,</span>
<span class="c1">#           3</span>
<span class="c1">#         ]</span>
<span class="c1">#       ],</span>
<span class="c1">#       [</span>
<span class="c1">#         4,</span>
<span class="c1">#         [</span>
<span class="c1">#           1,</span>
<span class="c1">#           2,</span>
<span class="c1">#           3</span>
<span class="c1">#         ]</span>
<span class="c1">#       ],</span>
<span class="c1">#       [</span>
<span class="c1">#         5,</span>
<span class="c1">#         [</span>
<span class="c1">#           1,</span>
<span class="c1">#           2,</span>
<span class="c1">#           3</span>
<span class="c1">#         ]</span>
<span class="c1">#       ]</span>
<span class="c1">#     ]</span>
<span class="c1">#   ]</span>
<span class="c1"># ]</span>
</pre></div>
</div>
</section>
<section id="columns-name-type">
<span id="select-columns-name-type"></span><h4><span class="section-number">7.3.57.4.6.3. </span><code class="docutils literal notranslate"><span class="pre">columns[${NAME}].type</span></code><a class="headerlink" href="#columns-name-type" title="Link to this heading">#</a></h4>
<div class="versionadded">
<p><span class="versionmodified added">New in version 6.0.6.</span></p>
</div>
<p>Specifies value type for the dynamic column. It’s the same as <code class="docutils literal notranslate"><span class="pre">type</span></code>
parameter for <a class="reference internal" href="column_create.html"><span class="doc">column_create</span></a>. See <a class="reference internal" href="column_create.html#column-create-type"><span class="std std-ref">type</span></a> for
available types.</p>
<p>This is a required parameter.</p>
<p>Here is an example that creates a <code class="docutils literal notranslate"><span class="pre">ShortText</span></code> type column. Stored
value is casted to <code class="docutils literal notranslate"><span class="pre">ShortText</span></code> automatically. In this example,
number is casted to <code class="docutils literal notranslate"><span class="pre">ShortText</span></code>:</p>
<p>Execution example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">select</span> <span class="n">Entries</span> \
  <span class="o">--</span><span class="n">columns</span><span class="p">[</span><span class="n">n_likes_string</span><span class="p">]</span><span class="o">.</span><span class="n">stage</span> <span class="n">initial</span> \
  <span class="o">--</span><span class="n">columns</span><span class="p">[</span><span class="n">n_likes_string</span><span class="p">]</span><span class="o">.</span><span class="n">type</span> <span class="n">ShortText</span> \
  <span class="o">--</span><span class="n">columns</span><span class="p">[</span><span class="n">n_likes_string</span><span class="p">]</span><span class="o">.</span><span class="n">value</span> <span class="n">n_likes</span> \
  <span class="o">--</span><span class="n">output_columns</span> <span class="n">_id</span><span class="p">,</span><span class="n">n_likes</span><span class="p">,</span><span class="n">n_likes_string</span>
<span class="c1"># [</span>
<span class="c1">#   [</span>
<span class="c1">#     0,</span>
<span class="c1">#     1337566253.89858,</span>
<span class="c1">#     0.000355720520019531</span>
<span class="c1">#   ],</span>
<span class="c1">#   [</span>
<span class="c1">#     [</span>
<span class="c1">#       [</span>
<span class="c1">#         5</span>
<span class="c1">#       ],</span>
<span class="c1">#       [</span>
<span class="c1">#         [</span>
<span class="c1">#           &quot;_id&quot;,</span>
<span class="c1">#           &quot;UInt32&quot;</span>
<span class="c1">#         ],</span>
<span class="c1">#         [</span>
<span class="c1">#           &quot;n_likes&quot;,</span>
<span class="c1">#           &quot;UInt32&quot;</span>
<span class="c1">#         ],</span>
<span class="c1">#         [</span>
<span class="c1">#           &quot;n_likes_string&quot;,</span>
<span class="c1">#           &quot;ShortText&quot;</span>
<span class="c1">#         ]</span>
<span class="c1">#       ],</span>
<span class="c1">#       [</span>
<span class="c1">#         1,</span>
<span class="c1">#         5,</span>
<span class="c1">#         &quot;5&quot;</span>
<span class="c1">#       ],</span>
<span class="c1">#       [</span>
<span class="c1">#         2,</span>
<span class="c1">#         10,</span>
<span class="c1">#         &quot;10&quot;</span>
<span class="c1">#       ],</span>
<span class="c1">#       [</span>
<span class="c1">#         3,</span>
<span class="c1">#         15,</span>
<span class="c1">#         &quot;15&quot;</span>
<span class="c1">#       ],</span>
<span class="c1">#       [</span>
<span class="c1">#         4,</span>
<span class="c1">#         3,</span>
<span class="c1">#         &quot;3&quot;</span>
<span class="c1">#       ],</span>
<span class="c1">#       [</span>
<span class="c1">#         5,</span>
<span class="c1">#         3,</span>
<span class="c1">#         &quot;3&quot;</span>
<span class="c1">#       ]</span>
<span class="c1">#     ]</span>
<span class="c1">#   ]</span>
<span class="c1"># ]</span>
</pre></div>
</div>
</section>
<section id="columns-name-value">
<span id="select-columns-name-value"></span><h4><span class="section-number">7.3.57.4.6.4. </span><code class="docutils literal notranslate"><span class="pre">columns[${NAME}].value</span></code><a class="headerlink" href="#columns-name-value" title="Link to this heading">#</a></h4>
<div class="versionadded">
<p><span class="versionmodified added">New in version 6.0.6.</span></p>
</div>
<p>Specifies expression that generates values for the dynamic column. The
expression uses <a class="reference internal" href="../grn_expr/script_syntax.html"><span class="doc">Script syntax</span></a>. It’s the
same syntax in <a class="reference internal" href="#select-filter"><span class="std std-ref">filter</span></a>. For example, <code class="docutils literal notranslate"><span class="pre">1</span> <span class="pre">+</span> <span class="pre">1</span></code>,
<code class="docutils literal notranslate"><span class="pre">string_length(&quot;Hello&quot;)</span></code>, <code class="docutils literal notranslate"><span class="pre">column</span> <span class="pre">*</span> <span class="pre">1.08</span></code> and so on are valid
expressions.</p>
<p>You need to specify <a class="reference internal" href="../window_function.html"><span class="doc">Window function</span></a> as <code class="docutils literal notranslate"><span class="pre">value</span></code>
value and other window function related parameters when you use window
function. See <a class="reference internal" href="#select-window-function-related-parameters"><span class="std std-ref">Window function related parameters</span></a> for
details.</p>
<p>This is a required parameter.</p>
<p>Here is an example that creates a new dynamic column that stores the
number of characters of content. This example uses
<a class="reference internal" href="../functions/string_length.html"><span class="doc">string_length</span></a> function in
<code class="docutils literal notranslate"><span class="pre">functions/string</span></code> plugin to compute the number of characters in a
string. <a class="reference internal" href="plugin_register.html"><span class="doc">plugin_register</span></a> is used to register
<code class="docutils literal notranslate"><span class="pre">functions/string</span></code> plugin:</p>
<p>Execution example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">plugin_register</span> <span class="n">functions</span><span class="o">/</span><span class="n">string</span>
<span class="c1"># [[0,1337566253.89858,0.000355720520019531],true]</span>
<span class="n">select</span> <span class="n">Entries</span> \
  <span class="o">--</span><span class="n">columns</span><span class="p">[</span><span class="n">content_length</span><span class="p">]</span><span class="o">.</span><span class="n">stage</span> <span class="n">initial</span> \
  <span class="o">--</span><span class="n">columns</span><span class="p">[</span><span class="n">content_length</span><span class="p">]</span><span class="o">.</span><span class="n">type</span> <span class="n">UInt32</span> \
  <span class="o">--</span><span class="n">columns</span><span class="p">[</span><span class="n">content_length</span><span class="p">]</span><span class="o">.</span><span class="n">value</span> <span class="s1">&#39;string_length(content)&#39;</span> \
  <span class="o">--</span><span class="n">output_columns</span> <span class="n">_id</span><span class="p">,</span><span class="n">content</span><span class="p">,</span><span class="n">content_length</span>
<span class="c1"># [</span>
<span class="c1">#   [</span>
<span class="c1">#     0,</span>
<span class="c1">#     1337566253.89858,</span>
<span class="c1">#     0.000355720520019531</span>
<span class="c1">#   ],</span>
<span class="c1">#   [</span>
<span class="c1">#     [</span>
<span class="c1">#       [</span>
<span class="c1">#         5</span>
<span class="c1">#       ],</span>
<span class="c1">#       [</span>
<span class="c1">#         [</span>
<span class="c1">#           &quot;_id&quot;,</span>
<span class="c1">#           &quot;UInt32&quot;</span>
<span class="c1">#         ],</span>
<span class="c1">#         [</span>
<span class="c1">#           &quot;content&quot;,</span>
<span class="c1">#           &quot;Text&quot;</span>
<span class="c1">#         ],</span>
<span class="c1">#         [</span>
<span class="c1">#           &quot;content_length&quot;,</span>
<span class="c1">#           &quot;UInt32&quot;</span>
<span class="c1">#         ]</span>
<span class="c1">#       ],</span>
<span class="c1">#       [</span>
<span class="c1">#         1,</span>
<span class="c1">#         &quot;Welcome! This is my first post!&quot;,</span>
<span class="c1">#         31</span>
<span class="c1">#       ],</span>
<span class="c1">#       [</span>
<span class="c1">#         2,</span>
<span class="c1">#         &quot;I started to use Groonga. It&#39;s very fast!&quot;,</span>
<span class="c1">#         41</span>
<span class="c1">#       ],</span>
<span class="c1">#       [</span>
<span class="c1">#         3,</span>
<span class="c1">#         &quot;I also started to use Mroonga. It&#39;s also very fast! Really fast!&quot;,</span>
<span class="c1">#         64</span>
<span class="c1">#       ],</span>
<span class="c1">#       [</span>
<span class="c1">#         4,</span>
<span class="c1">#         &quot;I migrated all Senna system!&quot;,</span>
<span class="c1">#         28</span>
<span class="c1">#       ],</span>
<span class="c1">#       [</span>
<span class="c1">#         5,</span>
<span class="c1">#         &quot;I also migrated all Tritonn system!&quot;,</span>
<span class="c1">#         35</span>
<span class="c1">#       ]</span>
<span class="c1">#     ]</span>
<span class="c1">#   ]</span>
<span class="c1"># ]</span>
</pre></div>
</div>
</section>
</section>
<section id="window-function-related-parameters">
<span id="select-window-function-related-parameters"></span><h3><span class="section-number">7.3.57.4.7. </span>Window function related parameters<a class="headerlink" href="#window-function-related-parameters" title="Link to this heading">#</a></h3>
<div class="versionadded">
<p><span class="versionmodified added">New in version 6.0.6.</span></p>
</div>
<p>This section describes window function related parameters. You need to
use dynamic column for using window function. See
<a class="reference internal" href="#select-dynamic-column-related-parameters"><span class="std std-ref">Dynamic column related parameters</span></a> for dynamic column.</p>
<p>Window function in Groonga is similar to window function in
SQL. Normal function computes its result with only the current
record. On the other hand, window function computes its result with
multiple records. Window function is useful to data analysis because
it can process multiple records.</p>
<p>You can find supported window functions at
<a class="reference internal" href="../window_function.html"><span class="doc">Window function</span></a>. For example,
<a class="reference internal" href="../window_functions/window_sum.html"><span class="doc">window_sum</span></a> is a window function. It
sums numbers in the target records.</p>
<p>Window function processes records that are grouped by the specified
group keys. For example, window function processes three groups
(<code class="docutils literal notranslate"><span class="pre">Hello</span></code> group, <code class="docutils literal notranslate"><span class="pre">Groonga</span></code> group and <code class="docutils literal notranslate"><span class="pre">Senna</span></code> group) in the
following case. <a class="reference internal" href="../window_functions/window_sum.html"><span class="doc">window_sum</span></a> sums
<code class="docutils literal notranslate"><span class="pre">n_likes</span></code> values in each group:</p>
<div class="pst-scrollable-table-container"><table class="table">
<thead>
<tr class="row-odd"><th class="head"><p>Group No.</p></th>
<th class="head"><p>Group key value</p></th>
<th class="head"><p><code class="docutils literal notranslate"><span class="pre">n_likes</span></code> value</p></th>
<th class="head"><p><a class="reference internal" href="../window_functions/window_sum.html"><span class="doc">window_sum</span></a> result</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>1</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">Hello</span></code></p></td>
<td><p>5</p></td>
<td><p>5</p></td>
</tr>
<tr class="row-odd"><td><p>2</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">Groonga</span></code></p></td>
<td><p>10</p></td>
<td><p>25</p></td>
</tr>
<tr class="row-even"><td><p>2</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">Groonga</span></code></p></td>
<td><p>15</p></td>
<td><p>25</p></td>
</tr>
<tr class="row-odd"><td><p>3</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">Senna</span></code></p></td>
<td><p>3</p></td>
<td><p>6</p></td>
</tr>
<tr class="row-even"><td><p>3</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">Senna</span></code></p></td>
<td><p>3</p></td>
<td><p>6</p></td>
</tr>
</tbody>
</table>
</div>
<p>You can specify no group keys. In the case, window function processes
only one group that includes all
records. <a class="reference internal" href="../window_functions/window_sum.html"><span class="doc">window_sum</span></a> sums all
<code class="docutils literal notranslate"><span class="pre">n_likes</span></code> values in the following case:</p>
<div class="pst-scrollable-table-container"><table class="table">
<thead>
<tr class="row-odd"><th class="head"><p>Group No.</p></th>
<th class="head"><p><code class="docutils literal notranslate"><span class="pre">n_likes</span></code> value</p></th>
<th class="head"><p><a class="reference internal" href="../window_functions/window_sum.html"><span class="doc">window_sum</span></a> result</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>1</p></td>
<td><p>5</p></td>
<td><p>36</p></td>
</tr>
<tr class="row-odd"><td><p>1</p></td>
<td><p>10</p></td>
<td><p>36</p></td>
</tr>
<tr class="row-even"><td><p>1</p></td>
<td><p>15</p></td>
<td><p>36</p></td>
</tr>
<tr class="row-odd"><td><p>1</p></td>
<td><p>3</p></td>
<td><p>36</p></td>
</tr>
<tr class="row-even"><td><p>1</p></td>
<td><p>3</p></td>
<td><p>36</p></td>
</tr>
</tbody>
</table>
</div>
<p>Window function processes records in each group in the specified
order. You can specify no sort keys like the above group keys
example.</p>
<p>The behavior when you specify no sort keys depends on each window
function specification. For example,
<a class="reference internal" href="../window_functions/window_sum.html"><span class="doc">window_sum</span></a> uses different behavior
whether sort keys are specified or not. If you specify not sort keys,
<a class="reference internal" href="../window_functions/window_sum.html"><span class="doc">window_sum</span></a> sums values of all
records in the group and puts it to all target records like the above
group keys example. If you specify sort keys,
<a class="reference internal" href="../window_functions/window_sum.html"><span class="doc">window_sum</span></a> behaves as cumulative
sum. <a class="reference internal" href="../window_functions/window_sum.html"><span class="doc">window_sum</span></a> sums values of all
records in the group in sequence and puts the current sum to the
current record like the following:</p>
<div class="pst-scrollable-table-container"><table class="table">
<thead>
<tr class="row-odd"><th class="head"><p>Group No.</p></th>
<th class="head"><p>Group key value</p></th>
<th class="head"><p>Sort key value</p></th>
<th class="head"><p><code class="docutils literal notranslate"><span class="pre">n_likes</span></code> value</p></th>
<th class="head"><p><a class="reference internal" href="../window_functions/window_sum.html"><span class="doc">window_sum</span></a> result</p></th>
<th class="head"><p>Note</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>1</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">Hello</span></code></p></td>
<td><p>1</p></td>
<td><p>5</p></td>
<td><p>5</p></td>
<td><p>The first record in group No. 1. (<code class="docutils literal notranslate"><span class="pre">5</span> <span class="pre">=</span> <span class="pre">5</span></code>)</p></td>
</tr>
<tr class="row-odd"><td><p>2</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">Groonga</span></code></p></td>
<td><p>90</p></td>
<td><p>10</p></td>
<td><p>10</p></td>
<td><p>The first record in group No. 2. (<code class="docutils literal notranslate"><span class="pre">10</span> <span class="pre">=</span> <span class="pre">10</span></code>)</p></td>
</tr>
<tr class="row-even"><td><p>2</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">Groonga</span></code></p></td>
<td><p>91</p></td>
<td><p>15</p></td>
<td><p>25</p></td>
<td><p>The second record in group No. 2. (<code class="docutils literal notranslate"><span class="pre">10</span> <span class="pre">+</span> <span class="pre">15</span> <span class="pre">=</span> <span class="pre">25</span></code>)</p></td>
</tr>
<tr class="row-odd"><td><p>3</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">Senna</span></code></p></td>
<td><p>200</p></td>
<td><p>3</p></td>
<td><p>8</p></td>
<td><p>The second record in group No. 3. (<code class="docutils literal notranslate"><span class="pre">5</span> <span class="pre">+</span> <span class="pre">3</span> <span class="pre">=</span> <span class="pre">8</span></code>)</p></td>
</tr>
<tr class="row-even"><td><p>3</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">Senna</span></code></p></td>
<td><p>100</p></td>
<td><p>5</p></td>
<td><p>5</p></td>
<td><p>The first record in group No. 3. (<code class="docutils literal notranslate"><span class="pre">5</span> <span class="pre">=</span> <span class="pre">5</span></code>)</p></td>
</tr>
</tbody>
</table>
</div>
<p>Here are parameters for window function. You need to specify both
window function related parameters and required dynamic columns
parameters. Because window function is implemented based on dynamic
column. See <a class="reference internal" href="#select-dynamic-column-related-parameters"><span class="std std-ref">Dynamic column related parameters</span></a> for
dynamic column related parameters:</p>
<div class="pst-scrollable-table-container"><table class="table">
<thead>
<tr class="row-odd"><th class="head"><p>Name</p></th>
<th class="head"><p>Required or optional</p></th>
<th class="head"><p>Note</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">columns[${NAME}].value</span></code></p></td>
<td><p>Required</p></td>
<td><p>Use <a class="reference internal" href="../window_function.html"><span class="doc">Window function</span></a>.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">columns[${NAME}].window.sort_keys</span></code></p></td>
<td><p>Required if <code class="docutils literal notranslate"><span class="pre">columns[${NAME}].window.group_keys</span></code> isn’t specified.</p></td>
<td></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">columns[${NAME}].window.group_keys</span></code></p></td>
<td><p>Required if <code class="docutils literal notranslate"><span class="pre">columns[${NAME}].window.sort_keys</span></code> isn’t specified.</p></td>
<td></td>
</tr>
</tbody>
</table>
</div>
<section id="columns-name-window-sort-keys">
<span id="select-columns-name-window-sort-keys"></span><h4><span class="section-number">7.3.57.4.7.1. </span><code class="docutils literal notranslate"><span class="pre">columns[${NAME}].window.sort_keys</span></code><a class="headerlink" href="#columns-name-window-sort-keys" title="Link to this heading">#</a></h4>
<div class="versionadded">
<p><span class="versionmodified added">New in version 6.0.6.</span></p>
</div>
<p>Specifies sort keys in each group. Window function processes records
in each group in the specified order.</p>
<p>Sort keys are separated by <code class="docutils literal notranslate"><span class="pre">,</span></code>. Each sort key is column name. It’s
the same as <a class="reference internal" href="#select-sort-keys"><span class="std std-ref">sort_keys</span></a>.</p>
<p>You must specify <a class="reference internal" href="#select-columns-name-window-sort-keys"><span class="std std-ref">columns[${NAME}].window.sort_keys</span></a> or
<a class="reference internal" href="#select-columns-name-window-group-keys"><span class="std std-ref">columns[${NAME}].window.group_keys</span></a> to use window function.</p>
<p>Here is an example that computes cumulative sum per
<code class="docutils literal notranslate"><span class="pre">Entries.tag</span></code>. Each group is sorted by <code class="docutils literal notranslate"><span class="pre">Entries._key</span></code>:</p>
<p>Execution example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">select</span> \
  <span class="o">--</span><span class="n">table</span> <span class="n">Entries</span> \
  <span class="o">--</span><span class="n">columns</span><span class="p">[</span><span class="n">n_likes_cumulative_sum_per_tag</span><span class="p">]</span><span class="o">.</span><span class="n">stage</span> <span class="n">initial</span> \
  <span class="o">--</span><span class="n">columns</span><span class="p">[</span><span class="n">n_likes_cumulative_sum_per_tag</span><span class="p">]</span><span class="o">.</span><span class="n">type</span> <span class="n">UInt32</span> \
  <span class="o">--</span><span class="n">columns</span><span class="p">[</span><span class="n">n_likes_cumulative_sum_per_tag</span><span class="p">]</span><span class="o">.</span><span class="n">value</span> <span class="s1">&#39;window_sum(n_likes)&#39;</span> \
  <span class="o">--</span><span class="n">columns</span><span class="p">[</span><span class="n">n_likes_cumulative_sum_per_tag</span><span class="p">]</span><span class="o">.</span><span class="n">window</span><span class="o">.</span><span class="n">sort_keys</span> <span class="n">_key</span> \
  <span class="o">--</span><span class="n">columns</span><span class="p">[</span><span class="n">n_likes_cumulative_sum_per_tag</span><span class="p">]</span><span class="o">.</span><span class="n">window</span><span class="o">.</span><span class="n">group_keys</span> <span class="n">tag</span> \
  <span class="o">--</span><span class="n">sort_keys</span> <span class="n">_key</span> \
  <span class="o">--</span><span class="n">output_columns</span> <span class="n">tag</span><span class="p">,</span><span class="n">_key</span><span class="p">,</span><span class="n">n_likes</span><span class="p">,</span><span class="n">n_likes_cumulative_sum_per_tag</span>
<span class="c1"># [</span>
<span class="c1">#   [</span>
<span class="c1">#     0,</span>
<span class="c1">#     1337566253.89858,</span>
<span class="c1">#     0.000355720520019531</span>
<span class="c1">#   ],</span>
<span class="c1">#   [</span>
<span class="c1">#     [</span>
<span class="c1">#       [</span>
<span class="c1">#         5</span>
<span class="c1">#       ],</span>
<span class="c1">#       [</span>
<span class="c1">#         [</span>
<span class="c1">#           &quot;tag&quot;,</span>
<span class="c1">#           &quot;ShortText&quot;</span>
<span class="c1">#         ],</span>
<span class="c1">#         [</span>
<span class="c1">#           &quot;_key&quot;,</span>
<span class="c1">#           &quot;ShortText&quot;</span>
<span class="c1">#         ],</span>
<span class="c1">#         [</span>
<span class="c1">#           &quot;n_likes&quot;,</span>
<span class="c1">#           &quot;UInt32&quot;</span>
<span class="c1">#         ],</span>
<span class="c1">#         [</span>
<span class="c1">#           &quot;n_likes_cumulative_sum_per_tag&quot;,</span>
<span class="c1">#           &quot;UInt32&quot;</span>
<span class="c1">#         ]</span>
<span class="c1">#       ],</span>
<span class="c1">#       [</span>
<span class="c1">#         &quot;Senna&quot;,</span>
<span class="c1">#         &quot;Good-bye Senna&quot;,</span>
<span class="c1">#         3,</span>
<span class="c1">#         3</span>
<span class="c1">#       ],</span>
<span class="c1">#       [</span>
<span class="c1">#         &quot;Senna&quot;,</span>
<span class="c1">#         &quot;Good-bye Tritonn&quot;,</span>
<span class="c1">#         3,</span>
<span class="c1">#         6</span>
<span class="c1">#       ],</span>
<span class="c1">#       [</span>
<span class="c1">#         &quot;Groonga&quot;,</span>
<span class="c1">#         &quot;Groonga&quot;,</span>
<span class="c1">#         10,</span>
<span class="c1">#         10</span>
<span class="c1">#       ],</span>
<span class="c1">#       [</span>
<span class="c1">#         &quot;Groonga&quot;,</span>
<span class="c1">#         &quot;Mroonga&quot;,</span>
<span class="c1">#         15,</span>
<span class="c1">#         25</span>
<span class="c1">#       ],</span>
<span class="c1">#       [</span>
<span class="c1">#         &quot;Hello&quot;,</span>
<span class="c1">#         &quot;The first post!&quot;,</span>
<span class="c1">#         5,</span>
<span class="c1">#         5</span>
<span class="c1">#       ]</span>
<span class="c1">#     ]</span>
<span class="c1">#   ]</span>
<span class="c1"># ]</span>
</pre></div>
</div>
</section>
<section id="columns-name-window-group-keys">
<span id="select-columns-name-window-group-keys"></span><h4><span class="section-number">7.3.57.4.7.2. </span><code class="docutils literal notranslate"><span class="pre">columns[${NAME}].window.group_keys</span></code><a class="headerlink" href="#columns-name-window-group-keys" title="Link to this heading">#</a></h4>
<div class="versionadded">
<p><span class="versionmodified added">New in version 7.0.0.</span></p>
</div>
<p>Specifies group keys. Window function processes records in each
group. If you specify no group keys, window function processes one
group that includes all records.</p>
<p>Group keys are separated by <code class="docutils literal notranslate"><span class="pre">,</span></code>. Each group key is column name. It’s
the same as <a class="reference internal" href="#select-drilldown"><span class="std std-ref">drilldown</span></a>.</p>
<p>You must specify <a class="reference internal" href="#select-columns-name-window-sort-keys"><span class="std std-ref">columns[${NAME}].window.sort_keys</span></a> or
<a class="reference internal" href="#select-columns-name-window-group-keys"><span class="std std-ref">columns[${NAME}].window.group_keys</span></a> to use window function.</p>
<p>Here is an example that computes sum per <code class="docutils literal notranslate"><span class="pre">Entries.tag</span></code>:</p>
<p>Execution example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">select</span> \
  <span class="o">--</span><span class="n">table</span> <span class="n">Entries</span> \
  <span class="o">--</span><span class="n">columns</span><span class="p">[</span><span class="n">n_likes_sum_per_tag</span><span class="p">]</span><span class="o">.</span><span class="n">stage</span> <span class="n">initial</span> \
  <span class="o">--</span><span class="n">columns</span><span class="p">[</span><span class="n">n_likes_sum_per_tag</span><span class="p">]</span><span class="o">.</span><span class="n">type</span> <span class="n">UInt32</span> \
  <span class="o">--</span><span class="n">columns</span><span class="p">[</span><span class="n">n_likes_sum_per_tag</span><span class="p">]</span><span class="o">.</span><span class="n">value</span> <span class="s1">&#39;window_sum(n_likes)&#39;</span> \
  <span class="o">--</span><span class="n">columns</span><span class="p">[</span><span class="n">n_likes_sum_per_tag</span><span class="p">]</span><span class="o">.</span><span class="n">window</span><span class="o">.</span><span class="n">group_keys</span> <span class="n">tag</span> \
  <span class="o">--</span><span class="n">sort_keys</span> <span class="n">_key</span> \
  <span class="o">--</span><span class="n">output_columns</span> <span class="n">tag</span><span class="p">,</span><span class="n">_key</span><span class="p">,</span><span class="n">n_likes</span><span class="p">,</span><span class="n">n_likes_sum_per_tag</span>
<span class="c1"># [</span>
<span class="c1">#   [</span>
<span class="c1">#     0,</span>
<span class="c1">#     1337566253.89858,</span>
<span class="c1">#     0.000355720520019531</span>
<span class="c1">#   ],</span>
<span class="c1">#   [</span>
<span class="c1">#     [</span>
<span class="c1">#       [</span>
<span class="c1">#         5</span>
<span class="c1">#       ],</span>
<span class="c1">#       [</span>
<span class="c1">#         [</span>
<span class="c1">#           &quot;tag&quot;,</span>
<span class="c1">#           &quot;ShortText&quot;</span>
<span class="c1">#         ],</span>
<span class="c1">#         [</span>
<span class="c1">#           &quot;_key&quot;,</span>
<span class="c1">#           &quot;ShortText&quot;</span>
<span class="c1">#         ],</span>
<span class="c1">#         [</span>
<span class="c1">#           &quot;n_likes&quot;,</span>
<span class="c1">#           &quot;UInt32&quot;</span>
<span class="c1">#         ],</span>
<span class="c1">#         [</span>
<span class="c1">#           &quot;n_likes_sum_per_tag&quot;,</span>
<span class="c1">#           &quot;UInt32&quot;</span>
<span class="c1">#         ]</span>
<span class="c1">#       ],</span>
<span class="c1">#       [</span>
<span class="c1">#         &quot;Senna&quot;,</span>
<span class="c1">#         &quot;Good-bye Senna&quot;,</span>
<span class="c1">#         3,</span>
<span class="c1">#         6</span>
<span class="c1">#       ],</span>
<span class="c1">#       [</span>
<span class="c1">#         &quot;Senna&quot;,</span>
<span class="c1">#         &quot;Good-bye Tritonn&quot;,</span>
<span class="c1">#         3,</span>
<span class="c1">#         6</span>
<span class="c1">#       ],</span>
<span class="c1">#       [</span>
<span class="c1">#         &quot;Groonga&quot;,</span>
<span class="c1">#         &quot;Groonga&quot;,</span>
<span class="c1">#         10,</span>
<span class="c1">#         25</span>
<span class="c1">#       ],</span>
<span class="c1">#       [</span>
<span class="c1">#         &quot;Groonga&quot;,</span>
<span class="c1">#         &quot;Mroonga&quot;,</span>
<span class="c1">#         15,</span>
<span class="c1">#         25</span>
<span class="c1">#       ],</span>
<span class="c1">#       [</span>
<span class="c1">#         &quot;Hello&quot;,</span>
<span class="c1">#         &quot;The first post!&quot;,</span>
<span class="c1">#         5,</span>
<span class="c1">#         5</span>
<span class="c1">#       ]</span>
<span class="c1">#     ]</span>
<span class="c1">#   ]</span>
<span class="c1"># ]</span>
</pre></div>
</div>
</section>
</section>
<section id="drilldown-related-parameters">
<span id="select-drilldown-related-parameters"></span><h3><span class="section-number">7.3.57.4.8. </span>Drilldown related parameters<a class="headerlink" href="#drilldown-related-parameters" title="Link to this heading">#</a></h3>
<p>This section describes basic drilldown related parameters. Advanced
drilldown related parameters are described in another section.</p>
<section id="select-drilldown">
<span id="id2"></span><h4><span class="section-number">7.3.57.4.8.1. </span><code class="docutils literal notranslate"><span class="pre">drilldown</span></code><a class="headerlink" href="#select-drilldown" title="Link to this heading">#</a></h4>
<p>Specifies keys for grouping separated by <code class="docutils literal notranslate"><span class="pre">,</span></code>.</p>
<p>Matched records by specified search conditions are grouped by each
key. If you specify no search condition, all records are grouped by
each key.</p>
<p>Here is a simple <code class="docutils literal notranslate"><span class="pre">drilldown</span></code> example:</p>
<p>Execution example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">select</span> <span class="n">Entries</span> \
  <span class="o">--</span><span class="n">output_columns</span> <span class="n">_key</span><span class="p">,</span><span class="n">tag</span> \
  <span class="o">--</span><span class="n">drilldown</span> <span class="n">tag</span>
<span class="c1"># [</span>
<span class="c1">#   [</span>
<span class="c1">#     0,</span>
<span class="c1">#     1337566253.89858,</span>
<span class="c1">#     0.000355720520019531</span>
<span class="c1">#   ],</span>
<span class="c1">#   [</span>
<span class="c1">#     [</span>
<span class="c1">#       [</span>
<span class="c1">#         5</span>
<span class="c1">#       ],</span>
<span class="c1">#       [</span>
<span class="c1">#         [</span>
<span class="c1">#           &quot;_key&quot;,</span>
<span class="c1">#           &quot;ShortText&quot;</span>
<span class="c1">#         ],</span>
<span class="c1">#         [</span>
<span class="c1">#           &quot;tag&quot;,</span>
<span class="c1">#           &quot;ShortText&quot;</span>
<span class="c1">#         ]</span>
<span class="c1">#       ],</span>
<span class="c1">#       [</span>
<span class="c1">#         &quot;The first post!&quot;,</span>
<span class="c1">#         &quot;Hello&quot;</span>
<span class="c1">#       ],</span>
<span class="c1">#       [</span>
<span class="c1">#         &quot;Groonga&quot;,</span>
<span class="c1">#         &quot;Groonga&quot;</span>
<span class="c1">#       ],</span>
<span class="c1">#       [</span>
<span class="c1">#         &quot;Mroonga&quot;,</span>
<span class="c1">#         &quot;Groonga&quot;</span>
<span class="c1">#       ],</span>
<span class="c1">#       [</span>
<span class="c1">#         &quot;Good-bye Senna&quot;,</span>
<span class="c1">#         &quot;Senna&quot;</span>
<span class="c1">#       ],</span>
<span class="c1">#       [</span>
<span class="c1">#         &quot;Good-bye Tritonn&quot;,</span>
<span class="c1">#         &quot;Senna&quot;</span>
<span class="c1">#       ]</span>
<span class="c1">#     ],</span>
<span class="c1">#     [</span>
<span class="c1">#       [</span>
<span class="c1">#         3</span>
<span class="c1">#       ],</span>
<span class="c1">#       [</span>
<span class="c1">#         [</span>
<span class="c1">#           &quot;_key&quot;,</span>
<span class="c1">#           &quot;ShortText&quot;</span>
<span class="c1">#         ],</span>
<span class="c1">#         [</span>
<span class="c1">#           &quot;_nsubrecs&quot;,</span>
<span class="c1">#           &quot;Int32&quot;</span>
<span class="c1">#         ]</span>
<span class="c1">#       ],</span>
<span class="c1">#       [</span>
<span class="c1">#         &quot;Hello&quot;,</span>
<span class="c1">#         1</span>
<span class="c1">#       ],</span>
<span class="c1">#       [</span>
<span class="c1">#         &quot;Groonga&quot;,</span>
<span class="c1">#         2</span>
<span class="c1">#       ],</span>
<span class="c1">#       [</span>
<span class="c1">#         &quot;Senna&quot;,</span>
<span class="c1">#         2</span>
<span class="c1">#       ]</span>
<span class="c1">#     ]</span>
<span class="c1">#   ]</span>
<span class="c1"># ]</span>
</pre></div>
</div>
<p>The <code class="docutils literal notranslate"><span class="pre">select</span></code> command outputs the following information:</p>
<blockquote>
<div><ul class="simple">
<li><p>There is one record that has “Hello” tag.</p></li>
<li><p>There is two records that has “Groonga” tag.</p></li>
<li><p>There is two records that has “Senna” tag.</p></li>
</ul>
</div></blockquote>
<p>Here is a <code class="docutils literal notranslate"><span class="pre">drilldown</span></code> with search condition example:</p>
<p>Execution example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">select</span> <span class="n">Entries</span> \
  <span class="o">--</span><span class="n">output_columns</span> <span class="n">_key</span><span class="p">,</span><span class="n">tag</span> \
  <span class="o">--</span><span class="nb">filter</span> <span class="s1">&#39;n_likes &gt;= 5&#39;</span> \
  <span class="o">--</span><span class="n">drilldown</span> <span class="n">tag</span>
<span class="c1"># [</span>
<span class="c1">#   [</span>
<span class="c1">#     0,</span>
<span class="c1">#     1337566253.89858,</span>
<span class="c1">#     0.000355720520019531</span>
<span class="c1">#   ],</span>
<span class="c1">#   [</span>
<span class="c1">#     [</span>
<span class="c1">#       [</span>
<span class="c1">#         3</span>
<span class="c1">#       ],</span>
<span class="c1">#       [</span>
<span class="c1">#         [</span>
<span class="c1">#           &quot;_key&quot;,</span>
<span class="c1">#           &quot;ShortText&quot;</span>
<span class="c1">#         ],</span>
<span class="c1">#         [</span>
<span class="c1">#           &quot;tag&quot;,</span>
<span class="c1">#           &quot;ShortText&quot;</span>
<span class="c1">#         ]</span>
<span class="c1">#       ],</span>
<span class="c1">#       [</span>
<span class="c1">#         &quot;The first post!&quot;,</span>
<span class="c1">#         &quot;Hello&quot;</span>
<span class="c1">#       ],</span>
<span class="c1">#       [</span>
<span class="c1">#         &quot;Groonga&quot;,</span>
<span class="c1">#         &quot;Groonga&quot;</span>
<span class="c1">#       ],</span>
<span class="c1">#       [</span>
<span class="c1">#         &quot;Mroonga&quot;,</span>
<span class="c1">#         &quot;Groonga&quot;</span>
<span class="c1">#       ]</span>
<span class="c1">#     ],</span>
<span class="c1">#     [</span>
<span class="c1">#       [</span>
<span class="c1">#         2</span>
<span class="c1">#       ],</span>
<span class="c1">#       [</span>
<span class="c1">#         [</span>
<span class="c1">#           &quot;_key&quot;,</span>
<span class="c1">#           &quot;ShortText&quot;</span>
<span class="c1">#         ],</span>
<span class="c1">#         [</span>
<span class="c1">#           &quot;_nsubrecs&quot;,</span>
<span class="c1">#           &quot;Int32&quot;</span>
<span class="c1">#         ]</span>
<span class="c1">#       ],</span>
<span class="c1">#       [</span>
<span class="c1">#         &quot;Hello&quot;,</span>
<span class="c1">#         1</span>
<span class="c1">#       ],</span>
<span class="c1">#       [</span>
<span class="c1">#         &quot;Groonga&quot;,</span>
<span class="c1">#         2</span>
<span class="c1">#       ]</span>
<span class="c1">#     ]</span>
<span class="c1">#   ]</span>
<span class="c1"># ]</span>
</pre></div>
</div>
<p>The <code class="docutils literal notranslate"><span class="pre">select</span></code> command outputs the following information:</p>
<blockquote>
<div><ul class="simple">
<li><p>In records that have 5 or larger as <code class="docutils literal notranslate"><span class="pre">n_likes</span></code> value:</p>
<ul>
<li><p>There is one record that has “Hello” tag.</p></li>
<li><p>There is two records that has “Groonga” tag.</p></li>
</ul>
</li>
</ul>
</div></blockquote>
<p>Here is a <code class="docutils literal notranslate"><span class="pre">drilldown</span></code> with multiple group keys example:</p>
<p>Execution example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">select</span> <span class="n">Entries</span> \
  <span class="o">--</span><span class="n">limit</span> <span class="mi">0</span> \
  <span class="o">--</span><span class="n">output_columns</span> <span class="n">_id</span> \
  <span class="o">--</span><span class="n">drilldown</span> <span class="n">tag</span><span class="p">,</span><span class="n">n_likes</span>
<span class="c1"># [</span>
<span class="c1">#   [</span>
<span class="c1">#     0,</span>
<span class="c1">#     1337566253.89858,</span>
<span class="c1">#     0.000355720520019531</span>
<span class="c1">#   ],</span>
<span class="c1">#   [</span>
<span class="c1">#     [</span>
<span class="c1">#       [</span>
<span class="c1">#         5</span>
<span class="c1">#       ],</span>
<span class="c1">#       [</span>
<span class="c1">#         [</span>
<span class="c1">#           &quot;_id&quot;,</span>
<span class="c1">#           &quot;UInt32&quot;</span>
<span class="c1">#         ]</span>
<span class="c1">#       ]</span>
<span class="c1">#     ],</span>
<span class="c1">#     [</span>
<span class="c1">#       [</span>
<span class="c1">#         3</span>
<span class="c1">#       ],</span>
<span class="c1">#       [</span>
<span class="c1">#         [</span>
<span class="c1">#           &quot;_key&quot;,</span>
<span class="c1">#           &quot;ShortText&quot;</span>
<span class="c1">#         ],</span>
<span class="c1">#         [</span>
<span class="c1">#           &quot;_nsubrecs&quot;,</span>
<span class="c1">#           &quot;Int32&quot;</span>
<span class="c1">#         ]</span>
<span class="c1">#       ],</span>
<span class="c1">#       [</span>
<span class="c1">#         &quot;Hello&quot;,</span>
<span class="c1">#         1</span>
<span class="c1">#       ],</span>
<span class="c1">#       [</span>
<span class="c1">#         &quot;Groonga&quot;,</span>
<span class="c1">#         2</span>
<span class="c1">#       ],</span>
<span class="c1">#       [</span>
<span class="c1">#         &quot;Senna&quot;,</span>
<span class="c1">#         2</span>
<span class="c1">#       ]</span>
<span class="c1">#     ],</span>
<span class="c1">#     [</span>
<span class="c1">#       [</span>
<span class="c1">#         4</span>
<span class="c1">#       ],</span>
<span class="c1">#       [</span>
<span class="c1">#         [</span>
<span class="c1">#           &quot;_key&quot;,</span>
<span class="c1">#           &quot;UInt32&quot;</span>
<span class="c1">#         ],</span>
<span class="c1">#         [</span>
<span class="c1">#           &quot;_nsubrecs&quot;,</span>
<span class="c1">#           &quot;Int32&quot;</span>
<span class="c1">#         ]</span>
<span class="c1">#       ],</span>
<span class="c1">#       [</span>
<span class="c1">#         5,</span>
<span class="c1">#         1</span>
<span class="c1">#       ],</span>
<span class="c1">#       [</span>
<span class="c1">#         10,</span>
<span class="c1">#         1</span>
<span class="c1">#       ],</span>
<span class="c1">#       [</span>
<span class="c1">#         15,</span>
<span class="c1">#         1</span>
<span class="c1">#       ],</span>
<span class="c1">#       [</span>
<span class="c1">#         3,</span>
<span class="c1">#         2</span>
<span class="c1">#       ]</span>
<span class="c1">#     ]</span>
<span class="c1">#   ]</span>
<span class="c1"># ]</span>
</pre></div>
</div>
<p>The <code class="docutils literal notranslate"><span class="pre">select</span></code> command outputs the following information:</p>
<blockquote>
<div><ul class="simple">
<li><p>About <code class="docutils literal notranslate"><span class="pre">tag</span></code>:</p>
<ul>
<li><p>There is one record that has “Hello” tag.</p></li>
<li><p>There is two records that has “Groonga” tag.</p></li>
<li><p>There is two records that has “Senna” tag.</p></li>
</ul>
</li>
<li><p>About <code class="docutils literal notranslate"><span class="pre">n_likes</span></code>:</p>
<ul>
<li><p>There is one record that has “Hello” tag.</p></li>
<li><p>There is two records that has “Groonga” tag.</p></li>
<li><p>There is two records that has “Senna” tag.</p></li>
</ul>
</li>
</ul>
</div></blockquote>
</section>
<section id="drilldown-sortby">
<span id="select-drilldown-sortby"></span><h4><span class="section-number">7.3.57.4.8.2. </span><code class="docutils literal notranslate"><span class="pre">drilldown_sortby</span></code><a class="headerlink" href="#drilldown-sortby" title="Link to this heading">#</a></h4>
<div class="deprecated">
<p><span class="versionmodified deprecated">Deprecated since version 6.0.3: </span>Use <a class="reference internal" href="#select-drilldown-sort-keys"><span class="std std-ref">drilldown_sort_keys</span></a> instead.</p>
</div>
</section>
<section id="drilldown-sort-keys">
<span id="select-drilldown-sort-keys"></span><h4><span class="section-number">7.3.57.4.8.3. </span><code class="docutils literal notranslate"><span class="pre">drilldown_sort_keys</span></code><a class="headerlink" href="#drilldown-sort-keys" title="Link to this heading">#</a></h4>
<p>Specifies sort keys for drilldown outputs separated by <code class="docutils literal notranslate"><span class="pre">,</span></code>. Each
sort key is column name.</p>
<p>You can refer the number of grouped records by <code class="docutils literal notranslate"><span class="pre">_nsubrecs</span></code>
<a class="reference internal" href="../columns/pseudo.html"><span class="doc">Pseudo column</span></a>.</p>
<p>Here is a simple <code class="docutils literal notranslate"><span class="pre">drilldown_sort_keys</span></code> example:</p>
<p>Execution example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">select</span> <span class="n">Entries</span> \
  <span class="o">--</span><span class="n">limit</span> <span class="mi">0</span> \
  <span class="o">--</span><span class="n">output_columns</span> <span class="n">_id</span> \
  <span class="o">--</span><span class="n">drilldown</span> <span class="s1">&#39;tag, n_likes&#39;</span> \
  <span class="o">--</span><span class="n">drilldown_sort_keys</span> <span class="s1">&#39;-_nsubrecs, _key&#39;</span>
<span class="c1"># [</span>
<span class="c1">#   [</span>
<span class="c1">#     0,</span>
<span class="c1">#     1337566253.89858,</span>
<span class="c1">#     0.000355720520019531</span>
<span class="c1">#   ],</span>
<span class="c1">#   [</span>
<span class="c1">#     [</span>
<span class="c1">#       [</span>
<span class="c1">#         5</span>
<span class="c1">#       ],</span>
<span class="c1">#       [</span>
<span class="c1">#         [</span>
<span class="c1">#           &quot;_id&quot;,</span>
<span class="c1">#           &quot;UInt32&quot;</span>
<span class="c1">#         ]</span>
<span class="c1">#       ]</span>
<span class="c1">#     ],</span>
<span class="c1">#     [</span>
<span class="c1">#       [</span>
<span class="c1">#         3</span>
<span class="c1">#       ],</span>
<span class="c1">#       [</span>
<span class="c1">#         [</span>
<span class="c1">#           &quot;_key&quot;,</span>
<span class="c1">#           &quot;ShortText&quot;</span>
<span class="c1">#         ],</span>
<span class="c1">#         [</span>
<span class="c1">#           &quot;_nsubrecs&quot;,</span>
<span class="c1">#           &quot;Int32&quot;</span>
<span class="c1">#         ]</span>
<span class="c1">#       ],</span>
<span class="c1">#       [</span>
<span class="c1">#         &quot;Groonga&quot;,</span>
<span class="c1">#         2</span>
<span class="c1">#       ],</span>
<span class="c1">#       [</span>
<span class="c1">#         &quot;Senna&quot;,</span>
<span class="c1">#         2</span>
<span class="c1">#       ],</span>
<span class="c1">#       [</span>
<span class="c1">#         &quot;Hello&quot;,</span>
<span class="c1">#         1</span>
<span class="c1">#       ]</span>
<span class="c1">#     ],</span>
<span class="c1">#     [</span>
<span class="c1">#       [</span>
<span class="c1">#         4</span>
<span class="c1">#       ],</span>
<span class="c1">#       [</span>
<span class="c1">#         [</span>
<span class="c1">#           &quot;_key&quot;,</span>
<span class="c1">#           &quot;UInt32&quot;</span>
<span class="c1">#         ],</span>
<span class="c1">#         [</span>
<span class="c1">#           &quot;_nsubrecs&quot;,</span>
<span class="c1">#           &quot;Int32&quot;</span>
<span class="c1">#         ]</span>
<span class="c1">#       ],</span>
<span class="c1">#       [</span>
<span class="c1">#         3,</span>
<span class="c1">#         2</span>
<span class="c1">#       ],</span>
<span class="c1">#       [</span>
<span class="c1">#         5,</span>
<span class="c1">#         1</span>
<span class="c1">#       ],</span>
<span class="c1">#       [</span>
<span class="c1">#         10,</span>
<span class="c1">#         1</span>
<span class="c1">#       ],</span>
<span class="c1">#       [</span>
<span class="c1">#         15,</span>
<span class="c1">#         1</span>
<span class="c1">#       ]</span>
<span class="c1">#     ]</span>
<span class="c1">#   ]</span>
<span class="c1"># ]</span>
</pre></div>
</div>
<p>Drilldown result is sorted by the number of grouped records (=
<code class="docutils literal notranslate"><span class="pre">_nsubrecs</span></code> ) in descending order. If there are grouped results that
the number of records in the group are the same, these grouped results
are sorted by grouped key (= <code class="docutils literal notranslate"><span class="pre">_key</span></code> ) in ascending order.</p>
<p>The sort keys are used in all group keys specified in <code class="docutils literal notranslate"><span class="pre">drilldown</span></code>:</p>
<p>Execution example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">select</span> <span class="n">Entries</span> \
  <span class="o">--</span><span class="n">limit</span> <span class="mi">0</span> \
  <span class="o">--</span><span class="n">output_columns</span> <span class="n">_id</span> \
  <span class="o">--</span><span class="n">drilldown</span> <span class="s1">&#39;tag, n_likes&#39;</span> \
  <span class="o">--</span><span class="n">drilldown_sort_keys</span> <span class="s1">&#39;-_nsubrecs, _key&#39;</span>
<span class="c1"># [</span>
<span class="c1">#   [</span>
<span class="c1">#     0,</span>
<span class="c1">#     1337566253.89858,</span>
<span class="c1">#     0.000355720520019531</span>
<span class="c1">#   ],</span>
<span class="c1">#   [</span>
<span class="c1">#     [</span>
<span class="c1">#       [</span>
<span class="c1">#         5</span>
<span class="c1">#       ],</span>
<span class="c1">#       [</span>
<span class="c1">#         [</span>
<span class="c1">#           &quot;_id&quot;,</span>
<span class="c1">#           &quot;UInt32&quot;</span>
<span class="c1">#         ]</span>
<span class="c1">#       ]</span>
<span class="c1">#     ],</span>
<span class="c1">#     [</span>
<span class="c1">#       [</span>
<span class="c1">#         3</span>
<span class="c1">#       ],</span>
<span class="c1">#       [</span>
<span class="c1">#         [</span>
<span class="c1">#           &quot;_key&quot;,</span>
<span class="c1">#           &quot;ShortText&quot;</span>
<span class="c1">#         ],</span>
<span class="c1">#         [</span>
<span class="c1">#           &quot;_nsubrecs&quot;,</span>
<span class="c1">#           &quot;Int32&quot;</span>
<span class="c1">#         ]</span>
<span class="c1">#       ],</span>
<span class="c1">#       [</span>
<span class="c1">#         &quot;Groonga&quot;,</span>
<span class="c1">#         2</span>
<span class="c1">#       ],</span>
<span class="c1">#       [</span>
<span class="c1">#         &quot;Senna&quot;,</span>
<span class="c1">#         2</span>
<span class="c1">#       ],</span>
<span class="c1">#       [</span>
<span class="c1">#         &quot;Hello&quot;,</span>
<span class="c1">#         1</span>
<span class="c1">#       ]</span>
<span class="c1">#     ],</span>
<span class="c1">#     [</span>
<span class="c1">#       [</span>
<span class="c1">#         4</span>
<span class="c1">#       ],</span>
<span class="c1">#       [</span>
<span class="c1">#         [</span>
<span class="c1">#           &quot;_key&quot;,</span>
<span class="c1">#           &quot;UInt32&quot;</span>
<span class="c1">#         ],</span>
<span class="c1">#         [</span>
<span class="c1">#           &quot;_nsubrecs&quot;,</span>
<span class="c1">#           &quot;Int32&quot;</span>
<span class="c1">#         ]</span>
<span class="c1">#       ],</span>
<span class="c1">#       [</span>
<span class="c1">#         3,</span>
<span class="c1">#         2</span>
<span class="c1">#       ],</span>
<span class="c1">#       [</span>
<span class="c1">#         5,</span>
<span class="c1">#         1</span>
<span class="c1">#       ],</span>
<span class="c1">#       [</span>
<span class="c1">#         10,</span>
<span class="c1">#         1</span>
<span class="c1">#       ],</span>
<span class="c1">#       [</span>
<span class="c1">#         15,</span>
<span class="c1">#         1</span>
<span class="c1">#       ]</span>
<span class="c1">#     ]</span>
<span class="c1">#   ]</span>
<span class="c1"># ]</span>
</pre></div>
</div>
<p>The same sort keys are used in <code class="docutils literal notranslate"><span class="pre">tag</span></code> drilldown and <code class="docutils literal notranslate"><span class="pre">n_likes</span></code>
drilldown.</p>
<p>If you want to use different sort keys for each drilldown, use
<a class="reference internal" href="#select-advanced-drilldown-related-parameters"><span class="std std-ref">Advanced drilldown related parameters</span></a>.</p>
</section>
<section id="drilldown-output-columns">
<span id="select-drilldown-output-columns"></span><h4><span class="section-number">7.3.57.4.8.4. </span><code class="docutils literal notranslate"><span class="pre">drilldown_output_columns</span></code><a class="headerlink" href="#drilldown-output-columns" title="Link to this heading">#</a></h4>
<p>Specifies output columns for drilldown separated by <code class="docutils literal notranslate"><span class="pre">,</span></code>.</p>
<p>Here is a <code class="docutils literal notranslate"><span class="pre">drilldown_output_columns</span></code> example:</p>
<p>Execution example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">select</span> <span class="n">Entries</span> \
  <span class="o">--</span><span class="n">limit</span> <span class="mi">0</span> \
  <span class="o">--</span><span class="n">output_columns</span> <span class="n">_id</span> \
  <span class="o">--</span><span class="n">drilldown</span> <span class="n">tag</span> \
  <span class="o">--</span><span class="n">drilldown_output_columns</span> <span class="n">_key</span>
<span class="c1"># [</span>
<span class="c1">#   [</span>
<span class="c1">#     0,</span>
<span class="c1">#     1337566253.89858,</span>
<span class="c1">#     0.000355720520019531</span>
<span class="c1">#   ],</span>
<span class="c1">#   [</span>
<span class="c1">#     [</span>
<span class="c1">#       [</span>
<span class="c1">#         5</span>
<span class="c1">#       ],</span>
<span class="c1">#       [</span>
<span class="c1">#         [</span>
<span class="c1">#           &quot;_id&quot;,</span>
<span class="c1">#           &quot;UInt32&quot;</span>
<span class="c1">#         ]</span>
<span class="c1">#       ]</span>
<span class="c1">#     ],</span>
<span class="c1">#     [</span>
<span class="c1">#       [</span>
<span class="c1">#         3</span>
<span class="c1">#       ],</span>
<span class="c1">#       [</span>
<span class="c1">#         [</span>
<span class="c1">#           &quot;_key&quot;,</span>
<span class="c1">#           &quot;ShortText&quot;</span>
<span class="c1">#         ]</span>
<span class="c1">#       ],</span>
<span class="c1">#       [</span>
<span class="c1">#         &quot;Hello&quot;</span>
<span class="c1">#       ],</span>
<span class="c1">#       [</span>
<span class="c1">#         &quot;Groonga&quot;</span>
<span class="c1">#       ],</span>
<span class="c1">#       [</span>
<span class="c1">#         &quot;Senna&quot;</span>
<span class="c1">#       ]</span>
<span class="c1">#     ]</span>
<span class="c1">#   ]</span>
<span class="c1"># ]</span>
</pre></div>
</div>
<p>The <code class="docutils literal notranslate"><span class="pre">select</span></code> command just outputs grouped key.</p>
<p>If grouped key is a referenced type column (= column that its type is
a table), you can access column of the table referenced by the
referenced type column.</p>
<p>Here are a schema definition and sample data to show drilldown against
referenced type column:</p>
<p>Execution example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">table_create</span> <span class="n">Tags</span> <span class="n">TABLE_HASH_KEY</span> <span class="n">ShortText</span> <span class="o">--</span><span class="n">normalizer</span> <span class="n">NormalizerAuto</span>
<span class="c1"># [[0,1337566253.89858,0.000355720520019531],true]</span>
<span class="n">column_create</span> <span class="n">Tags</span> <span class="n">label</span> <span class="n">COLUMN_SCALAR</span> <span class="n">ShortText</span>
<span class="c1"># [[0,1337566253.89858,0.000355720520019531],true]</span>
<span class="n">column_create</span> <span class="n">Tags</span> <span class="n">priority</span> <span class="n">COLUMN_SCALAR</span> <span class="n">Int32</span>
<span class="c1"># [[0,1337566253.89858,0.000355720520019531],true]</span>
<span class="n">table_create</span> <span class="n">Items</span> <span class="n">TABLE_HASH_KEY</span> <span class="n">ShortText</span>
<span class="c1"># [[0,1337566253.89858,0.000355720520019531],true]</span>
<span class="n">column_create</span> <span class="n">Items</span> <span class="n">tag</span> <span class="n">COLUMN_SCALAR</span> <span class="n">Tags</span>
<span class="c1"># [[0,1337566253.89858,0.000355720520019531],true]</span>
<span class="n">load</span> <span class="o">--</span><span class="n">table</span> <span class="n">Tags</span>
<span class="p">[</span>
<span class="p">{</span><span class="s2">&quot;_key&quot;</span><span class="p">:</span> <span class="s2">&quot;groonga&quot;</span><span class="p">,</span> <span class="n">label</span><span class="p">:</span> <span class="s2">&quot;Groonga&quot;</span><span class="p">,</span> <span class="n">priority</span><span class="p">:</span> <span class="mi">10</span><span class="p">},</span>
<span class="p">{</span><span class="s2">&quot;_key&quot;</span><span class="p">:</span> <span class="s2">&quot;mroonga&quot;</span><span class="p">,</span> <span class="n">label</span><span class="p">:</span> <span class="s2">&quot;Mroonga&quot;</span><span class="p">,</span> <span class="n">priority</span><span class="p">:</span> <span class="mi">5</span><span class="p">}</span>
<span class="p">]</span>
<span class="c1"># [[0,1337566253.89858,0.000355720520019531],2]</span>
<span class="n">load</span> <span class="o">--</span><span class="n">table</span> <span class="n">Items</span>
<span class="p">[</span>
<span class="p">{</span><span class="s2">&quot;_key&quot;</span><span class="p">:</span> <span class="s2">&quot;A&quot;</span><span class="p">,</span> <span class="s2">&quot;tag&quot;</span><span class="p">:</span> <span class="s2">&quot;groonga&quot;</span><span class="p">},</span>
<span class="p">{</span><span class="s2">&quot;_key&quot;</span><span class="p">:</span> <span class="s2">&quot;B&quot;</span><span class="p">,</span> <span class="s2">&quot;tag&quot;</span><span class="p">:</span> <span class="s2">&quot;groonga&quot;</span><span class="p">},</span>
<span class="p">{</span><span class="s2">&quot;_key&quot;</span><span class="p">:</span> <span class="s2">&quot;C&quot;</span><span class="p">,</span> <span class="s2">&quot;tag&quot;</span><span class="p">:</span> <span class="s2">&quot;mroonga&quot;</span><span class="p">}</span>
<span class="p">]</span>
<span class="c1"># [[0,1337566253.89858,0.000355720520019531],3]</span>
</pre></div>
</div>
<p><code class="docutils literal notranslate"><span class="pre">Tags</span></code> table is a referenced table. <code class="docutils literal notranslate"><span class="pre">Items.tag</span></code> is a referenced
type column.</p>
<p>You can refer <code class="docutils literal notranslate"><span class="pre">Tags.label</span></code> by <code class="docutils literal notranslate"><span class="pre">label</span></code> in
<code class="docutils literal notranslate"><span class="pre">drilldown_output_columns</span></code>:</p>
<p>Execution example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">select</span> <span class="n">Items</span> \
  <span class="o">--</span><span class="n">limit</span> <span class="mi">0</span> \
  <span class="o">--</span><span class="n">output_columns</span> <span class="n">_id</span> \
  <span class="o">--</span><span class="n">drilldown</span> <span class="n">tag</span> \
  <span class="o">--</span><span class="n">drilldown_output_columns</span> <span class="s1">&#39;_key, label&#39;</span>
<span class="c1"># [</span>
<span class="c1">#   [</span>
<span class="c1">#     0,</span>
<span class="c1">#     1337566253.89858,</span>
<span class="c1">#     0.000355720520019531</span>
<span class="c1">#   ],</span>
<span class="c1">#   [</span>
<span class="c1">#     [</span>
<span class="c1">#       [</span>
<span class="c1">#         3</span>
<span class="c1">#       ],</span>
<span class="c1">#       [</span>
<span class="c1">#         [</span>
<span class="c1">#           &quot;_id&quot;,</span>
<span class="c1">#           &quot;UInt32&quot;</span>
<span class="c1">#         ]</span>
<span class="c1">#       ]</span>
<span class="c1">#     ],</span>
<span class="c1">#     [</span>
<span class="c1">#       [</span>
<span class="c1">#         2</span>
<span class="c1">#       ],</span>
<span class="c1">#       [</span>
<span class="c1">#         [</span>
<span class="c1">#           &quot;_key&quot;,</span>
<span class="c1">#           &quot;ShortText&quot;</span>
<span class="c1">#         ],</span>
<span class="c1">#         [</span>
<span class="c1">#           &quot;label&quot;,</span>
<span class="c1">#           &quot;ShortText&quot;</span>
<span class="c1">#         ]</span>
<span class="c1">#       ],</span>
<span class="c1">#       [</span>
<span class="c1">#         &quot;groonga&quot;,</span>
<span class="c1">#         &quot;Groonga&quot;</span>
<span class="c1">#       ],</span>
<span class="c1">#       [</span>
<span class="c1">#         &quot;mroonga&quot;,</span>
<span class="c1">#         &quot;Mroonga&quot;</span>
<span class="c1">#       ]</span>
<span class="c1">#     ]</span>
<span class="c1">#   ]</span>
<span class="c1"># ]</span>
</pre></div>
</div>
<p>You can use <code class="docutils literal notranslate"><span class="pre">*</span></code> to refer all columns in referenced table (= <code class="docutils literal notranslate"><span class="pre">Tags</span></code>):</p>
<p>Execution example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">select</span> <span class="n">Items</span> \
  <span class="o">--</span><span class="n">limit</span> <span class="mi">0</span> \
  <span class="o">--</span><span class="n">output_columns</span> <span class="n">_id</span> \
  <span class="o">--</span><span class="n">drilldown</span> <span class="n">tag</span> \
  <span class="o">--</span><span class="n">drilldown_output_columns</span> <span class="s1">&#39;_key, *&#39;</span>
<span class="c1"># [</span>
<span class="c1">#   [</span>
<span class="c1">#     0,</span>
<span class="c1">#     1337566253.89858,</span>
<span class="c1">#     0.000355720520019531</span>
<span class="c1">#   ],</span>
<span class="c1">#   [</span>
<span class="c1">#     [</span>
<span class="c1">#       [</span>
<span class="c1">#         3</span>
<span class="c1">#       ],</span>
<span class="c1">#       [</span>
<span class="c1">#         [</span>
<span class="c1">#           &quot;_id&quot;,</span>
<span class="c1">#           &quot;UInt32&quot;</span>
<span class="c1">#         ]</span>
<span class="c1">#       ]</span>
<span class="c1">#     ],</span>
<span class="c1">#     [</span>
<span class="c1">#       [</span>
<span class="c1">#         2</span>
<span class="c1">#       ],</span>
<span class="c1">#       [</span>
<span class="c1">#         [</span>
<span class="c1">#           &quot;_key&quot;,</span>
<span class="c1">#           &quot;ShortText&quot;</span>
<span class="c1">#         ],</span>
<span class="c1">#         [</span>
<span class="c1">#           &quot;label&quot;,</span>
<span class="c1">#           &quot;ShortText&quot;</span>
<span class="c1">#         ],</span>
<span class="c1">#         [</span>
<span class="c1">#           &quot;priority&quot;,</span>
<span class="c1">#           &quot;Int32&quot;</span>
<span class="c1">#         ]</span>
<span class="c1">#       ],</span>
<span class="c1">#       [</span>
<span class="c1">#         &quot;groonga&quot;,</span>
<span class="c1">#         &quot;Groonga&quot;,</span>
<span class="c1">#         10</span>
<span class="c1">#       ],</span>
<span class="c1">#       [</span>
<span class="c1">#         &quot;mroonga&quot;,</span>
<span class="c1">#         &quot;Mroonga&quot;,</span>
<span class="c1">#         5</span>
<span class="c1">#       ]</span>
<span class="c1">#     ]</span>
<span class="c1">#   ]</span>
<span class="c1"># ]</span>
</pre></div>
</div>
<p><code class="docutils literal notranslate"><span class="pre">*</span></code> is expanded to <code class="docutils literal notranslate"><span class="pre">label,</span> <span class="pre">priority</span></code>.</p>
<p>The default value of <code class="docutils literal notranslate"><span class="pre">drilldown_output_columns</span></code> is <code class="docutils literal notranslate"><span class="pre">_key,</span>
<span class="pre">_nsubrecs</span></code>. It means that grouped key and the number of records in
the group are output.</p>
<p>You can use more <a class="reference internal" href="../columns/pseudo.html"><span class="doc">Pseudo column</span></a> in
<code class="docutils literal notranslate"><span class="pre">drilldown_output_columns</span></code> such as <code class="docutils literal notranslate"><span class="pre">_max</span></code>, <code class="docutils literal notranslate"><span class="pre">_min</span></code>, <code class="docutils literal notranslate"><span class="pre">_sum</span></code> and
<code class="docutils literal notranslate"><span class="pre">_avg</span></code> when you use <a class="reference internal" href="#select-drilldown-calc-types"><span class="std std-ref">drilldown_calc_types</span></a>. See
<code class="docutils literal notranslate"><span class="pre">drilldown_calc_types</span></code> document for details.</p>
</section>
<section id="drilldown-offset">
<span id="select-drilldown-offset"></span><h4><span class="section-number">7.3.57.4.8.5. </span><code class="docutils literal notranslate"><span class="pre">drilldown_offset</span></code><a class="headerlink" href="#drilldown-offset" title="Link to this heading">#</a></h4>
<p>Specifies offset to determine range of drilldown output
records. Offset is zero-based. <code class="docutils literal notranslate"><span class="pre">--drilldown_offset</span> <span class="pre">1</span></code> means output
range is started from the 2nd record.</p>
<p>Here is a <code class="docutils literal notranslate"><span class="pre">drilldown_offset</span></code> example:</p>
<p>Execution example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">select</span> <span class="n">Entries</span> \
  <span class="o">--</span><span class="n">limit</span> <span class="mi">0</span> \
  <span class="o">--</span><span class="n">output_columns</span> <span class="n">_id</span> \
  <span class="o">--</span><span class="n">drilldown</span> <span class="n">tag</span> \
  <span class="o">--</span><span class="n">drilldown_sort_keys</span> <span class="n">_key</span> \
  <span class="o">--</span><span class="n">drilldown_offset</span> <span class="mi">1</span>
<span class="c1"># [</span>
<span class="c1">#   [</span>
<span class="c1">#     0,</span>
<span class="c1">#     1337566253.89858,</span>
<span class="c1">#     0.000355720520019531</span>
<span class="c1">#   ],</span>
<span class="c1">#   [</span>
<span class="c1">#     [</span>
<span class="c1">#       [</span>
<span class="c1">#         5</span>
<span class="c1">#       ],</span>
<span class="c1">#       [</span>
<span class="c1">#         [</span>
<span class="c1">#           &quot;_id&quot;,</span>
<span class="c1">#           &quot;UInt32&quot;</span>
<span class="c1">#         ]</span>
<span class="c1">#       ]</span>
<span class="c1">#     ],</span>
<span class="c1">#     [</span>
<span class="c1">#       [</span>
<span class="c1">#         3</span>
<span class="c1">#       ],</span>
<span class="c1">#       [</span>
<span class="c1">#         [</span>
<span class="c1">#           &quot;_key&quot;,</span>
<span class="c1">#           &quot;ShortText&quot;</span>
<span class="c1">#         ],</span>
<span class="c1">#         [</span>
<span class="c1">#           &quot;_nsubrecs&quot;,</span>
<span class="c1">#           &quot;Int32&quot;</span>
<span class="c1">#         ]</span>
<span class="c1">#       ],</span>
<span class="c1">#       [</span>
<span class="c1">#         &quot;Hello&quot;,</span>
<span class="c1">#         1</span>
<span class="c1">#       ],</span>
<span class="c1">#       [</span>
<span class="c1">#         &quot;Senna&quot;,</span>
<span class="c1">#         2</span>
<span class="c1">#       ]</span>
<span class="c1">#     ]</span>
<span class="c1">#   ]</span>
<span class="c1"># ]</span>
</pre></div>
</div>
<p>The <code class="docutils literal notranslate"><span class="pre">select</span></code> command outputs from the 2nd record.</p>
<p>You can specify negative value. It means that <code class="docutils literal notranslate"><span class="pre">the</span> <span class="pre">number</span> <span class="pre">of</span> <span class="pre">grouped</span>
<span class="pre">results</span> <span class="pre">+</span> <span class="pre">offset</span></code>. If you have 3 grouped results and specify
<code class="docutils literal notranslate"><span class="pre">--drilldown_offset</span> <span class="pre">-2</span></code>, you get grouped results from the 2st
(<code class="docutils literal notranslate"><span class="pre">3</span> <span class="pre">+</span> <span class="pre">-2</span> <span class="pre">=</span> <span class="pre">1</span></code>. <code class="docutils literal notranslate"><span class="pre">1</span></code> means 2nd. Remember that offset is zero-based.)
grouped result to the 3rd grouped result.</p>
<p>Execution example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">select</span> <span class="n">Entries</span> \
  <span class="o">--</span><span class="n">limit</span> <span class="mi">0</span> \
  <span class="o">--</span><span class="n">output_columns</span> <span class="n">_id</span> \
  <span class="o">--</span><span class="n">drilldown</span> <span class="n">tag</span> \
  <span class="o">--</span><span class="n">drilldown_sort_keys</span> <span class="n">_key</span> \
  <span class="o">--</span><span class="n">drilldown_offset</span> <span class="o">-</span><span class="mi">2</span>
<span class="c1"># [</span>
<span class="c1">#   [</span>
<span class="c1">#     0,</span>
<span class="c1">#     1337566253.89858,</span>
<span class="c1">#     0.000355720520019531</span>
<span class="c1">#   ],</span>
<span class="c1">#   [</span>
<span class="c1">#     [</span>
<span class="c1">#       [</span>
<span class="c1">#         5</span>
<span class="c1">#       ],</span>
<span class="c1">#       [</span>
<span class="c1">#         [</span>
<span class="c1">#           &quot;_id&quot;,</span>
<span class="c1">#           &quot;UInt32&quot;</span>
<span class="c1">#         ]</span>
<span class="c1">#       ]</span>
<span class="c1">#     ],</span>
<span class="c1">#     [</span>
<span class="c1">#       [</span>
<span class="c1">#         3</span>
<span class="c1">#       ],</span>
<span class="c1">#       [</span>
<span class="c1">#         [</span>
<span class="c1">#           &quot;_key&quot;,</span>
<span class="c1">#           &quot;ShortText&quot;</span>
<span class="c1">#         ],</span>
<span class="c1">#         [</span>
<span class="c1">#           &quot;_nsubrecs&quot;,</span>
<span class="c1">#           &quot;Int32&quot;</span>
<span class="c1">#         ]</span>
<span class="c1">#       ],</span>
<span class="c1">#       [</span>
<span class="c1">#         &quot;Hello&quot;,</span>
<span class="c1">#         1</span>
<span class="c1">#       ],</span>
<span class="c1">#       [</span>
<span class="c1">#         &quot;Senna&quot;,</span>
<span class="c1">#         2</span>
<span class="c1">#       ]</span>
<span class="c1">#     ]</span>
<span class="c1">#   ]</span>
<span class="c1"># ]</span>
</pre></div>
</div>
<p>The <code class="docutils literal notranslate"><span class="pre">select</span></code> command outputs from the 2nd grouped result because the
total number of grouped results is <code class="docutils literal notranslate"><span class="pre">3</span></code>.</p>
<p>The default value of <code class="docutils literal notranslate"><span class="pre">drilldown_offset</span></code> is <code class="docutils literal notranslate"><span class="pre">0</span></code>.</p>
</section>
<section id="drilldown-limit">
<span id="select-drilldown-limit"></span><h4><span class="section-number">7.3.57.4.8.6. </span><code class="docutils literal notranslate"><span class="pre">drilldown_limit</span></code><a class="headerlink" href="#drilldown-limit" title="Link to this heading">#</a></h4>
<p>Specifies the max number of groups in a drilldown. If the number of
groups is less than <code class="docutils literal notranslate"><span class="pre">drilldown_limit</span></code>, all groups are outputted.</p>
<p>Here is a <code class="docutils literal notranslate"><span class="pre">drilldown_limit</span></code> example:</p>
<p>Execution example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">select</span> <span class="n">Entries</span> \
  <span class="o">--</span><span class="n">limit</span> <span class="mi">0</span> \
  <span class="o">--</span><span class="n">output_columns</span> <span class="n">_id</span> \
  <span class="o">--</span><span class="n">drilldown</span> <span class="n">tag</span> \
  <span class="o">--</span><span class="n">drilldown_sort_keys</span> <span class="n">_key</span> \
  <span class="o">--</span><span class="n">drilldown_offset</span> <span class="mi">1</span> \
  <span class="o">--</span><span class="n">drilldown_limit</span> <span class="mi">2</span>
<span class="c1"># [</span>
<span class="c1">#   [</span>
<span class="c1">#     0,</span>
<span class="c1">#     1337566253.89858,</span>
<span class="c1">#     0.000355720520019531</span>
<span class="c1">#   ],</span>
<span class="c1">#   [</span>
<span class="c1">#     [</span>
<span class="c1">#       [</span>
<span class="c1">#         5</span>
<span class="c1">#       ],</span>
<span class="c1">#       [</span>
<span class="c1">#         [</span>
<span class="c1">#           &quot;_id&quot;,</span>
<span class="c1">#           &quot;UInt32&quot;</span>
<span class="c1">#         ]</span>
<span class="c1">#       ]</span>
<span class="c1">#     ],</span>
<span class="c1">#     [</span>
<span class="c1">#       [</span>
<span class="c1">#         3</span>
<span class="c1">#       ],</span>
<span class="c1">#       [</span>
<span class="c1">#         [</span>
<span class="c1">#           &quot;_key&quot;,</span>
<span class="c1">#           &quot;ShortText&quot;</span>
<span class="c1">#         ],</span>
<span class="c1">#         [</span>
<span class="c1">#           &quot;_nsubrecs&quot;,</span>
<span class="c1">#           &quot;Int32&quot;</span>
<span class="c1">#         ]</span>
<span class="c1">#       ],</span>
<span class="c1">#       [</span>
<span class="c1">#         &quot;Hello&quot;,</span>
<span class="c1">#         1</span>
<span class="c1">#       ],</span>
<span class="c1">#       [</span>
<span class="c1">#         &quot;Senna&quot;,</span>
<span class="c1">#         2</span>
<span class="c1">#       ]</span>
<span class="c1">#     ]</span>
<span class="c1">#   ]</span>
<span class="c1"># ]</span>
</pre></div>
</div>
<p>The <code class="docutils literal notranslate"><span class="pre">select</span></code> command outputs the 2rd and the 3rd groups.</p>
<p>You can specify negative value. It means that <code class="docutils literal notranslate"><span class="pre">the</span> <span class="pre">number</span> <span class="pre">of</span> <span class="pre">groups</span> <span class="pre">+</span>
<span class="pre">drilldown_limit</span> <span class="pre">+</span> <span class="pre">1</span></code>. For example, <code class="docutils literal notranslate"><span class="pre">--drilldown_limit</span> <span class="pre">-1</span></code> outputs
all groups. It’s very useful value to show all groups.</p>
<p>Here is a negative <code class="docutils literal notranslate"><span class="pre">drilldown_limit</span></code> value example.</p>
<p>Execution example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">select</span> <span class="n">Entries</span> \
  <span class="o">--</span><span class="n">limit</span> <span class="mi">0</span> \
  <span class="o">--</span><span class="n">output_columns</span> <span class="n">_id</span> \
  <span class="o">--</span><span class="n">drilldown</span> <span class="n">tag</span> \
  <span class="o">--</span><span class="n">drilldown_sort_keys</span> <span class="n">_key</span> \
  <span class="o">--</span><span class="n">drilldown_limit</span> <span class="o">-</span><span class="mi">1</span>
<span class="c1"># [</span>
<span class="c1">#   [</span>
<span class="c1">#     0,</span>
<span class="c1">#     1337566253.89858,</span>
<span class="c1">#     0.000355720520019531</span>
<span class="c1">#   ],</span>
<span class="c1">#   [</span>
<span class="c1">#     [</span>
<span class="c1">#       [</span>
<span class="c1">#         5</span>
<span class="c1">#       ],</span>
<span class="c1">#       [</span>
<span class="c1">#         [</span>
<span class="c1">#           &quot;_id&quot;,</span>
<span class="c1">#           &quot;UInt32&quot;</span>
<span class="c1">#         ]</span>
<span class="c1">#       ]</span>
<span class="c1">#     ],</span>
<span class="c1">#     [</span>
<span class="c1">#       [</span>
<span class="c1">#         3</span>
<span class="c1">#       ],</span>
<span class="c1">#       [</span>
<span class="c1">#         [</span>
<span class="c1">#           &quot;_key&quot;,</span>
<span class="c1">#           &quot;ShortText&quot;</span>
<span class="c1">#         ],</span>
<span class="c1">#         [</span>
<span class="c1">#           &quot;_nsubrecs&quot;,</span>
<span class="c1">#           &quot;Int32&quot;</span>
<span class="c1">#         ]</span>
<span class="c1">#       ],</span>
<span class="c1">#       [</span>
<span class="c1">#         &quot;Groonga&quot;,</span>
<span class="c1">#         2</span>
<span class="c1">#       ],</span>
<span class="c1">#       [</span>
<span class="c1">#         &quot;Hello&quot;,</span>
<span class="c1">#         1</span>
<span class="c1">#       ],</span>
<span class="c1">#       [</span>
<span class="c1">#         &quot;Senna&quot;,</span>
<span class="c1">#         2</span>
<span class="c1">#       ]</span>
<span class="c1">#     ]</span>
<span class="c1">#   ]</span>
<span class="c1"># ]</span>
</pre></div>
</div>
<p>The <code class="docutils literal notranslate"><span class="pre">select</span></code> command outputs all groups.</p>
<p>The default value of <code class="docutils literal notranslate"><span class="pre">drilldown_limit</span></code> is <code class="docutils literal notranslate"><span class="pre">10</span></code>.</p>
</section>
<section id="drilldown-calc-types">
<span id="select-drilldown-calc-types"></span><h4><span class="section-number">7.3.57.4.8.7. </span><code class="docutils literal notranslate"><span class="pre">drilldown_calc_types</span></code><a class="headerlink" href="#drilldown-calc-types" title="Link to this heading">#</a></h4>
<p>Specifies how to calculate (aggregate) values in grouped records by
a drilldown. You can specify multiple calculation types separated by
“<code class="docutils literal notranslate"><span class="pre">,</span></code>”. For example, <code class="docutils literal notranslate"><span class="pre">MAX,MIN</span></code>.</p>
<p>Calculation target values are read from a column of grouped
records. The column is specified by
<a class="reference internal" href="#select-drilldown-calc-target"><span class="std std-ref">drilldown_calc_target</span></a>.</p>
<p>You can read calculated value by <a class="reference internal" href="../columns/pseudo.html"><span class="doc">Pseudo column</span></a> such
as <code class="docutils literal notranslate"><span class="pre">_max</span></code> and <code class="docutils literal notranslate"><span class="pre">_min</span></code> in <a class="reference internal" href="#select-drilldown-output-columns"><span class="std std-ref">drilldown_output_columns</span></a>.</p>
<p>You can use the following calculation types:</p>
<div class="pst-scrollable-table-container"><table class="table">
<thead>
<tr class="row-odd"><th class="head"><p>Type name</p></th>
<th class="head"><p><a class="reference internal" href="../columns/pseudo.html"><span class="doc">Pseudo column</span></a> name</p></th>
<th class="head"><p>Need <a class="reference internal" href="#select-drilldown-calc-target"><span class="std std-ref">drilldown_calc_target</span></a></p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">NONE</span></code></p></td>
<td><p>Nothing.</p></td>
<td><p>Not needs.</p></td>
<td><p>Just ignored.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">COUNT</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">_nsubrecs</span></code></p></td>
<td><p>Not needs.</p></td>
<td><p>Counting grouped records. It’s always enabled. So you don’t
need to specify it.</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">MAX</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">_max</span></code></p></td>
<td><p>Needs.</p></td>
<td><p>Finding the maximum integer value from integer values in
grouped records.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">MIN</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">_min</span></code></p></td>
<td><p>Needs.</p></td>
<td><p>Finding the minimum integer value from integer values in
grouped records.</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">SUM</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">_sum</span></code></p></td>
<td><p>Needs.</p></td>
<td><p>Summing integer values in grouped records.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">AVG</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">_avg</span></code></p></td>
<td><p>Needs.</p></td>
<td><p>Averaging integer/float values in grouped records.</p></td>
</tr>
</tbody>
</table>
</div>
<p>Here is a <code class="docutils literal notranslate"><span class="pre">MAX</span></code> example:</p>
<p>Execution example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">select</span> <span class="n">Entries</span> \
  <span class="o">--</span><span class="n">limit</span> <span class="o">-</span><span class="mi">1</span> \
  <span class="o">--</span><span class="n">output_columns</span> <span class="n">_id</span><span class="p">,</span><span class="n">n_likes</span> \
  <span class="o">--</span><span class="n">drilldown</span> <span class="n">tag</span> \
  <span class="o">--</span><span class="n">drilldown_calc_types</span> <span class="n">MAX</span> \
  <span class="o">--</span><span class="n">drilldown_calc_target</span> <span class="n">n_likes</span> \
  <span class="o">--</span><span class="n">drilldown_output_columns</span> <span class="n">_key</span><span class="p">,</span><span class="n">_max</span>
<span class="c1"># [</span>
<span class="c1">#   [</span>
<span class="c1">#     0,</span>
<span class="c1">#     1337566253.89858,</span>
<span class="c1">#     0.000355720520019531</span>
<span class="c1">#   ],</span>
<span class="c1">#   [</span>
<span class="c1">#     [</span>
<span class="c1">#       [</span>
<span class="c1">#         5</span>
<span class="c1">#       ],</span>
<span class="c1">#       [</span>
<span class="c1">#         [</span>
<span class="c1">#           &quot;_id&quot;,</span>
<span class="c1">#           &quot;UInt32&quot;</span>
<span class="c1">#         ],</span>
<span class="c1">#         [</span>
<span class="c1">#           &quot;n_likes&quot;,</span>
<span class="c1">#           &quot;UInt32&quot;</span>
<span class="c1">#         ]</span>
<span class="c1">#       ],</span>
<span class="c1">#       [</span>
<span class="c1">#         1,</span>
<span class="c1">#         5</span>
<span class="c1">#       ],</span>
<span class="c1">#       [</span>
<span class="c1">#         2,</span>
<span class="c1">#         10</span>
<span class="c1">#       ],</span>
<span class="c1">#       [</span>
<span class="c1">#         3,</span>
<span class="c1">#         15</span>
<span class="c1">#       ],</span>
<span class="c1">#       [</span>
<span class="c1">#         4,</span>
<span class="c1">#         3</span>
<span class="c1">#       ],</span>
<span class="c1">#       [</span>
<span class="c1">#         5,</span>
<span class="c1">#         3</span>
<span class="c1">#       ]</span>
<span class="c1">#     ],</span>
<span class="c1">#     [</span>
<span class="c1">#       [</span>
<span class="c1">#         3</span>
<span class="c1">#       ],</span>
<span class="c1">#       [</span>
<span class="c1">#         [</span>
<span class="c1">#           &quot;_key&quot;,</span>
<span class="c1">#           &quot;ShortText&quot;</span>
<span class="c1">#         ],</span>
<span class="c1">#         [</span>
<span class="c1">#           &quot;_max&quot;,</span>
<span class="c1">#           &quot;Int64&quot;</span>
<span class="c1">#         ]</span>
<span class="c1">#       ],</span>
<span class="c1">#       [</span>
<span class="c1">#         &quot;Hello&quot;,</span>
<span class="c1">#         5</span>
<span class="c1">#       ],</span>
<span class="c1">#       [</span>
<span class="c1">#         &quot;Groonga&quot;,</span>
<span class="c1">#         15</span>
<span class="c1">#       ],</span>
<span class="c1">#       [</span>
<span class="c1">#         &quot;Senna&quot;,</span>
<span class="c1">#         3</span>
<span class="c1">#       ]</span>
<span class="c1">#     ]</span>
<span class="c1">#   ]</span>
<span class="c1"># ]</span>
</pre></div>
</div>
<p>The <code class="docutils literal notranslate"><span class="pre">select</span></code> command groups all records by <code class="docutils literal notranslate"><span class="pre">tag</span></code> column value,
finding the maximum <code class="docutils literal notranslate"><span class="pre">n_likes</span></code> column value for each group and
outputs pairs of grouped key and the maximum <code class="docutils literal notranslate"><span class="pre">n_likes</span></code> column value
for the group. It uses <code class="docutils literal notranslate"><span class="pre">_max</span></code> <a class="reference internal" href="../columns/pseudo.html"><span class="doc">Pseudo column</span></a> to
read the maximum <code class="docutils literal notranslate"><span class="pre">n_likes</span></code> column value.</p>
<p>Here is a <code class="docutils literal notranslate"><span class="pre">MIN</span></code> example:</p>
<p>Execution example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">select</span> <span class="n">Entries</span> \
  <span class="o">--</span><span class="n">limit</span> <span class="o">-</span><span class="mi">1</span> \
  <span class="o">--</span><span class="n">output_columns</span> <span class="n">_id</span><span class="p">,</span><span class="n">n_likes</span> \
  <span class="o">--</span><span class="n">drilldown</span> <span class="n">tag</span> \
  <span class="o">--</span><span class="n">drilldown_calc_types</span> <span class="n">MIN</span> \
  <span class="o">--</span><span class="n">drilldown_calc_target</span> <span class="n">n_likes</span> \
  <span class="o">--</span><span class="n">drilldown_output_columns</span> <span class="n">_key</span><span class="p">,</span><span class="n">_min</span>
<span class="c1"># [</span>
<span class="c1">#   [</span>
<span class="c1">#     0,</span>
<span class="c1">#     1337566253.89858,</span>
<span class="c1">#     0.000355720520019531</span>
<span class="c1">#   ],</span>
<span class="c1">#   [</span>
<span class="c1">#     [</span>
<span class="c1">#       [</span>
<span class="c1">#         5</span>
<span class="c1">#       ],</span>
<span class="c1">#       [</span>
<span class="c1">#         [</span>
<span class="c1">#           &quot;_id&quot;,</span>
<span class="c1">#           &quot;UInt32&quot;</span>
<span class="c1">#         ],</span>
<span class="c1">#         [</span>
<span class="c1">#           &quot;n_likes&quot;,</span>
<span class="c1">#           &quot;UInt32&quot;</span>
<span class="c1">#         ]</span>
<span class="c1">#       ],</span>
<span class="c1">#       [</span>
<span class="c1">#         1,</span>
<span class="c1">#         5</span>
<span class="c1">#       ],</span>
<span class="c1">#       [</span>
<span class="c1">#         2,</span>
<span class="c1">#         10</span>
<span class="c1">#       ],</span>
<span class="c1">#       [</span>
<span class="c1">#         3,</span>
<span class="c1">#         15</span>
<span class="c1">#       ],</span>
<span class="c1">#       [</span>
<span class="c1">#         4,</span>
<span class="c1">#         3</span>
<span class="c1">#       ],</span>
<span class="c1">#       [</span>
<span class="c1">#         5,</span>
<span class="c1">#         3</span>
<span class="c1">#       ]</span>
<span class="c1">#     ],</span>
<span class="c1">#     [</span>
<span class="c1">#       [</span>
<span class="c1">#         3</span>
<span class="c1">#       ],</span>
<span class="c1">#       [</span>
<span class="c1">#         [</span>
<span class="c1">#           &quot;_key&quot;,</span>
<span class="c1">#           &quot;ShortText&quot;</span>
<span class="c1">#         ],</span>
<span class="c1">#         [</span>
<span class="c1">#           &quot;_min&quot;,</span>
<span class="c1">#           &quot;Int64&quot;</span>
<span class="c1">#         ]</span>
<span class="c1">#       ],</span>
<span class="c1">#       [</span>
<span class="c1">#         &quot;Hello&quot;,</span>
<span class="c1">#         5</span>
<span class="c1">#       ],</span>
<span class="c1">#       [</span>
<span class="c1">#         &quot;Groonga&quot;,</span>
<span class="c1">#         10</span>
<span class="c1">#       ],</span>
<span class="c1">#       [</span>
<span class="c1">#         &quot;Senna&quot;,</span>
<span class="c1">#         3</span>
<span class="c1">#       ]</span>
<span class="c1">#     ]</span>
<span class="c1">#   ]</span>
<span class="c1"># ]</span>
</pre></div>
</div>
<p>The <code class="docutils literal notranslate"><span class="pre">select</span></code> command groups all records by <code class="docutils literal notranslate"><span class="pre">tag</span></code> column value,
finding the minimum <code class="docutils literal notranslate"><span class="pre">n_likes</span></code> column value for each group and
outputs pairs of grouped key and the minimum <code class="docutils literal notranslate"><span class="pre">n_likes</span></code> column value
for the group. It uses <code class="docutils literal notranslate"><span class="pre">_min</span></code> <a class="reference internal" href="../columns/pseudo.html"><span class="doc">Pseudo column</span></a> to
read the minimum <code class="docutils literal notranslate"><span class="pre">n_likes</span></code> column value.</p>
<p>Here is a <code class="docutils literal notranslate"><span class="pre">SUM</span></code> example:</p>
<p>Execution example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">select</span> <span class="n">Entries</span> \
  <span class="o">--</span><span class="n">limit</span> <span class="o">-</span><span class="mi">1</span> \
  <span class="o">--</span><span class="n">output_columns</span> <span class="n">_id</span><span class="p">,</span><span class="n">n_likes</span> \
  <span class="o">--</span><span class="n">drilldown</span> <span class="n">tag</span> \
  <span class="o">--</span><span class="n">drilldown_calc_types</span> <span class="n">SUM</span> \
  <span class="o">--</span><span class="n">drilldown_calc_target</span> <span class="n">n_likes</span> \
  <span class="o">--</span><span class="n">drilldown_output_columns</span> <span class="n">_key</span><span class="p">,</span><span class="n">_sum</span>
<span class="c1"># [</span>
<span class="c1">#   [</span>
<span class="c1">#     0,</span>
<span class="c1">#     1337566253.89858,</span>
<span class="c1">#     0.000355720520019531</span>
<span class="c1">#   ],</span>
<span class="c1">#   [</span>
<span class="c1">#     [</span>
<span class="c1">#       [</span>
<span class="c1">#         5</span>
<span class="c1">#       ],</span>
<span class="c1">#       [</span>
<span class="c1">#         [</span>
<span class="c1">#           &quot;_id&quot;,</span>
<span class="c1">#           &quot;UInt32&quot;</span>
<span class="c1">#         ],</span>
<span class="c1">#         [</span>
<span class="c1">#           &quot;n_likes&quot;,</span>
<span class="c1">#           &quot;UInt32&quot;</span>
<span class="c1">#         ]</span>
<span class="c1">#       ],</span>
<span class="c1">#       [</span>
<span class="c1">#         1,</span>
<span class="c1">#         5</span>
<span class="c1">#       ],</span>
<span class="c1">#       [</span>
<span class="c1">#         2,</span>
<span class="c1">#         10</span>
<span class="c1">#       ],</span>
<span class="c1">#       [</span>
<span class="c1">#         3,</span>
<span class="c1">#         15</span>
<span class="c1">#       ],</span>
<span class="c1">#       [</span>
<span class="c1">#         4,</span>
<span class="c1">#         3</span>
<span class="c1">#       ],</span>
<span class="c1">#       [</span>
<span class="c1">#         5,</span>
<span class="c1">#         3</span>
<span class="c1">#       ]</span>
<span class="c1">#     ],</span>
<span class="c1">#     [</span>
<span class="c1">#       [</span>
<span class="c1">#         3</span>
<span class="c1">#       ],</span>
<span class="c1">#       [</span>
<span class="c1">#         [</span>
<span class="c1">#           &quot;_key&quot;,</span>
<span class="c1">#           &quot;ShortText&quot;</span>
<span class="c1">#         ],</span>
<span class="c1">#         [</span>
<span class="c1">#           &quot;_sum&quot;,</span>
<span class="c1">#           &quot;Int64&quot;</span>
<span class="c1">#         ]</span>
<span class="c1">#       ],</span>
<span class="c1">#       [</span>
<span class="c1">#         &quot;Hello&quot;,</span>
<span class="c1">#         5</span>
<span class="c1">#       ],</span>
<span class="c1">#       [</span>
<span class="c1">#         &quot;Groonga&quot;,</span>
<span class="c1">#         25</span>
<span class="c1">#       ],</span>
<span class="c1">#       [</span>
<span class="c1">#         &quot;Senna&quot;,</span>
<span class="c1">#         6</span>
<span class="c1">#       ]</span>
<span class="c1">#     ]</span>
<span class="c1">#   ]</span>
<span class="c1"># ]</span>
</pre></div>
</div>
<p>The <code class="docutils literal notranslate"><span class="pre">select</span></code> command groups all records by <code class="docutils literal notranslate"><span class="pre">tag</span></code> column value,
sums all <code class="docutils literal notranslate"><span class="pre">n_likes</span></code> column values for each group and outputs pairs
of grouped key and the summed <code class="docutils literal notranslate"><span class="pre">n_likes</span></code> column values for the
group. It uses <code class="docutils literal notranslate"><span class="pre">_sum</span></code> <a class="reference internal" href="../columns/pseudo.html"><span class="doc">Pseudo column</span></a> to read the
summed <code class="docutils literal notranslate"><span class="pre">n_likes</span></code> column values.</p>
<p>Here is a <code class="docutils literal notranslate"><span class="pre">AVG</span></code> example:</p>
<p>Execution example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">select</span> <span class="n">Entries</span> \
  <span class="o">--</span><span class="n">limit</span> <span class="o">-</span><span class="mi">1</span> \
  <span class="o">--</span><span class="n">output_columns</span> <span class="n">_id</span><span class="p">,</span><span class="n">n_likes</span> \
  <span class="o">--</span><span class="n">drilldown</span> <span class="n">tag</span> \
  <span class="o">--</span><span class="n">drilldown_calc_types</span> <span class="n">AVG</span> \
  <span class="o">--</span><span class="n">drilldown_calc_target</span> <span class="n">n_likes</span> \
  <span class="o">--</span><span class="n">drilldown_output_columns</span> <span class="n">_key</span><span class="p">,</span><span class="n">_avg</span>
<span class="c1"># [</span>
<span class="c1">#   [</span>
<span class="c1">#     0,</span>
<span class="c1">#     1337566253.89858,</span>
<span class="c1">#     0.000355720520019531</span>
<span class="c1">#   ],</span>
<span class="c1">#   [</span>
<span class="c1">#     [</span>
<span class="c1">#       [</span>
<span class="c1">#         5</span>
<span class="c1">#       ],</span>
<span class="c1">#       [</span>
<span class="c1">#         [</span>
<span class="c1">#           &quot;_id&quot;,</span>
<span class="c1">#           &quot;UInt32&quot;</span>
<span class="c1">#         ],</span>
<span class="c1">#         [</span>
<span class="c1">#           &quot;n_likes&quot;,</span>
<span class="c1">#           &quot;UInt32&quot;</span>
<span class="c1">#         ]</span>
<span class="c1">#       ],</span>
<span class="c1">#       [</span>
<span class="c1">#         1,</span>
<span class="c1">#         5</span>
<span class="c1">#       ],</span>
<span class="c1">#       [</span>
<span class="c1">#         2,</span>
<span class="c1">#         10</span>
<span class="c1">#       ],</span>
<span class="c1">#       [</span>
<span class="c1">#         3,</span>
<span class="c1">#         15</span>
<span class="c1">#       ],</span>
<span class="c1">#       [</span>
<span class="c1">#         4,</span>
<span class="c1">#         3</span>
<span class="c1">#       ],</span>
<span class="c1">#       [</span>
<span class="c1">#         5,</span>
<span class="c1">#         3</span>
<span class="c1">#       ]</span>
<span class="c1">#     ],</span>
<span class="c1">#     [</span>
<span class="c1">#       [</span>
<span class="c1">#         3</span>
<span class="c1">#       ],</span>
<span class="c1">#       [</span>
<span class="c1">#         [</span>
<span class="c1">#           &quot;_key&quot;,</span>
<span class="c1">#           &quot;ShortText&quot;</span>
<span class="c1">#         ],</span>
<span class="c1">#         [</span>
<span class="c1">#           &quot;_avg&quot;,</span>
<span class="c1">#           &quot;Float&quot;</span>
<span class="c1">#         ]</span>
<span class="c1">#       ],</span>
<span class="c1">#       [</span>
<span class="c1">#         &quot;Hello&quot;,</span>
<span class="c1">#         5.0</span>
<span class="c1">#       ],</span>
<span class="c1">#       [</span>
<span class="c1">#         &quot;Groonga&quot;,</span>
<span class="c1">#         12.5</span>
<span class="c1">#       ],</span>
<span class="c1">#       [</span>
<span class="c1">#         &quot;Senna&quot;,</span>
<span class="c1">#         3.0</span>
<span class="c1">#       ]</span>
<span class="c1">#     ]</span>
<span class="c1">#   ]</span>
<span class="c1"># ]</span>
</pre></div>
</div>
<p>The <code class="docutils literal notranslate"><span class="pre">select</span></code> command groups all records by <code class="docutils literal notranslate"><span class="pre">tag</span></code> column value,
averages all <code class="docutils literal notranslate"><span class="pre">n_likes</span></code> column values for each group and outputs
pairs of grouped key and the averaged <code class="docutils literal notranslate"><span class="pre">n_likes</span></code> column values for
the group. It uses <code class="docutils literal notranslate"><span class="pre">_avg</span></code> <a class="reference internal" href="../columns/pseudo.html"><span class="doc">Pseudo column</span></a> to read
the averaged <code class="docutils literal notranslate"><span class="pre">n_likes</span></code> column values.</p>
<p>Here is an example that uses all calculation types:</p>
<p>Execution example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">select</span> <span class="n">Entries</span> \
  <span class="o">--</span><span class="n">limit</span> <span class="o">-</span><span class="mi">1</span> \
  <span class="o">--</span><span class="n">output_columns</span> <span class="n">_id</span><span class="p">,</span><span class="n">n_likes</span> \
  <span class="o">--</span><span class="n">drilldown</span> <span class="n">tag</span> \
  <span class="o">--</span><span class="n">drilldown_calc_types</span> <span class="n">MAX</span><span class="p">,</span><span class="n">MIN</span><span class="p">,</span><span class="n">SUM</span><span class="p">,</span><span class="n">AVG</span> \
  <span class="o">--</span><span class="n">drilldown_calc_target</span> <span class="n">n_likes</span> \
  <span class="o">--</span><span class="n">drilldown_output_columns</span> <span class="n">_key</span><span class="p">,</span><span class="n">_nsubrecs</span><span class="p">,</span><span class="n">_max</span><span class="p">,</span><span class="n">_min</span><span class="p">,</span><span class="n">_sum</span><span class="p">,</span><span class="n">_avg</span>
<span class="c1"># [</span>
<span class="c1">#   [</span>
<span class="c1">#     0,</span>
<span class="c1">#     1337566253.89858,</span>
<span class="c1">#     0.000355720520019531</span>
<span class="c1">#   ],</span>
<span class="c1">#   [</span>
<span class="c1">#     [</span>
<span class="c1">#       [</span>
<span class="c1">#         5</span>
<span class="c1">#       ],</span>
<span class="c1">#       [</span>
<span class="c1">#         [</span>
<span class="c1">#           &quot;_id&quot;,</span>
<span class="c1">#           &quot;UInt32&quot;</span>
<span class="c1">#         ],</span>
<span class="c1">#         [</span>
<span class="c1">#           &quot;n_likes&quot;,</span>
<span class="c1">#           &quot;UInt32&quot;</span>
<span class="c1">#         ]</span>
<span class="c1">#       ],</span>
<span class="c1">#       [</span>
<span class="c1">#         1,</span>
<span class="c1">#         5</span>
<span class="c1">#       ],</span>
<span class="c1">#       [</span>
<span class="c1">#         2,</span>
<span class="c1">#         10</span>
<span class="c1">#       ],</span>
<span class="c1">#       [</span>
<span class="c1">#         3,</span>
<span class="c1">#         15</span>
<span class="c1">#       ],</span>
<span class="c1">#       [</span>
<span class="c1">#         4,</span>
<span class="c1">#         3</span>
<span class="c1">#       ],</span>
<span class="c1">#       [</span>
<span class="c1">#         5,</span>
<span class="c1">#         3</span>
<span class="c1">#       ]</span>
<span class="c1">#     ],</span>
<span class="c1">#     [</span>
<span class="c1">#       [</span>
<span class="c1">#         3</span>
<span class="c1">#       ],</span>
<span class="c1">#       [</span>
<span class="c1">#         [</span>
<span class="c1">#           &quot;_key&quot;,</span>
<span class="c1">#           &quot;ShortText&quot;</span>
<span class="c1">#         ],</span>
<span class="c1">#         [</span>
<span class="c1">#           &quot;_nsubrecs&quot;,</span>
<span class="c1">#           &quot;Int32&quot;</span>
<span class="c1">#         ],</span>
<span class="c1">#         [</span>
<span class="c1">#           &quot;_max&quot;,</span>
<span class="c1">#           &quot;Int64&quot;</span>
<span class="c1">#         ],</span>
<span class="c1">#         [</span>
<span class="c1">#           &quot;_min&quot;,</span>
<span class="c1">#           &quot;Int64&quot;</span>
<span class="c1">#         ],</span>
<span class="c1">#         [</span>
<span class="c1">#           &quot;_sum&quot;,</span>
<span class="c1">#           &quot;Int64&quot;</span>
<span class="c1">#         ],</span>
<span class="c1">#         [</span>
<span class="c1">#           &quot;_avg&quot;,</span>
<span class="c1">#           &quot;Float&quot;</span>
<span class="c1">#         ]</span>
<span class="c1">#       ],</span>
<span class="c1">#       [</span>
<span class="c1">#         &quot;Hello&quot;,</span>
<span class="c1">#         1,</span>
<span class="c1">#         5,</span>
<span class="c1">#         5,</span>
<span class="c1">#         5,</span>
<span class="c1">#         5.0</span>
<span class="c1">#       ],</span>
<span class="c1">#       [</span>
<span class="c1">#         &quot;Groonga&quot;,</span>
<span class="c1">#         2,</span>
<span class="c1">#         15,</span>
<span class="c1">#         10,</span>
<span class="c1">#         25,</span>
<span class="c1">#         12.5</span>
<span class="c1">#       ],</span>
<span class="c1">#       [</span>
<span class="c1">#         &quot;Senna&quot;,</span>
<span class="c1">#         2,</span>
<span class="c1">#         3,</span>
<span class="c1">#         3,</span>
<span class="c1">#         6,</span>
<span class="c1">#         3.0</span>
<span class="c1">#       ]</span>
<span class="c1">#     ]</span>
<span class="c1">#   ]</span>
<span class="c1"># ]</span>
</pre></div>
</div>
<p>The <code class="docutils literal notranslate"><span class="pre">select</span></code> command specifies multiple calculation types separated
by “<code class="docutils literal notranslate"><span class="pre">,</span></code>” like <code class="docutils literal notranslate"><span class="pre">MAX,MIN,SUM,AVG</span></code>. You can use <code class="docutils literal notranslate"><span class="pre">_nsubrecs</span></code>
<a class="reference internal" href="../columns/pseudo.html"><span class="doc">Pseudo column</span></a> in
<a class="reference internal" href="#select-drilldown-output-columns"><span class="std std-ref">drilldown_output_columns</span></a> without specifying <code class="docutils literal notranslate"><span class="pre">COUNT</span></code> in
<code class="docutils literal notranslate"><span class="pre">drilldown_calc_types</span></code>. Because <code class="docutils literal notranslate"><span class="pre">COUNT</span></code> is always enabled.</p>
<p>The default value of <code class="docutils literal notranslate"><span class="pre">drilldown_calc_types</span></code> is <code class="docutils literal notranslate"><span class="pre">NONE</span></code>. It means
that only <code class="docutils literal notranslate"><span class="pre">COUNT</span></code> is enabled. Because <code class="docutils literal notranslate"><span class="pre">NONE</span></code> is just ignored and
<code class="docutils literal notranslate"><span class="pre">COUNT</span></code> is always enabled.</p>
</section>
<section id="drilldown-calc-target">
<span id="select-drilldown-calc-target"></span><h4><span class="section-number">7.3.57.4.8.8. </span><code class="docutils literal notranslate"><span class="pre">drilldown_calc_target</span></code><a class="headerlink" href="#drilldown-calc-target" title="Link to this heading">#</a></h4>
<div class="versionadded">
<p><span class="versionmodified added">New in version 6.0.3.</span></p>
</div>
<p>Specifies the target column for <a class="reference internal" href="#select-drilldown-calc-types"><span class="std std-ref">drilldown_calc_types</span></a>.</p>
<p>If you specify a calculation type that needs a target column such as
<code class="docutils literal notranslate"><span class="pre">MAX</span></code> in <a class="reference internal" href="#select-drilldown-calc-types"><span class="std std-ref">drilldown_calc_types</span></a> but you omit
<code class="docutils literal notranslate"><span class="pre">drilldown_calc_target</span></code>, the calculation result is always <code class="docutils literal notranslate"><span class="pre">0</span></code>.</p>
<p>You can specify only one column name like <code class="docutils literal notranslate"><span class="pre">--drilldown_calc_target</span>
<span class="pre">n_likes</span></code>. You can’t specify multiple column name like
<code class="docutils literal notranslate"><span class="pre">--drilldown_calc_target</span> <span class="pre">_key,n_likes</span></code>.</p>
<p>You can use referenced value from the target record by combining
“<code class="docutils literal notranslate"><span class="pre">.</span></code>” like <code class="docutils literal notranslate"><span class="pre">--drilldown_calc_target</span>
<span class="pre">reference_column.nested_reference_column.value</span></code>.</p>
<p>See <a class="reference internal" href="#select-drilldown-calc-types"><span class="std std-ref">drilldown_calc_types</span></a> to know how to use
<code class="docutils literal notranslate"><span class="pre">drilldown_calc_target</span></code>.</p>
<p>The default value of <code class="docutils literal notranslate"><span class="pre">drilldown_calc_target</span></code> is <code class="docutils literal notranslate"><span class="pre">null</span></code>. It means
that no calculation target column is specified.</p>
</section>
<section id="drilldown-filter">
<span id="select-drilldown-filter"></span><h4><span class="section-number">7.3.57.4.8.9. </span><code class="docutils literal notranslate"><span class="pre">drilldown_filter</span></code><a class="headerlink" href="#drilldown-filter" title="Link to this heading">#</a></h4>
<div class="versionadded">
<p><span class="versionmodified added">New in version 6.0.3.</span></p>
</div>
<p>Specifies the filter condition against the drilled down result.</p>
<p>The syntax is <a class="reference internal" href="../grn_expr/script_syntax.html"><span class="doc">Script syntax</span></a>. It’s the same
as <a class="reference internal" href="#select-filter"><span class="std std-ref">filter</span></a>.</p>
<p>Here is an example to suppress tags that are occurred only once:</p>
<p>Execution example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">select</span> <span class="n">Entries</span> \
  <span class="o">--</span><span class="n">limit</span> <span class="o">-</span><span class="mi">1</span> \
  <span class="o">--</span><span class="n">output_columns</span> <span class="n">_id</span><span class="p">,</span><span class="n">tag</span> \
  <span class="o">--</span><span class="n">drilldown</span> <span class="n">tag</span> \
  <span class="o">--</span><span class="n">drilldown_filter</span> <span class="s1">&#39;_nsubrecs &gt; 1&#39;</span> \
  <span class="o">--</span><span class="n">drilldown_output_columns</span> <span class="n">_key</span><span class="p">,</span><span class="n">_nsubrecs</span>
<span class="c1"># [</span>
<span class="c1">#   [</span>
<span class="c1">#     0,</span>
<span class="c1">#     1337566253.89858,</span>
<span class="c1">#     0.000355720520019531</span>
<span class="c1">#   ],</span>
<span class="c1">#   [</span>
<span class="c1">#     [</span>
<span class="c1">#       [</span>
<span class="c1">#         5</span>
<span class="c1">#       ],</span>
<span class="c1">#       [</span>
<span class="c1">#         [</span>
<span class="c1">#           &quot;_id&quot;,</span>
<span class="c1">#           &quot;UInt32&quot;</span>
<span class="c1">#         ],</span>
<span class="c1">#         [</span>
<span class="c1">#           &quot;tag&quot;,</span>
<span class="c1">#           &quot;ShortText&quot;</span>
<span class="c1">#         ]</span>
<span class="c1">#       ],</span>
<span class="c1">#       [</span>
<span class="c1">#         1,</span>
<span class="c1">#         &quot;Hello&quot;</span>
<span class="c1">#       ],</span>
<span class="c1">#       [</span>
<span class="c1">#         2,</span>
<span class="c1">#         &quot;Groonga&quot;</span>
<span class="c1">#       ],</span>
<span class="c1">#       [</span>
<span class="c1">#         3,</span>
<span class="c1">#         &quot;Groonga&quot;</span>
<span class="c1">#       ],</span>
<span class="c1">#       [</span>
<span class="c1">#         4,</span>
<span class="c1">#         &quot;Senna&quot;</span>
<span class="c1">#       ],</span>
<span class="c1">#       [</span>
<span class="c1">#         5,</span>
<span class="c1">#         &quot;Senna&quot;</span>
<span class="c1">#       ]</span>
<span class="c1">#     ],</span>
<span class="c1">#     [</span>
<span class="c1">#       [</span>
<span class="c1">#         2</span>
<span class="c1">#       ],</span>
<span class="c1">#       [</span>
<span class="c1">#         [</span>
<span class="c1">#           &quot;_key&quot;,</span>
<span class="c1">#           &quot;ShortText&quot;</span>
<span class="c1">#         ],</span>
<span class="c1">#         [</span>
<span class="c1">#           &quot;_nsubrecs&quot;,</span>
<span class="c1">#           &quot;Int32&quot;</span>
<span class="c1">#         ]</span>
<span class="c1">#       ],</span>
<span class="c1">#       [</span>
<span class="c1">#         &quot;Groonga&quot;,</span>
<span class="c1">#         2</span>
<span class="c1">#       ],</span>
<span class="c1">#       [</span>
<span class="c1">#         &quot;Senna&quot;,</span>
<span class="c1">#         2</span>
<span class="c1">#       ]</span>
<span class="c1">#     ]</span>
<span class="c1">#   ]</span>
<span class="c1"># ]</span>
</pre></div>
</div>
</section>
<section id="drilldown-max-n-target-records">
<span id="select-drilldown-max-n-target-records"></span><h4><span class="section-number">7.3.57.4.8.10. </span><code class="docutils literal notranslate"><span class="pre">drilldown_max_n_target_records</span></code><a class="headerlink" href="#drilldown-max-n-target-records" title="Link to this heading">#</a></h4>
<div class="versionadded">
<p><span class="versionmodified added">New in version 12.0.0.</span></p>
</div>
<p>Specifies the max number of records of the drilldown target table
(filtered result) to use drilldown. If the number of filtered result
is larger than the specified value, some records in filtered result
aren’t used for drilldown.</p>
<p>If the specified value is negative, it’s processed same as
<a class="reference internal" href="#select-limit"><span class="std std-ref">limit</span></a>. For example, <code class="docutils literal notranslate"><span class="pre">-1</span></code> uses all records. The default
value is <code class="docutils literal notranslate"><span class="pre">-1</span></code>. It means that all filtered records are used by
default.</p>
<p>This feature is useful when filtered result may be very large. A
drilldown against large filtered result may be slow. You can limit the
max number of records to be used for drilldown by this feature.</p>
<p>Here is an example to limit the max number of records to be used for
drilldown. The last 2 records, <code class="docutils literal notranslate"><span class="pre">{&quot;_id&quot;:</span> <span class="pre">4,</span> <span class="pre">&quot;tag&quot;:</span> <span class="pre">&quot;Senna&quot;}</span></code> and
<code class="docutils literal notranslate"><span class="pre">{&quot;_id&quot;:</span> <span class="pre">5,</span> <span class="pre">&quot;tag&quot;:</span> <span class="pre">&quot;Senna&quot;}</span></code>, aren’t used:</p>
<p>Execution example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">select</span> <span class="n">Entries</span> \
  <span class="o">--</span><span class="n">limit</span> <span class="o">-</span><span class="mi">1</span> \
  <span class="o">--</span><span class="n">output_columns</span> <span class="n">_id</span><span class="p">,</span><span class="n">tag</span> \
  <span class="o">--</span><span class="n">drilldown</span> <span class="n">tag</span> \
  <span class="o">--</span><span class="n">drilldown_max_n_target_records</span> <span class="mi">3</span>
<span class="c1"># [</span>
<span class="c1">#   [</span>
<span class="c1">#     0,</span>
<span class="c1">#     1337566253.89858,</span>
<span class="c1">#     0.000355720520019531</span>
<span class="c1">#   ],</span>
<span class="c1">#   [</span>
<span class="c1">#     [</span>
<span class="c1">#       [</span>
<span class="c1">#         5</span>
<span class="c1">#       ],</span>
<span class="c1">#       [</span>
<span class="c1">#         [</span>
<span class="c1">#           &quot;_id&quot;,</span>
<span class="c1">#           &quot;UInt32&quot;</span>
<span class="c1">#         ],</span>
<span class="c1">#         [</span>
<span class="c1">#           &quot;tag&quot;,</span>
<span class="c1">#           &quot;ShortText&quot;</span>
<span class="c1">#         ]</span>
<span class="c1">#       ],</span>
<span class="c1">#       [</span>
<span class="c1">#         1,</span>
<span class="c1">#         &quot;Hello&quot;</span>
<span class="c1">#       ],</span>
<span class="c1">#       [</span>
<span class="c1">#         2,</span>
<span class="c1">#         &quot;Groonga&quot;</span>
<span class="c1">#       ],</span>
<span class="c1">#       [</span>
<span class="c1">#         3,</span>
<span class="c1">#         &quot;Groonga&quot;</span>
<span class="c1">#       ],</span>
<span class="c1">#       [</span>
<span class="c1">#         4,</span>
<span class="c1">#         &quot;Senna&quot;</span>
<span class="c1">#       ],</span>
<span class="c1">#       [</span>
<span class="c1">#         5,</span>
<span class="c1">#         &quot;Senna&quot;</span>
<span class="c1">#       ]</span>
<span class="c1">#     ],</span>
<span class="c1">#     [</span>
<span class="c1">#       [</span>
<span class="c1">#         2</span>
<span class="c1">#       ],</span>
<span class="c1">#       [</span>
<span class="c1">#         [</span>
<span class="c1">#           &quot;_key&quot;,</span>
<span class="c1">#           &quot;ShortText&quot;</span>
<span class="c1">#         ],</span>
<span class="c1">#         [</span>
<span class="c1">#           &quot;_nsubrecs&quot;,</span>
<span class="c1">#           &quot;Int32&quot;</span>
<span class="c1">#         ]</span>
<span class="c1">#       ],</span>
<span class="c1">#       [</span>
<span class="c1">#         &quot;Hello&quot;,</span>
<span class="c1">#         1</span>
<span class="c1">#       ],</span>
<span class="c1">#       [</span>
<span class="c1">#         &quot;Groonga&quot;,</span>
<span class="c1">#         2</span>
<span class="c1">#       ]</span>
<span class="c1">#     ]</span>
<span class="c1">#   ]</span>
<span class="c1"># ]</span>
</pre></div>
</div>
</section>
</section>
<section id="advanced-drilldown-related-parameters">
<span id="select-advanced-drilldown-related-parameters"></span><h3><span class="section-number">7.3.57.4.9. </span>Advanced drilldown related parameters<a class="headerlink" href="#advanced-drilldown-related-parameters" title="Link to this heading">#</a></h3>
<div class="versionadded">
<p><span class="versionmodified added">New in version 4.0.8.</span></p>
</div>
<p>You can get multiple drilldown results by specifying multiple group
keys by <a class="reference internal" href="#select-drilldown"><span class="std std-ref">drilldown</span></a>. But you need to use the same
configuration for all drilldowns. For example,
<a class="reference internal" href="#select-drilldown-output-columns"><span class="std std-ref">drilldown_output_columns</span></a> is used by all drilldowns.</p>
<p>You can use a configuration for each drilldown by the following
parameters:</p>
<blockquote>
<div><ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">drilldowns[${LABEL}].keys</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">drilldowns[${LABEL}].table</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">drilldowns[${LABEL}].sort_keys</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">drilldowns[${LABEL}].output_columns</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">drilldowns[${LABEL}].offset</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">drilldowns[${LABEL}].limit</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">drilldowns[${LABEL}].calc_types</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">drilldowns[${LABEL}].calc_target</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">drilldowns[${LABEL}].filter</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">drilldowns[${LABEL}].max_n_target_records</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">drilldowns[${LABEL}].key_vector_expansion</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">drilldowns[${LABEL}].columns[${NAME}].stage=null</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">drilldowns[${LABEL}].columns[${NAME}].flags=COLUMN_SCALAR</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">drilldowns[${LABEL}].columns[${NAME}].type=null</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">drilldowns[${LABEL}].columns[${NAME}].value=null</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">drilldowns[${LABEL}].columns[${NAME}].window.sort_keys=null</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">drilldowns[${LABEL}].columns[${NAME}].window.group_keys=null</span></code></p></li>
</ul>
</div></blockquote>
<p><code class="docutils literal notranslate"><span class="pre">${LABEL}</span></code> is a variable. You can use the following characters for
<code class="docutils literal notranslate"><span class="pre">${LABEL}</span></code>:</p>
<blockquote>
<div><ul class="simple">
<li><p>Alphabets</p></li>
<li><p>Digits</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">.</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">_</span></code></p></li>
</ul>
</div></blockquote>
<p><code class="docutils literal notranslate"><span class="pre">${NAME}</span></code> is a variable. You can use the following characters for
<code class="docutils literal notranslate"><span class="pre">${NAME}</span></code>:</p>
<blockquote>
<div><ul class="simple">
<li><p>Alphabets</p></li>
<li><p>Digits</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">_</span></code></p></li>
</ul>
</div></blockquote>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>You can use more characters but it’s better that you use only these
characters.</p>
</div>
<p>Parameters that has the same <code class="docutils literal notranslate"><span class="pre">${LABEL}</span></code> value are grouped. Grouped
parameters are used for one drilldown.</p>
<p>For example, there are 2 groups for the following parameters:</p>
<blockquote>
<div><ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">--drilldowns[label1].keys</span> <span class="pre">_key</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">--drilldowns[label1].output_columns</span> <span class="pre">_nsubrecs</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">--drilldowns[label2].keys</span> <span class="pre">tag</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">--drilldowns[label2].output_columns</span> <span class="pre">_key,_nsubrecs</span></code></p></li>
</ul>
</div></blockquote>
<p><code class="docutils literal notranslate"><span class="pre">drilldowns[label1].keys</span></code> and <code class="docutils literal notranslate"><span class="pre">drilldowns[label1].output_columns</span></code>
are grouped. <code class="docutils literal notranslate"><span class="pre">drilldowns[label2].keys</span></code> and
<code class="docutils literal notranslate"><span class="pre">drilldowns[label2].output_columns</span></code> are also grouped.</p>
<p>In <code class="docutils literal notranslate"><span class="pre">label1</span></code> group, <code class="docutils literal notranslate"><span class="pre">_key</span></code> is used for group key and <code class="docutils literal notranslate"><span class="pre">_nsubrecs</span></code>
is used for output columns.</p>
<p>In <code class="docutils literal notranslate"><span class="pre">label2</span></code> group, <code class="docutils literal notranslate"><span class="pre">tag</span></code> is used for group key and
<code class="docutils literal notranslate"><span class="pre">_key,_nsubrecs</span></code> is used for output columns.</p>
<p>See document for corresponding <code class="docutils literal notranslate"><span class="pre">drilldown_XXX</span></code> parameter to know how
to use it for the following parameters:</p>
<blockquote>
<div><ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">drilldowns[${LABEL}].sort_keys</span></code>: <a class="reference internal" href="#select-drilldown-sort-keys"><span class="std std-ref">drilldown_sort_keys</span></a></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">drilldowns[${LABEL}].offset</span></code>: <a class="reference internal" href="#select-drilldown-offset"><span class="std std-ref">drilldown_offset</span></a></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">drilldowns[${LABEL}].limit</span></code>: <a class="reference internal" href="#select-drilldown-limit"><span class="std std-ref">drilldown_limit</span></a></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">drilldowns[${LABEL}].calc_types</span></code>: <a class="reference internal" href="#select-drilldown-calc-types"><span class="std std-ref">drilldown_calc_types</span></a></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">drilldowns[${LABEL}].calc_target</span></code>: <a class="reference internal" href="#select-drilldown-calc-target"><span class="std std-ref">drilldown_calc_target</span></a></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">drilldowns[${LABEL}].filter</span></code>: <a class="reference internal" href="#select-drilldown-filter"><span class="std std-ref">drilldown_filter</span></a></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">drilldowns[${LABEL}].max_n_target_records</span></code>: <a class="reference internal" href="#select-drilldown-max-n-target-records"><span class="std std-ref">drilldown_max_n_target_records</span></a></p></li>
</ul>
</div></blockquote>
<p>See document for corresponding <code class="docutils literal notranslate"><span class="pre">columns[${NAME}].XXX</span></code> parameter to
know how to use it for the following parameters:</p>
<blockquote>
<div><ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">drilldowns[${LABEL}].columns[${NAME}].flags=COLUMN_SCALAR</span></code>:
<a class="reference internal" href="#select-columns-name-flags"><span class="std std-ref">columns[${NAME}].flags</span></a></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">drilldowns[${LABEL}].columns[${NAME}].type=null</span></code>:
<a class="reference internal" href="#select-columns-name-type"><span class="std std-ref">columns[${NAME}].type</span></a></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">drilldowns[${LABEL}].columns[${NAME}].value=null</span></code>:
<a class="reference internal" href="#select-columns-name-value"><span class="std std-ref">columns[${NAME}].value</span></a></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">drilldowns[${LABEL}].columns[${NAME}].window.sort_keys=null</span></code>:
<a class="reference internal" href="#select-columns-name-window-sort-keys"><span class="std std-ref">columns[${NAME}].window.sort_keys</span></a></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">drilldowns[${LABEL}].columns[${NAME}].window.group_keys=null</span></code>:
<a class="reference internal" href="#select-columns-name-window-group-keys"><span class="std std-ref">columns[${NAME}].window.group_keys</span></a></p></li>
</ul>
</div></blockquote>
<p>The following parameters are needed more description:</p>
<blockquote>
<div><ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">drilldowns[${LABEL}].keys</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">drilldowns[${LABEL}].table</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">drilldowns[${LABEL}].output_columns</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">drilldowns[${LABEL}].columns[${NAME}].stage=null</span></code></p></li>
</ul>
</div></blockquote>
<p>Output format is different a bit. It’s also needed more description.</p>
<section id="drilldowns-label-keys">
<span id="select-drilldowns-label-keys"></span><h4><span class="section-number">7.3.57.4.9.1. </span><code class="docutils literal notranslate"><span class="pre">drilldowns[${LABEL}].keys</span></code><a class="headerlink" href="#drilldowns-label-keys" title="Link to this heading">#</a></h4>
<div class="versionadded">
<p><span class="versionmodified added">New in version 4.0.8.</span></p>
</div>
<p><a class="reference internal" href="#select-drilldown"><span class="std std-ref">drilldown</span></a> can specify multiple keys for multiple
drilldowns. But it can’t specify multiple keys for one drilldown.</p>
<p><code class="docutils literal notranslate"><span class="pre">drilldowns[${LABEL}].keys</span></code> can’t specify multiple keys for multiple
drilldowns. But it can specify multiple keys for one drilldown.</p>
<p>You can specify multiple keys separated by “<code class="docutils literal notranslate"><span class="pre">,</span></code>”.</p>
<p>Here is an example to group by multiple keys, <code class="docutils literal notranslate"><span class="pre">tag</span></code> and <code class="docutils literal notranslate"><span class="pre">n_likes</span></code>
column values:</p>
<p>Execution example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">select</span> <span class="n">Entries</span> \
  <span class="o">--</span><span class="n">limit</span> <span class="o">-</span><span class="mi">1</span> \
  <span class="o">--</span><span class="n">output_columns</span> <span class="n">tag</span><span class="p">,</span><span class="n">n_likes</span> \
  <span class="o">--</span><span class="n">drilldowns</span><span class="p">[</span><span class="n">tag</span><span class="o">.</span><span class="n">n_likes</span><span class="p">]</span><span class="o">.</span><span class="n">keys</span> <span class="n">tag</span><span class="p">,</span><span class="n">n_likes</span> \
  <span class="o">--</span><span class="n">drilldowns</span><span class="p">[</span><span class="n">tag</span><span class="o">.</span><span class="n">n_likes</span><span class="p">]</span><span class="o">.</span><span class="n">output_columns</span> <span class="n">_value</span><span class="o">.</span><span class="n">tag</span><span class="p">,</span><span class="n">_value</span><span class="o">.</span><span class="n">n_likes</span><span class="p">,</span><span class="n">_nsubrecs</span>
<span class="c1"># [</span>
<span class="c1">#   [</span>
<span class="c1">#     0,</span>
<span class="c1">#     1337566253.89858,</span>
<span class="c1">#     0.000355720520019531</span>
<span class="c1">#   ],</span>
<span class="c1">#   [</span>
<span class="c1">#     [</span>
<span class="c1">#       [</span>
<span class="c1">#         5</span>
<span class="c1">#       ],</span>
<span class="c1">#       [</span>
<span class="c1">#         [</span>
<span class="c1">#           &quot;tag&quot;,</span>
<span class="c1">#           &quot;ShortText&quot;</span>
<span class="c1">#         ],</span>
<span class="c1">#         [</span>
<span class="c1">#           &quot;n_likes&quot;,</span>
<span class="c1">#           &quot;UInt32&quot;</span>
<span class="c1">#         ]</span>
<span class="c1">#       ],</span>
<span class="c1">#       [</span>
<span class="c1">#         &quot;Hello&quot;,</span>
<span class="c1">#         5</span>
<span class="c1">#       ],</span>
<span class="c1">#       [</span>
<span class="c1">#         &quot;Groonga&quot;,</span>
<span class="c1">#         10</span>
<span class="c1">#       ],</span>
<span class="c1">#       [</span>
<span class="c1">#         &quot;Groonga&quot;,</span>
<span class="c1">#         15</span>
<span class="c1">#       ],</span>
<span class="c1">#       [</span>
<span class="c1">#         &quot;Senna&quot;,</span>
<span class="c1">#         3</span>
<span class="c1">#       ],</span>
<span class="c1">#       [</span>
<span class="c1">#         &quot;Senna&quot;,</span>
<span class="c1">#         3</span>
<span class="c1">#       ]</span>
<span class="c1">#     ],</span>
<span class="c1">#     {</span>
<span class="c1">#       &quot;tag.n_likes&quot;: [</span>
<span class="c1">#         [</span>
<span class="c1">#           4</span>
<span class="c1">#         ],</span>
<span class="c1">#         [</span>
<span class="c1">#           [</span>
<span class="c1">#             &quot;tag&quot;,</span>
<span class="c1">#             &quot;ShortText&quot;</span>
<span class="c1">#           ],</span>
<span class="c1">#           [</span>
<span class="c1">#             &quot;n_likes&quot;,</span>
<span class="c1">#             &quot;UInt32&quot;</span>
<span class="c1">#           ],</span>
<span class="c1">#           [</span>
<span class="c1">#             &quot;_nsubrecs&quot;,</span>
<span class="c1">#             &quot;Int32&quot;</span>
<span class="c1">#           ]</span>
<span class="c1">#         ],</span>
<span class="c1">#         [</span>
<span class="c1">#           &quot;Hello&quot;,</span>
<span class="c1">#           5,</span>
<span class="c1">#           1</span>
<span class="c1">#         ],</span>
<span class="c1">#         [</span>
<span class="c1">#           &quot;Groonga&quot;,</span>
<span class="c1">#           10,</span>
<span class="c1">#           1</span>
<span class="c1">#         ],</span>
<span class="c1">#         [</span>
<span class="c1">#           &quot;Groonga&quot;,</span>
<span class="c1">#           15,</span>
<span class="c1">#           1</span>
<span class="c1">#         ],</span>
<span class="c1">#         [</span>
<span class="c1">#           &quot;Senna&quot;,</span>
<span class="c1">#           3,</span>
<span class="c1">#           2</span>
<span class="c1">#         ]</span>
<span class="c1">#       ]</span>
<span class="c1">#     }</span>
<span class="c1">#   ]</span>
<span class="c1"># ]</span>
</pre></div>
</div>
<p><code class="docutils literal notranslate"><span class="pre">tag.n_likes</span></code> is used as the label for the drilldown parameters
group. You can refer grouped keys by <code class="docutils literal notranslate"><span class="pre">_value.${KEY_NAME}</span></code> syntax in
<a class="reference internal" href="#select-drilldowns-label-output-columns"><span class="std std-ref">drilldowns[${LABEL}].output_columns</span></a>. <code class="docutils literal notranslate"><span class="pre">${KEY_NAME}</span></code> is a
column name to be used by group key. <code class="docutils literal notranslate"><span class="pre">tag</span></code> and <code class="docutils literal notranslate"><span class="pre">n_likes</span></code> are
<code class="docutils literal notranslate"><span class="pre">${KEY_NAME}</span></code> in this case.</p>
<p>Note that you can’t use <code class="docutils literal notranslate"><span class="pre">_value.${KEY_NAME}</span></code> syntax when you just
specify one key as <code class="docutils literal notranslate"><span class="pre">drilldowns[${LABEL}].keys</span></code> like <code class="docutils literal notranslate"><span class="pre">--drilldowns[tag].keys</span>
<span class="pre">tag</span></code>. You should use <code class="docutils literal notranslate"><span class="pre">_key</span></code> for the case. It’s the same rule in
<a class="reference internal" href="#select-drilldown-output-columns"><span class="std std-ref">drilldown_output_columns</span></a>.</p>
</section>
<section id="drilldowns-label-table">
<span id="select-drilldowns-label-table"></span><h4><span class="section-number">7.3.57.4.9.2. </span><code class="docutils literal notranslate"><span class="pre">drilldowns[${LABEL}].table</span></code><a class="headerlink" href="#drilldowns-label-table" title="Link to this heading">#</a></h4>
<div class="versionadded">
<p><span class="versionmodified added">New in version 6.0.2.</span></p>
</div>
<p>Specify <code class="docutils literal notranslate"><span class="pre">${LABLE}</span></code> of other <code class="docutils literal notranslate"><span class="pre">drilldowns</span></code> or <code class="docutils literal notranslate"><span class="pre">slices</span></code>.</p>
<p>You can drilldown the result of specified <code class="docutils literal notranslate"><span class="pre">${LABLE}</span></code>.
It means that this parameter enables a nested drilldown.</p>
<p>Here is an example to execute the nested drilldown. The final result takes first drilldown by <code class="docutils literal notranslate"><span class="pre">tag</span></code> and then 2nd drilldown by <code class="docutils literal notranslate"><span class="pre">category</span></code> against first result.</p>
<p>Execution example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">table_create</span> <span class="n">NestedDrilldownTags</span> <span class="n">TABLE_PAT_KEY</span> <span class="n">ShortText</span>
<span class="c1"># [[0,1337566253.89858,0.000355720520019531],true]</span>
<span class="n">column_create</span> <span class="n">NestedDrilldownTags</span> <span class="n">category</span> <span class="n">COLUMN_SCALAR</span> <span class="n">ShortText</span>
<span class="c1"># [[0,1337566253.89858,0.000355720520019531],true]</span>
<span class="n">table_create</span> <span class="n">NestedDrilldownMemos</span> <span class="n">TABLE_HASH_KEY</span> <span class="n">ShortText</span>
<span class="c1"># [[0,1337566253.89858,0.000355720520019531],true]</span>
<span class="n">column_create</span> <span class="n">NestedDrilldownMemos</span> <span class="n">tag</span> <span class="n">COLUMN_SCALAR</span> <span class="n">NestedDrilldownTags</span>
<span class="c1"># [[0,1337566253.89858,0.000355720520019531],true]</span>
<span class="n">load</span> <span class="o">--</span><span class="n">table</span> <span class="n">NestedDrilldownMemos</span>
<span class="p">[</span>
<span class="p">{</span><span class="s2">&quot;_key&quot;</span><span class="p">:</span> <span class="s2">&quot;Groonga is fast!&quot;</span><span class="p">,</span> <span class="s2">&quot;tag&quot;</span><span class="p">:</span> <span class="s2">&quot;Groonga&quot;</span><span class="p">},</span>
<span class="p">{</span><span class="s2">&quot;_key&quot;</span><span class="p">:</span> <span class="s2">&quot;Groonga sticker!&quot;</span><span class="p">,</span> <span class="s2">&quot;tag&quot;</span><span class="p">:</span> <span class="s2">&quot;Groonga&quot;</span><span class="p">},</span>
<span class="p">{</span><span class="s2">&quot;_key&quot;</span><span class="p">:</span> <span class="s2">&quot;Mroonga sticker!&quot;</span><span class="p">,</span> <span class="s2">&quot;tag&quot;</span><span class="p">:</span> <span class="s2">&quot;Mroonga&quot;</span><span class="p">},</span>
<span class="p">{</span><span class="s2">&quot;_key&quot;</span><span class="p">:</span> <span class="s2">&quot;Rroonga is fast!&quot;</span><span class="p">,</span> <span class="s2">&quot;tag&quot;</span><span class="p">:</span> <span class="s2">&quot;Rroonga&quot;</span><span class="p">}</span>
<span class="p">]</span>
<span class="c1"># [[0,1337566253.89858,0.000355720520019531],4]</span>
<span class="n">load</span> <span class="o">--</span><span class="n">table</span> <span class="n">NestedDrilldownTags</span>
<span class="p">[</span>
<span class="p">{</span><span class="s2">&quot;_key&quot;</span><span class="p">:</span> <span class="s2">&quot;Groonga&quot;</span><span class="p">,</span> <span class="s2">&quot;category&quot;</span><span class="p">:</span> <span class="s2">&quot;C/C++&quot;</span><span class="p">},</span>
<span class="p">{</span><span class="s2">&quot;_key&quot;</span><span class="p">:</span> <span class="s2">&quot;Mroonga&quot;</span><span class="p">,</span> <span class="s2">&quot;category&quot;</span><span class="p">:</span> <span class="s2">&quot;C/C++&quot;</span><span class="p">},</span>
<span class="p">{</span><span class="s2">&quot;_key&quot;</span><span class="p">:</span> <span class="s2">&quot;PGroonga&quot;</span><span class="p">,</span> <span class="s2">&quot;category&quot;</span><span class="p">:</span> <span class="s2">&quot;C/C++&quot;</span><span class="p">},</span>
<span class="p">{</span><span class="s2">&quot;_key&quot;</span><span class="p">:</span> <span class="s2">&quot;Rroonga&quot;</span><span class="p">,</span> <span class="s2">&quot;category&quot;</span><span class="p">:</span> <span class="s2">&quot;Ruby&quot;</span><span class="p">}</span>
<span class="p">]</span>
<span class="c1"># [[0,1337566253.89858,0.000355720520019531],4]</span>
<span class="n">select</span> <span class="n">NestedDrilldownMemos</span> \
  <span class="o">--</span><span class="n">drilldowns</span><span class="p">[</span><span class="n">Tag</span><span class="p">]</span><span class="o">.</span><span class="n">keys</span> <span class="n">tag</span> \
  <span class="o">--</span><span class="n">drilldowns</span><span class="p">[</span><span class="n">Tag</span><span class="p">]</span><span class="o">.</span><span class="n">output_columns</span> <span class="n">_key</span> \
  <span class="o">--</span><span class="n">drilldowns</span><span class="p">[</span><span class="n">Category</span><span class="p">]</span><span class="o">.</span><span class="n">table</span> <span class="n">Tag</span> \
  <span class="o">--</span><span class="n">drilldowns</span><span class="p">[</span><span class="n">Category</span><span class="p">]</span><span class="o">.</span><span class="n">keys</span> <span class="n">category</span> \
  <span class="o">--</span><span class="n">drilldowns</span><span class="p">[</span><span class="n">Category</span><span class="p">]</span><span class="o">.</span><span class="n">output_columns</span> <span class="n">_key</span><span class="p">,</span><span class="n">_nsubrecs</span>
<span class="c1"># [</span>
<span class="c1">#   [</span>
<span class="c1">#     0,</span>
<span class="c1">#     1337566253.89858,</span>
<span class="c1">#     0.000355720520019531</span>
<span class="c1">#   ],</span>
<span class="c1">#   [</span>
<span class="c1">#     [</span>
<span class="c1">#       [</span>
<span class="c1">#         4</span>
<span class="c1">#       ],</span>
<span class="c1">#       [</span>
<span class="c1">#         [</span>
<span class="c1">#           &quot;_id&quot;,</span>
<span class="c1">#           &quot;UInt32&quot;</span>
<span class="c1">#         ],</span>
<span class="c1">#         [</span>
<span class="c1">#           &quot;_key&quot;,</span>
<span class="c1">#           &quot;ShortText&quot;</span>
<span class="c1">#         ],</span>
<span class="c1">#         [</span>
<span class="c1">#           &quot;tag&quot;,</span>
<span class="c1">#           &quot;NestedDrilldownTags&quot;</span>
<span class="c1">#         ]</span>
<span class="c1">#       ],</span>
<span class="c1">#       [</span>
<span class="c1">#         1,</span>
<span class="c1">#         &quot;Groonga is fast!&quot;,</span>
<span class="c1">#         &quot;Groonga&quot;</span>
<span class="c1">#       ],</span>
<span class="c1">#       [</span>
<span class="c1">#         2,</span>
<span class="c1">#         &quot;Groonga sticker!&quot;,</span>
<span class="c1">#         &quot;Groonga&quot;</span>
<span class="c1">#       ],</span>
<span class="c1">#       [</span>
<span class="c1">#         3,</span>
<span class="c1">#         &quot;Mroonga sticker!&quot;,</span>
<span class="c1">#         &quot;Mroonga&quot;</span>
<span class="c1">#       ],</span>
<span class="c1">#       [</span>
<span class="c1">#         4,</span>
<span class="c1">#         &quot;Rroonga is fast!&quot;,</span>
<span class="c1">#         &quot;Rroonga&quot;</span>
<span class="c1">#       ]</span>
<span class="c1">#     ],</span>
<span class="c1">#     {</span>
<span class="c1">#       &quot;Tag&quot;: [</span>
<span class="c1">#         [</span>
<span class="c1">#           3</span>
<span class="c1">#         ],</span>
<span class="c1">#         [</span>
<span class="c1">#           [</span>
<span class="c1">#             &quot;_key&quot;,</span>
<span class="c1">#             &quot;ShortText&quot;</span>
<span class="c1">#           ]</span>
<span class="c1">#         ],</span>
<span class="c1">#         [</span>
<span class="c1">#           &quot;Groonga&quot;</span>
<span class="c1">#         ],</span>
<span class="c1">#         [</span>
<span class="c1">#           &quot;Mroonga&quot;</span>
<span class="c1">#         ],</span>
<span class="c1">#         [</span>
<span class="c1">#           &quot;Rroonga&quot;</span>
<span class="c1">#         ]</span>
<span class="c1">#       ],</span>
<span class="c1">#       &quot;Category&quot;: [</span>
<span class="c1">#         [</span>
<span class="c1">#           2</span>
<span class="c1">#         ],</span>
<span class="c1">#         [</span>
<span class="c1">#           [</span>
<span class="c1">#             &quot;_key&quot;,</span>
<span class="c1">#             &quot;ShortText&quot;</span>
<span class="c1">#           ],</span>
<span class="c1">#           [</span>
<span class="c1">#             &quot;_nsubrecs&quot;,</span>
<span class="c1">#             &quot;Int32&quot;</span>
<span class="c1">#           ]</span>
<span class="c1">#         ],</span>
<span class="c1">#         [</span>
<span class="c1">#           &quot;C/C++&quot;,</span>
<span class="c1">#           2</span>
<span class="c1">#         ],</span>
<span class="c1">#         [</span>
<span class="c1">#           &quot;Ruby&quot;,</span>
<span class="c1">#           1</span>
<span class="c1">#         ]</span>
<span class="c1">#       ]</span>
<span class="c1">#     }</span>
<span class="c1">#   ]</span>
<span class="c1"># ]</span>
</pre></div>
</div>
<p>In this example;
The schema contains the table named as <code class="docutils literal notranslate"><span class="pre">NestedDrilldownMemo</span></code> which has the column named as <code class="docutils literal notranslate"><span class="pre">tag</span></code>,
the table named as <code class="docutils literal notranslate"><span class="pre">NestedDrilldownTags</span></code> which has the column named as <code class="docutils literal notranslate"><span class="pre">category</span></code>.</p>
<p><code class="docutils literal notranslate"><span class="pre">Tag</span></code> drilldowns <code class="docutils literal notranslate"><span class="pre">NestedDrilldownMemos</span></code> by <code class="docutils literal notranslate"><span class="pre">tag</span></code>.
Thus, the result of <code class="docutils literal notranslate"><span class="pre">Tag</span></code> contains one row each for <code class="docutils literal notranslate"><span class="pre">Groonga</span></code>, <code class="docutils literal notranslate"><span class="pre">Mroonga</span></code> and <code class="docutils literal notranslate"><span class="pre">Rroonga</span></code>.
And then, <code class="docutils literal notranslate"><span class="pre">Category</span></code> drilldowns <code class="docutils literal notranslate"><span class="pre">Tag</span></code> by <code class="docutils literal notranslate"><span class="pre">category</span></code>.
Thus the result of <code class="docutils literal notranslate"><span class="pre">Category</span></code> contains two records has <code class="docutils literal notranslate"><span class="pre">C/C++</span></code> and one records has <code class="docutils literal notranslate"><span class="pre">Ruby</span></code>.</p>
</section>
<section id="drilldowns-label-key-vector-expansion">
<span id="select-drilldowns-label-key-vector-expansions"></span><h4><span class="section-number">7.3.57.4.9.3. </span><code class="docutils literal notranslate"><span class="pre">drilldowns[${LABEL}].key_vector_expansion</span></code><a class="headerlink" href="#drilldowns-label-key-vector-expansion" title="Link to this heading">#</a></h4>
<div class="versionadded">
<p><span class="versionmodified added">New in version 12.1.1.</span></p>
</div>
<p>This specifies how to expand key when keys for drilldown are vector. Currently, <code class="docutils literal notranslate"><span class="pre">NONE</span></code> or <code class="docutils literal notranslate"><span class="pre">POWER_SET</span></code> are able to be specified.</p>
<p>This work only time when one key is target for drilldown. This doesn’t work time when more than 2 keys are target for drilldown.</p>
<section id="none">
<span id="select-drilldowns-label-key-vector-expansions-none"></span><h5><span class="section-number">7.3.57.4.9.3.1. </span><code class="docutils literal notranslate"><span class="pre">NONE</span></code><a class="headerlink" href="#none" title="Link to this heading">#</a></h5>
<p>This works as same as <code class="docutils literal notranslate"><span class="pre">key_vector_expansion</span></code> is not specified.</p>
<p>Keys would not be expanded. Each element within a vector works as each key.</p>
<p>Following is a sample to aggregate total number of individual and combination occurrence for 3 tags, <code class="docutils literal notranslate"><span class="pre">Groonga</span></code>, <code class="docutils literal notranslate"><span class="pre">Mroonga</span></code>, and <code class="docutils literal notranslate"><span class="pre">PGroonga</span></code>.</p>
<p>Execution example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">table_create</span> <span class="n">NoneExpantionDrilldownMemos</span> <span class="n">TABLE_HASH_KEY</span> <span class="n">ShortText</span>
<span class="c1"># [[0,1337566253.89858,0.000355720520019531],true]</span>
<span class="n">column_create</span> <span class="n">NoneExpantionDrilldownMemos</span> <span class="n">tags</span> <span class="n">COLUMN_VECTOR</span> <span class="n">ShortText</span>
<span class="c1"># [[0,1337566253.89858,0.000355720520019531],true]</span>
<span class="n">load</span> <span class="o">--</span><span class="n">table</span> <span class="n">NoneExpantionDrilldownMemos</span>
<span class="p">[</span>
<span class="p">{</span><span class="s2">&quot;_key&quot;</span><span class="p">:</span> <span class="s2">&quot;Groonga is fast!&quot;</span><span class="p">,</span> <span class="s2">&quot;tags&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;Groonga&quot;</span><span class="p">]},</span>
<span class="p">{</span><span class="s2">&quot;_key&quot;</span><span class="p">:</span> <span class="s2">&quot;Mroonga uses Groonga!&quot;</span><span class="p">,</span> <span class="s2">&quot;tags&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;Groonga&quot;</span><span class="p">,</span> <span class="s2">&quot;Mroonga&quot;</span><span class="p">]},</span>
<span class="p">{</span><span class="s2">&quot;_key&quot;</span><span class="p">:</span> <span class="s2">&quot;PGroonga uses Groonga!&quot;</span><span class="p">,</span> <span class="s2">&quot;tags&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;Groonga&quot;</span><span class="p">,</span> <span class="s2">&quot;PGroonga&quot;</span><span class="p">]},</span>
<span class="p">{</span><span class="s2">&quot;_key&quot;</span><span class="p">:</span> <span class="s2">&quot;Mroonga and PGroonga are Groonga family&quot;</span><span class="p">,</span> <span class="s2">&quot;tags&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;Groonga&quot;</span><span class="p">,</span> <span class="s2">&quot;Mroonga&quot;</span><span class="p">,</span> <span class="s2">&quot;PGroonga&quot;</span><span class="p">]}</span>
<span class="p">]</span>
<span class="c1"># [[0,1337566253.89858,0.000355720520019531],4]</span>
<span class="n">select</span> <span class="n">NoneExpantionDrilldownMemos</span> \
  <span class="o">--</span><span class="n">drilldowns</span><span class="p">[</span><span class="n">tags</span><span class="p">]</span><span class="o">.</span><span class="n">keys</span> <span class="n">tags</span> \
  <span class="o">--</span><span class="n">drilldowns</span><span class="p">[</span><span class="n">tags</span><span class="p">]</span><span class="o">.</span><span class="n">key_vector_expansion</span> <span class="n">NONE</span> \
  <span class="o">--</span><span class="n">drilldowns</span><span class="p">[</span><span class="n">tags</span><span class="p">]</span><span class="o">.</span><span class="n">columns</span><span class="p">[</span><span class="n">none_expantion</span><span class="p">]</span><span class="o">.</span><span class="n">stage</span> <span class="n">initial</span> \
  <span class="o">--</span><span class="n">drilldowns</span><span class="p">[</span><span class="n">tags</span><span class="p">]</span><span class="o">.</span><span class="n">columns</span><span class="p">[</span><span class="n">none_expantion</span><span class="p">]</span><span class="o">.</span><span class="n">value</span> <span class="n">_key</span> \
  <span class="o">--</span><span class="n">drilldowns</span><span class="p">[</span><span class="n">tags</span><span class="p">]</span><span class="o">.</span><span class="n">columns</span><span class="p">[</span><span class="n">none_expantion</span><span class="p">]</span><span class="o">.</span><span class="n">flags</span> <span class="n">COLUMN_VECTOR</span> \
  <span class="o">--</span><span class="n">drilldowns</span><span class="p">[</span><span class="n">tags</span><span class="p">]</span><span class="o">.</span><span class="n">sort_keys</span> <span class="s1">&#39;none_expantion&#39;</span> \
  <span class="o">--</span><span class="n">drilldowns</span><span class="p">[</span><span class="n">tags</span><span class="p">]</span><span class="o">.</span><span class="n">output_columns</span> <span class="s1">&#39;none_expantion, _nsubrecs&#39;</span> \
  <span class="o">--</span><span class="n">limit</span> <span class="mi">0</span>
<span class="c1"># [</span>
<span class="c1">#   [</span>
<span class="c1">#     0,</span>
<span class="c1">#     1337566253.89858,</span>
<span class="c1">#     0.000355720520019531</span>
<span class="c1">#   ],</span>
<span class="c1">#   [</span>
<span class="c1">#     [</span>
<span class="c1">#       [</span>
<span class="c1">#         4</span>
<span class="c1">#       ],</span>
<span class="c1">#       [</span>
<span class="c1">#         [</span>
<span class="c1">#           &quot;_id&quot;,</span>
<span class="c1">#           &quot;UInt32&quot;</span>
<span class="c1">#         ],</span>
<span class="c1">#         [</span>
<span class="c1">#           &quot;_key&quot;,</span>
<span class="c1">#           &quot;ShortText&quot;</span>
<span class="c1">#         ],</span>
<span class="c1">#         [</span>
<span class="c1">#           &quot;tags&quot;,</span>
<span class="c1">#           &quot;ShortText&quot;</span>
<span class="c1">#         ]</span>
<span class="c1">#       ]</span>
<span class="c1">#     ],</span>
<span class="c1">#     {</span>
<span class="c1">#       &quot;tags&quot;: [</span>
<span class="c1">#         [</span>
<span class="c1">#           3</span>
<span class="c1">#         ],</span>
<span class="c1">#         [</span>
<span class="c1">#           [</span>
<span class="c1">#             &quot;none_expantion&quot;,</span>
<span class="c1">#             &quot;Text&quot;</span>
<span class="c1">#           ],</span>
<span class="c1">#           [</span>
<span class="c1">#             &quot;_nsubrecs&quot;,</span>
<span class="c1">#             &quot;Int32&quot;</span>
<span class="c1">#           ]</span>
<span class="c1">#         ],</span>
<span class="c1">#         [</span>
<span class="c1">#           [</span>
<span class="c1">#             &quot;Groonga&quot;</span>
<span class="c1">#           ],</span>
<span class="c1">#           4</span>
<span class="c1">#         ],</span>
<span class="c1">#         [</span>
<span class="c1">#           [</span>
<span class="c1">#             &quot;Mroonga&quot;</span>
<span class="c1">#           ],</span>
<span class="c1">#           2</span>
<span class="c1">#         ],</span>
<span class="c1">#         [</span>
<span class="c1">#           [</span>
<span class="c1">#             &quot;PGroonga&quot;</span>
<span class="c1">#           ],</span>
<span class="c1">#           2</span>
<span class="c1">#         ]</span>
<span class="c1">#       ]</span>
<span class="c1">#     }</span>
<span class="c1">#   ]</span>
<span class="c1"># ]</span>
</pre></div>
</div>
<p>Following are facts from the results.</p>
<div class="pst-scrollable-table-container"><table class="table">
<tbody>
<tr class="row-odd"><td><p>tag</p></td>
<td><p>number of occurrence（ <code class="docutils literal notranslate"><span class="pre">_nsubrecs</span></code> ）</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">Groonga</span></code></p></td>
<td><p>4</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">Mroonga</span></code></p></td>
<td><p>2</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">PGroonga</span></code></p></td>
<td><p>2</p></td>
</tr>
</tbody>
</table>
</div>
</section>
<section id="power-set">
<span id="select-drilldowns-label-key-vector-expansions-power-set"></span><h5><span class="section-number">7.3.57.4.9.3.2. </span><code class="docutils literal notranslate"><span class="pre">POWER_SET</span></code><a class="headerlink" href="#power-set" title="Link to this heading">#</a></h5>
<p>This aggregates total with expanding vectors to the power set.
In this case, a target vector is considered as multi set.
Thus, each element is considered as an individual element when there are multiple elements with same value.</p>
<p>For example, there is a vector <code class="docutils literal notranslate"><span class="pre">[A,</span> <span class="pre">B,</span> <span class="pre">C]</span></code>. In this case, a target set is <code class="docutils literal notranslate"><span class="pre">{A,</span> <span class="pre">B,</span> <span class="pre">C}</span></code>.
The power set is aggrigation for all of subsets within a set. Following shows all of subset within a set <code class="docutils literal notranslate"><span class="pre">{A,</span> <span class="pre">B,</span> <span class="pre">C}</span></code>.
However, Groonga does not use empty set, that number of elements is 0. It is because empty set is not useful for results of drilldown.
Please report at <a class="reference external" href="https://github.com/groonga/groonga/issues">issue</a>, if you find a case to use empty set.</p>
<ul class="simple">
<li><p>Subset with 1 element</p>
<ul>
<li><p><code class="docutils literal notranslate"><span class="pre">{A}</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">{B}</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">{C}</span></code></p></li>
</ul>
</li>
<li><p>Subset with 2 elements</p>
<ul>
<li><p><code class="docutils literal notranslate"><span class="pre">{A,</span> <span class="pre">B}</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">{B,</span> <span class="pre">C}</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">{A,</span> <span class="pre">C}</span></code></p></li>
</ul>
</li>
<li><p>Subset with 3 elements</p>
<ul>
<li><p><code class="docutils literal notranslate"><span class="pre">{A,</span> <span class="pre">B,</span> <span class="pre">C}</span></code></p></li>
</ul>
</li>
</ul>
<p>Those are all subsets for <code class="docutils literal notranslate"><span class="pre">{A,</span> <span class="pre">B,</span> <span class="pre">C}</span></code>.
Since the power set is aggregation of those subsets, <code class="docutils literal notranslate"><span class="pre">{{A},</span> <span class="pre">{B},</span> <span class="pre">{C},</span> <span class="pre">{A,</span> <span class="pre">B},</span> <span class="pre">{B,</span> <span class="pre">C},</span> <span class="pre">{A,</span> <span class="pre">C},</span> <span class="pre">{A,</span> <span class="pre">B,</span> <span class="pre">C}}</span></code> is a power set for the vector.</p>
<p><code class="docutils literal notranslate"><span class="pre">POWER_SET</span></code> aggregates with each subset for <code class="docutils literal notranslate"><span class="pre">{{A},</span> <span class="pre">{B},</span> <span class="pre">{C},</span> <span class="pre">{A,</span> <span class="pre">B},</span> <span class="pre">{B,</span> <span class="pre">C},</span> <span class="pre">{A,</span> <span class="pre">C},</span> <span class="pre">{A,</span> <span class="pre">B,</span> <span class="pre">C}}</span></code>.</p>
<p>For example, there is a case to aggregate <code class="docutils literal notranslate"><span class="pre">[A,</span> <span class="pre">B,</span> <span class="pre">C]</span></code> and <code class="docutils literal notranslate"><span class="pre">[B,</span> <span class="pre">C,</span> <span class="pre">D]</span></code> with the power set.</p>
<p>A power set for <code class="docutils literal notranslate"><span class="pre">[A,</span> <span class="pre">B,</span> <span class="pre">C]</span></code> is <code class="docutils literal notranslate"><span class="pre">{{A},</span> <span class="pre">{B},</span> <span class="pre">{C},</span> <span class="pre">{A,</span> <span class="pre">B},</span> <span class="pre">{B,</span> <span class="pre">C},</span> <span class="pre">{A,</span> <span class="pre">C},</span> <span class="pre">{A,</span> <span class="pre">B,</span> <span class="pre">C}}</span></code> as previously explained.
Likewise a power set for <code class="docutils literal notranslate"><span class="pre">[B,</span> <span class="pre">C,</span> <span class="pre">D]</span></code> is <code class="docutils literal notranslate"><span class="pre">{{B},</span> <span class="pre">{C},</span> <span class="pre">{D},</span> <span class="pre">{B,</span> <span class="pre">C},</span> <span class="pre">{C,</span> <span class="pre">D},</span> <span class="pre">{B,</span> <span class="pre">D},</span> <span class="pre">{B,</span> <span class="pre">C,</span> <span class="pre">D}}</span></code>.</p>
<p>Aggregating occurrence of each subset in each power set is shown in result as follows.</p>
<div class="pst-scrollable-table-container"><table class="table">
<tbody>
<tr class="row-odd"><td><p>subset</p></td>
<td><p>number of occurrence（ <code class="docutils literal notranslate"><span class="pre">_nsubrecs</span></code> ）</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">{A}</span></code></p></td>
<td><p>1</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">{B}</span></code></p></td>
<td><p>2</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">{C}</span></code></p></td>
<td><p>2</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">{D}</span></code></p></td>
<td><p>1</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">{A,</span> <span class="pre">B}</span></code></p></td>
<td><p>1</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">{A,</span> <span class="pre">C}</span></code></p></td>
<td><p>1</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">{B,</span> <span class="pre">C}</span></code></p></td>
<td><p>2</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">{B,</span> <span class="pre">D}</span></code></p></td>
<td><p>1</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">{C,</span> <span class="pre">D}</span></code></p></td>
<td><p>1</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">{A,</span> <span class="pre">B,</span> <span class="pre">C}</span></code></p></td>
<td><p>1</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">{B,</span> <span class="pre">C,</span> <span class="pre">D}</span></code></p></td>
<td><p>1</p></td>
</tr>
</tbody>
</table>
</div>
<p>This aggregating methods is useful when it is requirement to sum total number of occurrence for individual tags and combination of tags at once.</p>
<p>Following is an example to aggregate total occurrence for individual and combination of 3 tags, <code class="docutils literal notranslate"><span class="pre">Groonga</span></code>, <code class="docutils literal notranslate"><span class="pre">Mroonga</span></code>, and <code class="docutils literal notranslate"><span class="pre">PGroonga</span></code>.</p>
<p>Execution example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">table_create</span> <span class="n">PowerSetDrilldownMemos</span> <span class="n">TABLE_HASH_KEY</span> <span class="n">ShortText</span>
<span class="c1"># [[0,1337566253.89858,0.000355720520019531],true]</span>
<span class="n">column_create</span> <span class="n">PowerSetDrilldownMemos</span> <span class="n">tags</span> <span class="n">COLUMN_VECTOR</span> <span class="n">ShortText</span>
<span class="c1"># [[0,1337566253.89858,0.000355720520019531],true]</span>
<span class="n">load</span> <span class="o">--</span><span class="n">table</span> <span class="n">PowerSetDrilldownMemos</span>
<span class="p">[</span>
<span class="p">{</span><span class="s2">&quot;_key&quot;</span><span class="p">:</span> <span class="s2">&quot;Groonga is fast!&quot;</span><span class="p">,</span> <span class="s2">&quot;tags&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;Groonga&quot;</span><span class="p">]},</span>
<span class="p">{</span><span class="s2">&quot;_key&quot;</span><span class="p">:</span> <span class="s2">&quot;Mroonga uses Groonga!&quot;</span><span class="p">,</span> <span class="s2">&quot;tags&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;Groonga&quot;</span><span class="p">,</span> <span class="s2">&quot;Mroonga&quot;</span><span class="p">]},</span>
<span class="p">{</span><span class="s2">&quot;_key&quot;</span><span class="p">:</span> <span class="s2">&quot;PGroonga uses Groonga!&quot;</span><span class="p">,</span> <span class="s2">&quot;tags&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;Groonga&quot;</span><span class="p">,</span> <span class="s2">&quot;PGroonga&quot;</span><span class="p">]},</span>
<span class="p">{</span><span class="s2">&quot;_key&quot;</span><span class="p">:</span> <span class="s2">&quot;Mroonga and PGroonga are Groonga family&quot;</span><span class="p">,</span> <span class="s2">&quot;tags&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;Groonga&quot;</span><span class="p">,</span> <span class="s2">&quot;Mroonga&quot;</span><span class="p">,</span> <span class="s2">&quot;PGroonga&quot;</span><span class="p">]}</span>
<span class="p">]</span>
<span class="c1"># [[0,1337566253.89858,0.000355720520019531],4]</span>
<span class="n">select</span> <span class="n">PowerSetDrilldownMemos</span> \
  <span class="o">--</span><span class="n">drilldowns</span><span class="p">[</span><span class="n">tags</span><span class="p">]</span><span class="o">.</span><span class="n">keys</span> <span class="n">tags</span> \
  <span class="o">--</span><span class="n">drilldowns</span><span class="p">[</span><span class="n">tags</span><span class="p">]</span><span class="o">.</span><span class="n">key_vector_expansion</span> <span class="n">POWER_SET</span> \
  <span class="o">--</span><span class="n">drilldowns</span><span class="p">[</span><span class="n">tags</span><span class="p">]</span><span class="o">.</span><span class="n">columns</span><span class="p">[</span><span class="n">power_set</span><span class="p">]</span><span class="o">.</span><span class="n">stage</span> <span class="n">initial</span> \
  <span class="o">--</span><span class="n">drilldowns</span><span class="p">[</span><span class="n">tags</span><span class="p">]</span><span class="o">.</span><span class="n">columns</span><span class="p">[</span><span class="n">power_set</span><span class="p">]</span><span class="o">.</span><span class="n">value</span> <span class="n">_key</span> \
  <span class="o">--</span><span class="n">drilldowns</span><span class="p">[</span><span class="n">tags</span><span class="p">]</span><span class="o">.</span><span class="n">columns</span><span class="p">[</span><span class="n">power_set</span><span class="p">]</span><span class="o">.</span><span class="n">flags</span> <span class="n">COLUMN_VECTOR</span> \
  <span class="o">--</span><span class="n">drilldowns</span><span class="p">[</span><span class="n">tags</span><span class="p">]</span><span class="o">.</span><span class="n">sort_keys</span> <span class="s1">&#39;power_set&#39;</span> \
  <span class="o">--</span><span class="n">drilldowns</span><span class="p">[</span><span class="n">tags</span><span class="p">]</span><span class="o">.</span><span class="n">output_columns</span> <span class="s1">&#39;power_set, _nsubrecs&#39;</span> \
  <span class="o">--</span><span class="n">limit</span> <span class="mi">0</span>
<span class="c1"># [</span>
<span class="c1">#   [</span>
<span class="c1">#     0,</span>
<span class="c1">#     1337566253.89858,</span>
<span class="c1">#     0.000355720520019531</span>
<span class="c1">#   ],</span>
<span class="c1">#   [</span>
<span class="c1">#     [</span>
<span class="c1">#       [</span>
<span class="c1">#         4</span>
<span class="c1">#       ],</span>
<span class="c1">#       [</span>
<span class="c1">#         [</span>
<span class="c1">#           &quot;_id&quot;,</span>
<span class="c1">#           &quot;UInt32&quot;</span>
<span class="c1">#         ],</span>
<span class="c1">#         [</span>
<span class="c1">#           &quot;_key&quot;,</span>
<span class="c1">#           &quot;ShortText&quot;</span>
<span class="c1">#         ],</span>
<span class="c1">#         [</span>
<span class="c1">#           &quot;tags&quot;,</span>
<span class="c1">#           &quot;ShortText&quot;</span>
<span class="c1">#         ]</span>
<span class="c1">#       ]</span>
<span class="c1">#     ],</span>
<span class="c1">#     {</span>
<span class="c1">#       &quot;tags&quot;: [</span>
<span class="c1">#         [</span>
<span class="c1">#           7</span>
<span class="c1">#         ],</span>
<span class="c1">#         [</span>
<span class="c1">#           [</span>
<span class="c1">#             &quot;power_set&quot;,</span>
<span class="c1">#             &quot;Text&quot;</span>
<span class="c1">#           ],</span>
<span class="c1">#           [</span>
<span class="c1">#             &quot;_nsubrecs&quot;,</span>
<span class="c1">#             &quot;Int32&quot;</span>
<span class="c1">#           ]</span>
<span class="c1">#         ],</span>
<span class="c1">#         [</span>
<span class="c1">#           [</span>
<span class="c1">#             &quot;Groonga&quot;</span>
<span class="c1">#           ],</span>
<span class="c1">#           4</span>
<span class="c1">#         ],</span>
<span class="c1">#         [</span>
<span class="c1">#           [</span>
<span class="c1">#             &quot;Mroonga&quot;</span>
<span class="c1">#           ],</span>
<span class="c1">#           2</span>
<span class="c1">#         ],</span>
<span class="c1">#         [</span>
<span class="c1">#           [</span>
<span class="c1">#             &quot;PGroonga&quot;</span>
<span class="c1">#           ],</span>
<span class="c1">#           2</span>
<span class="c1">#         ],</span>
<span class="c1">#         [</span>
<span class="c1">#           [</span>
<span class="c1">#             &quot;Groonga&quot;,</span>
<span class="c1">#             &quot;Mroonga&quot;</span>
<span class="c1">#           ],</span>
<span class="c1">#           2</span>
<span class="c1">#         ],</span>
<span class="c1">#         [</span>
<span class="c1">#           [</span>
<span class="c1">#             &quot;Groonga&quot;,</span>
<span class="c1">#             &quot;PGroonga&quot;</span>
<span class="c1">#           ],</span>
<span class="c1">#           2</span>
<span class="c1">#         ],</span>
<span class="c1">#         [</span>
<span class="c1">#           [</span>
<span class="c1">#             &quot;Mroonga&quot;,</span>
<span class="c1">#             &quot;PGroonga&quot;</span>
<span class="c1">#           ],</span>
<span class="c1">#           1</span>
<span class="c1">#         ],</span>
<span class="c1">#         [</span>
<span class="c1">#           [</span>
<span class="c1">#             &quot;Groonga&quot;,</span>
<span class="c1">#             &quot;Mroonga&quot;,</span>
<span class="c1">#             &quot;PGroonga&quot;</span>
<span class="c1">#           ],</span>
<span class="c1">#           1</span>
<span class="c1">#         ]</span>
<span class="c1">#       ]</span>
<span class="c1">#     }</span>
<span class="c1">#   ]</span>
<span class="c1"># ]</span>
</pre></div>
</div>
<p>With this aggregation result, following information would be known.</p>
<div class="pst-scrollable-table-container"><table class="table">
<tbody>
<tr class="row-odd"><td><p>tag</p></td>
<td><p>number of occurrence（ <code class="docutils literal notranslate"><span class="pre">_nsubrecs</span></code> ）</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">Groonga</span></code></p></td>
<td><p>4</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">Mroonga</span></code></p></td>
<td><p>2</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">PGroonga</span></code></p></td>
<td><p>2</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">Groonga</span></code> and <code class="docutils literal notranslate"><span class="pre">Mroonga</span></code></p></td>
<td><p>2</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">Groonga</span></code> and <code class="docutils literal notranslate"><span class="pre">PGroonga</span></code></p></td>
<td><p>2</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">Mroonga</span></code> and <code class="docutils literal notranslate"><span class="pre">PGroonga</span></code></p></td>
<td><p>1</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">Groonga</span></code> and <code class="docutils literal notranslate"><span class="pre">Mroonga</span></code> and <code class="docutils literal notranslate"><span class="pre">PGroonga</span></code></p></td>
<td><p>1</p></td>
</tr>
</tbody>
</table>
</div>
<p>This result allows to analyze correlation between each tag and combination such as whether often used.
For example with this sample, it can be analyzed that <code class="docutils literal notranslate"><span class="pre">Groonga</span></code> and <code class="docutils literal notranslate"><span class="pre">Mroonga</span></code> are used twice at same time and within those twice,
<code class="docutils literal notranslate"><span class="pre">PGroonga</span></code> is also used at same time for once.</p>
</section>
</section>
<section id="drilldowns-label-output-columns">
<span id="select-drilldowns-label-output-columns"></span><h4><span class="section-number">7.3.57.4.9.4. </span><code class="docutils literal notranslate"><span class="pre">drilldowns[${LABEL}].output_columns</span></code><a class="headerlink" href="#drilldowns-label-output-columns" title="Link to this heading">#</a></h4>
<div class="versionadded">
<p><span class="versionmodified added">New in version 4.0.8.</span></p>
</div>
<p>It’s almost same as <a class="reference internal" href="#select-drilldown-output-columns"><span class="std std-ref">drilldown_output_columns</span></a>. The
difference between <a class="reference internal" href="#select-drilldown-output-columns"><span class="std std-ref">drilldown_output_columns</span></a> and
<code class="docutils literal notranslate"><span class="pre">drilldowns[${LABEL}].output_columns</span></code> is how to refer group keys.</p>
<p><a class="reference internal" href="#select-drilldown-output-columns"><span class="std std-ref">drilldown_output_columns</span></a> uses <code class="docutils literal notranslate"><span class="pre">_key</span></code>
<a class="reference internal" href="../columns/pseudo.html"><span class="doc">Pseudo column</span></a> to refer group
key. <code class="docutils literal notranslate"><span class="pre">drilldowns[${LABEL}].output_columns</span></code> also uses <code class="docutils literal notranslate"><span class="pre">_key</span></code>
<a class="reference internal" href="../columns/pseudo.html"><span class="doc">Pseudo column</span></a> to refer group key when you specify
only one group key by <a class="reference internal" href="#select-drilldowns-label-keys"><span class="std std-ref">drilldowns[${LABEL}].keys</span></a>.</p>
<p>Here is an example to refer single group key by <code class="docutils literal notranslate"><span class="pre">_key</span></code>
<a class="reference internal" href="../columns/pseudo.html"><span class="doc">Pseudo column</span></a>:</p>
<p>Execution example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">select</span> <span class="n">Entries</span> \
  <span class="o">--</span><span class="n">limit</span> <span class="mi">0</span> \
  <span class="o">--</span><span class="n">output_columns</span> <span class="n">_id</span> \
  <span class="o">--</span><span class="n">drilldowns</span><span class="p">[</span><span class="n">tag</span><span class="o">.</span><span class="n">n_likes</span><span class="p">]</span><span class="o">.</span><span class="n">keys</span> <span class="n">tag</span> \
  <span class="o">--</span><span class="n">drilldowns</span><span class="p">[</span><span class="n">tag</span><span class="o">.</span><span class="n">n_likes</span><span class="p">]</span><span class="o">.</span><span class="n">output_columns</span> <span class="n">_key</span>
<span class="c1"># [</span>
<span class="c1">#   [</span>
<span class="c1">#     0,</span>
<span class="c1">#     1337566253.89858,</span>
<span class="c1">#     0.000355720520019531</span>
<span class="c1">#   ],</span>
<span class="c1">#   [</span>
<span class="c1">#     [</span>
<span class="c1">#       [</span>
<span class="c1">#         5</span>
<span class="c1">#       ],</span>
<span class="c1">#       [</span>
<span class="c1">#         [</span>
<span class="c1">#           &quot;_id&quot;,</span>
<span class="c1">#           &quot;UInt32&quot;</span>
<span class="c1">#         ]</span>
<span class="c1">#       ]</span>
<span class="c1">#     ],</span>
<span class="c1">#     {</span>
<span class="c1">#       &quot;tag.n_likes&quot;: [</span>
<span class="c1">#         [</span>
<span class="c1">#           3</span>
<span class="c1">#         ],</span>
<span class="c1">#         [</span>
<span class="c1">#           [</span>
<span class="c1">#             &quot;_key&quot;,</span>
<span class="c1">#             &quot;ShortText&quot;</span>
<span class="c1">#           ]</span>
<span class="c1">#         ],</span>
<span class="c1">#         [</span>
<span class="c1">#           &quot;Hello&quot;</span>
<span class="c1">#         ],</span>
<span class="c1">#         [</span>
<span class="c1">#           &quot;Groonga&quot;</span>
<span class="c1">#         ],</span>
<span class="c1">#         [</span>
<span class="c1">#           &quot;Senna&quot;</span>
<span class="c1">#         ]</span>
<span class="c1">#       ]</span>
<span class="c1">#     }</span>
<span class="c1">#   ]</span>
<span class="c1"># ]</span>
</pre></div>
</div>
<p>But you can’t refer each group key by <code class="docutils literal notranslate"><span class="pre">_key</span></code>
<a class="reference internal" href="../columns/pseudo.html"><span class="doc">Pseudo column</span></a> in
<code class="docutils literal notranslate"><span class="pre">drilldowns[${LABEL}].output_columns</span></code>. You need to use
<code class="docutils literal notranslate"><span class="pre">_value.${KEY_NAME}</span></code> syntax. <code class="docutils literal notranslate"><span class="pre">${KEY_NAME}</span></code> is a column name that is
used for group key in <a class="reference internal" href="#select-drilldowns-label-keys"><span class="std std-ref">drilldowns[${LABEL}].keys</span></a>.</p>
<p>Here is an example to refer each group key in multiple group keys by
<code class="docutils literal notranslate"><span class="pre">_value.${KEY_NAME}</span></code> syntax:</p>
<p>Execution example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">select</span> <span class="n">Entries</span> \
  <span class="o">--</span><span class="n">limit</span> <span class="mi">0</span> \
  <span class="o">--</span><span class="n">output_columns</span> <span class="n">_id</span> \
  <span class="o">--</span><span class="n">drilldowns</span><span class="p">[</span><span class="n">tag</span><span class="o">.</span><span class="n">n_likes</span><span class="p">]</span><span class="o">.</span><span class="n">keys</span> <span class="n">tag</span><span class="p">,</span><span class="n">n_likes</span> \
  <span class="o">--</span><span class="n">drilldowns</span><span class="p">[</span><span class="n">tag</span><span class="o">.</span><span class="n">n_likes</span><span class="p">]</span><span class="o">.</span><span class="n">output_columns</span> <span class="n">_value</span><span class="o">.</span><span class="n">tag</span><span class="p">,</span><span class="n">_value</span><span class="o">.</span><span class="n">n_likes</span>
<span class="c1"># [</span>
<span class="c1">#   [</span>
<span class="c1">#     0,</span>
<span class="c1">#     1337566253.89858,</span>
<span class="c1">#     0.000355720520019531</span>
<span class="c1">#   ],</span>
<span class="c1">#   [</span>
<span class="c1">#     [</span>
<span class="c1">#       [</span>
<span class="c1">#         5</span>
<span class="c1">#       ],</span>
<span class="c1">#       [</span>
<span class="c1">#         [</span>
<span class="c1">#           &quot;_id&quot;,</span>
<span class="c1">#           &quot;UInt32&quot;</span>
<span class="c1">#         ]</span>
<span class="c1">#       ]</span>
<span class="c1">#     ],</span>
<span class="c1">#     {</span>
<span class="c1">#       &quot;tag.n_likes&quot;: [</span>
<span class="c1">#         [</span>
<span class="c1">#           4</span>
<span class="c1">#         ],</span>
<span class="c1">#         [</span>
<span class="c1">#           [</span>
<span class="c1">#             &quot;tag&quot;,</span>
<span class="c1">#             &quot;ShortText&quot;</span>
<span class="c1">#           ],</span>
<span class="c1">#           [</span>
<span class="c1">#             &quot;n_likes&quot;,</span>
<span class="c1">#             &quot;UInt32&quot;</span>
<span class="c1">#           ]</span>
<span class="c1">#         ],</span>
<span class="c1">#         [</span>
<span class="c1">#           &quot;Hello&quot;,</span>
<span class="c1">#           5</span>
<span class="c1">#         ],</span>
<span class="c1">#         [</span>
<span class="c1">#           &quot;Groonga&quot;,</span>
<span class="c1">#           10</span>
<span class="c1">#         ],</span>
<span class="c1">#         [</span>
<span class="c1">#           &quot;Groonga&quot;,</span>
<span class="c1">#           15</span>
<span class="c1">#         ],</span>
<span class="c1">#         [</span>
<span class="c1">#           &quot;Senna&quot;,</span>
<span class="c1">#           3</span>
<span class="c1">#         ]</span>
<span class="c1">#       ]</span>
<span class="c1">#     }</span>
<span class="c1">#   ]</span>
<span class="c1"># ]</span>
</pre></div>
</div>
<div class="admonition tip">
<p class="admonition-title">Tip</p>
<p>Why <code class="docutils literal notranslate"><span class="pre">_value.${KEY_NAME}</span></code> syntax?</p>
<p>It’s implementation specific information.</p>
<p><code class="docutils literal notranslate"><span class="pre">_key</span></code> is a vector value. The vector value is consists of all
group keys. You can see byte sequence of the vector value by
referring <code class="docutils literal notranslate"><span class="pre">_key</span></code> in <code class="docutils literal notranslate"><span class="pre">drilldowns[${LABEL}].output_columns</span></code>.</p>
<p>There is one grouped record in <code class="docutils literal notranslate"><span class="pre">_value</span></code> to refer each grouped
values when you specify multiple group keys to
<a class="reference internal" href="#select-drilldowns-label-keys"><span class="std std-ref">drilldowns[${LABEL}].keys</span></a>. So you can refer each group key
by <code class="docutils literal notranslate"><span class="pre">_value.${KEY_NAME}</span></code> syntax.</p>
<p>On the other hand, there is no grouped record in <code class="docutils literal notranslate"><span class="pre">_value</span></code> when
you specify only one group key to
<a class="reference internal" href="#select-drilldowns-label-keys"><span class="std std-ref">drilldowns[${LABEL}].keys</span></a>. So you can’t refer group key by
<code class="docutils literal notranslate"><span class="pre">_value.${KEY_NAME}</span></code> syntax.</p>
</div>
</section>
<section id="drilldowns-label-columns-name-stage">
<span id="select-drilldowns-label-columns-name-stage"></span><h4><span class="section-number">7.3.57.4.9.5. </span><code class="docutils literal notranslate"><span class="pre">drilldowns[${LABEL}].columns[${NAME}].stage</span></code><a class="headerlink" href="#drilldowns-label-columns-name-stage" title="Link to this heading">#</a></h4>
<div class="versionadded">
<p><span class="versionmodified added">New in version 6.0.5.</span></p>
</div>
<p>Specifies when the dynamic column is created. This is a required
parameter to create a dynamic column.</p>
<p>Here are available stages:</p>
<div class="pst-scrollable-table-container"><table class="table">
<thead>
<tr class="row-odd"><th class="head"><p>Name</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">initial</span></code></p></td>
<td><p>Dynamic column is created at first.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">filtered</span></code></p></td>
<td><p>Dynamic column is created after <code class="docutils literal notranslate"><span class="pre">drilldowns[${LABEL}].filter</span></code>
is evaluated.</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">output</span></code></p></td>
<td><p>Dynamic column is created before <a class="reference internal" href="#select-drilldowns-label-output-columns"><span class="std std-ref">drilldowns[${LABEL}].output_columns</span></a>
is evaluated.</p></td>
</tr>
</tbody>
</table>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p><code class="docutils literal notranslate"><span class="pre">filtered</span></code> stage and <code class="docutils literal notranslate"><span class="pre">output</span></code> stage will be able to use from 10.0.3 or later.</p>
</div>
<p>Here is one drilldown process flow with dynamic column creation
points. You should choose stage as late as possible:</p>
<blockquote>
<div><ol class="arabic simple">
<li><p>Evaluates <a class="reference internal" href="#select-drilldowns-label-keys"><span class="std std-ref">drilldowns[${LABEL}].keys</span></a>,
<code class="docutils literal notranslate"><span class="pre">drilldowns[${LABEL}].calc_types</span></code> and
<code class="docutils literal notranslate"><span class="pre">drilldowns[${LABEL}].calc_target</span></code>.</p></li>
<li><p>Creates dynamic columns for <code class="docutils literal notranslate"><span class="pre">initial</span></code> stage. All drilldown
result records have these dynamic columns.</p></li>
<li><p>Evaluates <code class="docutils literal notranslate"><span class="pre">drilldowns[${LABEL}].filter</span></code>. You can use dynamic
columns created in <code class="docutils literal notranslate"><span class="pre">initial</span></code> stage.</p></li>
<li><p>Creates dynamic columns for <code class="docutils literal notranslate"><span class="pre">filtered</span></code> stage.
Only filtered records have these dynamic columns.</p></li>
<li><p>Evaluates <code class="docutils literal notranslate"><span class="pre">drilldowns[${LABEL}].sort_keys</span></code>,
<code class="docutils literal notranslate"><span class="pre">drilldowns[${LABEL}].offset</span></code> and
<code class="docutils literal notranslate"><span class="pre">drilldowns[${LABEL}].limit</span></code>. You can use dynamic columns
created in <code class="docutils literal notranslate"><span class="pre">initial</span></code> stage and <code class="docutils literal notranslate"><span class="pre">filtered</span></code> stage.</p></li>
<li><p>Creates dynamic columns for <code class="docutils literal notranslate"><span class="pre">output</span></code> stage.
Only <code class="docutils literal notranslate"><span class="pre">drilldowns[${LABEL}].limit</span></code> records have these dynamic columns.</p></li>
<li><p>Evaluates <a class="reference internal" href="#select-drilldowns-label-output-columns"><span class="std std-ref">drilldowns[${LABEL}].output_columns</span></a>. You can
use dynamic columns created in <code class="docutils literal notranslate"><span class="pre">initial</span></code> stage, <code class="docutils literal notranslate"><span class="pre">filtered</span></code> stage,
and <code class="docutils literal notranslate"><span class="pre">output</span></code> stage.</p></li>
</ol>
</div></blockquote>
<p>Here is a <code class="docutils literal notranslate"><span class="pre">drilldowns[${LABEL}].columns[${NAME}].stage</span></code> example. It
creates <code class="docutils literal notranslate"><span class="pre">is_popular</span></code> column at <code class="docutils literal notranslate"><span class="pre">initial</span></code> stage. You can use
<code class="docutils literal notranslate"><span class="pre">is_popular</span></code> in all parameters such as
<code class="docutils literal notranslate"><span class="pre">drilldowns[${LABEL}].filter</span></code> and
<code class="docutils literal notranslate"><span class="pre">drilldowns[${LABEL}].output_columns</span></code>:</p>
<p>Execution example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">select</span> <span class="n">Entries</span> \
  <span class="o">--</span><span class="n">drilldowns</span><span class="p">[</span><span class="n">tag</span><span class="p">]</span><span class="o">.</span><span class="n">keys</span> <span class="n">tag</span> \
  <span class="o">--</span><span class="n">drilldowns</span><span class="p">[</span><span class="n">tag</span><span class="p">]</span><span class="o">.</span><span class="n">columns</span><span class="p">[</span><span class="n">is_popular</span><span class="p">]</span><span class="o">.</span><span class="n">stage</span> <span class="n">initial</span> \
  <span class="o">--</span><span class="n">drilldowns</span><span class="p">[</span><span class="n">tag</span><span class="p">]</span><span class="o">.</span><span class="n">columns</span><span class="p">[</span><span class="n">is_popular</span><span class="p">]</span><span class="o">.</span><span class="n">type</span> <span class="n">Bool</span> \
  <span class="o">--</span><span class="n">drilldowns</span><span class="p">[</span><span class="n">tag</span><span class="p">]</span><span class="o">.</span><span class="n">columns</span><span class="p">[</span><span class="n">is_popular</span><span class="p">]</span><span class="o">.</span><span class="n">value</span> <span class="s1">&#39;_nsubrecs &gt; 1&#39;</span> \
  <span class="o">--</span><span class="n">drilldowns</span><span class="p">[</span><span class="n">tag</span><span class="p">]</span><span class="o">.</span><span class="n">filter</span> <span class="n">is_popular</span> \
  <span class="o">--</span><span class="n">drilldowns</span><span class="p">[</span><span class="n">tag</span><span class="p">]</span><span class="o">.</span><span class="n">output_columns</span> <span class="n">_key</span><span class="p">,</span><span class="n">is_popular</span><span class="p">,</span><span class="n">_nsubrecs</span>
<span class="c1"># [</span>
<span class="c1">#   [</span>
<span class="c1">#     0,</span>
<span class="c1">#     1337566253.89858,</span>
<span class="c1">#     0.000355720520019531</span>
<span class="c1">#   ],</span>
<span class="c1">#   [</span>
<span class="c1">#     [</span>
<span class="c1">#       [</span>
<span class="c1">#         5</span>
<span class="c1">#       ],</span>
<span class="c1">#       [</span>
<span class="c1">#         [</span>
<span class="c1">#           &quot;_id&quot;,</span>
<span class="c1">#           &quot;UInt32&quot;</span>
<span class="c1">#         ],</span>
<span class="c1">#         [</span>
<span class="c1">#           &quot;_key&quot;,</span>
<span class="c1">#           &quot;ShortText&quot;</span>
<span class="c1">#         ],</span>
<span class="c1">#         [</span>
<span class="c1">#           &quot;content&quot;,</span>
<span class="c1">#           &quot;Text&quot;</span>
<span class="c1">#         ],</span>
<span class="c1">#         [</span>
<span class="c1">#           &quot;n_likes&quot;,</span>
<span class="c1">#           &quot;UInt32&quot;</span>
<span class="c1">#         ],</span>
<span class="c1">#         [</span>
<span class="c1">#           &quot;tag&quot;,</span>
<span class="c1">#           &quot;ShortText&quot;</span>
<span class="c1">#         ]</span>
<span class="c1">#       ],</span>
<span class="c1">#       [</span>
<span class="c1">#         1,</span>
<span class="c1">#         &quot;The first post!&quot;,</span>
<span class="c1">#         &quot;Welcome! This is my first post!&quot;,</span>
<span class="c1">#         5,</span>
<span class="c1">#         &quot;Hello&quot;</span>
<span class="c1">#       ],</span>
<span class="c1">#       [</span>
<span class="c1">#         2,</span>
<span class="c1">#         &quot;Groonga&quot;,</span>
<span class="c1">#         &quot;I started to use Groonga. It&#39;s very fast!&quot;,</span>
<span class="c1">#         10,</span>
<span class="c1">#         &quot;Groonga&quot;</span>
<span class="c1">#       ],</span>
<span class="c1">#       [</span>
<span class="c1">#         3,</span>
<span class="c1">#         &quot;Mroonga&quot;,</span>
<span class="c1">#         &quot;I also started to use Mroonga. It&#39;s also very fast! Really fast!&quot;,</span>
<span class="c1">#         15,</span>
<span class="c1">#         &quot;Groonga&quot;</span>
<span class="c1">#       ],</span>
<span class="c1">#       [</span>
<span class="c1">#         4,</span>
<span class="c1">#         &quot;Good-bye Senna&quot;,</span>
<span class="c1">#         &quot;I migrated all Senna system!&quot;,</span>
<span class="c1">#         3,</span>
<span class="c1">#         &quot;Senna&quot;</span>
<span class="c1">#       ],</span>
<span class="c1">#       [</span>
<span class="c1">#         5,</span>
<span class="c1">#         &quot;Good-bye Tritonn&quot;,</span>
<span class="c1">#         &quot;I also migrated all Tritonn system!&quot;,</span>
<span class="c1">#         3,</span>
<span class="c1">#         &quot;Senna&quot;</span>
<span class="c1">#       ]</span>
<span class="c1">#     ],</span>
<span class="c1">#     {</span>
<span class="c1">#       &quot;tag&quot;: [</span>
<span class="c1">#         [</span>
<span class="c1">#           2</span>
<span class="c1">#         ],</span>
<span class="c1">#         [</span>
<span class="c1">#           [</span>
<span class="c1">#             &quot;_key&quot;,</span>
<span class="c1">#             &quot;ShortText&quot;</span>
<span class="c1">#           ],</span>
<span class="c1">#           [</span>
<span class="c1">#             &quot;is_popular&quot;,</span>
<span class="c1">#             &quot;Bool&quot;</span>
<span class="c1">#           ],</span>
<span class="c1">#           [</span>
<span class="c1">#             &quot;_nsubrecs&quot;,</span>
<span class="c1">#             &quot;Int32&quot;</span>
<span class="c1">#           ]</span>
<span class="c1">#         ],</span>
<span class="c1">#         [</span>
<span class="c1">#           &quot;Groonga&quot;,</span>
<span class="c1">#           true,</span>
<span class="c1">#           2</span>
<span class="c1">#         ],</span>
<span class="c1">#         [</span>
<span class="c1">#           &quot;Senna&quot;,</span>
<span class="c1">#           true,</span>
<span class="c1">#           2</span>
<span class="c1">#         ]</span>
<span class="c1">#       ]</span>
<span class="c1">#     }</span>
<span class="c1">#   ]</span>
<span class="c1"># ]</span>
</pre></div>
</div>
<div class="versionadded">
<p><span class="versionmodified added">New in version 4.0.8.</span></p>
</div>
</section>
<section id="output-format-for-drilldowns-label-style">
<span id="select-drilldowns-label-output-format"></span><h4><span class="section-number">7.3.57.4.9.6. </span>Output format for <code class="docutils literal notranslate"><span class="pre">drilldowns[${LABEL}]</span></code> style<a class="headerlink" href="#output-format-for-drilldowns-label-style" title="Link to this heading">#</a></h4>
<p>There is a difference in output format between <a class="reference internal" href="#select-drilldown"><span class="std std-ref">drilldown</span></a>
and <a class="reference internal" href="#select-drilldowns-label-keys"><span class="std std-ref">drilldowns[${LABEL}].keys</span></a>. <a class="reference internal" href="#select-drilldown"><span class="std std-ref">drilldown</span></a> uses
array to output multiple drilldown results.
<a class="reference internal" href="#select-drilldowns-label-keys"><span class="std std-ref">drilldowns[${LABEL}].keys</span></a> uses pairs of label and drilldown
result.</p>
<p><a class="reference internal" href="#select-drilldown"><span class="std std-ref">drilldown</span></a> uses the following output format:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">[</span>
  <span class="n">HEADER</span><span class="p">,</span>
  <span class="p">[</span>
    <span class="n">SEARCH_RESULT</span><span class="p">,</span>
    <span class="n">DRILLDOWN_RESULT1</span><span class="p">,</span>
    <span class="n">DRILLDOWN_RESULT2</span><span class="p">,</span>
    <span class="o">...</span>
  <span class="p">]</span>
<span class="p">]</span>
</pre></div>
</div>
<p><a class="reference internal" href="#select-drilldowns-label-keys"><span class="std std-ref">drilldowns[${LABEL}].keys</span></a> uses the following output format:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">[</span>
  <span class="n">HEADER</span><span class="p">,</span>
  <span class="p">[</span>
    <span class="n">SEARCH_RESULT</span><span class="p">,</span>
    <span class="p">{</span>
      <span class="s2">&quot;LABEL1&quot;</span><span class="p">:</span> <span class="n">DRILLDOWN_RESULT1</span><span class="p">,</span>
      <span class="s2">&quot;LABEL2&quot;</span><span class="p">:</span> <span class="n">DRILLDOWN_RESULT2</span><span class="p">,</span>
      <span class="o">...</span>
    <span class="p">}</span>
  <span class="p">]</span>
<span class="p">]</span>
</pre></div>
</div>
</section>
</section>
<section id="slice-related-parameters">
<span id="select-slice-related-parameters"></span><h3><span class="section-number">7.3.57.4.10. </span>Slice related parameters<a class="headerlink" href="#slice-related-parameters" title="Link to this heading">#</a></h3>
<div class="versionadded">
<p><span class="versionmodified added">New in version 6.0.3.</span></p>
</div>
<p>This section describes slice related parameters.</p>
<p>TODO</p>
<p>Here are parameters for slice:</p>
<div class="pst-scrollable-table-container"><table class="table">
<thead>
<tr class="row-odd"><th class="head"><p>Name</p></th>
<th class="head"><p>Required</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">--slices[${LABEL}].match_columns</span></code></p></td>
<td><p>Optional</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">--slices[${LABEL}].query</span></code></p></td>
<td><p>Required if <code class="docutils literal notranslate"><span class="pre">--slices[${LABEL}].filter</span></code> isn’t specified.</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">--slices[${LABEL}].filter</span></code></p></td>
<td><p>Required if <code class="docutils literal notranslate"><span class="pre">--slices[${LABEL}].query</span></code> isn’t specified.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">--slices[${LABEL}].query_expander</span></code></p></td>
<td><p>Optional</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">--slices[${LABEL}].query_flags</span></code></p></td>
<td><p>Optional</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">--slices[${LABEL}].sort_keys</span></code></p></td>
<td><p>Optional</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">--slices[${LABEL}].output_columns</span></code></p></td>
<td><p>Optional</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">--slices[${LABEL}].offset</span></code></p></td>
<td><p>Optional</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">--slices[${LABEL}].limit</span></code></p></td>
<td><p>Optional</p></td>
</tr>
</tbody>
</table>
</div>
<section id="slices-label-match-columns">
<span id="select-slices-label-match-columns"></span><h4><span class="section-number">7.3.57.4.10.1. </span><code class="docutils literal notranslate"><span class="pre">slices[${LABEL}].match_columns</span></code><a class="headerlink" href="#slices-label-match-columns" title="Link to this heading">#</a></h4>
<p>TODO</p>
</section>
<section id="slices-label-query">
<span id="select-slices-label-query"></span><h4><span class="section-number">7.3.57.4.10.2. </span><code class="docutils literal notranslate"><span class="pre">slices[${LABEL}].query</span></code><a class="headerlink" href="#slices-label-query" title="Link to this heading">#</a></h4>
<p>TODO</p>
</section>
<section id="slices-label-filter">
<span id="select-slices-label-filter"></span><h4><span class="section-number">7.3.57.4.10.3. </span><code class="docutils literal notranslate"><span class="pre">slices[${LABEL}].filter</span></code><a class="headerlink" href="#slices-label-filter" title="Link to this heading">#</a></h4>
<p>TODO</p>
</section>
<section id="slices-label-query-expander">
<span id="select-slices-label-query-expander"></span><h4><span class="section-number">7.3.57.4.10.4. </span><code class="docutils literal notranslate"><span class="pre">slices[${LABEL}].query_expander</span></code><a class="headerlink" href="#slices-label-query-expander" title="Link to this heading">#</a></h4>
<p>TODO</p>
</section>
<section id="slices-label-query-flags">
<span id="select-slices-label-query-flags"></span><h4><span class="section-number">7.3.57.4.10.5. </span><code class="docutils literal notranslate"><span class="pre">slices[${LABEL}].query_flags</span></code><a class="headerlink" href="#slices-label-query-flags" title="Link to this heading">#</a></h4>
<p>TODO</p>
</section>
<section id="slices-label-sort-keys">
<span id="select-slices-label-sort-keys"></span><h4><span class="section-number">7.3.57.4.10.6. </span><code class="docutils literal notranslate"><span class="pre">slices[${LABEL}].sort_keys</span></code><a class="headerlink" href="#slices-label-sort-keys" title="Link to this heading">#</a></h4>
<p>TODO</p>
</section>
<section id="slices-label-output-columns">
<span id="select-slices-label-output-columns"></span><h4><span class="section-number">7.3.57.4.10.7. </span><code class="docutils literal notranslate"><span class="pre">slices[${LABEL}].output_columns</span></code><a class="headerlink" href="#slices-label-output-columns" title="Link to this heading">#</a></h4>
<p>TODO</p>
</section>
<section id="slices-label-offset">
<span id="select-slices-label-offset"></span><h4><span class="section-number">7.3.57.4.10.8. </span><code class="docutils literal notranslate"><span class="pre">slices[${LABEL}].offset</span></code><a class="headerlink" href="#slices-label-offset" title="Link to this heading">#</a></h4>
<p>TODO</p>
</section>
<section id="slices-label-limit">
<span id="select-slices-label-limit"></span><h4><span class="section-number">7.3.57.4.10.9. </span><code class="docutils literal notranslate"><span class="pre">slices[${LABEL}].limit</span></code><a class="headerlink" href="#slices-label-limit" title="Link to this heading">#</a></h4>
<p>TODO</p>
</section>
</section>
<section id="cache-related-parameter">
<h3><span class="section-number">7.3.57.4.11. </span>Cache related parameter<a class="headerlink" href="#cache-related-parameter" title="Link to this heading">#</a></h3>
<section id="cache">
<span id="select-cache"></span><h4><span class="section-number">7.3.57.4.11.1. </span><code class="docutils literal notranslate"><span class="pre">cache</span></code><a class="headerlink" href="#cache" title="Link to this heading">#</a></h4>
<p>Specifies whether caching the result of this query or not.</p>
<p>If the result of this query is cached, the next same query returns
response quickly by using the cache.</p>
<p>It doesn’t control whether existing cached result is used or not.</p>
<p>Here are available values:</p>
<div class="pst-scrollable-table-container"><table class="table">
<thead>
<tr class="row-odd"><th class="head"><p>Value</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">no</span></code></p></td>
<td><p>Don’t cache the output of this query.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">yes</span></code></p></td>
<td><p>Cache the output of this query.
It’s the default value.</p></td>
</tr>
</tbody>
</table>
</div>
<p>Here is an example to disable caching the result of this query:</p>
<p>Execution example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">select</span> <span class="n">Entries</span> <span class="o">--</span><span class="n">cache</span> <span class="n">no</span>
<span class="c1"># [</span>
<span class="c1">#   [</span>
<span class="c1">#     0,</span>
<span class="c1">#     1337566253.89858,</span>
<span class="c1">#     0.000355720520019531</span>
<span class="c1">#   ],</span>
<span class="c1">#   [</span>
<span class="c1">#     [</span>
<span class="c1">#       [</span>
<span class="c1">#         5</span>
<span class="c1">#       ],</span>
<span class="c1">#       [</span>
<span class="c1">#         [</span>
<span class="c1">#           &quot;_id&quot;,</span>
<span class="c1">#           &quot;UInt32&quot;</span>
<span class="c1">#         ],</span>
<span class="c1">#         [</span>
<span class="c1">#           &quot;_key&quot;,</span>
<span class="c1">#           &quot;ShortText&quot;</span>
<span class="c1">#         ],</span>
<span class="c1">#         [</span>
<span class="c1">#           &quot;content&quot;,</span>
<span class="c1">#           &quot;Text&quot;</span>
<span class="c1">#         ],</span>
<span class="c1">#         [</span>
<span class="c1">#           &quot;n_likes&quot;,</span>
<span class="c1">#           &quot;UInt32&quot;</span>
<span class="c1">#         ],</span>
<span class="c1">#         [</span>
<span class="c1">#           &quot;tag&quot;,</span>
<span class="c1">#           &quot;ShortText&quot;</span>
<span class="c1">#         ]</span>
<span class="c1">#       ],</span>
<span class="c1">#       [</span>
<span class="c1">#         1,</span>
<span class="c1">#         &quot;The first post!&quot;,</span>
<span class="c1">#         &quot;Welcome! This is my first post!&quot;,</span>
<span class="c1">#         5,</span>
<span class="c1">#         &quot;Hello&quot;</span>
<span class="c1">#       ],</span>
<span class="c1">#       [</span>
<span class="c1">#         2,</span>
<span class="c1">#         &quot;Groonga&quot;,</span>
<span class="c1">#         &quot;I started to use Groonga. It&#39;s very fast!&quot;,</span>
<span class="c1">#         10,</span>
<span class="c1">#         &quot;Groonga&quot;</span>
<span class="c1">#       ],</span>
<span class="c1">#       [</span>
<span class="c1">#         3,</span>
<span class="c1">#         &quot;Mroonga&quot;,</span>
<span class="c1">#         &quot;I also started to use Mroonga. It&#39;s also very fast! Really fast!&quot;,</span>
<span class="c1">#         15,</span>
<span class="c1">#         &quot;Groonga&quot;</span>
<span class="c1">#       ],</span>
<span class="c1">#       [</span>
<span class="c1">#         4,</span>
<span class="c1">#         &quot;Good-bye Senna&quot;,</span>
<span class="c1">#         &quot;I migrated all Senna system!&quot;,</span>
<span class="c1">#         3,</span>
<span class="c1">#         &quot;Senna&quot;</span>
<span class="c1">#       ],</span>
<span class="c1">#       [</span>
<span class="c1">#         5,</span>
<span class="c1">#         &quot;Good-bye Tritonn&quot;,</span>
<span class="c1">#         &quot;I also migrated all Tritonn system!&quot;,</span>
<span class="c1">#         3,</span>
<span class="c1">#         &quot;Senna&quot;</span>
<span class="c1">#       ]</span>
<span class="c1">#     ]</span>
<span class="c1">#   ]</span>
<span class="c1"># ]</span>
</pre></div>
</div>
<p>The default value is <code class="docutils literal notranslate"><span class="pre">yes</span></code>.</p>
</section>
</section>
<section id="score-related-parameters">
<h3><span class="section-number">7.3.57.4.12. </span>Score related parameters<a class="headerlink" href="#score-related-parameters" title="Link to this heading">#</a></h3>
<p>There is a score related parameter, <code class="docutils literal notranslate"><span class="pre">adjuster</span></code>.</p>
<section id="adjuster">
<span id="select-adjuster"></span><h4><span class="section-number">7.3.57.4.12.1. </span><code class="docutils literal notranslate"><span class="pre">adjuster</span></code><a class="headerlink" href="#adjuster" title="Link to this heading">#</a></h4>
<p>Specifies one or more score adjust expressions. You need to use
<code class="docutils literal notranslate"><span class="pre">adjuster</span></code> with <code class="docutils literal notranslate"><span class="pre">query</span></code> or <code class="docutils literal notranslate"><span class="pre">filter</span></code>. <code class="docutils literal notranslate"><span class="pre">adjuster</span></code> doesn’t work
with not searched request.</p>
<p>You can increase score of specific records by <code class="docutils literal notranslate"><span class="pre">adjuster</span></code>. You can
use <code class="docutils literal notranslate"><span class="pre">adjuster</span></code> to set high score for important records.</p>
<p>For example, you can use <code class="docutils literal notranslate"><span class="pre">adjuster</span></code> to increase score of records
that have <code class="docutils literal notranslate"><span class="pre">groonga</span></code> tag.</p>
<p>Here is the syntax:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">--</span><span class="n">adjuster</span> <span class="s2">&quot;SCORE_ADJUST_EXPRESSION1 + SCORE_ADJUST_EXPRESSION2 + ...&quot;</span>
</pre></div>
</div>
<p>Here is the <code class="docutils literal notranslate"><span class="pre">SCORE_ADJUST_EXPRESSION</span></code> syntax:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">COLUMN</span> <span class="o">@</span> <span class="s2">&quot;KEYWORD&quot;</span> <span class="o">*</span> <span class="n">FACTOR</span>
</pre></div>
</div>
<p>Note the following:</p>
<blockquote>
<div><ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">COLUMN</span></code> must be indexed.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">&quot;KEYWORD&quot;</span></code> must be a string.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">FACTOR</span></code> must be a positive integer.</p></li>
</ul>
</div></blockquote>
<p>Here is a sample <code class="docutils literal notranslate"><span class="pre">adjuster</span></code> usage example that uses just one
<code class="docutils literal notranslate"><span class="pre">SCORE_ADJUST_EXPRESSION</span></code>:</p>
<p>Execution example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">select</span> <span class="n">Entries</span> \
  <span class="o">--</span><span class="nb">filter</span> <span class="n">true</span> \
  <span class="o">--</span><span class="n">adjuster</span> <span class="s1">&#39;content @ &quot;groonga&quot; * 5&#39;</span> \
  <span class="o">--</span><span class="n">output_columns</span> <span class="n">_key</span><span class="p">,</span><span class="n">content</span><span class="p">,</span><span class="n">_score</span>
<span class="c1"># [</span>
<span class="c1">#   [</span>
<span class="c1">#     0,</span>
<span class="c1">#     1337566253.89858,</span>
<span class="c1">#     0.000355720520019531</span>
<span class="c1">#   ],</span>
<span class="c1">#   [</span>
<span class="c1">#     [</span>
<span class="c1">#       [</span>
<span class="c1">#         5</span>
<span class="c1">#       ],</span>
<span class="c1">#       [</span>
<span class="c1">#         [</span>
<span class="c1">#           &quot;_key&quot;,</span>
<span class="c1">#           &quot;ShortText&quot;</span>
<span class="c1">#         ],</span>
<span class="c1">#         [</span>
<span class="c1">#           &quot;content&quot;,</span>
<span class="c1">#           &quot;Text&quot;</span>
<span class="c1">#         ],</span>
<span class="c1">#         [</span>
<span class="c1">#           &quot;_score&quot;,</span>
<span class="c1">#           &quot;Int32&quot;</span>
<span class="c1">#         ]</span>
<span class="c1">#       ],</span>
<span class="c1">#       [</span>
<span class="c1">#         &quot;The first post!&quot;,</span>
<span class="c1">#         &quot;Welcome! This is my first post!&quot;,</span>
<span class="c1">#         1</span>
<span class="c1">#       ],</span>
<span class="c1">#       [</span>
<span class="c1">#         &quot;Groonga&quot;,</span>
<span class="c1">#         &quot;I started to use Groonga. It&#39;s very fast!&quot;,</span>
<span class="c1">#         6</span>
<span class="c1">#       ],</span>
<span class="c1">#       [</span>
<span class="c1">#         &quot;Mroonga&quot;,</span>
<span class="c1">#         &quot;I also started to use Mroonga. It&#39;s also very fast! Really fast!&quot;,</span>
<span class="c1">#         1</span>
<span class="c1">#       ],</span>
<span class="c1">#       [</span>
<span class="c1">#         &quot;Good-bye Senna&quot;,</span>
<span class="c1">#         &quot;I migrated all Senna system!&quot;,</span>
<span class="c1">#         1</span>
<span class="c1">#       ],</span>
<span class="c1">#       [</span>
<span class="c1">#         &quot;Good-bye Tritonn&quot;,</span>
<span class="c1">#         &quot;I also migrated all Tritonn system!&quot;,</span>
<span class="c1">#         1</span>
<span class="c1">#       ]</span>
<span class="c1">#     ]</span>
<span class="c1">#   ]</span>
<span class="c1"># ]</span>
</pre></div>
</div>
<p>The <code class="docutils literal notranslate"><span class="pre">select</span></code> command matches all records. Then it applies
<code class="docutils literal notranslate"><span class="pre">adjuster</span></code>. The adjuster increases score of records that have
<code class="docutils literal notranslate"><span class="pre">&quot;groonga&quot;</span></code> in <code class="docutils literal notranslate"><span class="pre">Entries.content</span></code> column by 5. There is only one
record that has <code class="docutils literal notranslate"><span class="pre">&quot;groonga&quot;</span></code> in <code class="docutils literal notranslate"><span class="pre">Entries.content</span></code> column.  So the
record that its key is <code class="docutils literal notranslate"><span class="pre">&quot;Groonga&quot;</span></code> has score 6 (<code class="docutils literal notranslate"><span class="pre">=</span> <span class="pre">1</span> <span class="pre">+</span> <span class="pre">5</span></code>).</p>
<p>You can omit <code class="docutils literal notranslate"><span class="pre">FACTOR</span></code>. If you omit <code class="docutils literal notranslate"><span class="pre">FACTOR</span></code>, it is treated as 1.</p>
<p>Here is a sample <code class="docutils literal notranslate"><span class="pre">adjuster</span></code> usage example that omits <code class="docutils literal notranslate"><span class="pre">FACTOR</span></code>:</p>
<p>Execution example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">select</span> <span class="n">Entries</span> \
  <span class="o">--</span><span class="nb">filter</span> <span class="n">true</span> \
  <span class="o">--</span><span class="n">adjuster</span> <span class="s1">&#39;content @ &quot;groonga&quot;&#39;</span> \
  <span class="o">--</span><span class="n">output_columns</span> <span class="n">_key</span><span class="p">,</span><span class="n">content</span><span class="p">,</span><span class="n">_score</span>
<span class="c1"># [</span>
<span class="c1">#   [</span>
<span class="c1">#     0,</span>
<span class="c1">#     1337566253.89858,</span>
<span class="c1">#     0.000355720520019531</span>
<span class="c1">#   ],</span>
<span class="c1">#   [</span>
<span class="c1">#     [</span>
<span class="c1">#       [</span>
<span class="c1">#         5</span>
<span class="c1">#       ],</span>
<span class="c1">#       [</span>
<span class="c1">#         [</span>
<span class="c1">#           &quot;_key&quot;,</span>
<span class="c1">#           &quot;ShortText&quot;</span>
<span class="c1">#         ],</span>
<span class="c1">#         [</span>
<span class="c1">#           &quot;content&quot;,</span>
<span class="c1">#           &quot;Text&quot;</span>
<span class="c1">#         ],</span>
<span class="c1">#         [</span>
<span class="c1">#           &quot;_score&quot;,</span>
<span class="c1">#           &quot;Int32&quot;</span>
<span class="c1">#         ]</span>
<span class="c1">#       ],</span>
<span class="c1">#       [</span>
<span class="c1">#         &quot;The first post!&quot;,</span>
<span class="c1">#         &quot;Welcome! This is my first post!&quot;,</span>
<span class="c1">#         1</span>
<span class="c1">#       ],</span>
<span class="c1">#       [</span>
<span class="c1">#         &quot;Groonga&quot;,</span>
<span class="c1">#         &quot;I started to use Groonga. It&#39;s very fast!&quot;,</span>
<span class="c1">#         2</span>
<span class="c1">#       ],</span>
<span class="c1">#       [</span>
<span class="c1">#         &quot;Mroonga&quot;,</span>
<span class="c1">#         &quot;I also started to use Mroonga. It&#39;s also very fast! Really fast!&quot;,</span>
<span class="c1">#         1</span>
<span class="c1">#       ],</span>
<span class="c1">#       [</span>
<span class="c1">#         &quot;Good-bye Senna&quot;,</span>
<span class="c1">#         &quot;I migrated all Senna system!&quot;,</span>
<span class="c1">#         1</span>
<span class="c1">#       ],</span>
<span class="c1">#       [</span>
<span class="c1">#         &quot;Good-bye Tritonn&quot;,</span>
<span class="c1">#         &quot;I also migrated all Tritonn system!&quot;,</span>
<span class="c1">#         1</span>
<span class="c1">#       ]</span>
<span class="c1">#     ]</span>
<span class="c1">#   ]</span>
<span class="c1"># ]</span>
</pre></div>
</div>
<p>The <code class="docutils literal notranslate"><span class="pre">adjuster</span></code> in the <code class="docutils literal notranslate"><span class="pre">select</span></code> command doesn’t have <code class="docutils literal notranslate"><span class="pre">FACTOR</span></code>. So
the factor is treated as 1. There is only one record that has
<code class="docutils literal notranslate"><span class="pre">&quot;groonga&quot;</span></code> in <code class="docutils literal notranslate"><span class="pre">Entries.content</span></code> column. So the record that its
key is <code class="docutils literal notranslate"><span class="pre">&quot;Groonga&quot;</span></code> has score 2 (<code class="docutils literal notranslate"><span class="pre">=</span> <span class="pre">1</span> <span class="pre">+</span> <span class="pre">1</span></code>).</p>
<p>Here is a sample <code class="docutils literal notranslate"><span class="pre">adjuster</span></code> usage example that uses multiple
<code class="docutils literal notranslate"><span class="pre">SCORE_ADJUST_EXPRESSION</span></code>:</p>
<p>Execution example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">select</span> <span class="n">Entries</span> \
  <span class="o">--</span><span class="nb">filter</span> <span class="n">true</span> \
  <span class="o">--</span><span class="n">adjuster</span> <span class="s1">&#39;content @ &quot;groonga&quot; * 5 + content @ &quot;started&quot; * 3&#39;</span> \
  <span class="o">--</span><span class="n">output_columns</span> <span class="n">_key</span><span class="p">,</span><span class="n">content</span><span class="p">,</span><span class="n">_score</span>
<span class="c1"># [</span>
<span class="c1">#   [</span>
<span class="c1">#     0,</span>
<span class="c1">#     1337566253.89858,</span>
<span class="c1">#     0.000355720520019531</span>
<span class="c1">#   ],</span>
<span class="c1">#   [</span>
<span class="c1">#     [</span>
<span class="c1">#       [</span>
<span class="c1">#         5</span>
<span class="c1">#       ],</span>
<span class="c1">#       [</span>
<span class="c1">#         [</span>
<span class="c1">#           &quot;_key&quot;,</span>
<span class="c1">#           &quot;ShortText&quot;</span>
<span class="c1">#         ],</span>
<span class="c1">#         [</span>
<span class="c1">#           &quot;content&quot;,</span>
<span class="c1">#           &quot;Text&quot;</span>
<span class="c1">#         ],</span>
<span class="c1">#         [</span>
<span class="c1">#           &quot;_score&quot;,</span>
<span class="c1">#           &quot;Int32&quot;</span>
<span class="c1">#         ]</span>
<span class="c1">#       ],</span>
<span class="c1">#       [</span>
<span class="c1">#         &quot;The first post!&quot;,</span>
<span class="c1">#         &quot;Welcome! This is my first post!&quot;,</span>
<span class="c1">#         1</span>
<span class="c1">#       ],</span>
<span class="c1">#       [</span>
<span class="c1">#         &quot;Groonga&quot;,</span>
<span class="c1">#         &quot;I started to use Groonga. It&#39;s very fast!&quot;,</span>
<span class="c1">#         9</span>
<span class="c1">#       ],</span>
<span class="c1">#       [</span>
<span class="c1">#         &quot;Mroonga&quot;,</span>
<span class="c1">#         &quot;I also started to use Mroonga. It&#39;s also very fast! Really fast!&quot;,</span>
<span class="c1">#         4</span>
<span class="c1">#       ],</span>
<span class="c1">#       [</span>
<span class="c1">#         &quot;Good-bye Senna&quot;,</span>
<span class="c1">#         &quot;I migrated all Senna system!&quot;,</span>
<span class="c1">#         1</span>
<span class="c1">#       ],</span>
<span class="c1">#       [</span>
<span class="c1">#         &quot;Good-bye Tritonn&quot;,</span>
<span class="c1">#         &quot;I also migrated all Tritonn system!&quot;,</span>
<span class="c1">#         1</span>
<span class="c1">#       ]</span>
<span class="c1">#     ]</span>
<span class="c1">#   ]</span>
<span class="c1"># ]</span>
</pre></div>
</div>
<p>The <code class="docutils literal notranslate"><span class="pre">adjuster</span></code> in the <code class="docutils literal notranslate"><span class="pre">select</span></code> command has two
<code class="docutils literal notranslate"><span class="pre">SCORE_ADJUST_EXPRESSION</span></code> s. The final increased score is sum of
scores of these <code class="docutils literal notranslate"><span class="pre">SCORE_ADJUST_EXPRESSION</span></code> s. All
<code class="docutils literal notranslate"><span class="pre">SCORE_ADJUST_EXPRESSION</span></code> s in the <code class="docutils literal notranslate"><span class="pre">select</span></code> command are applied to
a record that its key is <code class="docutils literal notranslate"><span class="pre">&quot;Groonga&quot;</span></code>. So the final increased score
of the record is sum of scores of all <code class="docutils literal notranslate"><span class="pre">SCORE_ADJUST_EXPRESSION</span></code> s.</p>
<p>The first <code class="docutils literal notranslate"><span class="pre">SCORE_ADJUST_EXPRESSION</span></code> is <code class="docutils literal notranslate"><span class="pre">content</span> <span class="pre">&#64;</span> <span class="pre">&quot;groonga&quot;</span> <span class="pre">*</span> <span class="pre">5</span></code>.
It increases score by 5.</p>
<p>The second <code class="docutils literal notranslate"><span class="pre">SCORE_ADJUST_EXPRESSION</span></code> is <code class="docutils literal notranslate"><span class="pre">content</span> <span class="pre">&#64;</span> <span class="pre">&quot;started&quot;</span> <span class="pre">*</span> <span class="pre">3</span></code>.
It increases score by 3.</p>
<p>The final increased score is 9 (<code class="docutils literal notranslate"><span class="pre">=</span> <span class="pre">1</span> <span class="pre">+</span> <span class="pre">5</span> <span class="pre">+</span> <span class="pre">3</span></code>).</p>
<p>A <code class="docutils literal notranslate"><span class="pre">SCORE_ADJUST_EXPRESSION</span></code> has a factor for <code class="docutils literal notranslate"><span class="pre">&quot;KEYWORD&quot;</span></code>. This
means that increased scores of all records that has <code class="docutils literal notranslate"><span class="pre">&quot;KEYWORD&quot;</span></code> are
the same value. You can change increase score for each record that has
the same <code class="docutils literal notranslate"><span class="pre">&quot;KEYWORD&quot;</span></code>. It is useful to tune search score. See
<a class="reference internal" href="../columns/vector.html#weight-vector-column"><span class="std std-ref">Weight vector column</span></a> for details.</p>
</section>
</section>
</section>
<section id="return-value">
<span id="select-return-value"></span><h2><span class="section-number">7.3.57.5. </span>Return value<a class="headerlink" href="#return-value" title="Link to this heading">#</a></h2>
<p>The command returns a response with the following format:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">[</span>
  <span class="n">HEADER</span><span class="p">,</span>
  <span class="p">[</span>
    <span class="n">SEARCH_RESULT</span><span class="p">,</span>
    <span class="n">DRILLDOWN_RESULT_1</span><span class="p">,</span>
    <span class="n">DRILLDOWN_RESULT_2</span><span class="p">,</span>
    <span class="o">...</span><span class="p">,</span>
    <span class="n">DRILLDOWN_RESULT_N</span>
  <span class="p">]</span>
<span class="p">]</span>
</pre></div>
</div>
<p>If the command fails, error details are in <code class="docutils literal notranslate"><span class="pre">HEADER</span></code>.</p>
<p>See <a class="reference internal" href="../command/output_format.html"><span class="doc">Output format</span></a> for <code class="docutils literal notranslate"><span class="pre">HEADER</span></code>.</p>
<p>There are zero or more <code class="docutils literal notranslate"><span class="pre">DRILLDOWN_RESULT</span></code>. If no <code class="docutils literal notranslate"><span class="pre">drilldown</span></code> and
<code class="docutils literal notranslate"><span class="pre">drilldowns[${LABEL}].keys</span></code> are specified, they are omitted like the
following:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">[</span>
  <span class="n">HEADER</span><span class="p">,</span>
  <span class="p">[</span>
    <span class="n">SEARCH_RESULT</span>
  <span class="p">]</span>
<span class="p">]</span>
</pre></div>
</div>
<p>If <code class="docutils literal notranslate"><span class="pre">drilldown</span></code> has two or more keys like <code class="docutils literal notranslate"><span class="pre">--drilldown</span> <span class="pre">&quot;_key,</span>
<span class="pre">column1,</span> <span class="pre">column2&quot;</span></code>, multiple <code class="docutils literal notranslate"><span class="pre">DRILLDOWN_RESULT</span></code> exist:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">[</span>
  <span class="n">HEADER</span><span class="p">,</span>
  <span class="p">[</span>
    <span class="n">SEARCH_RESULT</span><span class="p">,</span>
    <span class="n">DRILLDOWN_RESULT_FOR_KEY</span><span class="p">,</span>
    <span class="n">DRILLDOWN_RESULT_FOR_COLUMN1</span><span class="p">,</span>
    <span class="n">DRILLDOWN_RESULT_FOR_COLUMN2</span>
  <span class="p">]</span>
<span class="p">]</span>
</pre></div>
</div>
<p>If <code class="docutils literal notranslate"><span class="pre">drilldowns[${LABEL}].keys</span></code> is used, only one <code class="docutils literal notranslate"><span class="pre">DRILLDOWN_RESULT</span></code>
exist:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">[</span>
  <span class="n">HEADER</span><span class="p">,</span>
  <span class="p">[</span>
    <span class="n">SEARCH_RESULT</span><span class="p">,</span>
    <span class="n">DRILLDOWN_RESULT_FOR_LABELED_DRILLDOWN</span>
  <span class="p">]</span>
<span class="p">]</span>
</pre></div>
</div>
<p><code class="docutils literal notranslate"><span class="pre">DRILLDOWN_RESULT</span></code> format is different between <code class="docutils literal notranslate"><span class="pre">drilldown</span></code> and
<code class="docutils literal notranslate"><span class="pre">drilldowns[${LABEL}].keys</span></code>. It’s described later.</p>
<p><code class="docutils literal notranslate"><span class="pre">SEARCH_RESULT</span></code> is the following format:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">[</span>
  <span class="p">[</span><span class="n">N_HITS</span><span class="p">],</span>
  <span class="n">COLUMNS</span><span class="p">,</span>
  <span class="n">RECORDS</span>
<span class="p">]</span>
</pre></div>
</div>
<p>See <a class="reference internal" href="#select-simple-usage"><span class="std std-ref">Simple usage</span></a> for concrete example of the format.</p>
<p><code class="docutils literal notranslate"><span class="pre">N_HITS</span></code> is the number of matched records before <a class="reference internal" href="#select-limit"><span class="std std-ref">limit</span></a>
is applied.</p>
<p><code class="docutils literal notranslate"><span class="pre">COLUMNS</span></code> describes about output columns specified by
<a class="reference internal" href="#select-output-columns"><span class="std std-ref">output_columns</span></a>. It uses the following format:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">[</span>
  <span class="p">[</span><span class="n">COLUMN_NAME_1</span><span class="p">,</span> <span class="n">COLUMN_TYPE_1</span><span class="p">],</span>
  <span class="p">[</span><span class="n">COLUMN_NAME_2</span><span class="p">,</span> <span class="n">COLUMN_TYPE_2</span><span class="p">],</span>
  <span class="o">...</span><span class="p">,</span>
  <span class="p">[</span><span class="n">COLUMN_NAME_N</span><span class="p">,</span> <span class="n">COLUMN_TYPE_N</span><span class="p">]</span>
<span class="p">]</span>
</pre></div>
</div>
<p><code class="docutils literal notranslate"><span class="pre">COLUMNS</span></code> includes one or more output column information. Each
output column information includes the followings:</p>
<blockquote>
<div><ul class="simple">
<li><p>Column name as string</p></li>
<li><p>Column type as string or <code class="docutils literal notranslate"><span class="pre">null</span></code></p></li>
</ul>
</div></blockquote>
<p>Column name is extracted from value specified as
<a class="reference internal" href="#select-output-columns"><span class="std std-ref">output_columns</span></a>.</p>
<p>Column type is Groonga’s type name or <code class="docutils literal notranslate"><span class="pre">null</span></code>. It doesn’t describe
whether the column value is vector or scalar. You need to determine it
by whether real column value is array or not.</p>
<p>See <a class="reference internal" href="../types.html"><span class="doc">Data types</span></a> for type details.</p>
<p><code class="docutils literal notranslate"><span class="pre">null</span></code> is used when column value type isn’t determined. For example,
function call in <a class="reference internal" href="#select-output-columns"><span class="std std-ref">output_columns</span></a> such as
<code class="docutils literal notranslate"><span class="pre">--output_columns</span> <span class="pre">&quot;snippet_html(content)&quot;</span></code> uses <code class="docutils literal notranslate"><span class="pre">null</span></code>.</p>
<p>Here is an example of <code class="docutils literal notranslate"><span class="pre">COLUMNS</span></code>:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">[</span>
  <span class="p">[</span><span class="s2">&quot;_id&quot;</span><span class="p">,</span>     <span class="s2">&quot;UInt32&quot;</span><span class="p">],</span>
  <span class="p">[</span><span class="s2">&quot;_key&quot;</span><span class="p">,</span>    <span class="s2">&quot;ShortText&quot;</span><span class="p">],</span>
  <span class="p">[</span><span class="s2">&quot;n_likes&quot;</span><span class="p">,</span> <span class="s2">&quot;UInt32&quot;</span><span class="p">],</span>
<span class="p">]</span>
</pre></div>
</div>
<p><code class="docutils literal notranslate"><span class="pre">RECORDS</span></code> includes column values for each matched record. Included
records are selected by <a class="reference internal" href="#select-offset"><span class="std std-ref">offset</span></a> and
<a class="reference internal" href="#select-limit"><span class="std std-ref">limit</span></a>. It uses the following format:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">[</span>
  <span class="p">[</span>
    <span class="n">RECORD_1_COLUMN_1</span><span class="p">,</span>
    <span class="n">RECORD_1_COLUMN_2</span><span class="p">,</span>
    <span class="o">...</span><span class="p">,</span>
    <span class="n">RECORD_1_COLUMN_N</span>
  <span class="p">],</span>
  <span class="p">[</span>
    <span class="n">RECORD_2_COLUMN_1</span><span class="p">,</span>
    <span class="n">RECORD_2_COLUMN_2</span><span class="p">,</span>
    <span class="o">...</span><span class="p">,</span>
    <span class="n">RECORD_2_COLUMN_N</span>
  <span class="p">],</span>
  <span class="o">...</span>
  <span class="p">[</span>
    <span class="n">RECORD_N_COLUMN_1</span><span class="p">,</span>
    <span class="n">RECORD_N_COLUMN_2</span><span class="p">,</span>
    <span class="o">...</span><span class="p">,</span>
    <span class="n">RECORD_N_COLUMN_N</span>
  <span class="p">]</span>
<span class="p">]</span>
</pre></div>
</div>
<p>Here is an example <code class="docutils literal notranslate"><span class="pre">RECORDS</span></code>:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">[</span>
  <span class="p">[</span>
    <span class="mi">1</span><span class="p">,</span>
    <span class="s2">&quot;The first post!&quot;</span><span class="p">,</span>
    <span class="mi">5</span>
  <span class="p">],</span>
  <span class="p">[</span>
    <span class="mi">2</span><span class="p">,</span>
    <span class="s2">&quot;Groonga&quot;</span><span class="p">,</span>
    <span class="mi">10</span>
  <span class="p">],</span>
  <span class="p">[</span>
    <span class="mi">3</span><span class="p">,</span>
    <span class="s2">&quot;Mroonga&quot;</span><span class="p">,</span>
    <span class="mi">15</span>
  <span class="p">]</span>
<span class="p">]</span>
</pre></div>
</div>
<p><code class="docutils literal notranslate"><span class="pre">DRILLDOWN_RESULT</span></code> format is different between <code class="docutils literal notranslate"><span class="pre">drilldown</span></code> and
<code class="docutils literal notranslate"><span class="pre">drilldowns[${LABEL}].keys</span></code>.</p>
<p><code class="docutils literal notranslate"><span class="pre">drilldown</span></code> uses the same format as <code class="docutils literal notranslate"><span class="pre">SEARCH_RESULT</span></code>:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">[</span>
  <span class="p">[</span><span class="n">N_HITS</span><span class="p">],</span>
  <span class="n">COLUMNS</span><span class="p">,</span>
  <span class="n">RECORDS</span>
<span class="p">]</span>
</pre></div>
</div>
<p>And <code class="docutils literal notranslate"><span class="pre">drilldown</span></code> generates one or more <code class="docutils literal notranslate"><span class="pre">DRILLDOWN_RESULT</span></code> when
<a class="reference internal" href="#select-drilldown"><span class="std std-ref">drilldown</span></a> has one ore more keys.</p>
<p><code class="docutils literal notranslate"><span class="pre">drilldowns[${LABEL}].keys</span></code> uses the following format. Multiple
<code class="docutils literal notranslate"><span class="pre">drilldowns[${LABEL}].keys</span></code> are mapped to one object (key-value
pairs):</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
  <span class="s2">&quot;LABEL_1&quot;</span><span class="p">:</span> <span class="p">[</span>
    <span class="p">[</span><span class="n">N_HITS</span><span class="p">],</span>
    <span class="n">COLUMNS</span><span class="p">,</span>
    <span class="n">RECORDS</span>
  <span class="p">],</span>
  <span class="s2">&quot;LABEL_2&quot;</span><span class="p">:</span> <span class="p">[</span>
    <span class="p">[</span><span class="n">N_HITS</span><span class="p">],</span>
    <span class="n">COLUMNS</span><span class="p">,</span>
    <span class="n">RECORDS</span>
  <span class="p">],</span>
  <span class="o">...</span><span class="p">,</span>
  <span class="s2">&quot;LABEL_N&quot;</span><span class="p">:</span> <span class="p">[</span>
    <span class="p">[</span><span class="n">N_HITS</span><span class="p">],</span>
    <span class="n">COLUMNS</span><span class="p">,</span>
    <span class="n">RECORDS</span>
  <span class="p">]</span>
<span class="p">}</span>
</pre></div>
</div>
<p>Each <code class="docutils literal notranslate"><span class="pre">drilldowns[${LABEL}].keys</span></code> corresponds to the following:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="s2">&quot;LABEL&quot;</span><span class="p">:</span> <span class="p">[</span>
  <span class="p">[</span><span class="n">N_HITS</span><span class="p">],</span>
  <span class="n">COLUMNS</span><span class="p">,</span>
  <span class="n">RECORDS</span>
<span class="p">]</span>
</pre></div>
</div>
<p>The following value part is the same format as <code class="docutils literal notranslate"><span class="pre">SEARCH_RESULT</span></code>:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">[</span>
  <span class="p">[</span><span class="n">N_HITS</span><span class="p">],</span>
  <span class="n">COLUMNS</span><span class="p">,</span>
  <span class="n">RECORDS</span>
<span class="p">]</span>
</pre></div>
</div>
<p>See also <a class="reference internal" href="#select-drilldowns-label-output-format"><span class="std std-ref">Output format for drilldowns[${LABEL}] style</span></a> for
<code class="docutils literal notranslate"><span class="pre">drilldowns[${LABEL}]</span></code> style drilldown output format.</p>
</section>
<section id="see-also">
<h2><span class="section-number">7.3.57.6. </span>See also<a class="headerlink" href="#see-also" title="Link to this heading">#</a></h2>
<blockquote>
<div><ul class="simple">
<li><p><a class="reference internal" href="../grn_expr/query_syntax.html"><span class="doc">Query syntax</span></a></p></li>
<li><p><a class="reference internal" href="../grn_expr/script_syntax.html"><span class="doc">Script syntax</span></a></p></li>
</ul>
</div></blockquote>
</section>
</section>


                </article>
              
              
              
              
              
                <footer class="prev-next-footer d-print-none">
                  
<div class="prev-next-area">
    <a class="left-prev"
       href="schema.html"
       title="previous page">
      <i class="fa-solid fa-angle-left"></i>
      <div class="prev-next-info">
        <p class="prev-next-subtitle">previous</p>
        <p class="prev-next-title"><span class="section-number">7.3.56. </span><code class="docutils literal notranslate"><span class="pre">schema</span></code></p>
      </div>
    </a>
    <a class="right-next"
       href="shutdown.html"
       title="next page">
      <div class="prev-next-info">
        <p class="prev-next-subtitle">next</p>
        <p class="prev-next-title"><span class="section-number">7.3.58. </span><code class="docutils literal notranslate"><span class="pre">shutdown</span></code></p>
      </div>
      <i class="fa-solid fa-angle-right"></i>
    </a>
</div>
                </footer>
              
            </div>
            
            
              
                <div class="bd-sidebar-secondary bd-toc"><div class="sidebar-secondary-items sidebar-secondary__inner">


  <div class="sidebar-secondary-item">
<div
    id="pst-page-navigation-heading-2"
    class="page-toc tocsection onthispage">
    <i class="fa-solid fa-list"></i> On this page
  </div>
  <nav class="bd-toc-nav page-toc" aria-labelledby="pst-page-navigation-heading-2">
    <ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#summary">7.3.57.1. Summary</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#syntax">7.3.57.2. Syntax</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#usage">7.3.57.3. Usage</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#simple-usage">7.3.57.3.1. Simple usage</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#search-conditions">7.3.57.3.2. Search conditions</a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#search-condition-query">7.3.57.3.2.1. Search condition: <code class="docutils literal notranslate"><span class="pre">query</span></code></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#search-condition-filter">7.3.57.3.2.2. Search condition: <code class="docutils literal notranslate"><span class="pre">filter</span></code></a></li>
</ul>
</li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#paging">7.3.57.3.3. Paging</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#the-total-number-of-records">7.3.57.3.4. The total number of records</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#drilldown">7.3.57.3.5. Drilldown</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#dynamic-column">7.3.57.3.6. Dynamic column</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#window-function">7.3.57.3.7. Window function</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#typo-tolerance">7.3.57.3.8. Typo tolerance</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#parameters">7.3.57.4. Parameters</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#required-parameters">7.3.57.4.1. Required parameters</a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#table">7.3.57.4.1.1. <code class="docutils literal notranslate"><span class="pre">table</span></code></a></li>
</ul>
</li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#search-related-parameters">7.3.57.4.2. Search related parameters</a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#match-columns">7.3.57.4.2.1. <code class="docutils literal notranslate"><span class="pre">match_columns</span></code></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#query">7.3.57.4.2.2. <code class="docutils literal notranslate"><span class="pre">query</span></code></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#filter">7.3.57.4.2.3. <code class="docutils literal notranslate"><span class="pre">filter</span></code></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#load-table">7.3.57.4.2.4. <code class="docutils literal notranslate"><span class="pre">load_table</span></code></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#load-columns">7.3.57.4.2.5. <code class="docutils literal notranslate"><span class="pre">load_columns</span></code></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#load-values">7.3.57.4.2.6. <code class="docutils literal notranslate"><span class="pre">load_values</span></code></a></li>
</ul>
</li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#advanced-search-parameters">7.3.57.4.3. Advanced search parameters</a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#match-escalation-threshold">7.3.57.4.3.1. <code class="docutils literal notranslate"><span class="pre">match_escalation_threshold</span></code></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#match-escalation">7.3.57.4.3.2. <code class="docutils literal notranslate"><span class="pre">match_escalation</span></code></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#query-expansion">7.3.57.4.3.3. <code class="docutils literal notranslate"><span class="pre">query_expansion</span></code></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#query-flags">7.3.57.4.3.4. <code class="docutils literal notranslate"><span class="pre">query_flags</span></code></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#query-expander">7.3.57.4.3.5. <code class="docutils literal notranslate"><span class="pre">query_expander</span></code></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#n-workers">7.3.57.4.3.6. <code class="docutils literal notranslate"><span class="pre">n_workers</span></code></a></li>
</ul>
</li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#output-related-parameters">7.3.57.4.4. Output related parameters</a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#output-columns">7.3.57.4.4.1. <code class="docutils literal notranslate"><span class="pre">output_columns</span></code></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#sortby">7.3.57.4.4.2. <code class="docutils literal notranslate"><span class="pre">sortby</span></code></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#sort-keys">7.3.57.4.4.3. <code class="docutils literal notranslate"><span class="pre">sort_keys</span></code></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#offset">7.3.57.4.4.4. <code class="docutils literal notranslate"><span class="pre">offset</span></code></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#limit">7.3.57.4.4.5. <code class="docutils literal notranslate"><span class="pre">limit</span></code></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#scorer">7.3.57.4.4.6. <code class="docutils literal notranslate"><span class="pre">scorer</span></code></a></li>
</ul>
</li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#fuzzy-query-related-parameters">7.3.57.4.5. Fuzzy query related parameters</a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#fuzzy-max-distance-ratio">7.3.57.4.5.1. <code class="docutils literal notranslate"><span class="pre">fuzzy_max_distance_ratio</span></code></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#fuzzy-max-distance">7.3.57.4.5.2. <code class="docutils literal notranslate"><span class="pre">fuzzy_max_distance</span></code></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#fuzzy-max-expansions">7.3.57.4.5.3. <code class="docutils literal notranslate"><span class="pre">fuzzy_max_expansions</span></code></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#fuzzy-prefix-length">7.3.57.4.5.4. <code class="docutils literal notranslate"><span class="pre">fuzzy_prefix_length</span></code></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#fuzzy-with-transposition">7.3.57.4.5.5. <code class="docutils literal notranslate"><span class="pre">fuzzy_with_transposition</span></code></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#fuzzy-with-tokenize">7.3.57.4.5.6. <code class="docutils literal notranslate"><span class="pre">fuzzy_with_tokenize</span></code></a></li>
</ul>
</li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#dynamic-column-related-parameters">7.3.57.4.6. Dynamic column related parameters</a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#columns-name-stage">7.3.57.4.6.1. <code class="docutils literal notranslate"><span class="pre">columns[${NAME}].stage</span></code></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#columns-name-flags">7.3.57.4.6.2. <code class="docutils literal notranslate"><span class="pre">columns[${NAME}].flags</span></code></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#columns-name-type">7.3.57.4.6.3. <code class="docutils literal notranslate"><span class="pre">columns[${NAME}].type</span></code></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#columns-name-value">7.3.57.4.6.4. <code class="docutils literal notranslate"><span class="pre">columns[${NAME}].value</span></code></a></li>
</ul>
</li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#window-function-related-parameters">7.3.57.4.7. Window function related parameters</a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#columns-name-window-sort-keys">7.3.57.4.7.1. <code class="docutils literal notranslate"><span class="pre">columns[${NAME}].window.sort_keys</span></code></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#columns-name-window-group-keys">7.3.57.4.7.2. <code class="docutils literal notranslate"><span class="pre">columns[${NAME}].window.group_keys</span></code></a></li>
</ul>
</li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#drilldown-related-parameters">7.3.57.4.8. Drilldown related parameters</a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#select-drilldown">7.3.57.4.8.1. <code class="docutils literal notranslate"><span class="pre">drilldown</span></code></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#drilldown-sortby">7.3.57.4.8.2. <code class="docutils literal notranslate"><span class="pre">drilldown_sortby</span></code></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#drilldown-sort-keys">7.3.57.4.8.3. <code class="docutils literal notranslate"><span class="pre">drilldown_sort_keys</span></code></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#drilldown-output-columns">7.3.57.4.8.4. <code class="docutils literal notranslate"><span class="pre">drilldown_output_columns</span></code></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#drilldown-offset">7.3.57.4.8.5. <code class="docutils literal notranslate"><span class="pre">drilldown_offset</span></code></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#drilldown-limit">7.3.57.4.8.6. <code class="docutils literal notranslate"><span class="pre">drilldown_limit</span></code></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#drilldown-calc-types">7.3.57.4.8.7. <code class="docutils literal notranslate"><span class="pre">drilldown_calc_types</span></code></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#drilldown-calc-target">7.3.57.4.8.8. <code class="docutils literal notranslate"><span class="pre">drilldown_calc_target</span></code></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#drilldown-filter">7.3.57.4.8.9. <code class="docutils literal notranslate"><span class="pre">drilldown_filter</span></code></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#drilldown-max-n-target-records">7.3.57.4.8.10. <code class="docutils literal notranslate"><span class="pre">drilldown_max_n_target_records</span></code></a></li>
</ul>
</li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#advanced-drilldown-related-parameters">7.3.57.4.9. Advanced drilldown related parameters</a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#drilldowns-label-keys">7.3.57.4.9.1. <code class="docutils literal notranslate"><span class="pre">drilldowns[${LABEL}].keys</span></code></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#drilldowns-label-table">7.3.57.4.9.2. <code class="docutils literal notranslate"><span class="pre">drilldowns[${LABEL}].table</span></code></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#drilldowns-label-key-vector-expansion">7.3.57.4.9.3. <code class="docutils literal notranslate"><span class="pre">drilldowns[${LABEL}].key_vector_expansion</span></code></a><ul class="nav section-nav flex-column">
<li class="toc-h5 nav-item toc-entry"><a class="reference internal nav-link" href="#none">7.3.57.4.9.3.1. <code class="docutils literal notranslate"><span class="pre">NONE</span></code></a></li>
<li class="toc-h5 nav-item toc-entry"><a class="reference internal nav-link" href="#power-set">7.3.57.4.9.3.2. <code class="docutils literal notranslate"><span class="pre">POWER_SET</span></code></a></li>
</ul>
</li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#drilldowns-label-output-columns">7.3.57.4.9.4. <code class="docutils literal notranslate"><span class="pre">drilldowns[${LABEL}].output_columns</span></code></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#drilldowns-label-columns-name-stage">7.3.57.4.9.5. <code class="docutils literal notranslate"><span class="pre">drilldowns[${LABEL}].columns[${NAME}].stage</span></code></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#output-format-for-drilldowns-label-style">7.3.57.4.9.6. Output format for <code class="docutils literal notranslate"><span class="pre">drilldowns[${LABEL}]</span></code> style</a></li>
</ul>
</li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#slice-related-parameters">7.3.57.4.10. Slice related parameters</a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#slices-label-match-columns">7.3.57.4.10.1. <code class="docutils literal notranslate"><span class="pre">slices[${LABEL}].match_columns</span></code></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#slices-label-query">7.3.57.4.10.2. <code class="docutils literal notranslate"><span class="pre">slices[${LABEL}].query</span></code></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#slices-label-filter">7.3.57.4.10.3. <code class="docutils literal notranslate"><span class="pre">slices[${LABEL}].filter</span></code></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#slices-label-query-expander">7.3.57.4.10.4. <code class="docutils literal notranslate"><span class="pre">slices[${LABEL}].query_expander</span></code></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#slices-label-query-flags">7.3.57.4.10.5. <code class="docutils literal notranslate"><span class="pre">slices[${LABEL}].query_flags</span></code></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#slices-label-sort-keys">7.3.57.4.10.6. <code class="docutils literal notranslate"><span class="pre">slices[${LABEL}].sort_keys</span></code></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#slices-label-output-columns">7.3.57.4.10.7. <code class="docutils literal notranslate"><span class="pre">slices[${LABEL}].output_columns</span></code></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#slices-label-offset">7.3.57.4.10.8. <code class="docutils literal notranslate"><span class="pre">slices[${LABEL}].offset</span></code></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#slices-label-limit">7.3.57.4.10.9. <code class="docutils literal notranslate"><span class="pre">slices[${LABEL}].limit</span></code></a></li>
</ul>
</li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#cache-related-parameter">7.3.57.4.11. Cache related parameter</a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#cache">7.3.57.4.11.1. <code class="docutils literal notranslate"><span class="pre">cache</span></code></a></li>
</ul>
</li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#score-related-parameters">7.3.57.4.12. Score related parameters</a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#adjuster">7.3.57.4.12.1. <code class="docutils literal notranslate"><span class="pre">adjuster</span></code></a></li>
</ul>
</li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#return-value">7.3.57.5. Return value</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#see-also">7.3.57.6. See also</a></li>
</ul>
  </nav></div>

  <div class="sidebar-secondary-item">

  
  <div class="tocsection editthispage">
    <a href="https://github.com/groonga/groonga/edit/main/doc/source/reference/commands/select.rst">
      <i class="fa-solid fa-pencil"></i>
      
      
        
          Edit on GitHub
        
      
    </a>
  </div>
</div>

</div></div>
              
            
          </div>
          <footer class="bd-footer-content">
            
          </footer>
        
      </main>
    </div>
  </div>
  
  <!-- Scripts loaded after <body> so the DOM is not blocked -->
  <script src="../../_static/scripts/bootstrap.js?digest=3ee479438cf8b5e0d341"></script>
<script src="../../_static/scripts/pydata-sphinx-theme.js?digest=3ee479438cf8b5e0d341"></script>

  <footer class="bd-footer">
<div class="bd-footer__inner bd-page-width">
  
    <div class="footer-items__start">
      
        <div class="footer-item">

  <p class="copyright">
    
      © Copyright 2009-2024 Groonga Project.
      <br/>
    
  </p>
</div>
      
    </div>
  
  
  
    <div class="footer-items__end">
      
        <div class="footer-item">
<p class="theme-version">
  Built with the <a href="https://pydata-sphinx-theme.readthedocs.io/en/stable/index.html">PyData Sphinx Theme</a> 0.15.3.
</p></div>
      
    </div>
  
</div>

  </footer>
  </body>
</html>